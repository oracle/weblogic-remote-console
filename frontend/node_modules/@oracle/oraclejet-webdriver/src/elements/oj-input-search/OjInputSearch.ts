import { OjInputSearchBase } from './OjInputSearchBase';
import { mixinClear } from '../../lib/input-utils';

/**
 * The component WebElement for [oj-input-search](../../jsdocs/oj.ojInputSearch.html).
 * Do not instantiate this class directly, instead, use
 * [ojInputSearch](../functions/elements.ojInputSearch-1.html).
 */
export class OjInputSearch extends OjInputSearchBase {
  /**
   * Sets the value of "value" property.
   * The value of the element.
   * @param value The value to set for "value"
   * @override
   */
  async changeValue(value: string) {
    await this.getDriver().executeScript((element: HTMLElement) => element.focus(), this);
    await this.whenBusyContextReady();
    await this.getDriver().executeScript(
      (element: any, value: any) => {
        return element._testChangeValue(value);
      },
      this,
      value
    );
  }

  /**
   * Sets the value of "value" property based on data for the given key from the data provider.
   * The value of the element.
   * @param key The data provider key for which to set the "value"
   */
  async changeValueByKey(key: any) {
    await this.getDriver().executeScript((element: HTMLElement) => element.focus(), this);
    await this.whenBusyContextReady();
    await this.getDriver().executeScript(
      (element: any, key: any) => {
        return element._testChangeValueByKey(key);
      },
      this,
      key
    );
  }
}
mixinClear(OjInputSearch);
