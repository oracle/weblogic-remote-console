"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.OjStreamList = void 0;
const OjStreamListBase_1 = require("./OjStreamListBase");
const selenium_webdriver_1 = require("selenium-webdriver");
/**
 * The component WebElement for [oj-stream-list](../../jsdocs/oj.ojStreamList.html).
 * Do not instantiate this class directly, instead, use
 * [ojStreamList](../functions/elements.ojStreamList-1.html).
 */
class OjStreamList extends OjStreamListBase_1.OjStreamListBase {
    // Put overrides here
    async findItem(itemLocator) {
        const items = await this.findElements(selenium_webdriver_1.By.css('.oj-stream-list-item, .oj-stream-list-group'));
        await this.whenBusyContextReady();
        return this.getDriver().executeScript(({ key, parentKey }, items) => {
            let el;
            const getParentKey = function (item) {
                while (item) {
                    if (item.classList.contains('oj-stream-list-group')) {
                        const ojKeyType = item.dataset['ojKeyType'];
                        const ojKey = item.dataset['ojKey'];
                        return ojKeyType === 'number' ? Number(ojKey) : ojKey;
                    }
                    item = item.previousElementSibling;
                }
                return null;
            };
            for (let i = 0; i < items.length; i++) {
                let item = items[i];
                const ojKeyType = item.dataset['ojKeyType'];
                const ojKey = item.dataset['ojKey'];
                const itemKey = ojKeyType === 'number' ? Number(ojKey) : ojKey;
                if (itemKey === key) {
                    if (parentKey == null || getParentKey(item) === parentKey) {
                        el = item;
                    }
                }
            }
            return el;
        }, itemLocator, items);
    }
    async findGroup(itemLocator) {
        const items = await this.findElements(selenium_webdriver_1.By.css('.oj-stream-list-group'));
        await this.whenBusyContextReady();
        const group = this.getDriver().executeScript((key, items) => {
            return items.find((item) => {
                const ojKeyType = item.dataset['ojKeyType'];
                const ojKey = item.dataset['ojKey'];
                const itemKey = ojKeyType === 'number' ? Number(ojKey) : ojKey;
                return itemKey === key;
            });
        }, itemLocator.key, items);
        return group;
    }
}
exports.OjStreamList = OjStreamList;
//# sourceMappingURL=OjStreamList.js.map