"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.OjTabBar = void 0;
const selenium_webdriver_1 = require("selenium-webdriver");
const OjTabBarBase_1 = require("./OjTabBarBase");
const oj_module_proxy_1 = require("../../lib/oj-module-proxy");
/**
 * The component WebElement for [oj-tab-bar](../../jsdocs/oj.ojTabBar.html).
 * Do not instantiate this class directly, instead, use
 * [ojTabBar](../functions/elements.ojTabBar-1.html).
 */
class OjTabBar extends OjTabBarBase_1.OjTabBarBase {
    /**
     * Remove a tab specific by the key
     * @param key key of the tab to be removed
     * If the key is not found, an error will be thrown
     * @override
     * @typeparam K Type of keys
     */
    async doRemove(key) {
        await this.whenReady();
        const tab = await this.getDriver().executeScript((ele, key) => ele.getNodeBySubId({ subId: 'oj-tabbar-item', key }), this, key);
        if (tab != null) {
            await (0, oj_module_proxy_1.executeWithModules)(this.getDriver(), ['CustomElementUtils'], [this, tab], ({ getElementBridge }, element, tab) => {
                const bridge = getElementBridge(element);
                const widget = bridge._WIDGET_INSTANCE;
                return widget.navlist._fireRemoveEvent(null, [tab]);
            });
        }
        else {
            return Promise.reject(new selenium_webdriver_1.error.InvalidArgumentError(`Tab with specified key cannot be found`));
        }
    }
    /**
     * Moves tab specified by key then put the tab to the specified place
     * @param key key of the tab to be reordered
     * If the key is not found, an error will be thrown
     * @param position the index or the key of the tab that user want to move in front of, if the key is null, the tab will move to the end of the tab bar
     * If the key or the index of the position is not found, an error will be thrown
     * @override
     * @typeparam K Type of keys
     * @typeparam number Type of index
     */
    async doReorder(key, position) {
        await this.whenReady();
        await (0, oj_module_proxy_1.executeWithModules)(this.getDriver(), ['CustomElementUtils'], [this, key, position], ({ getElementBridge }, element, key, position) => {
            const bridge = getElementBridge(element);
            const widget = bridge._WIDGET_INSTANCE;
            return widget.navlist._doReorderHelper(null, key, position);
        });
    }
}
exports.OjTabBar = OjTabBar;
//# sourceMappingURL=OjTabBar.js.map