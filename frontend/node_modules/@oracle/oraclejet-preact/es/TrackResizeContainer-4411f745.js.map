{"version":3,"file":"TrackResizeContainer-4411f745.js","sources":["../../src/UNSAFE_TrackResizeContainer/TrackResizeContainer.tsx"],"sourcesContent":["import type { ComponentChildren, JSX } from 'preact';\nimport { useRef } from 'preact/hooks';\nimport { useSize } from '#hooks/PRIVATE_useSize';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { Size, sizeToCSS } from '#utils/UNSAFE_size';\n\ntype Props = {\n  children: (width: number, height: number) => ComponentChildren;\n  width?: Size | 'initial';\n  height?: Size | 'initial';\n} & Pick<UnpackSignals<JSX.IntrinsicElements['div']>, 'class'>;\n\ntype TrackResizeContainerOnProps = Omit<Props, 'width' | 'height'> & {\n  width?: string;\n  height?: string;\n};\n\nconst TrackResizeContainer = ({ children, width: w, height: h, class: className }: Props) => {\n  const width = dimToCSS(w);\n  const height = dimToCSS(h);\n  const content =\n    width && height && isFixedLength(width) && isFixedLength(height) ? (\n      <div style={{ width, height }} class={className}>\n        {children(fixedLengthToNumber(width), fixedLengthToNumber(height))}\n      </div>\n    ) : (\n      <TrackResizeOnContainer width={width} height={height} class={className}>\n        {children}\n      </TrackResizeOnContainer>\n    );\n  return content;\n};\n\nconst TrackResizeOnContainer = ({\n  children,\n  width,\n  height,\n  class: className\n}: TrackResizeContainerOnProps) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const optionsRef = useRef({ box: 'border-box' as const });\n  const size = useSize(ref, optionsRef.current);\n  return (\n    <div ref={ref} style={{ width, height }} class={className}>\n      {size && children(size.width, size.height)}\n    </div>\n  );\n};\n\nconst isFixedLength = (length: string) => length.endsWith('px') || length === '0';\nconst fixedLengthToNumber = (length: string) =>\n  length === '0' ? 0 : Number(length.substring(0, length.length - 2));\n\nconst dimToCSS = (dim: Props['width']) =>\n  dim === 'initial' || dim === undefined ? dim : sizeToCSS(dim) || '0px';\nexport { TrackResizeContainer };\n"],"names":["_jsx"],"mappings":";;;;;;AAiBA,MAAM,oBAAoB,GAAG,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,KAAK,EAAE,SAAS,EAAS,KAAI;AAC1F,IAAA,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC1B,IAAA,MAAM,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC3B,IAAA,MAAM,OAAO,GACX,KAAK,IAAI,MAAM,IAAI,aAAa,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,MAAM,CAAC,IAC9DA,GAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,SAAS,YAC5C,QAAQ,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE,mBAAmB,CAAC,MAAM,CAAC,CAAC,EAAA,CAC9D,KAENA,GAAC,CAAA,sBAAsB,EAAC,EAAA,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAA,QAAA,EACnE,QAAQ,EAAA,CACc,CAC1B,CAAC;AACJ,IAAA,OAAO,OAAO,CAAC;AACjB,EAAE;AAEF,MAAM,sBAAsB,GAAG,CAAC,EAC9B,QAAQ,EACR,KAAK,EACL,MAAM,EACN,KAAK,EAAE,SAAS,EACY,KAAI;AAChC,IAAA,MAAM,GAAG,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;IACzC,MAAM,UAAU,GAAG,MAAM,CAAC,EAAE,GAAG,EAAE,YAAqB,EAAE,CAAC,CAAC;IAC1D,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC;AAC9C,IAAA,QACEA,GAAA,CAAA,KAAA,EAAA,EAAK,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,SAAS,EAAA,QAAA,EACtD,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,EAAA,CACtC,EACN;AACJ,CAAC,CAAC;AAEF,MAAM,aAAa,GAAG,CAAC,MAAc,KAAK,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,MAAM,KAAK,GAAG,CAAC;AAClF,MAAM,mBAAmB,GAAG,CAAC,MAAc,KACzC,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AAEtE,MAAM,QAAQ,GAAG,CAAC,GAAmB,KACnC,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,SAAS,GAAG,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,KAAK;;;;"}