{"version":3,"file":"UNSAFE_RadioItem.js","sources":["../../src/UNSAFE_RadioItem/RadioItem.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { createRef, useEffect, useRef } from 'preact/compat';\n\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { useFocus } from '../hooks/UNSAFE_useFocus';\nimport { useFormContext } from '../hooks/UNSAFE_useFormContext';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { useTabbableMode } from '../hooks/UNSAFE_useTabbableMode';\nimport { useInteractionStyle } from '../hooks/UNSAFE_useInteractionStyle';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { useCheckboxRadioContext } from '../PRIVATE_CheckboxRadioField/CheckboxRadioContext';\nimport { CheckIcon } from '../PRIVATE_ThemedIcons/CheckIcon';\nimport { RadioOffIcon } from '../PRIVATE_ThemedIcons/RadioOffIcon';\nimport { RadioOnIcon } from '../PRIVATE_ThemedIcons/RadioOnIcon';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\nimport { useRadioSetContext } from '../UNSAFE_RadioSet/RadioSetContext';\nimport { BundleType } from '../resources/nls/bundle';\n\nimport { IconUserAssistance } from '../UNSAFE_UserAssistance';\nimport { radioIconVars } from './themes/RadioIconContract.css';\nimport { RadioIconRedwoodTheme } from './themes/redwood/RadioIconTheme';\nimport { RadioRedwoodTheme } from './themes/redwood/RadioTheme';\nimport { useRadioItemContext } from './RadioItemContext';\n\ntype Props = {\n  /**\n   * Text to provide guidance to help the user understand what data to enter.\n   */\n  assistiveText?: string;\n  /**\n   * Text that describes the radio button value.\n   */\n  children: string;\n  /**\n   * Help source URL associated with the component.\n   */\n  helpSourceLink?: string;\n  /**\n   * Custom text to be rendered for the `helpSourceLink`.\n   */\n  helpSourceText?: string;\n  /**\n   * Value of the radio button.\n   */\n  value: string | number;\n};\n/**\n * RadioItem is an input element of type radio.\n */\nexport const RadioItem = ({ value, children, ...assistanceProps }: Props) => {\n  const { isReadonly: isFormReadonly, isDisabled: isFormDisabled } = useFormContext();\n  const { isDisabled: isFieldDisabled, isReadonly: isFieldReadonly } = useFormFieldContext();\n  const { name, value: groupValue, onCommit } = useRadioSetContext();\n  const { isFocusRingShown } = useCheckboxRadioContext();\n  const { index } = useRadioItemContext();\n  const { isTabbable } = useTabbableMode();\n  const id = useId();\n  const { isFocus, focusProps } = useFocus();\n  const labelRef = createRef<HTMLLabelElement>();\n  const isSelected = groupValue === value;\n  const isDisabled = isFieldDisabled ?? isFormDisabled;\n  const isReadonly = isFieldReadonly ?? isFormReadonly;\n  const { interactionProps, applyActiveStyle } = useInteractionStyle();\n\n  const {\n    classes: radioClasses,\n    styles: { valueLabelStyle }\n  } = useComponentTheme(RadioRedwoodTheme, {\n    disabled: isDisabled ? 'isDisabled' : 'notDisabled',\n    focused: isFocus && isFocusRingShown ? 'isFocused' : ''\n  });\n\n  const { classes: radioIconClasses } = useComponentTheme(RadioIconRedwoodTheme, {\n    disabled: isDisabled ? 'isDisabled' : 'notDisabled',\n    selected: isSelected ? 'isSelected' : 'notSelected',\n    readonly: isReadonly ? 'isReadonly' : 'notReadonly',\n    active: applyActiveStyle ? 'isActive' : 'notActive'\n  });\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // JET-70100 - ensure radio button is scrolled into view when focused and focus ring is shown\n  useEffect(() => {\n    const isActiveElement = document.activeElement === inputRef?.current;\n    if (!isActiveElement && isFocus && isFocusRingShown) {\n      labelRef?.current?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [isFocus, isFocusRingShown, labelRef]);\n\n  const { assistiveText, helpSourceLink } = assistanceProps;\n  const hasUserAssistive = !isDisabled && !isReadonly && !!(assistiveText || helpSourceLink);\n  const helpAvailableId = hasUserAssistive ? `${id}-help-available` : undefined;\n  const uaId = hasUserAssistive ? `${id}-icon-ua` : undefined;\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const helpAvailableString = translations.formControl_helpAvailable();\n\n  const IconComp = isReadonly\n    ? isSelected\n      ? CheckIcon\n      : RadioOffIcon\n    : isSelected\n    ? RadioOnIcon\n    : RadioOffIcon;\n\n  const tabIndex = isTabbable !== false && ((index === 0 && !groupValue) || isSelected) ? 0 : -1;\n\n  return (\n    <div>\n      <label class={radioClasses} ref={labelRef}>\n        <HiddenAccessible>\n          <input\n            type=\"radio\"\n            name={name}\n            id={id}\n            ref={inputRef}\n            value={value}\n            {...(!isReadonly &&\n              !isDisabled && {\n                onChange: (e) => {\n                  e.stopPropagation();\n                  onCommit?.({ previousValue: groupValue, value });\n                }\n              })}\n            checked={isSelected}\n            disabled={isDisabled}\n            aria-describedby={helpAvailableId}\n            tabIndex={tabIndex}\n            {...focusProps}\n          />\n          {hasUserAssistive && (\n            <HiddenAccessible id={helpAvailableId} isHidden={true}>\n              {helpAvailableString}\n            </HiddenAccessible>\n          )}\n        </HiddenAccessible>\n        <span aria-hidden=\"true\" class={radioIconClasses} {...interactionProps}>\n          <IconComp size={radioIconVars.iconSize} color=\"currentColor\" />\n        </span>\n        <span class={valueLabelStyle}>\n          <span {...interactionProps}>{children}</span>\n          {hasUserAssistive && (\n            <IconUserAssistance\n              {...assistanceProps}\n              isTabbable={isTabbable && isFocus}\n              id={uaId as string}\n            />\n          )}\n        </span>\n      </label>\n    </div>\n  );\n};\n"],"names":["CheckIcon","RadioOffIcon","RadioOnIcon","_jsx","_jsxs"],"mappings":"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"}