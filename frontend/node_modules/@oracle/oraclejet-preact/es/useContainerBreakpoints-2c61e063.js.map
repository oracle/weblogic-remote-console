{"version":3,"file":"useContainerBreakpoints-2c61e063.js","sources":["../../src/hooks/UNSAFE_useContainerBreakpoints/useContainerBreakpoints.tsx"],"sourcesContent":["import { useState, useRef, useCallback, useMemo } from 'preact/hooks';\nimport { defaultBreakpoints, Breakpoints } from '../UNSAFE_useBreakpoints';\n\n/**\n * This custom hook returns the current breakpoints based on the width of a container, which is a DOM object.\n * The breakpoints are returned as a set of boolean values keyed to each breakpoint.\n * TODO: Refactor to use a single ResizeObserver for better performance.\n */\nexport function useContainerBreakpoints(breakpoints: Breakpoints = defaultBreakpoints) {\n  const [width, setWidth] = useState(0);\n  const observedNodeRef = useRef<HTMLElement | null>(null);\n\n  const resizeObserver = useMemo(\n    () =>\n      new ResizeObserver((entries) => {\n        for (const entry of entries) {\n          setWidth(entry.contentRect.width);\n        }\n      }),\n    []\n  );\n\n  const ref = useCallback(\n    (node: HTMLElement) => {\n      const observedNode = observedNodeRef.current;\n\n      if (node != observedNode) {\n        if (observedNode) {\n          resizeObserver.unobserve(observedNode);\n        }\n\n        if (node) {\n          resizeObserver.observe(node);\n        }\n\n        observedNodeRef.current = node;\n      }\n    },\n    [resizeObserver]\n  );\n\n  const breakpointMatches = useMemo(() => {\n    const matches: Record<string, boolean> = {};\n    for (const k in breakpoints) {\n      matches[k] = width >= parseInt(breakpoints[k]);\n    }\n    return matches;\n  }, [width, breakpoints]);\n\n  return {\n    breakpointMatches,\n    ref\n  };\n}\n"],"names":[],"mappings":";;;;AAGA;;;;AAIG;AACa,SAAA,uBAAuB,CAAC,WAAA,GAA2B,kBAAkB,EAAA;IACnF,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AACtC,IAAA,MAAM,eAAe,GAAG,MAAM,CAAqB,IAAI,CAAC,CAAC;AAEzD,IAAA,MAAM,cAAc,GAAG,OAAO,CAC5B,MACE,IAAI,cAAc,CAAC,CAAC,OAAO,KAAI;AAC7B,QAAA,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AAC3B,YAAA,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACnC;AACH,KAAC,CAAC,EACJ,EAAE,CACH,CAAC;AAEF,IAAA,MAAM,GAAG,GAAG,WAAW,CACrB,CAAC,IAAiB,KAAI;AACpB,QAAA,MAAM,YAAY,GAAG,eAAe,CAAC,OAAO,CAAC;AAE7C,QAAA,IAAI,IAAI,IAAI,YAAY,EAAE;YACxB,IAAI,YAAY,EAAE;AAChB,gBAAA,cAAc,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;aACxC;YAED,IAAI,IAAI,EAAE;AACR,gBAAA,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aAC9B;AAED,YAAA,eAAe,CAAC,OAAO,GAAG,IAAI,CAAC;SAChC;AACH,KAAC,EACD,CAAC,cAAc,CAAC,CACjB,CAAC;AAEF,IAAA,MAAM,iBAAiB,GAAG,OAAO,CAAC,MAAK;QACrC,MAAM,OAAO,GAA4B,EAAE,CAAC;AAC5C,QAAA,KAAK,MAAM,CAAC,IAAI,WAAW,EAAE;AAC3B,YAAA,OAAO,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;SAChD;AACD,QAAA,OAAO,OAAO,CAAC;AACjB,KAAC,EAAE,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC,CAAC;IAEzB,OAAO;QACL,iBAAiB;QACjB,GAAG;KACJ,CAAC;AACJ;;;;"}