{"version":3,"file":"ColorSwatch-52f47316.js","sources":["../../src/UNSAFE_ColorSwatch/NoFill.tsx","../../src/UNSAFE_ColorSwatch/ColorSwatch.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * The NoFill image\n */\nexport const NoFill = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 48 48\"\n    preserveAspectRatio=\"none\"\n    width=\"100%\"\n    height=\"100%\">\n    <path stroke-width=\"2\" vector-effect=\"non-scaling-stroke\" d=\"M0 0L48 48\" />\n  </svg>\n);\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Fragment, Ref } from 'preact';\nimport { useEffect, useState, useCallback } from 'preact/hooks';\nimport { forwardRef, ElementRef } from 'preact/compat';\n\nimport { BareButton } from '../UNSAFE_BareButton';\nimport { IconButton } from '../UNSAFE_IconButton';\nimport { useToggleAction, ToggleDetail } from '../hooks/UNSAFE_useToggleAction';\nimport { TestIdProps } from '../hooks/UNSAFE_useTestId';\nimport { useTooltip } from '../hooks/UNSAFE_useTooltip';\nimport { useHover } from '../hooks/UNSAFE_useHover';\nimport { useActive } from '../hooks/UNSAFE_useActive';\nimport { useColorScheme } from '../hooks/UNSAFE_useColorScheme';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { mergeProps } from '../utils/UNSAFE_mergeProps';\nimport { ColorSwatchVariantOptions } from './themes/ColorSwatchStyles.css';\nimport { ColorSwatchRedwoodTheme } from './themes/redwood/ColorSwatchTheme';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { NoFill } from './NoFill';\nimport { processGlobals } from '../utils/UNSAFE_buttonUtils';\nimport type { ButtonIntrinsicProps, ButtonIntrinsicAriaProps } from '../utils/UNSAFE_buttonUtils';\nimport {\n  parseColorValue,\n  type ColorValue,\n  isEightDigitHex,\n  getSixDigitHex\n} from '../utils/UNSAFE_color';\nimport translations from '#resources/nls/en/bundle';\nimport { CheckboxCrossed } from '#PRIVATE_Icons/CheckboxCrossed';\nimport { classNames } from '#utils/UNSAFE_classNames';\n\ntype SwatchHandle = ElementRef<typeof BareButton>;\n\nexport type ColorSwatchProps = Partial<ButtonIntrinsicProps> &\n  Partial<ButtonIntrinsicAriaProps> &\n  TestIdProps & {\n    /**\n     * color of the swatch\n     */\n    value?: ColorValue;\n\n    /**\n     * The size indicates how large the color swatch is rendered.\n     */\n    size?: 'xs' | 'sm';\n\n    /**\n     * Specifies if the color swatch is selected\n     */\n    isSelected?: boolean;\n\n    /**\n     * Specifies if the color swatch has role = button.  By default, the color swatch is used in a\n     * palette whereby it is not a button, but just a color swatch inside a grid cell.  However,\n     * it can be used as a stand-alone button, in which case this property should be set to true.  For\n     * example, inside inputColor, the color swatch is a button.\n     */\n    isButton?: boolean;\n\n    /**\n     * Specifies if the color swatch is disabled\n     */\n    isDisabled?: boolean;\n\n    /**\n     * Specifies if the color swatch tooltip is disabled\n     */\n    isTooltipDisabled?: boolean;\n\n    /**\n     * Property that triggers a callback immediately when toggle happens and value of isSelected property should be updated\n     */\n    onToggle?: (details: ToggleDetail) => void;\n  };\n\n/**\n * ColorSwatches render a color, showing focus, hover, and selection variations.\n */\nexport const ColorSwatch = forwardRef(\n  (\n    {\n      size = 'sm',\n      isSelected = false,\n      isButton = false,\n      onToggle,\n      isDisabled = false,\n      isTooltipDisabled = false,\n      testId,\n      value,\n      ...props\n    }: ColorSwatchProps,\n    ref: Ref<SwatchHandle>\n  ) => {\n    const clientHints = getClientHints();\n    const isHybrid = clientHints.hoverSupport === 'events';\n    const valueText = value as string;\n    const hasValue = valueText && valueText.length;\n    const lowerValueText = hasValue ? valueText?.toLocaleLowerCase() : value;\n    const isNoFill = hasValue ? lowerValueText === 'transparent' : false;\n    const hasAlpha = value && hasValue ? isEightDigitHex(value) : false;\n    // const isSmallButton = isButton && size === 'xs'; // if used as xs button, the icon is 20x20, while the target size is 24x24\n\n    const selectedTranslated = translations.vis_stateSelected();\n    const noneTranslated = translations.labelNone();\n    const colorSwatchTranslated = translations.accColorSwatch();\n\n    const {\n      globalEventProps,\n      ariaProps: {\n        'aria-label': ariaLabel,\n        'aria-hidden': ariaHidden,\n        'aria-roledescription': ariaRoleDescription,\n        ...swatchAriaProps\n      }\n    } = processGlobals(props);\n    const { hoverProps, isHover } = useHover({ isDisabled: !isHybrid });\n    const { activeProps, isActive } = useActive({ isDisabled: isDisabled });\n\n    // Cope with rgb or palette colors or illegal colors\n    const getHexValue = useCallback(\n      (raw?: string) => {\n        if (raw?.toLowerCase() === 'transparent') {\n          return noneTranslated;\n        }\n        return parseColorValue(raw);\n      },\n      [noneTranslated]\n    );\n\n    const [accessibleLabel, setAccessibleLabel] = useState<string>(\n      ariaLabel\n        ? ariaLabel\n        : getHexValue(value as string) + isSelected\n        ? ' ' + selectedTranslated\n        : ''\n    );\n\n    const colorScheme = useColorScheme();\n\n    const {\n      classes,\n      styles: {\n        alphaHalfStyles,\n        swatchStyles,\n        buttonStyles,\n        noFillStyles,\n        noFillDisabledStyles,\n        noFillHoverStyles,\n        smallButtonContainerStyles\n      }\n    } = useComponentTheme<ColorSwatchVariantOptions>(ColorSwatchRedwoodTheme, {\n      size: size,\n      selected: isSelected ? 'isSelected' : 'notSelected',\n      active: isActive ? 'isActive' : 'notActive',\n      disabled: isDisabled ? 'isDisabled' : 'notDisabled',\n      hover: isHover ? 'isHover' : 'notHover',\n      noFill: isNoFill ? 'isNoFill' : 'notNoFill',\n      hasValue: hasValue ? 'hasValue' : 'notHasValue',\n      button: isButton ? 'isButton' : 'notButton',\n      colorScheme\n    });\n\n    useEffect(() => {\n      if (!ariaLabel) {\n        setAccessibleLabel(\n          (isSelected ? selectedTranslated + ' ' : '') + getHexValue(value as string)\n        );\n      }\n    }, [isSelected, value, getHexValue, selectedTranslated, ariaLabel]);\n\n    const { triggerProps } = useToggleAction({\n      onToggle: onToggle\n    });\n\n    const { tooltipContent, tooltipProps } = useTooltip({\n      text: accessibleLabel,\n      isDisabled: isDisabled || isTooltipDisabled\n    });\n\n    const elementDetails = {\n      type: 'div' as const\n    };\n\n    const splitSwatch = () => {\n      return (\n        <Fragment>\n          <div\n            className={alphaHalfStyles}\n            style={isDisabled ? {} : { backgroundColor: getSixDigitHex(value!) as string }}\n          />\n          <div\n            className={alphaHalfStyles}\n            style={isDisabled ? {} : { backgroundColor: value as string }}\n          />\n        </Fragment>\n      );\n    };\n    const noFill = () => {\n      return (\n        <div className={isDisabled ? noFillDisabledStyles : noFillStyles}>\n          <NoFill />\n        </div>\n      );\n    };\n\n    const valueSwatch = () => {\n      return (\n        <div\n          className={classNames([\n            smallButtonContainerStyles,\n            isButton && buttonStyles,\n            !isButton && swatchStyles\n          ])}\n          style={isNoFill || isDisabled || hasAlpha ? {} : { backgroundColor: value as string }}>\n          {isNoFill ? noFill() : hasAlpha ? splitSwatch() : undefined}\n        </div>\n      );\n    };\n\n    const noValueSwatch = () => {\n      return (\n        <div\n          className={classNames([\n            !isButton && swatchStyles,\n            isDisabled ? noFillDisabledStyles : noFillHoverStyles\n          ])}>\n          <CheckboxCrossed />\n        </div>\n      );\n    };\n\n    const swatchContents = () => {\n      return hasValue ? valueSwatch() : noValueSwatch();\n    };\n\n    const buttonContents = () => {\n      return (\n        <IconButton\n          aria-label={accessibleLabel}\n          aria-roledescription={ariaRoleDescription ?? colorSwatchTranslated}\n          {...swatchAriaProps}\n          isDisabled={isDisabled}\n          ref={ref}\n          size=\"sm\"\n          testId={testId}\n          variant=\"ghost\"\n          onAction={() => onToggle?.({ value: isSelected })}>\n          {swatchContents()}\n        </IconButton>\n      );\n    };\n\n    return isButton ? (\n      buttonContents()\n    ) : (\n      <Fragment>\n        <BareButton\n          ref={ref}\n          elementDetails={elementDetails}\n          {...mergeProps(\n            triggerProps,\n            globalEventProps,\n            hoverProps,\n            activeProps,\n            globalEventProps,\n            tooltipProps\n          )}\n          testId={testId}\n          isDisabled={isDisabled}\n          aria-label={accessibleLabel}\n          aria-roledescription={ariaRoleDescription ?? colorSwatchTranslated}\n          {...swatchAriaProps}\n          classNames={classes}\n          onAction={() => onToggle?.({ value: isSelected })}>\n          {swatchContents()}\n        </BareButton>\n        {tooltipContent}\n      </Fragment>\n    );\n  }\n);\n\nColorSwatch.displayName = 'ColorSwatch';\n"],"names":["_jsx","translations","_jsxs","CheckboxCrossed"],"mappings":"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"}