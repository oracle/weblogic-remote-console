/* @oracle/oraclejet-preact: undefined */
import './BusyStateContext-9ee9751d.js';
import { u as useBusyStateContext } from './useBusyStateContext-4d3c27c0.js';
import { useRef, useCallback, useLayoutEffect } from 'preact/hooks';

/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
/**
 * Provides way to add and resolve a busy state.
 */
function useAddBusyState(description) {
    const { addBusyState } = useBusyStateContext();
    const resolverRef = useRef();
    const onBusyEnd = useCallback(() => {
        resolverRef.current?.();
        resolverRef.current = undefined;
    }, []);
    const onBusyStart = useCallback(() => {
        // Resolve previous busy state if any
        onBusyEnd();
        resolverRef.current = addBusyState(description);
    }, [description, onBusyEnd, addBusyState]);
    // Resolve any pending busy state on unmount - return onBusyEnd callback itself (do not execute it)
    useLayoutEffect(() => onBusyEnd, [onBusyEnd]);
    return {
        onBusyStart,
        onBusyEnd
    };
}

export { useAddBusyState as u };
//# sourceMappingURL=useAddBusyState-7a6af61f.js.map
