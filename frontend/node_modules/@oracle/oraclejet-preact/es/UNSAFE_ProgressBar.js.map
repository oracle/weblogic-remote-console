{"version":3,"file":"UNSAFE_ProgressBar.js","sources":["../../src/UNSAFE_ProgressBar/ProgressBar.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { ComponentProps, JSX } from 'preact';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport type { BundleType } from '#resources/nls/bundle';\nimport { BarTrack, BarValue } from '#PRIVATE_Meter';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { useComponentTheme } from '#hooks/UNSAFE_useComponentTheme';\nimport { ProgressBarStyles, ProgressBarVariantOptions } from './themes/ProgressBarStyles.css';\nimport { ProgressBarRedwoodTheme } from './themes/redwood/ProgressBarTheme';\n\ntype ariaPropsType = ComponentProps<typeof BarTrack>['ariaProps'];\n\ntype IntrinsicProps = Pick<UnpackSignals<JSX.IntrinsicElements['div']>, 'class'>;\n\ntype ProgressBarProps = IntrinsicProps & {\n  /**\n   * Specifies the id of the progress bar.  If the progress bar is being used to describe the loading process of a particular region\n   * of the page, then the aria-describedby attribute of the region must point to the id of the ProgressBar\n   */\n  id?: UnpackSignals<JSX.IntrinsicElements['div']>['id'];\n  /**\n   * The value of the progress bar.  If the value is 'indeterminate', an indeterminate progress bar will be shown.\n   */\n  value?: 'indeterminate' | number;\n\n  /**\n   * Whether the progress bar is positioned at the top edge of a container or not.\n   * If set to 'top', the curved borders will be removed.\n   */\n  edge?: 'none' | 'top';\n\n  /**\n   * The maximum value of the progress bar.\n   */\n  max?: number;\n  /**\n   * The width of the progress bar.  This will use the CSS lengths styling.\n   */\n  // TODO: use the dimensions work the Jeanne is doing JET-49961\n  width?: string;\n\n  /**\n   * A label to be used for accessibility purposes when value is set to 'indeterminate'. This will be used for the aria-valuetext of the DOM element.\n   */\n  'aria-valuetext'?: string;\n  /**\n   * A label to be used for accessibility purposes. This will be used for the aria-label of the DOM element.\n   */\n  'aria-label'?: string;\n\n  /**\n   * One or more ids (separated by spaces) of elements that label the progress bar. This will be used for the aria-labelledby of the DOM element.\n   */\n  'aria-labelledby'?: string;\n};\n/**\n * A progress bar allows the user to visualize the progression of an extended computer operation.\n */\nexport function ProgressBar({ value, max, ...otherProps }: ProgressBarProps) {\n  return value === 'indeterminate' ? (\n    <IndeterminateProgressBar {...otherProps} />\n  ) : (\n    <DeterminateProgressBar value={value} max={max} {...otherProps} />\n  );\n}\n\ntype IndeterminateProps = Omit<ProgressBarProps, 'value' | 'max'>;\n\nconst IndeterminateProgressBar = ({ id, width, edge = 'none', ...props }: IndeterminateProps) => {\n  const {\n    classes,\n    styles: {\n      valueStyle,\n      indeterminate,\n      animationStyleLTR,\n      animationStyleRTL,\n      highContrastValueStyle,\n      trackBorderEdgeNone,\n      trackBorderEdgeTop\n    }\n  } = useComponentTheme<ProgressBarVariantOptions, ProgressBarStyles>(ProgressBarRedwoodTheme, {\n    edge: edge === 'none' ? edge : undefined\n  });\n\n  const { direction, forcedColors } = useUser();\n  const barValueClasses = classNames([\n    valueStyle,\n    indeterminate,\n    direction === 'rtl' ? animationStyleRTL : animationStyleLTR,\n    forcedColors === 'active' ? highContrastValueStyle : ''\n  ]);\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const ariaProps: ariaPropsType = {\n    'aria-valuetext': props['aria-valuetext'] || translations.progressIndeterminate(),\n    'aria-label': props['aria-label'],\n    'aria-labelledby': props['aria-labelledby'],\n    role: 'progressbar'\n  };\n  const trackBorderClass =\n    forcedColors === 'active'\n      ? undefined\n      : edge === 'none'\n      ? trackBorderEdgeNone\n      : trackBorderEdgeTop;\n  return (\n    <BarTrack\n      id={id}\n      ariaProps={ariaProps}\n      class={classNames([classes, trackBorderClass])}\n      length={width}>\n      <BarValue class={barValueClasses} />\n    </BarTrack>\n  );\n};\n\ntype DeterminateProps = Omit<ProgressBarProps, 'aria-valuetext'> & {\n  value?: number;\n};\n\nconst DeterminateProgressBar = ({\n  value = 0,\n  max = 100,\n  id,\n  width,\n  edge = 'none',\n  ...props\n}: DeterminateProps) => {\n  const { forcedColors } = useUser();\n  const {\n    classes,\n    styles: { valueStyle, highContrastValueStyle, trackBorderEdgeNone, trackBorderEdgeTop }\n  } = useComponentTheme<ProgressBarVariantOptions, ProgressBarStyles>(ProgressBarRedwoodTheme, {\n    edge: edge === 'none' ? edge : undefined\n  });\n\n  const barValueClasses = classNames([\n    valueStyle,\n    forcedColors === 'active' ? highContrastValueStyle : ''\n  ]);\n\n  const percentage = `${Math.min(Math.max(0, value / max), 1) * 100}%`;\n  const ariaProps: ariaPropsType = {};\n  ariaProps['aria-valuemin'] = value != null ? 0 : undefined;\n  ariaProps['aria-valuemax'] = value != null ? max : undefined;\n  ariaProps['aria-valuenow'] = value != null ? value : undefined;\n  ariaProps['role'] = 'progressbar';\n  (ariaProps['aria-label'] = props['aria-label']),\n    (ariaProps['aria-labelledby'] = props['aria-labelledby']);\n  return (\n    <BarTrack\n      ariaProps={ariaProps}\n      id={id}\n      length={width}\n      class={classNames([classes, edge === 'none' ? trackBorderEdgeNone : trackBorderEdgeTop])}>\n      <BarValue class={barValueClasses} length={percentage} />\n    </BarTrack>\n  );\n};\n"],"names":["_jsx"],"mappings":"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"}