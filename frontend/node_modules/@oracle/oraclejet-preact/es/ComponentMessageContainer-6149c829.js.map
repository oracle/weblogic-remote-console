{"version":3,"file":"ComponentMessageContainer-6149c829.js","sources":["../../src/UNSAFE_ComponentMessage/ComponentMessage.tsx","../../src/UNSAFE_ComponentMessage/ComponentMessageContainer.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { isSeverityIconNeeded, MessageStartIcon, MessageSummary } from '../PRIVATE_Message';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\nimport { ComponentMessageVariantOptions } from './themes/ComponentMessageStyles.css';\nimport { ComponentMessageRedwoodTheme } from './themes/redwood/ComponentMessageTheme';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { type TestIdProps, useTestId } from '#hooks/UNSAFE_useTestId';\nimport { UserAssistanceRedwoodTheme } from '#UNSAFE_UserAssistance/themes/redwood/UserAssistanceTheme';\nimport { getClientHints } from '#utils/PRIVATE_clientHints';\n/**\n * A type for a single component message\n */\nexport type ComponentMessageItem = {\n  summary?: string;\n  detail?: string;\n  severity?: 'confirmation' | 'error' | 'info' | 'warning';\n};\n\n/**\n * Props for the Message Component\n */\ntype Props = TestIdProps & {\n  /**\n   * The error detail text for the component message\n   */\n  detail?: ComponentMessageItem['detail'];\n\n  /**\n   * The label of the field which is showing this error\n   */\n  fieldLabel?: string;\n\n  /**\n   * The severity of the component message\n   */\n  severity?: ComponentMessageItem['severity'];\n};\n\n/**\n * The component that renders an individual message for inline component messaging.\n */\nexport function ComponentMessage({ detail, fieldLabel, severity = 'error', testId }: Props) {\n  const { classes } = useComponentTheme<ComponentMessageVariantOptions>(\n    ComponentMessageRedwoodTheme,\n    {\n      severity: severity ?? 'none'\n    }\n  );\n\n  const { baseTheme } = useComponentTheme(UserAssistanceRedwoodTheme);\n  const styleClasses = classNames([classes, baseTheme]);\n  const testIdProps = useTestId(testId);\n\n  // aria-live assertive works on ios VoiceOver, but not on Jaws for our non-input-element form components like checkbox-set and input-date-mask,\n  // and role='alert' works on Jaws but not ios Voiceover due to VO bug.\n  // JET-65574 error message is not read on focus in voiceover due to VoiceOver bug with role: 'alert'.\n  // JET-72375 Accessibility - Checkbox, Error message is not read by JAWS due to aria-live: 'assertive'.\n\n  return (\n    <div\n      class={styleClasses}\n      {...(isIosSafari() ? { 'aria-live': 'assertive' } : { role: 'alert' })}\n      aria-atomic=\"true\"\n      {...testIdProps}>\n      {fieldLabel && <HiddenAccessible>{fieldLabel}</HiddenAccessible>}\n      {isSeverityIconNeeded(severity) && (\n        <MessageStartIcon\n          severity={severity}\n          testId={testId ? `${testId}-icon` : undefined}\n          variant=\"inline\"\n        />\n      )}\n      {/* We will be using the MessageSummary component, as this aligns with the style required */}\n      <MessageSummary\n        testId={testId ? `${testId}-summary` : undefined}\n        text={detail}\n        variant=\"inline\"\n      />\n    </div>\n  );\n}\n\n/**\n * Helper function to determine if the platform is iOS and the Browser is Safari.\n * Exported for usage in local tests.\n * @returns true if the platform is iOS, false otherwise\n */\nexport function isIosSafari() {\n  return getClientHints().platform === 'ios' && getClientHints().browser === 'safari';\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { MessagesManager } from '../PRIVATE_Message';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { ComponentMessage, ComponentMessageItem } from './ComponentMessage';\nimport { componentMessageContainerBase } from './themes/ComponentMessageStyles.css';\nimport { type TestIdProps, useTestId } from '#hooks/UNSAFE_useTestId';\n\n/**\n * Converts the messages data into Item\n *\n * @param messages The messages data passed down as prop\n * @returns The messages data as Item\n */\nfunction generateMessagesData(messages: ComponentMessageItem[]) {\n  return messages.map<Item<number, ComponentMessageItem>>((message, index) => {\n    return {\n      key: index,\n      data: {\n        closeAffordance: 'off',\n        severity: message.severity || 'error',\n        detail: message.detail\n      }\n    };\n  });\n}\n\n/**\n * Props for the ComponentMessaging component\n */\ntype Props = TestIdProps & {\n  /**\n   * The label of the field which is showing this error\n   */\n  fieldLabel?: string;\n\n  /**\n   * Data for the messages. This data is used for rendering each message.\n   */\n  messages?: ComponentMessageItem[];\n};\n\nexport function ComponentMessageContainer({ fieldLabel, messages = [], testId }: Props) {\n  const testIdProps = useTestId(testId);\n  return (\n    <div class={componentMessageContainerBase} {...testIdProps}>\n      <MessagesManager data={generateMessagesData(messages)}>\n        {({ item }) => (\n          <ComponentMessage\n            key={item.key}\n            detail={item.data.detail}\n            fieldLabel={fieldLabel}\n            severity={item.data.severity}\n            testId={testId ? `${testId}-message-${item.key}` : undefined}\n          />\n        )}\n      </MessagesManager>\n    </div>\n  );\n}\n"],"names":["_jsxs","_jsx"],"mappings":"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"}