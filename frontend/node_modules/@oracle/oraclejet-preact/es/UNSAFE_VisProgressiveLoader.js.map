{"version":3,"file":"UNSAFE_VisProgressiveLoader.js","sources":["../../src/UNSAFE_VisProgressiveLoader/ProgressiveLoader.tsx","../../src/UNSAFE_VisProgressiveLoader/VisSkeleton.tsx","../../src/UNSAFE_VisProgressiveLoader/VisProgressiveLoader.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { ComponentChildren, JSX } from 'preact';\nimport { useLoadingIndicatorTimer } from '#hooks/UNSAFE_useLoadingIndicatorTimer';\nimport { LiveRegion } from '#UNSAFE_LiveRegion';\nimport { HiddenAccessible } from '#UNSAFE_HiddenAccessible';\nimport { useId } from '#hooks/UNSAFE_useId';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { baseStyles, loadingContainerStyles } from './themes/ProgressiveLoaderStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { Size, sizeToCSS } from '#utils/UNSAFE_size';\n\ntype Props = {\n  /**\n   * Specifies whether the main content is currently loading.\n   * The fallback content will be shown if the main content is taking too long to load.\n   */\n  isLoading: boolean;\n\n  /**\n   * The content to be shown when loading.\n   */\n  fallback: ComponentChildren;\n\n  /**\n   * The main content to be shown when not loading.\n   */\n  children: ComponentChildren;\n\n  /**\n   * The role.\n   */\n  role?: UnpackSignals<JSX.HTMLAttributes['role']>;\n\n  /**\n   * The tabIndex.\n   */\n  tabIndex?: UnpackSignals<JSX.HTMLAttributes['tabIndex']>;\n\n  /**\n   * The width of the component.\n   */\n  width?: Size;\n\n  /**\n   * The height of the component.\n   */\n  height?: Size;\n\n  /**\n   * The aria-label of the component.\n   * This will be used for the aria-label of the DOM element.\n   */\n  'aria-label'?: UnpackSignals<JSX.AriaAttributes>['aria-label'];\n\n  /**\n   * One or more ids (separated by spaces) of elements that describe the component.\n   * This will be used for the aria-describedby of the DOM element.\n   */\n  'aria-describedby'?: UnpackSignals<JSX.AriaAttributes>['aria-describedby'];\n\n  /**\n   * One or more ids (separated by spaces) of elements that label the component.\n   * This will be used for the aria-labelledby of the DOM element.\n   */\n  'aria-labelledby'?: UnpackSignals<JSX.AriaAttributes>['aria-labelledby'];\n};\n\n/**\n * Displays the specified fallback content during progressive loading of the main content.\n */\nexport function ProgressiveLoader({\n  isLoading,\n  fallback,\n  children,\n  role,\n  tabIndex,\n  width,\n  height,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledBy,\n  'aria-describedby': ariaDescribedBy\n}: Props) {\n  const showLoadingIndicator = useLoadingIndicatorTimer(isLoading);\n  const { vis_stateLoading, vis_stateLoaded } = useTranslationBundle<BundleType>(\n    '@oracle/oraclejet-preact'\n  );\n  const descId = useId();\n\n  return isLoading && showLoadingIndicator ? (\n    <div\n      role={role}\n      tabIndex={tabIndex}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledBy}\n      aria-describedby={\n        ariaDescribedBy\n          ? [...new Set(ariaDescribedBy.split(/\\s+/).concat(descId))].join(' ')\n          : descId\n      }\n      class={classNames([baseStyles, loadingContainerStyles])}\n      style={{\n        width: width && sizeToCSS(width),\n        height: height && sizeToCSS(height)\n      }}>\n      {fallback}\n      <HiddenAccessible id={descId}>{vis_stateLoading()}</HiddenAccessible>\n      <LiveRegion type=\"polite\">{vis_stateLoading()}</LiveRegion>\n    </div>\n  ) : (\n    <div\n      class={baseStyles}\n      style={{\n        width: width && sizeToCSS(width),\n        height: height && sizeToCSS(height)\n      }}>\n      {children}\n      <LiveRegion type=\"polite\">\n        {ariaLabel ? `${ariaLabel}, ${vis_stateLoaded()}` : vis_stateLoaded()}\n      </LiveRegion>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Skeleton } from '#UNSAFE_Skeleton';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { Size, sizeToCSS } from '#utils/UNSAFE_size';\nimport {\n  baseSkeletonContainerStyles,\n  baseStyles,\n  skeletonContainerStyles\n} from './themes/VisSkeletonStyles.css';\n\ntype Props = {\n  /**\n   * The visualization type.\n   */\n  type: 'bar' | 'area' | 'line' | 'combo' | 'pie';\n\n  /**\n   * The width of the skeleton.\n   */\n  width?: Size;\n\n  /**\n   * The height of the skeleton.\n   */\n  height?: Size;\n};\n\n/**\n * Skeleton loading for visualizations.\n */\nexport function VisSkeleton({ type, width, height }: Props) {\n  return (\n    <div\n      class={baseStyles}\n      style={{\n        width: width && sizeToCSS(width),\n        height: height && sizeToCSS(height)\n      }}>\n      <div class={classNames([baseSkeletonContainerStyles, skeletonContainerStyles[type]])}>\n        <Skeleton width=\"100%\" height=\"100%\" />\n      </div>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentProps } from 'preact';\nimport { ProgressiveLoader } from './ProgressiveLoader';\nimport { VisSkeleton } from './VisSkeleton';\n\ntype Props = Omit<ComponentProps<typeof ProgressiveLoader>, 'fallback' | 'tabIndex'> & {\n  /**\n   * The visualization type.\n   * This is used to determine the loading indicator to be used.\n   */\n  type: ComponentProps<typeof VisSkeleton>['type'];\n};\n\n/**\n * Displays the specified fallback content during progressive loading of the visualization.\n */\nexport function VisProgressiveLoader({ type, role = 'application', children, ...props }: Props) {\n  const fallback = <VisSkeleton type={type} />;\n  return (\n    <ProgressiveLoader role={role} tabIndex={0} fallback={fallback} {...props}>\n      {children}\n    </ProgressiveLoader>\n  );\n}\n"],"names":["_jsxs","_jsx","baseStyles"],"mappings":"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"}