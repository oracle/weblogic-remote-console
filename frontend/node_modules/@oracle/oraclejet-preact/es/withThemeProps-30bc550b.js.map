{"version":3,"file":"withThemeProps-30bc550b.js","sources":["../../src/hoc/UNSAFE_withThemeProps/withThemeProps.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { createRef, ComponentType, type RefObject } from 'preact';\nimport { useEffect, forwardRef } from 'preact/compat';\nimport { EnvironmentProvider } from '#UNSAFE_Environment';\nimport {\n  ThemeModifiers as Props,\n  DARK_CLASS,\n  INVERT_CLASS,\n  LIGHT_CLASS,\n  COLORSCHEME_DEPENDENT_CLASS,\n  SCALE_SM_CLASS,\n  SCALE_MD_CLASS,\n  SCALE_LG_CLASS,\n  SCALE_DEPENDENT_CLASS,\n  DENSITY_COMPACT_CLASS,\n  DENSITY_STANDARD_CLASS,\n  DENSITY_DEPENDENT_CLASS\n} from '#UNSAFE_Theme';\n\n/**\n * Higher Order Component that allows you to wrap an existing component with an EnvironmentProvider\n * containing the desired colorScheme, scale, and density context. The returned component contains all the props\n * of the wrapped component with the addition of the `colorScheme`, `scale`, and `density` props.\n *\n * This should be used when nesting an alternate colorScheme (ie dark palette sub-form within a global light\n * palette). You can use this HOC instead of manually applying colorScheme classnames to DOM elements. This also\n * eliminates the need to add additional DOM wrapper elements.\n */\nconst withThemeProps = <T extends object>(WrappedComponent: ComponentType<T>) => {\n  const displayName =\n    WrappedComponent.displayName || WrappedComponent.name || 'ComponentWithProvider';\n\n  const ComponentWithProvider = forwardRef(\n    ({ colorScheme, scale, density, ...props }: T & Partial<Props>, ref) => {\n      // if no ref is supplied, create one\n      const wrapRef = (ref || createRef()) as RefObject<unknown>;\n\n      useEffect(() => {\n        if (wrapRef.current) {\n          const { classList } = wrapRef.current as HTMLElement;\n          if (!classList) return;\n\n          // dynamically apply the appropriate colorscheme classname to ref element\n          if (colorScheme) {\n            const schemes = [\n              LIGHT_CLASS,\n              DARK_CLASS,\n              INVERT_CLASS,\n              COLORSCHEME_DEPENDENT_CLASS\n            ] as const;\n            schemes.map((current) => classList.remove(current));\n\n            if (colorScheme === 'dark') {\n              classList.add(DARK_CLASS);\n              classList.add(INVERT_CLASS);\n            } else {\n              classList.add(LIGHT_CLASS);\n            }\n            classList.add(COLORSCHEME_DEPENDENT_CLASS);\n          }\n\n          // dynamically apply the appropriate scale classname to ref element\n          if (scale) {\n            const scales = [SCALE_SM_CLASS, SCALE_MD_CLASS, SCALE_LG_CLASS, SCALE_DEPENDENT_CLASS];\n            scales.map((current) => classList.remove(current));\n            classList.add(\n              `${\n                scale === 'sm' ? SCALE_SM_CLASS : scale === 'md' ? SCALE_MD_CLASS : SCALE_LG_CLASS\n              }`\n            );\n            classList.add(SCALE_DEPENDENT_CLASS);\n          }\n\n          // dynamically apply the appropriate density classname to ref element\n          if (density) {\n            const densities = [\n              DENSITY_COMPACT_CLASS,\n              DENSITY_STANDARD_CLASS,\n              DENSITY_DEPENDENT_CLASS\n            ];\n            densities.map((current) => classList.remove(current));\n            classList.add(\n              `${density === 'compact' ? DENSITY_COMPACT_CLASS : DENSITY_STANDARD_CLASS}`\n            );\n            classList.add(DENSITY_DEPENDENT_CLASS);\n          }\n        }\n      }, [wrapRef, colorScheme, scale, density]);\n\n      // wrap component with new colorscheme context\n      return (\n        <EnvironmentProvider environment={{ colorScheme, scale, density }}>\n          <WrappedComponent {...(props as T)} ref={wrapRef} />\n        </EnvironmentProvider>\n      );\n    }\n  );\n\n  ComponentWithProvider.displayName = `withThemeProps(${displayName})`;\n\n  return ComponentWithProvider;\n};\n\nexport default withThemeProps;\n"],"names":["_jsx"],"mappings":";;;;;;;;AA0BA;;;;;;;;AAQG;AACH,MAAM,cAAc,GAAG,CAAmB,gBAAkC,KAAI;IAC9E,MAAM,WAAW,GACf,gBAAgB,CAAC,WAAW,IAAI,gBAAgB,CAAC,IAAI,IAAI,uBAAuB,CAAC;AAEnF,IAAA,MAAM,qBAAqB,GAAG,UAAU,CACtC,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,KAAK,EAAsB,EAAE,GAAG,KAAI;;QAErE,MAAM,OAAO,IAAI,GAAG,IAAI,SAAS,EAAE,CAAuB,CAAC;QAE3D,SAAS,CAAC,MAAK;AACb,YAAA,IAAI,OAAO,CAAC,OAAO,EAAE;AACnB,gBAAA,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,CAAC,OAAsB,CAAC;AACrD,gBAAA,IAAI,CAAC,SAAS;oBAAE,OAAO;;gBAGvB,IAAI,WAAW,EAAE;AACf,oBAAA,MAAM,OAAO,GAAG;wBACd,WAAW;wBACX,UAAU;wBACV,YAAY;wBACZ,2BAA2B;qBACnB,CAAC;AACX,oBAAA,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,KAAK,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;AAEpD,oBAAA,IAAI,WAAW,KAAK,MAAM,EAAE;AAC1B,wBAAA,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAC1B,wBAAA,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;qBAC7B;yBAAM;AACL,wBAAA,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;qBAC5B;AACD,oBAAA,SAAS,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;iBAC5C;;gBAGD,IAAI,KAAK,EAAE;oBACT,MAAM,MAAM,GAAG,CAAC,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,qBAAqB,CAAC,CAAC;AACvF,oBAAA,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,KAAK,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;oBACnD,SAAS,CAAC,GAAG,CACX,CACE,EAAA,KAAK,KAAK,IAAI,GAAG,cAAc,GAAG,KAAK,KAAK,IAAI,GAAG,cAAc,GAAG,cACtE,CAAE,CAAA,CACH,CAAC;AACF,oBAAA,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;iBACtC;;gBAGD,IAAI,OAAO,EAAE;AACX,oBAAA,MAAM,SAAS,GAAG;wBAChB,qBAAqB;wBACrB,sBAAsB;wBACtB,uBAAuB;qBACxB,CAAC;AACF,oBAAA,SAAS,CAAC,GAAG,CAAC,CAAC,OAAO,KAAK,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;AACtD,oBAAA,SAAS,CAAC,GAAG,CACX,CAAG,EAAA,OAAO,KAAK,SAAS,GAAG,qBAAqB,GAAG,sBAAsB,CAAA,CAAE,CAC5E,CAAC;AACF,oBAAA,SAAS,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;iBACxC;aACF;SACF,EAAE,CAAC,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;;QAG3C,QACEA,GAAC,CAAA,mBAAmB,EAAC,EAAA,WAAW,EAAE,EAAE,WAAW,EAAE,KAAK,EAAE,OAAO,EAAE,EAC/D,QAAA,EAAAA,GAAA,CAAC,gBAAgB,EAAA,EAAA,GAAM,KAAW,EAAE,GAAG,EAAE,OAAO,EAAA,CAAI,EAChC,CAAA,EACtB;AACJ,KAAC,CACF,CAAC;AAEF,IAAA,qBAAqB,CAAC,WAAW,GAAG,CAAkB,eAAA,EAAA,WAAW,GAAG,CAAC;AAErE,IAAA,OAAO,qBAAqB,CAAC;AAC/B;;;;"}