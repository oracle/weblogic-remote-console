{"version":3,"file":"UNSAFE_ScatterChart.js","sources":["../../src/UNSAFE_ScatterChart/ScatterChart.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ScatterChartProps, ScatterItem } from './scatterChart.types';\nimport { findNearestDataPoint } from '#utils/PRIVATE_chartUtils/layoutUtils';\nimport { getMarkers, getSeriesData } from '#utils/PRIVATE_chartUtils/utils';\nimport { MarkersWithLabel } from '#PRIVATE_Chart/MarkersWithLabel';\nimport { getLineAreaChartNavUtil } from '#utils/PRIVATE_chartUtils/navUtils';\nimport { Chart } from '#PRIVATE_Chart';\nimport { Scale, TimeAxisProps } from '#utils/UNSAFE_visTypes/chart';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport { getColorRamp } from '#utils/UNSAFE_visUtils';\nimport { Point } from '#utils/PRIVATE_visSVGUtils';\nimport { getLineAreaSegments } from '#utils/PRIVATE_chartUtils/utils';\nimport { getItemColor, getMarkerType } from '#utils/PRIVATE_chartUtils/dataStyleUtils';\nimport { LineSeries } from '#PRIVATE_LineAreaComponents/LineSeries';\n\n/**\n * Scatter charts define data items using x and y values, making them useful for viewing relationships between 2 dimensions.\n */\nexport function ScatterChart<K extends string | number, D extends ScatterItem<K>>({\n  width,\n  height,\n  selectedIds = [],\n  hiddenIds = [],\n  highlightedIds,\n  hideAndShowBehavior = 'none',\n  orientation = 'vertical',\n  yAxis,\n  series,\n  groups,\n  getDataItem,\n  selectionMode = 'none',\n  drilling = 'off',\n  dataLabelEffect = 'outline',\n  ...props\n}: ScatterChartProps<K, D>) {\n  const { direction, forcedColors } = useUser();\n  const isHighContrast = forcedColors === 'active';\n  const isTestEnv = props.testId !== undefined;\n  const isRtl = direction === 'rtl';\n  const isLog = yAxis?.scale === 'log';\n  const timeAxisType = (props.xAxis as TimeAxisProps)?.timeAxisType;\n  const hiddenSet = new Set(hiddenIds);\n  const selectedSet = new Set(selectedIds);\n  const highlightedSet = new Set(highlightedIds);\n  const isHoriz = orientation === 'horizontal';\n  const colors = getColorRamp();\n  const renderedSeries = getSeriesData<K, D>(\n    series?.length,\n    groups?.length,\n    getDataItem,\n    hiddenSet,\n    isLog\n  );\n\n  const renderedGetDataItem = (seriesIndex: number, groupIndex: number): D | undefined =>\n    getDataItem(seriesIndex, groupIndex);\n\n  const getGapRatio = () => {\n    return 1;\n  };\n\n  const getNextChartItemFunc = (startIndex: number, endIndex: number) => {\n    // TODO: JET-71301\n    return getLineAreaChartNavUtil<D>(\n      getDataItem,\n      series.length,\n      startIndex,\n      endIndex,\n      false,\n      isRtl,\n      isHoriz\n    );\n  };\n\n  const getDataItemPos = (xScale: Scale, yScale: Scale) => {\n    return (seriesIndex: number, groupIndex: number) => {\n      // Scatter shouldn't create renderedSeries. Can filter for hidden item here.\n      // TODO: JET-71332\n      const item = renderedSeries[seriesIndex][groupIndex] as { x: number; y: number };\n      if (item?.x == null && item?.y) {\n        return;\n      }\n      const x = xScale.transform(item?.x!);\n      const y = yScale.transform(item?.y!);\n      return { x, y, height: 0, width: 0 };\n    };\n  };\n\n  const getMarkerColorAndType = (seriesIndex: number, groupIndex: number) => {\n    return {\n      color: getItemColor(seriesIndex, groupIndex, series, getDataItem),\n      type: getMarkerType(seriesIndex, groupIndex, getDataItem)\n    };\n  };\n\n  const findNearest = (xScale: Scale, yScale: Scale) => {\n    const getSeriesDataInfo = () => {\n      return {\n        offset: 0,\n        dataWidth: 0\n      };\n    };\n\n    const getYCoord = (value: number, yScale: Scale) => {\n      return yScale.transform(value);\n    };\n\n    return findNearestDataPoint<K, D>(\n      series,\n      groups,\n      xScale,\n      yScale,\n      renderedGetDataItem,\n      false,\n      getSeriesDataInfo,\n      getYCoord,\n      isLog,\n      0,\n      hiddenSet,\n      timeAxisType\n    );\n  };\n  const markers = getMarkers();\n\n  const getOffset = () => {\n    return { startOffset: 0, endOffset: 0 };\n  };\n\n  return (\n    <Chart\n      width={width}\n      height={height}\n      selectedIds={selectedSet}\n      hiddenIds={hiddenIds}\n      hideAndShowBehavior={hideAndShowBehavior}\n      orientation={orientation}\n      yAxis={yAxis}\n      series={series}\n      groups={groups}\n      overview=\"off\"\n      defaultOverviewContentRenderer={() => null}\n      selectionMode={selectionMode}\n      drilling={drilling}\n      getDataItem={getDataItem}\n      findNearest={findNearest}\n      getDataItemPos={getDataItemPos}\n      getMarkerInfo={getMarkerColorAndType}\n      renderGridLinesInFront={false}\n      isDataXAxis={true}\n      getStartAndEndAxesOffset={getOffset}\n      getNavUtil={getNextChartItemFunc}\n      getGapRatio={getGapRatio}\n      isRtl={isRtl}\n      {...props}>\n      {({\n        xStartIndex,\n        xEndIndex,\n        xScale,\n        yScale,\n        activeId,\n        focusedItemInfo,\n        hoveredItemInfo,\n        isPointInsideMarquee,\n        defaultFontSize,\n        getTextDimensions,\n        axisStepWidth,\n        getItemAriaLabel\n      }) => {\n        return (\n          <>\n            {renderedSeries.map((lineAreaSeries, index) => {\n              if (lineAreaSeries.length === 0) {\n                /* TODO: need a better way to handle when a series is hidden. */\n                return;\n              }\n              const seriesItem = series[index];\n              const isLineRendered = seriesItem.lineType && seriesItem.lineType !== 'none';\n              const lineSegmentCoords: Point[][] = getLineAreaSegments<K, D>(\n                yScale,\n                xScale,\n                lineAreaSeries,\n                xStartIndex,\n                xEndIndex,\n                isLog,\n                groups,\n                index,\n                renderedGetDataItem,\n                timeAxisType,\n                true\n              );\n\n              const isHighlighted =\n                highlightedIds === undefined ||\n                highlightedIds.length === 0 ||\n                highlightedSet.has(seriesItem.id);\n\n              return (\n                <>\n                  {isLineRendered && (\n                    <LineSeries\n                      lineType={seriesItem.lineType}\n                      /* TODO: confirm with UX if this is contrastLine (changes depending on dark/light mode) or always white. \n                        It's always white in legacy.*/\n                      lineColor={seriesItem.lineColor}\n                      /* The area generated in legacy are bit apart and not touching when stacked. Preact areas are a bit closer than legacy when curved. \n                      Increased the contrast linewidth (to 2.5 from legacy 1.25) to give legacy visual treatment.\n                      TODO: investivage why legacy areas are not touching. maybe we want to do the same in preact svg utils that\n                      generates this curve.\n                     */\n                      lineWidth={seriesItem.lineWidth}\n                      lineStyle={seriesItem.lineStyle}\n                      color={seriesItem.lineColor || colors[index % colors.length]}\n                      lineSegmentCoords={lineSegmentCoords}\n                      isHorizontal={isHoriz}\n                      isHighlighted={isHighlighted}\n                      seriesIndex={index}\n                      groupWidth={axisStepWidth}\n                      isRtl={isRtl}\n                      timeAxisType={timeAxisType}\n                    />\n                  )}\n                  <MarkersWithLabel\n                    yScale={yScale}\n                    xScale={xScale}\n                    groups={groups}\n                    series={seriesItem}\n                    timeAxisType={timeAxisType}\n                    color={\n                      seriesItem.lineColor ||\n                      colors[\n                        index % colors.length\n                      ] /* TODO : make this use getItemColor function from dataStyleUtils. */\n                    }\n                    seriesIndex={index}\n                    startIndex={xStartIndex}\n                    endIndex={xEndIndex}\n                    markerType={markers[index % markers.length]}\n                    orientation={orientation}\n                    isLog={isLog}\n                    activeId={activeId}\n                    getDataItem={getDataItem}\n                    isPointInsideMarquee={isPointInsideMarquee}\n                    selectedIds={selectedSet}\n                    highlightedIds={highlightedIds !== undefined ? highlightedSet : undefined}\n                    focusedItemIndex={\n                      focusedItemInfo.seriesIndex === index &&\n                      focusedItemInfo.isFocusVisible &&\n                      !(props.isDataCursorEnabled && props.dataCursorStyle?.isMarkerDisplayed)\n                        ? focusedItemInfo.groupIndex\n                        : undefined\n                    }\n                    hoveredItemIndex={\n                      hoveredItemInfo?.isCurrent && hoveredItemInfo.seriesIndex === index\n                        ? hoveredItemInfo.groupIndex\n                        : undefined\n                    }\n                    isSelectionEnabled={selectionMode === 'single' || selectionMode === 'multiple'}\n                    isDrillEnabled={drilling === 'on'}\n                    defaultFontSize={defaultFontSize}\n                    dataLabelEffect={dataLabelEffect}\n                    isHighContrast={isHighContrast}\n                    isTestEnv={isTestEnv}\n                    isDataXAxis={true}\n                    getItemAriaLabel={getItemAriaLabel}\n                    getTextDimensions={getTextDimensions}\n                  />\n                </>\n              );\n            })}\n          </>\n        );\n      }}\n    </Chart>\n  );\n}\n"],"names":["_jsx","_Fragment","_jsxs"],"mappings":"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"}