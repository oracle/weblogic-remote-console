{"version":3,"file":"useVisDrill-48b6609b.js","sources":["../../src/hooks/PRIVATE_useVisDrill/useVisDrill.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useCallback } from 'preact/hooks';\nimport { useDoubleTap } from '#hooks/UNSAFE_useDoubleTap';\nimport { cancelEvent } from '#utils/UNSAFE_visUtils';\nimport { isMobile } from '#utils/UNSAFE_clientUtils';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\n\n/**\n * Returns the event handlers for drill gestures.\n */\nexport function useVisDrill(\n  selectionMode: 'none' | 'single' | 'multiple',\n  onDrill: (event: Event) => void,\n  isDisabled = false\n) {\n  const onPointerUp = useCallback(\n    (event: PointerEvent) => {\n      if (selectionMode === 'none') {\n        onDrill(event);\n      }\n    },\n    [selectionMode, onDrill]\n  );\n\n  const onDoubleTap = useCallback(\n    (event: Event) => {\n      if (selectionMode !== 'none') {\n        onDrill(event);\n      }\n    },\n    [selectionMode, onDrill]\n  );\n\n  // The thresholds values are from Toolkit.\n  // See DvtEventManager._onClick for double click detection timing,\n  // and in DvtTouchManager, there's a comment above this._doubleTapTimer that says:\n  // \"We are using 600 ms because 300ms is too fast in VoiceOver mode to recognize the second tap.\"\n  const doubleTapHandlers = useDoubleTap({ onDoubleTap, threshold: isMobile() ? 600 : 250 });\n\n  const onKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        onDrill(event);\n        cancelEvent(event);\n      }\n    },\n    [onDrill]\n  );\n\n  return isDisabled ? {} : mergeProps(doubleTapHandlers, { onPointerUp, onKeyDown });\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;;;AAMG;AAQH;;AAEG;AACG,SAAU,WAAW,CACzB,aAA6C,EAC7C,OAA+B,EAC/B,UAAU,GAAG,KAAK,EAAA;AAElB,IAAA,MAAM,WAAW,GAAG,WAAW,CAC7B,CAAC,KAAmB,KAAI;AACtB,QAAA,IAAI,aAAa,KAAK,MAAM,EAAE;YAC5B,OAAO,CAAC,KAAK,CAAC,CAAC;SAChB;AACH,KAAC,EACD,CAAC,aAAa,EAAE,OAAO,CAAC,CACzB,CAAC;AAEF,IAAA,MAAM,WAAW,GAAG,WAAW,CAC7B,CAAC,KAAY,KAAI;AACf,QAAA,IAAI,aAAa,KAAK,MAAM,EAAE;YAC5B,OAAO,CAAC,KAAK,CAAC,CAAC;SAChB;AACH,KAAC,EACD,CAAC,aAAa,EAAE,OAAO,CAAC,CACzB,CAAC;;;;;IAMF,MAAM,iBAAiB,GAAG,YAAY,CAAC,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC;AAE3F,IAAA,MAAM,SAAS,GAAG,WAAW,CAC3B,CAAC,KAAoB,KAAI;AACvB,QAAA,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE;YACzB,OAAO,CAAC,KAAK,CAAC,CAAC;YACf,WAAW,CAAC,KAAK,CAAC,CAAC;SACpB;AACH,KAAC,EACD,CAAC,OAAO,CAAC,CACV,CAAC;AAEF,IAAA,OAAO,UAAU,GAAG,EAAE,GAAG,UAAU,CAAC,iBAAiB,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC,CAAC;AACrF;;;;"}