{"version":3,"file":"MaxLengthLiveRegion-7a81593c.js","sources":["../../src/UNSAFE_TextField/MaxLengthLiveRegion.tsx"],"sourcesContent":["import { useDebounce } from '../hooks/UNSAFE_useDebounce';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { LiveRegion } from '../UNSAFE_LiveRegion';\nimport { TestIdProps } from '#hooks/UNSAFE_useTestId';\n\ntype Props = TestIdProps & {\n  isMaxLengthExceeded: boolean;\n  maxLength: number;\n  valueLength?: number;\n};\n\nconst MAX_LENGTH_UPDATE_DELAY = 500;\n\nexport function MaxLengthLiveRegion({\n  isMaxLengthExceeded,\n  maxLength,\n  testId,\n  valueLength = 0\n}: Props) {\n  // Comment copied from InputBase.js in Big JET:\n  // Only update the aria-live div when the user has paused for more than\n  // 500 milliseconds. That way, we avoid queued up aria-live messages which\n  // would be annoying and not helpful. The 500ms was agreed upon in the\n  // accessibility review meeting.\n  const debouncedRemainingChars = useDebounce(maxLength - valueLength, MAX_LENGTH_UPDATE_DELAY);\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const maxLengthExceededTranslatedString = translations.formControl_maxLengthExceeded({\n    MAX_LENGTH: `${maxLength}`\n  });\n  const remainingCharsTranslatedString = translations.formControl_maxLengthRemaining({\n    CHARACTER_COUNT: `${debouncedRemainingChars}`\n  });\n\n  return (\n    <>\n      <LiveRegion testId={testId ? testId + '_remainingChars' : undefined}>\n        {remainingCharsTranslatedString}\n      </LiveRegion>\n      {isMaxLengthExceeded && (\n        <LiveRegion testId={testId ? testId + '_exceeded' : undefined} type=\"assertive\">\n          {maxLengthExceededTranslatedString}\n        </LiveRegion>\n      )}\n    </>\n  );\n}\n"],"names":["_jsxs","_jsx"],"mappings":";;;;;;AAYA,MAAM,uBAAuB,GAAG,GAAG,CAAC;AAEpB,SAAA,mBAAmB,CAAC,EAClC,mBAAmB,EACnB,SAAS,EACT,MAAM,EACN,WAAW,GAAG,CAAC,EACT,EAAA;;;;;;IAMN,MAAM,uBAAuB,GAAG,WAAW,CAAC,SAAS,GAAG,WAAW,EAAE,uBAAuB,CAAC,CAAC;AAC9F,IAAA,MAAM,YAAY,GAAG,oBAAoB,CAAa,0BAA0B,CAAC,CAAC;AAClF,IAAA,MAAM,iCAAiC,GAAG,YAAY,CAAC,6BAA6B,CAAC;QACnF,UAAU,EAAE,CAAG,EAAA,SAAS,CAAE,CAAA;AAC3B,KAAA,CAAC,CAAC;AACH,IAAA,MAAM,8BAA8B,GAAG,YAAY,CAAC,8BAA8B,CAAC;QACjF,eAAe,EAAE,CAAG,EAAA,uBAAuB,CAAE,CAAA;AAC9C,KAAA,CAAC,CAAC;IAEH,QACEA,4BACEC,GAAC,CAAA,UAAU,IAAC,MAAM,EAAE,MAAM,GAAG,MAAM,GAAG,iBAAiB,GAAG,SAAS,YAChE,8BAA8B,EAAA,CACpB,EACZ,mBAAmB,KAClBA,IAAC,UAAU,EAAA,EAAC,MAAM,EAAE,MAAM,GAAG,MAAM,GAAG,WAAW,GAAG,SAAS,EAAE,IAAI,EAAC,WAAW,EAAA,QAAA,EAC5E,iCAAiC,EACvB,CAAA,CACd,CACA,EAAA,CAAA,EACH;AACJ;;;;"}