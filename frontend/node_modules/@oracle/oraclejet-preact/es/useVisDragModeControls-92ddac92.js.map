{"version":3,"file":"useVisDragModeControls-92ddac92.js","sources":["../../src/hooks/PRIVATE_useVisDragModeControls/util.ts","../../src/hooks/PRIVATE_useVisDragModeControls/VisDragModeControls.tsx","../../src/hooks/PRIVATE_useVisDragModeControls/useVisDragModeControls.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * Returns the dragMode during initial render or when dragMode props\n * change (i.e when user hasn't selected yet) based on available dragModes.\n */\nexport function getInitialDragMode(\n  dragMode: 'pan' | 'user' | 'zoom' | 'select' | 'off' | undefined,\n  showPanButton: boolean,\n  showZoomButton: boolean,\n  showSelectButton: boolean\n) {\n  return showPanButton && (dragMode === 'pan' || dragMode === 'user')\n    ? 'pan'\n    : showZoomButton && dragMode === 'zoom'\n    ? 'zoom'\n    : showSelectButton && dragMode === 'select'\n    ? 'select'\n    : undefined;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Ref } from 'preact';\nimport { ChartMarqueeSelectIcon } from '#PRIVATE_ThemedIcons/ChartMarqueeSelectIcon';\nimport { ChartPanIcon } from '#PRIVATE_ThemedIcons/ChartPanIcon';\nimport { styles } from './themes/useVisDragModeControls.css';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport { ChartZoomIcon } from '#PRIVATE_ThemedIcons/ChartZoomIcon';\nimport { ButtonSetSingle } from '#UNSAFE_ButtonSetSingle';\nimport { ButtonSetItem } from '#UNSAFE_ButtonSetItem';\nimport { IconToggleButton } from '#UNSAFE_IconToggleButton';\n\ntype Props = {\n  divRef: Ref<HTMLDivElement>;\n  position: {\n    top?: string;\n    bottom?: string;\n    right?: string;\n    left?: string;\n  };\n  dragMode?: 'select' | 'zoom' | 'pan';\n  showZoomButton: boolean;\n  showPanButton: boolean;\n  showSelectButton: boolean;\n  onDragModeChange: (mode?: 'select' | 'zoom' | 'pan') => void;\n};\n\nexport function VisDragModeControls({\n  position,\n  divRef,\n  dragMode,\n  onDragModeChange,\n  showZoomButton,\n  showPanButton,\n  showSelectButton\n}: Props) {\n  const { right, left, top, bottom } = position;\n  const onButtonAction = ({ value }: { value: 'zoom' | 'pan' | 'select' }) => {\n    onDragModeChange(value === dragMode ? undefined : value);\n  };\n\n  const showOnlyOne =\n    (showPanButton && !showSelectButton && !showZoomButton) ||\n    (!showPanButton && !showSelectButton && showZoomButton) ||\n    (!showPanButton && showSelectButton && !showZoomButton);\n\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const zoomAriaLabel = translations.vis_marqueeZoomTooltip();\n  const panAriaLabel = translations.vis_panTooltip();\n  const selectAriaLabel = translations.vis_marqueeSelectTooltip();\n  return showZoomButton || showPanButton || showSelectButton ? (\n    <div\n      ref={divRef}\n      class={styles.background}\n      data-oj-private-object=\"dragModeControls\"\n      style={{\n        right,\n        left,\n        top,\n        bottom\n      }}>\n      {!showOnlyOne ? (\n        <ButtonSetSingle\n          size=\"sm\"\n          value={dragMode}\n          onCommit={onButtonAction as (detail: { value?: string }) => void}\n          display=\"icons\"\n          variant=\"outlined\">\n          {showPanButton && (\n            <ButtonSetItem\n              value=\"pan\"\n              label={panAriaLabel}\n              startIcon={<ChartPanIcon />}></ButtonSetItem>\n          )}\n          {showZoomButton && (\n            <ButtonSetItem\n              value=\"zoom\"\n              label={zoomAriaLabel}\n              startIcon={<ChartZoomIcon />}></ButtonSetItem>\n          )}\n          {showSelectButton && (\n            <ButtonSetItem\n              value=\"select\"\n              label={selectAriaLabel}\n              startIcon={<ChartMarqueeSelectIcon />}></ButtonSetItem>\n          )}\n        </ButtonSetSingle>\n      ) : (\n        <>\n          {showPanButton && (\n            <IconToggleButton\n              accessibleLabel={panAriaLabel}\n              isSelected={dragMode === 'pan'}\n              onToggle={() => {\n                onDragModeChange(dragMode === 'pan' ? undefined : 'pan');\n              }}\n              variant=\"outlined\"\n              size=\"sm\">\n              <ChartPanIcon />\n            </IconToggleButton>\n          )}\n          {showZoomButton && (\n            <IconToggleButton\n              accessibleLabel={zoomAriaLabel}\n              isSelected={dragMode === 'zoom'}\n              onToggle={() => {\n                onDragModeChange(dragMode === 'zoom' ? undefined : 'zoom');\n              }}\n              variant=\"outlined\"\n              size=\"sm\">\n              <ChartZoomIcon />\n            </IconToggleButton>\n          )}\n          {showSelectButton && (\n            <IconToggleButton\n              accessibleLabel={selectAriaLabel}\n              isSelected={dragMode === 'select'}\n              onToggle={() => {\n                onDragModeChange(dragMode === 'select' ? undefined : 'select');\n              }}\n              variant=\"outlined\"\n              size=\"sm\">\n              <ChartMarqueeSelectIcon />\n            </IconToggleButton>\n          )}\n        </>\n      )}\n    </div>\n  ) : null;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { getInitialDragMode } from './util';\nimport { VisDragModeControls } from './VisDragModeControls';\nimport { Dimension } from '#utils/UNSAFE_visTypes/common';\n\ntype Props = {\n  plotAreaSpace: Dimension;\n  componentWidth: number;\n  isRtl: boolean;\n  showPanButton: boolean;\n  showZoomButton: boolean;\n  showSelectButton: boolean;\n  isDisabled?: boolean;\n  dragMode?: 'zoom' | 'pan' | 'user' | 'select' | 'off';\n};\n\nexport function useVisDragModeControls({\n  componentWidth,\n  plotAreaSpace,\n  isRtl,\n  showPanButton,\n  showZoomButton,\n  showSelectButton,\n  isDisabled = false,\n  dragMode\n}: Props) {\n  const dragButtonDivRef = useRef<HTMLDivElement>(null);\n  const originalDragModeRef = useRef<'select' | 'zoom' | 'pan' | 'off' | 'user' | undefined>(dragMode);\n\n  const isInitialRenderRef = useRef(true);\n  useEffect(() => {\n    isInitialRenderRef.current = false;\n  }, []);\n\n  const [userDragMode, setUserDragMode] = useState<'select' | 'zoom' | 'pan' | undefined>();\n  const initialSelection = getInitialDragMode(\n    dragMode,\n    showPanButton,\n    showZoomButton,\n    showSelectButton\n  );\n\n  const dragModeChanged = originalDragModeRef.current != dragMode;\n\n  if (dragModeChanged || isInitialRenderRef.current) {\n    originalDragModeRef.current = dragMode;\n    setUserDragMode(initialSelection);\n  }\n\n  const toggleButtonContent = isDisabled ? undefined : (\n    <VisDragModeControls\n      position={{\n        top: `${plotAreaSpace.y}px`,\n        right: isRtl ? undefined : `${componentWidth - plotAreaSpace.x - plotAreaSpace.width}px`,\n        left: isRtl ? `${plotAreaSpace.x}px` : undefined\n      }}\n      divRef={dragButtonDivRef}\n      showSelectButton={showSelectButton}\n      showZoomButton={showZoomButton}\n      showPanButton={showPanButton}\n      dragMode={userDragMode}\n      onDragModeChange={setUserDragMode}\n    />\n  );\n\n  return {\n    dragButtonDivRef: dragButtonDivRef,\n    toggleButtonContent: toggleButtonContent,\n    userDragMode\n  };\n}\n"],"names":["_jsx","_jsxs","ChartPanIcon","ChartZoomIcon","ChartMarqueeSelectIcon","_Fragment"],"mappings":";;;;;;;;;;;;AAAA;;;;;;AAMG;AAEH;;;AAGG;AACG,SAAU,kBAAkB,CAChC,QAAgE,EAChE,aAAsB,EACtB,cAAuB,EACvB,gBAAyB,EAAA;IAEzB,OAAO,aAAa,KAAK,QAAQ,KAAK,KAAK,IAAI,QAAQ,KAAK,MAAM,CAAC;AACjE,UAAE,KAAK;AACP,UAAE,cAAc,IAAI,QAAQ,KAAK,MAAM;AACvC,cAAE,MAAM;AACR,cAAE,gBAAgB,IAAI,QAAQ,KAAK,QAAQ;AAC3C,kBAAE,QAAQ;kBACR,SAAS,CAAC;AAChB;;SCSgB,mBAAmB,CAAC,EAClC,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,gBAAgB,EAChB,cAAc,EACd,aAAa,EACb,gBAAgB,EACV,EAAA;IACN,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,QAAQ,CAAC;AAC9C,IAAA,MAAM,cAAc,GAAG,CAAC,EAAE,KAAK,EAAwC,KAAI;AACzE,QAAA,gBAAgB,CAAC,KAAK,KAAK,QAAQ,GAAG,SAAS,GAAG,KAAK,CAAC,CAAC;AAC3D,KAAC,CAAC;IAEF,MAAM,WAAW,GACf,CAAC,aAAa,IAAI,CAAC,gBAAgB,IAAI,CAAC,cAAc;AACtD,SAAC,CAAC,aAAa,IAAI,CAAC,gBAAgB,IAAI,cAAc,CAAC;SACtD,CAAC,aAAa,IAAI,gBAAgB,IAAI,CAAC,cAAc,CAAC,CAAC;AAE1D,IAAA,MAAM,YAAY,GAAG,oBAAoB,CAAa,0BAA0B,CAAC,CAAC;AAClF,IAAA,MAAM,aAAa,GAAG,YAAY,CAAC,sBAAsB,EAAE,CAAC;AAC5D,IAAA,MAAM,YAAY,GAAG,YAAY,CAAC,cAAc,EAAE,CAAC;AACnD,IAAA,MAAM,eAAe,GAAG,YAAY,CAAC,wBAAwB,EAAE,CAAC;IAChE,OAAO,cAAc,IAAI,aAAa,IAAI,gBAAgB,IACxDA,GACE,CAAA,KAAA,EAAA,EAAA,GAAG,EAAE,MAAM,EACX,KAAK,EAAE,MAAM,CAAC,UAAU,EACD,wBAAA,EAAA,kBAAkB,EACzC,KAAK,EAAE;YACL,KAAK;YACL,IAAI;YACJ,GAAG;YACH,MAAM;SACP,EACA,QAAA,EAAA,CAAC,WAAW,IACXC,IAAA,CAAC,eAAe,EAAA,EACd,IAAI,EAAC,IAAI,EACT,KAAK,EAAE,QAAQ,EACf,QAAQ,EAAE,cAAsD,EAChE,OAAO,EAAC,OAAO,EACf,OAAO,EAAC,UAAU,EAAA,QAAA,EAAA,CACjB,aAAa,KACZD,GAAC,CAAA,aAAa,EACZ,EAAA,KAAK,EAAC,KAAK,EACX,KAAK,EAAE,YAAY,EACnB,SAAS,EAAEA,GAAA,CAACE,OAAY,EAAA,EAAA,CAAG,EAAkB,CAAA,CAChD,EACA,cAAc,KACbF,GAAC,CAAA,aAAa,EACZ,EAAA,KAAK,EAAC,MAAM,EACZ,KAAK,EAAE,aAAa,EACpB,SAAS,EAAEA,GAAC,CAAAG,UAAa,EAAG,EAAA,CAAA,EAAA,CAAkB,CACjD,EACA,gBAAgB,KACfH,GAAA,CAAC,aAAa,EAAA,EACZ,KAAK,EAAC,QAAQ,EACd,KAAK,EAAE,eAAe,EACtB,SAAS,EAAEA,GAAC,CAAAI,SAAsB,KAAG,EAAkB,CAAA,CAC1D,CACe,EAAA,CAAA,KAElBH,IACG,CAAAI,QAAA,EAAA,EAAA,QAAA,EAAA,CAAA,aAAa,KACZL,GAAC,CAAA,gBAAgB,EACf,EAAA,eAAe,EAAE,YAAY,EAC7B,UAAU,EAAE,QAAQ,KAAK,KAAK,EAC9B,QAAQ,EAAE,MAAK;AACb,wBAAA,gBAAgB,CAAC,QAAQ,KAAK,KAAK,GAAG,SAAS,GAAG,KAAK,CAAC,CAAC;AAC3D,qBAAC,EACD,OAAO,EAAC,UAAU,EAClB,IAAI,EAAC,IAAI,EAAA,QAAA,EACTA,IAACE,OAAY,EAAA,EAAA,CAAG,EACC,CAAA,CACpB,EACA,cAAc,KACbF,GAAA,CAAC,gBAAgB,EAAA,EACf,eAAe,EAAE,aAAa,EAC9B,UAAU,EAAE,QAAQ,KAAK,MAAM,EAC/B,QAAQ,EAAE,MAAK;AACb,wBAAA,gBAAgB,CAAC,QAAQ,KAAK,MAAM,GAAG,SAAS,GAAG,MAAM,CAAC,CAAC;AAC7D,qBAAC,EACD,OAAO,EAAC,UAAU,EAClB,IAAI,EAAC,IAAI,EAAA,QAAA,EACTA,IAACG,UAAa,EAAA,EAAA,CAAG,EACA,CAAA,CACpB,EACA,gBAAgB,KACfH,GAAA,CAAC,gBAAgB,EAAA,EACf,eAAe,EAAE,eAAe,EAChC,UAAU,EAAE,QAAQ,KAAK,QAAQ,EACjC,QAAQ,EAAE,MAAK;AACb,wBAAA,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,GAAG,SAAS,GAAG,QAAQ,CAAC,CAAC;qBAChE,EACD,OAAO,EAAC,UAAU,EAClB,IAAI,EAAC,IAAI,EAAA,QAAA,EACTA,GAAC,CAAAI,SAAsB,KAAG,EACT,CAAA,CACpB,IACA,CACJ,EAAA,CACG,IACJ,IAAI,CAAC;AACX;;AChHM,SAAU,sBAAsB,CAAC,EACrC,cAAc,EACd,aAAa,EACb,KAAK,EACL,aAAa,EACb,cAAc,EACd,gBAAgB,EAChB,UAAU,GAAG,KAAK,EAClB,QAAQ,EACF,EAAA;AACN,IAAA,MAAM,gBAAgB,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;AACtD,IAAA,MAAM,mBAAmB,GAAG,MAAM,CAAyD,QAAQ,CAAC,CAAC;AAErG,IAAA,MAAM,kBAAkB,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;IACxC,SAAS,CAAC,MAAK;AACb,QAAA,kBAAkB,CAAC,OAAO,GAAG,KAAK,CAAC;KACpC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,EAAyC,CAAC;AAC1F,IAAA,MAAM,gBAAgB,GAAG,kBAAkB,CACzC,QAAQ,EACR,aAAa,EACb,cAAc,EACd,gBAAgB,CACjB,CAAC;AAEF,IAAA,MAAM,eAAe,GAAG,mBAAmB,CAAC,OAAO,IAAI,QAAQ,CAAC;AAEhE,IAAA,IAAI,eAAe,IAAI,kBAAkB,CAAC,OAAO,EAAE;AACjD,QAAA,mBAAmB,CAAC,OAAO,GAAG,QAAQ,CAAC;QACvC,eAAe,CAAC,gBAAgB,CAAC,CAAC;KACnC;AAED,IAAA,MAAM,mBAAmB,GAAG,UAAU,GAAG,SAAS,IAChDJ,GAAA,CAAC,mBAAmB,EAAA,EAClB,QAAQ,EAAE;AACR,YAAA,GAAG,EAAE,CAAA,EAAG,aAAa,CAAC,CAAC,CAAI,EAAA,CAAA;AAC3B,YAAA,KAAK,EAAE,KAAK,GAAG,SAAS,GAAG,GAAG,cAAc,GAAG,aAAa,CAAC,CAAC,GAAG,aAAa,CAAC,KAAK,CAAI,EAAA,CAAA;AACxF,YAAA,IAAI,EAAE,KAAK,GAAG,CAAA,EAAG,aAAa,CAAC,CAAC,CAAA,EAAA,CAAI,GAAG,SAAS;SACjD,EACD,MAAM,EAAE,gBAAgB,EACxB,gBAAgB,EAAE,gBAAgB,EAClC,cAAc,EAAE,cAAc,EAC9B,aAAa,EAAE,aAAa,EAC5B,QAAQ,EAAE,YAAY,EACtB,gBAAgB,EAAE,eAAe,EACjC,CAAA,CACH,CAAC;IAEF,OAAO;AACL,QAAA,gBAAgB,EAAE,gBAAgB;AAClC,QAAA,mBAAmB,EAAE,mBAAmB;QACxC,YAAY;KACb,CAAC;AACJ;;;;"}