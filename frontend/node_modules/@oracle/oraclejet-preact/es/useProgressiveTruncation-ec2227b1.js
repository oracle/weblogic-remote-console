/* @oracle/oraclejet-preact: undefined */
import { useRef, useState, useLayoutEffect, useCallback } from 'preact/hooks';
import { u as useResizeObserver } from './useResizeObserver-13641643.js';
import { g as getTabWidths } from './tabBarUtils-9483d091.js';

const useProgressiveTruncation = ({ rootRef, isDisabled = false }) => {
    const trailingContentWidths = useRef(new Map());
    const [tabMaxWidth, setTabMaxWidth] = useState();
    const [tabBarWidth, setTabBarWidth] = useState(0);
    useLayoutEffect(() => {
        if (tabMaxWidth == undefined && rootRef && rootRef.current && !isDisabled) {
            const isOverflow = tabBarWidth < rootRef.current.scrollWidth;
            if (!isOverflow) {
                return;
            }
            const tabWidths = getTabWidths(rootRef.current, trailingContentWidths, isDisabled, tabBarWidth, false);
            const tabMaxWidthMap = new Map(tabWidths.map((tab) => [tab.key, (tab.maxWidth + 'px')]));
            setTabMaxWidth(tabMaxWidthMap);
        }
    }, [tabBarWidth, tabMaxWidth, isDisabled, rootRef]);
    const getTabBarMaxWidth = useCallback((entry) => {
        if (tabBarWidth !== entry.contentRect.width) {
            setTabBarWidth(entry.contentRect.width);
            if (tabMaxWidth !== undefined) {
                setTabMaxWidth(undefined);
            }
        }
    }, [tabMaxWidth, tabBarWidth]);
    useResizeObserver(rootRef, getTabBarMaxWidth, { isDisabled: isDisabled });
    return {
        maxWidths: tabMaxWidth
    };
};

export { useProgressiveTruncation as u };
//# sourceMappingURL=useProgressiveTruncation-ec2227b1.js.map
