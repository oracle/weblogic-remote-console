{"version":3,"file":"Submenu-712f5f55.js","sources":["../../src/UNSAFE_Menu/useSelectMenuGroupContext.tsx","../../src/UNSAFE_Menu/SelectMenuItem.tsx","../../src/UNSAFE_Menu/SelectSingleMenuGroup.tsx","../../src/UNSAFE_Menu/DropdownSubmenu.tsx","../../src/UNSAFE_Menu/SheetSubmenu.tsx","../../src/UNSAFE_Menu/Submenu.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useContext } from 'preact/hooks';\nimport { SelectMenuGroupContext } from './SelectMenuGroupContext';\n\n/**\n * Utility hook for consuming the MenuContext\n *\n * @returns The value of MenuContext provider\n */\nfunction useSelectMenuGroupContext() {\n  return useContext(SelectMenuGroupContext);\n}\n\nexport { useSelectMenuGroupContext };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren } from 'preact';\nimport { useMemo } from 'preact/hooks';\nimport { useId } from '../hooks/UNSAFE_useId';\n\nimport { CheckIcon } from '../PRIVATE_ThemedIcons/CheckIcon';\n\nimport { BaseMenuItem } from './MenuItem';\nimport { useSelectMenuGroupContext } from './useSelectMenuGroupContext';\nimport { styles } from './themes/MenuItemStyles.css';\n\ntype SelectMenuItemProps = {\n  value: string;\n  label: string;\n  isDisabled?: boolean;\n  endIcon?: ComponentChildren;\n};\n\nexport function SelectMenuItem({ value, label, isDisabled, endIcon }: SelectMenuItemProps) {\n  const { isMultiple, value: selectedValue, onCommit, groupKey } = useSelectMenuGroupContext();\n  const uniqueID = useId();\n  const id = useMemo(() => `oj-menu-item-${uniqueID}`, [uniqueID]);\n\n  const { isSelected, memoizedOnCommit } = useMemo(() => {\n    if (!isMultiple) {\n      return {\n        isSelected: selectedValue === value,\n        memoizedOnCommit: () => {\n          onCommit?.({ value, previousValue: selectedValue });\n        }\n      };\n    }\n    return {\n      isSelected: !!selectedValue?.includes(value),\n      memoizedOnCommit: () => {\n        const proposedValue = isSelected\n          ? selectedValue?.filter((val) => val !== value) || []\n          : [...(selectedValue || []), value];\n        onCommit?.({ value: proposedValue, previousValue: selectedValue });\n      }\n    };\n  }, [selectedValue, value, onCommit, isMultiple]);\n\n  return (\n    <BaseMenuItem\n      id={id}\n      type=\"select\"\n      role={isMultiple ? 'menuitemcheckbox' : 'menuitemradio'}\n      isChecked={isSelected}\n      isDisabled={isDisabled}\n      startIcon={isSelected ? <CheckIcon /> : <span class={styles.noSelectedIcon}></span>}\n      label={label}\n      onAction={memoizedOnCommit}\n      endIcon={endIcon}\n      itemKey={`${groupKey}-${value}`}\n    />\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren } from 'preact';\n\nimport { MenuValueUpdateDetail } from './menuUtils';\nimport { SelectMenuGroupContext } from './SelectMenuGroupContext';\n\ntype SelectSingleMenuGroupProps = {\n  children: ComponentChildren;\n  value?: string;\n  onCommit?: (detail: MenuValueUpdateDetail<string>) => void;\n  groupKey?: string;\n};\n\nexport function SelectSingleMenuGroup({\n  value,\n  onCommit,\n  children,\n  groupKey\n}: SelectSingleMenuGroupProps) {\n  return (\n    <SelectMenuGroupContext.Provider value={{ isMultiple: false, value, onCommit, groupKey }}>\n      {children}\n    </SelectMenuGroupContext.Provider>\n  );\n}\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'preact/compat';\n\nimport { DirectionalExpandArrowIcon } from '../PRIVATE_ThemedIcons/DirectionalExpandArrowIcon';\nimport { useId } from '../hooks/UNSAFE_useId';\n\nimport { BaseMenuItem } from './MenuItem';\nimport { DropdownMenu } from './DropdownMenu';\nimport { useMenuContainerContext } from './useMenuContainerContext';\nimport { SubmenuProps } from './Submenu';\nimport { scaleVars } from '@oracle/oraclejet-internal-theme-contract/themeContract.css';\nimport { useScale } from '#hooks/UNSAFE_useScale';\n\nexport const DropdownSubmenu = ({ label, children, startIcon, itemKey }: SubmenuProps) => {\n  //Id of the submenu that will be used to connect via aria-owns, menuItem with its submenu\n  const submenuId = useId();\n\n  const preProcessedMenuItemID = useId();\n  //MenuItem id\n  const menuItemId = useMemo(\n    () => `oj-menu-item-${preProcessedMenuItemID}`,\n    [preProcessedMenuItemID]\n  );\n\n  const { changeKey, currentKey } = useMenuContainerContext();\n\n  const submenuMenuItemRef = useRef<HTMLAnchorElement | null>(null);\n  const dropdownSubmenuRef = useRef<HTMLDivElement | null>(null);\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const [currentFocus, setCurrentFocus] = useState<'menu' | 'firstItem' | 'none'>('none');\n\n  const [pxPerUnit, setPxPerUnit] = useState(DEFAULT_PX_PER_UNIT);\n  const scale = useScale();\n\n  useEffect(() => {\n    // Important to have scale as a posible reason for running this effect since changing scale would produce a need of updating px per unit\n    if (!scale || !scaleVars?.size?.units) {\n      setPxPerUnit(0.25 * remInPx());\n    } else {\n      // We asume scale vars has the form of var(x), due to that we obtain string inside parenthesis, if not found empty string is passed\n      const cssVar = /\\(([^)]+)\\)/.exec(scaleVars.size.units)?.[1] || '';\n      // We try to get css var value, if this could not be obtained we use 0.25rem as fallback value\n      const valueofCSSVar = window\n        .getComputedStyle(submenuMenuItemRef.current as Element)\n        .getPropertyValue(cssVar);\n      if (valueofCSSVar.endsWith('px')) {\n        setPxPerUnit(parseFloat(valueofCSSVar));\n      } else if (valueofCSSVar.endsWith('rem')) {\n        setPxPerUnit(parseFloat(valueofCSSVar) * remInPx());\n      } else {\n        setPxPerUnit(0.25 * remInPx());\n      }\n    }\n  }, [scale]);\n\n  useEffect(() => {\n    if (menuItemId !== currentKey) {\n      setIsOpen(false);\n    }\n  }, [currentKey, menuItemId]);\n\n  //This function is used when pressing submenuitem and hovering over it\n  const openSubmenuAction = useCallback((e: Event) => {\n    submenuMenuItemRef.current?.focus();\n    //If not click/touch we set the focus on the first item\n    setIsOpen(true);\n    if (e.type === 'keyup') {\n      setCurrentFocus('firstItem');\n    } else {\n      setCurrentFocus('none');\n    }\n  }, []);\n\n  //TODO: There is a bug in a Icon, once that bug is solved we have to check this again. JET-56980\n  const hoverStatus = useRef<{ recentClose: boolean; pendingUnhover: boolean }>({\n    recentClose: false,\n    pendingUnhover: false\n  });\n\n  return (\n    <>\n      <BaseMenuItem\n        itemKey={itemKey}\n        startIcon={startIcon}\n        id={menuItemId}\n        submenuId={submenuId}\n        ref={submenuMenuItemRef}\n        label={label}\n        endIcon={<DirectionalExpandArrowIcon></DirectionalExpandArrowIcon>}\n        type=\"submenu\"\n        role=\"menuitem\"\n        onAction={openSubmenuAction}\n        hoverInfo={{\n          //Specific hover events of submenuItem\n          hoverProps: {\n            onMouseEnter: (e: MouseEvent) => {\n              openSubmenuAction(e);\n            }\n          },\n          hoverStatus\n        }}\n        //Open submenu using right/left key\n        openSubmenu={() => {\n          setIsOpen(true);\n          setCurrentFocus('firstItem');\n        }}\n        submenuRef={dropdownSubmenuRef}\n        isSubmenuOpen={isOpen}></BaseMenuItem>\n\n      <DropdownMenu\n        isOpen={isOpen}\n        menuLevel=\"sub\"\n        menuId={submenuId}\n        //Close submenu with left/right key\n        closeSubmenu={() => {\n          hoverStatus.current.recentClose = true;\n          changeKey({ key: currentKey, reason: 'keyboard' });\n          setTimeout(() => {\n            hoverStatus.current.recentClose = false;\n          }, HOVER_SHIFT_TIMEOUT);\n          setIsOpen(false);\n          //CurrentKey can be the same as submenuItem, because of that we explicitly focus it\n          submenuMenuItemRef.current?.focus();\n        }}\n        /*For now we are exposing ref if this is exposed at some point we would look for other\n            mechanisms to use this ref */\n        ref={dropdownSubmenuRef}\n        anchorRef={submenuMenuItemRef}\n        defaultPlacement=\"end-top\"\n        currentFocus={currentFocus}\n        offsetValue={{\n          mainAxis: -(2 * pxPerUnit), //TODO: need to figure out how to make this themable.\n          crossAxis: -(2 * pxPerUnit + 1)\n        }}\n        flipOptions={{\n          crossAxis: true,\n          mainAxis: true,\n          fallbackPlacements: ['start-top', 'end-bottom', 'start-bottom']\n        }}>\n        {children}\n      </DropdownMenu>\n    </>\n  );\n};\n\nconst HOVER_SHIFT_TIMEOUT = 100;\nconst DEFAULT_PX_PER_UNIT = 4;\nconst remInPx = () => {\n  return parseInt(window.getComputedStyle(document.documentElement).fontSize || '16px', 10);\n};\n","import { useCallback, useRef, useState } from 'preact/hooks';\n\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { DirectionalCollapseArrowIcon } from '../PRIVATE_ThemedIcons/DirectionalCollapseArrowIcon';\nimport { DirectionalExpandArrowIcon } from '../PRIVATE_ThemedIcons/DirectionalExpandArrowIcon';\n\nimport { BaseMenuItem } from './MenuItem';\nimport { useMenuContainerContext } from './useMenuContainerContext';\nimport { SubmenuProps } from './Submenu';\nimport { createPortal } from 'preact/compat';\nimport { MenuContainer } from './MenuContainer';\nimport { useMenuContext } from './useMenuContext';\n\nexport const SheetSubmenu = ({ label, children, startIcon, itemKey }: SubmenuProps) => {\n  const { isMobile } = useMenuContext();\n  const submenuId = useId();\n  const submenuItemId = useId();\n  const submenuTitleId = useId();\n\n  const submenuMenuItemRef = useRef<HTMLAnchorElement | null>(null);\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const [initialFocus, setInitialFocus] = useState<'menu' | 'secondItem' | 'secondItemDueToTouch'>(\n    'menu'\n  );\n\n  const { menuContainerRef, changeKey } = useMenuContainerContext();\n\n  const openSubmenuDirectional = useCallback(() => {\n    openSubmenu();\n    setInitialFocus('secondItem');\n  }, []);\n\n  const openSubmenuAction = useCallback((e: Event) => {\n    openSubmenu();\n    //If the submenu is open using keyboard focus has to go to second item(first is the title), if not to the menu Container\n    if (e.type === 'keyup') {\n      setInitialFocus('secondItem');\n    } else {\n      if (isMobile) {\n        setInitialFocus('secondItemDueToTouch');\n      } else {\n        setInitialFocus('menu');\n      }\n    }\n  }, []);\n\n  const returnFocusToSubmenuItem = useCallback(() => {\n    changeKey({ key: submenuItemId, reason: 'keyboard' });\n    submenuMenuItemRef.current?.focus();\n  }, [changeKey, submenuItemId, submenuMenuItemRef]);\n\n  /* No need to \"save\" these functions with useCallback */\n\n  const openSubmenu = () => {\n    /* Menu hidden instead of unmounted for two main reasons:\n      1. Children need to be updated even if menu is not present.\n      2. We can't unmount parent since all the submenus are children of main menu */\n    (menuContainerRef.current as HTMLElement).style.display = 'none';\n    setIsOpen(true);\n  };\n  const closeSubmenu = () => {\n    setIsOpen(false);\n    if (menuContainerRef.current) {\n      //Submenu is unmounted and prev menu is visible again.\n      /*Dom manipulation is kind of dirty. Have to check for new approaches. JET-57239 */\n      menuContainerRef.current.style.display = 'block';\n    }\n  };\n\n  const closeSubmenuPressingTitleItem = (e: Event) => {\n    closeSubmenu();\n    //If the submenu is closed using keyboard focus has to go to submenuItem that opened submenu, if not to the menu Container\n    if (e.type === 'keyup') {\n      returnFocusToSubmenuItem();\n    } else {\n      if (isMobile) {\n        changeKey({ key: submenuItemId, reason: 'touch' });\n        // We need to add a little delay due to VO double tap producing focusing wrong item. Will be removed once animation is added for sheet submenus\n        setTimeout(() => {\n          submenuMenuItemRef.current?.focus();\n        }, 0);\n      } else {\n        changeKey({ key: undefined, reason: 'click' });\n        menuContainerRef.current?.focus();\n      }\n    }\n  };\n\n  const closeDirectional = () => {\n    closeSubmenu();\n    returnFocusToSubmenuItem();\n  };\n\n  return (\n    <>\n      <BaseMenuItem\n        itemKey={itemKey}\n        startIcon={startIcon}\n        id={submenuItemId}\n        submenuId={submenuId}\n        ref={submenuMenuItemRef}\n        label={label}\n        endIcon={<DirectionalExpandArrowIcon></DirectionalExpandArrowIcon>}\n        type=\"submenu\"\n        role=\"menuitem\"\n        onAction={openSubmenuAction}\n        openSubmenu={openSubmenuDirectional}\n        isSubmenuOpen={isOpen}></BaseMenuItem>\n      {!isOpen\n        ? null\n        : // We need to use portal to ensure all submenus are siblings so if one dissapear not every submenu dissapear\n          createPortal(\n            <MenuContainer\n              display=\"sheet\"\n              aria-label={label}\n              menuId={submenuId}\n              closeSubmenu={closeDirectional}\n              menuLevel=\"sub\"\n              anchorRef={submenuMenuItemRef}\n              //TODO: We need to check if this initial focus is desired based on some W3C specs\n              currentFocus={initialFocus}>\n              <BaseMenuItem\n                id={submenuTitleId}\n                menuItemLabelWeight=\"bold\"\n                role=\"menuitem\"\n                type=\"submenu\"\n                startIcon={<DirectionalCollapseArrowIcon></DirectionalCollapseArrowIcon>}\n                onAction={closeSubmenuPressingTitleItem}\n                label={label}></BaseMenuItem>\n              {children}\n            </MenuContainer>,\n            menuContainerRef.current?.parentElement as HTMLElement\n          )}\n    </>\n  );\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren } from 'preact';\n\nimport { DropdownSubmenu } from './DropdownSubmenu';\nimport { SheetSubmenu } from './SheetSubmenu';\nimport { useMenuContext } from './useMenuContext';\n\nexport type SubmenuProps = {\n  /**\n   * Set of menu groups or menu items that submenumenu will hold.Even though you could pass other type of children,\n   * is strongly recommended to use MenuItem, menu groups or components that return this type of components\n   * since passing other type of components children produces not desirable behaviors.\n   */\n  children?: ComponentChildren;\n\n  /**\n   *  Determines submenu text.\n   */\n  label: string;\n\n  /**\n   *  Submenu item startIcon\n   */\n  startIcon?: ComponentChildren;\n  /**\n   *  Item key\n   */\n  itemKey?: string;\n};\n\n/*Submenu behaves differently depending the device */\nexport const Submenu = (props: SubmenuProps) => {\n  const { isMobile } = useMenuContext();\n  return (\n    <>\n      {isMobile ? (\n        <SheetSubmenu {...props}></SheetSubmenu>\n      ) : (\n        <DropdownSubmenu {...props}></DropdownSubmenu>\n      )}\n    </>\n  );\n};\n"],"names":["_jsx","CheckIcon","useMemo","_jsxs","useRef","useState","useCallback","_Fragment"],"mappings":"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"}