{"version":3,"file":"useHiddenTestMethod-fffaa50e.js","sources":["../../src/hooks/UNSAFE_useHiddenTestMethod/useHiddenTestMethod.ts"],"sourcesContent":["import { RefObject } from 'preact';\nimport { useEffect } from 'preact/hooks';\nimport { EnvironmentContext } from '../../UNSAFE_Environment';\nimport { useContext } from 'preact/hooks';\n\ntype UseHiddenTestMethodProps = {\n  elementRef: RefObject<HTMLElement>;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  method: (...args: any[]) => void;\n  name: string;\n};\n\n/**\n * This hook is used to add a hidden method to a component's root DOM element\n * that can be called by test adapters. The hidden method is only added when\n * we are not running in production mode, i.e. it's only used for testing.\n *\n * @param elementRef The ref to a component's root DOM element\n * @param method The hidden method to expose in the DOM\n * @param name The name of the hidden method in the DOM\n */\nexport function useHiddenTestMethod({ elementRef, method, name }: UseHiddenTestMethodProps) {\n  const context = useContext(EnvironmentContext);\n\n  // Add the hidden method to the DOM element only when mode !== production.\n  useEffect(() => {\n    if (elementRef.current && context.mode !== 'production') {\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      (elementRef.current as any)[name] = method;\n    }\n  }, [context.mode, elementRef, method, name]);\n}\n"],"names":[],"mappings":";;;;;;AAYA;;;;;;;;AAQG;AACG,SAAU,mBAAmB,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAA4B,EAAA;AACxF,IAAA,MAAM,OAAO,GAAG,UAAU,CAAC,kBAAkB,CAAC,CAAC;;IAG/C,SAAS,CAAC,MAAK;QACb,IAAI,UAAU,CAAC,OAAO,IAAI,OAAO,CAAC,IAAI,KAAK,YAAY,EAAE;;AAEtD,YAAA,UAAU,CAAC,OAAe,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;SAC5C;AACH,KAAC,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;AAC/C;;;;"}