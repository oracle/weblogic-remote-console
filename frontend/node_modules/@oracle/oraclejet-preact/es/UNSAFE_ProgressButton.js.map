{"version":3,"file":"UNSAFE_ProgressButton.js","sources":["../../src/UNSAFE_ProgressButton/ProgressButton.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren, ComponentProps, Ref, Fragment, JSX } from 'preact';\nimport { BaseButton } from '../UNSAFE_BaseButton';\nimport { ProgressButtonLabelLayout } from '../UNSAFE_ProgressButtonLabelLayout';\nimport type { DimensionProps } from '../utils/UNSAFE_interpolations/dimensions';\nimport { forwardRef, ElementRef } from 'preact/compat';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { TestIdProps } from '../hooks/UNSAFE_useTestId';\nimport { useTooltip } from '../hooks/UNSAFE_useTooltip';\nimport { processGlobals, ButtonIntrinsicProps } from '../utils/UNSAFE_buttonUtils';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport translations from '#resources/nls/en/bundle';\n\ntype ButtonHandle = ElementRef<typeof BaseButton>;\n\ntype IntrinsicProps = Pick<UnpackSignals<JSX.HTMLAttributes<HTMLElement>>, 'autofocus'>;\ntype WidthInterpolationProps = Pick<DimensionProps, 'width'>;\ntype BaseButtonProps = ComponentProps<typeof BaseButton>;\n\ntype Props = IntrinsicProps &\n  ButtonIntrinsicProps &\n  Pick<BaseButtonProps, 'aria-describedby'> &\n  WidthInterpolationProps &\n  TestIdProps & {\n    /**\n     * The startIcon is the button's start icon.\n     */\n    startIcon?: ComponentChildren;\n\n    /**\n     * Specifies that a quick indeterminate action is taking place, making the button read-only.\n     */\n    isLoading?: boolean;\n\n    /**\n     * Specifies that the button element should be disabled.\n     */\n    isDisabled?: boolean;\n\n    /**\n     * Specifes the button type\n     */\n    type?: 'button' | 'submit';\n\n    /**\n     * label - button label, used for accessibility if no override\n     */\n    label?: string;\n\n    /**\n     * Indicates in what states the button has chrome (background and border).\n     *     \"borderless\"': \"Borderless buttons are a more prominent variation. Borderless\n     * buttons are useful for supplemental actions that require minimal emphasis.\",\n     *     \"outlined\"': \"Outlined buttons are salient, but lighter weight than\n     * solid buttons. Outlined buttons are useful for secondary actions.\",\n     *     \"solid\"': \"Solid buttons stand out, and direct the user's attention to the\n     *  most important actions in the UI.\",\n     *     \"callToAction\"': \"A Call To Action (CTA) button guides the user to take or\n     * complete the action that is the main goal of the page or page section. There\n     * should only be one CTA button on a page at any given time.\",\n     */\n    variant?: 'borderless' | 'outlined' | 'solid' | 'callToAction';\n\n    /**\n     * The size indicates how large the button is rendered.\n     */\n    size?: 'sm' | 'md' | 'lg';\n\n    /**\n     * Edge can be used to specify that the button is intended to go at the bottom of\n     * a region, stretching from left to right.\n     */\n    edge?: ComponentProps<typeof BaseButton>['edge'];\n\n    /**\n     * Triggered when a button is clicked, whether by keyboard, mouse, or touch events.\n     */\n    onAction?: () => void | null;\n\n    /**\n     * Display indicates whether only the label or all elements should be rendered by the button.\n     */\n    display?: 'label' | 'all';\n\n    /**\n     * tooltip - overrides the aria-label for the tooltip\n     */\n    tooltip?: string;\n  };\n/**\n * A Progress button is a push button that can show progress.\n */\nexport const ProgressButton = forwardRef(\n  (\n    {\n      variant = 'outlined',\n      isLoading = false,\n      isDisabled = false,\n      size = 'md',\n      display = 'all',\n      type: buttonType = 'button',\n      startIcon,\n      edge,\n      testId,\n      onAction,\n      label = '',\n      tooltip,\n      'aria-describedby': ariaDescribedBy,\n      width,\n      ...props\n    }: Props,\n    ref: Ref<ButtonHandle>\n  ) => {\n    const { globalEventProps } = processGlobals(props);\n    const isAdjustedLoading = isDisabled ? false : isLoading;\n    const progressStatus = translations.accButtonProgressStatus({\n      label: label\n    });\n    const progressComplete = translations.accButtonProgressComplete({\n      label: label\n    });\n\n    const showTooltip = isAdjustedLoading && (display == 'label' || !startIcon);\n    const tooltipLabel = showTooltip ? (tooltip ? tooltip : label) : tooltip;\n\n    const { tooltipContent, tooltipProps } = useTooltip({\n      text: tooltipLabel,\n      isDisabled\n    });\n\n    const labelOnly = !startIcon || display === 'label';\n    const elementDetails = {\n      type: 'button' as const,\n      buttonType: buttonType\n    };\n    const content = (\n      <ProgressButtonLabelLayout\n        display={display}\n        isLoadingContrast={variant === 'callToAction'}\n        startIcon={startIcon}\n        accessibleLoadedLabel={progressComplete}\n        accessibleLoadingLabel={progressStatus}\n        size={size}\n        isLoading={isAdjustedLoading}>\n        {label}\n      </ProgressButtonLabelLayout>\n    );\n\n    /* For a11y, we use ignore aria-label during loading time */\n    const { 'aria-describedby': adb, ...ttProps } = tooltipProps;\n\n    return (\n      <Fragment>\n        <BaseButton\n          {...mergeProps(ttProps, globalEventProps)}\n          ref={ref}\n          elementDetails={elementDetails}\n          isDisabled={isDisabled}\n          isReadOnly={isAdjustedLoading}\n          size={size}\n          width={width}\n          edge={edge}\n          variant={variant}\n          styling={\n            labelOnly\n              ? isAdjustedLoading\n                ? ['default', 'hiddenLabel', 'noHoverActive']\n                : ['default']\n              : isAdjustedLoading\n              ? ['noHoverActive', 'min']\n              : ['min']\n          }\n          onAction={onAction}\n          aria-label={label}\n          testId={testId}>\n          {content}\n        </BaseButton>\n        {tooltipContent}\n      </Fragment>\n    );\n  }\n);\n\nProgressButton.displayName = 'ProgressButton';\n"],"names":["translations","_jsx","_jsxs"],"mappings":"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"}