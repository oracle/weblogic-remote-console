{"version":3,"file":"useChartDatatip-a3ce4e23.js","sources":["../../src/utils/PRIVATE_chartUtils/dataTipUtils.tsx","../../src/hooks/PRIVATE_useChartDatatip/useChartDatatip.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport {\n  ChartSeriesData,\n  GroupAxisProps,\n  TimeAxisProps,\n  ValueFormats\n} from '../UNSAFE_visTypes/chart';\nimport { VisTabularDatatip } from '../../PRIVATE_VisTabularDatatip';\nimport { TableRowData } from '../../PRIVATE_VisTabularDatatip';\nimport { LineAreaItem } from '#UNSAFE_LineAreaChart/lineAreaChart.types';\nimport { ScatterItem } from '#UNSAFE_ScatterChart/scatterChart.types';\nimport { BarItemData } from '#UNSAFE_BarChart/barChart.types';\nimport { BundleType } from '#resources/nls/bundle';\nimport { generateAriaLabel } from '#utils/UNSAFE_visUtils';\nimport { GroupLevelItem } from '#PRIVATE_Axis/groupAxis/hierarchicalUtils';\n\n/**\n * Returns the data required for the VisTabularDatatip to render.\n * @param activeInfo active item info.\n * @param series The array of chart series.\n * @param groups The array of chart groups.\n * @param valueFormats The array of chart series.\n * @param getDataItem function which returns chartItem\n */\nexport function getChartTabularData<K, D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>>(\n  data: D,\n  seriesValue: string,\n  groupValue: string[] | string,\n  translations: BundleType,\n  valueFormats?: ValueFormats,\n  isTimeAxis?: boolean,\n  defaultXFormatter?: (axisValue: number) => string,\n  defaultYFormatter?: (value: number) => string,\n  hasXYValues?: boolean\n) {\n  let itemValue, itemX, itemY, itemWidthWeight;\n  const seriesLabel = translations.chart_labelSeries();\n  const groupLabel = translations.chart_labelGroup();\n  const valueLabel = translations.chart_labelValue();\n  const xLabel = translations.chart_labelX();\n  const yLabel = translations.chart_labelY();\n  const widthWeightLabel = translations.chart_labelWidthWeight();\n\n  if (hasXYValues && 'y' in data) {\n    const x = data.x;\n    itemX = valueFormats?.x?.format ? valueFormats?.x?.format(x!) : defaultXFormatter?.(x!);\n\n    const y = data.y;\n    itemY = valueFormats?.y?.format ? valueFormats?.y?.format(y!) : defaultYFormatter?.(y!);\n  } else if ('value' in data && data.value !== undefined) {\n    const value = data.value;\n    itemValue = valueFormats?.value?.format\n      ? valueFormats?.value?.format?.(value)\n      : defaultYFormatter?.(value);\n  }\n  if ('widthWeight' in data && data.widthWeight !== undefined) {\n    const widthWeight = data.widthWeight;\n    itemWidthWeight = valueFormats?.widthWeight?.format\n      ? valueFormats?.widthWeight?.format?.(widthWeight)\n      : defaultYFormatter?.(widthWeight);\n  }\n  const tableData: TableRowData[] = [];\n\n  if (valueFormats?.series?.isDisplayed != false) {\n    tableData.push({\n      key: valueFormats?.series?.label || seriesLabel,\n      value: seriesValue\n    });\n  }\n  if (valueFormats?.group?.isDisplayed != false) {\n    const isArray = Array.isArray(valueFormats?.group?.label);\n    if (isTimeAxis) {\n      const group = Array.isArray(groupValue) ? groupValue[0] : groupValue;\n      tableData.push({\n        key:\n          (isArray ? valueFormats?.group?.label?.[0] : (valueFormats?.group?.label as string)) ||\n          'Date',\n        value: defaultXFormatter ? defaultXFormatter?.(new Date(group).getTime()) : group\n      });\n    } else {\n      const groupsLabel = (\n        isArray ? valueFormats?.group?.label : [valueFormats?.group?.label || groupLabel]\n      ) as string[];\n      const groups = Array.isArray(groupValue) ? groupValue : [groupValue];\n      groups.forEach((value: string, index: number) => {\n        tableData.push({\n          key: groupsLabel[index],\n          value: value\n        });\n      });\n    }\n  }\n  if (valueFormats?.value?.isDisplayed != false) {\n    if (hasXYValues) {\n      tableData.push({\n        key: valueFormats?.value?.label || xLabel,\n        value: itemX!\n      });\n      tableData.push({\n        key: valueFormats?.value?.label || yLabel,\n        value: itemY!\n      });\n    } else {\n      tableData.push({\n        key: valueFormats?.value?.label || valueLabel,\n        value: itemValue!\n      });\n    }\n  }\n  if (valueFormats?.widthWeight?.isDisplayed != false && itemWidthWeight) {\n    tableData.push({\n      key: valueFormats?.widthWeight?.label || widthWeightLabel,\n      value: itemWidthWeight!\n    });\n  }\n  return tableData;\n}\n\nexport function getDefaultDatatipRenderer<\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n>(options: {\n  series: ChartSeriesData<K, D>;\n  groups: string[];\n  translations: BundleType;\n  valueFormats?: ValueFormats;\n  timeAxisType?: 'mixedFrequency' | 'enabled' | 'skipGaps';\n  defaultXFormatter?: (value: number) => string;\n  defaultYFormatter?: (value: number) => string;\n  defaultY2Formatter?: (value: number) => string;\n  hasXYValues?: boolean;\n}) {\n  const isSeriesAssociatedToY2 = options.series.associatedYAxis === 'y2';\n  const isMixedFrequency = options.timeAxisType === 'mixedFrequency';\n  const isRegularTimeAxis =\n    options.timeAxisType === 'enabled' || options.timeAxisType === 'skipGaps';\n\n  return (context: { data: D }) => {\n    const groupValue = options.groups;\n    const timeValue = (\n      isMixedFrequency ? context.data.x : isRegularTimeAxis ? groupValue : undefined\n    ) as string;\n    return {\n      content: (\n        <VisTabularDatatip\n          tableData={getChartTabularData<K, D>(\n            context.data,\n            options.series.name || options.series.id.toString(),\n            timeValue || options.groups,\n            options.translations,\n            options.valueFormats,\n            options.timeAxisType != null,\n            options.defaultXFormatter,\n            isSeriesAssociatedToY2 ? options.defaultY2Formatter : options.defaultYFormatter,\n            options.hasXYValues\n          )}\n        />\n      ),\n      borderColor: context.data.color || options.series.color\n    };\n  };\n}\n\nexport function getAriaLabelGenerator<\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n>(\n  series: ChartSeriesData<K, D>[],\n  translations: BundleType,\n  valueFormats: ValueFormats | undefined,\n  leafGroupsInfo: GroupLevelItem[],\n  xAxis: GroupAxisProps | TimeAxisProps | undefined,\n  isDataXAxis: boolean,\n  getGroupFromPath: (path: number[]) => string[],\n  xDefaultLabelFormatter?: (value: number) => string,\n  yDefaultLabelFormatter?: (value: number) => string,\n  y2DefaultLabelFormatter?: (value: number) => string\n) {\n  const getItemAriaLabel = (\n    data: D,\n    seriesIndex: number,\n    groupIndex: number,\n    isSelectionEnabled: boolean,\n    isSelected: boolean,\n    isDrillable: boolean\n  ) => {\n    let accLabel = data.accessibleLabel;\n    if (!accLabel) {\n      const _series = series[seriesIndex];\n      const isAssociatedToY2 = _series.associatedYAxis === 'y2';\n      const groupValue = getGroupFromPath(leafGroupsInfo[groupIndex].path);\n      const timeValue = (\n        (xAxis as TimeAxisProps)?.timeAxisType === 'mixedFrequency'\n          ? data.x\n          : (xAxis as TimeAxisProps)?.timeAxisType === 'enabled'\n          ? groupValue\n          : undefined\n      ) as string;\n\n      const tababularData = getChartTabularData(\n        data,\n        _series.name || _series.id.toString(),\n        timeValue || groupValue,\n        translations,\n        valueFormats,\n        (xAxis as TimeAxisProps)?.timeAxisType != null,\n        xDefaultLabelFormatter,\n        isAssociatedToY2 ? y2DefaultLabelFormatter : yDefaultLabelFormatter,\n        isDataXAxis\n      );\n      accLabel = tababularData\n        .map(({ key, value }) => `${key ? key + ':' : ''} ${value}`)\n        .join(', ');\n    }\n    return generateAriaLabel(translations, accLabel, {\n      isSelected: !isSelectionEnabled ? undefined : isSelected,\n      isDrillable\n    });\n  };\n\n  return getItemAriaLabel;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren } from 'preact';\nimport { useDatatip } from '#hooks/PRIVATE_useDatatip';\nimport { calculateOffset } from '#utils/PRIVATE_visLayoutUtils/layoutUtils';\nimport { DataCursorPosition, Info, Scale, ValueFormats } from '#utils/UNSAFE_visTypes/chart';\nimport { BarItemData, BarSeriesData } from '#UNSAFE_BarChart/barChart.types';\nimport { Dimension } from '#utils/UNSAFE_visTypes/common';\nimport { getDefaultDatatipRenderer } from '#utils/PRIVATE_chartUtils/dataTipUtils';\nimport { LineAreaItem, LineAreaSeriesData } from '#UNSAFE_LineAreaChart/lineAreaChart.types';\nimport { getColorRamp } from '#utils/UNSAFE_visUtils';\nimport { Placement } from '#UNSAFE_Floating';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport { Property } from 'csstype';\nimport { ScatterItem } from '#UNSAFE_ScatterChart/scatterChart.types';\nimport { GroupLevelItem } from '#PRIVATE_Axis/groupAxis/hierarchicalUtils';\nimport { BundleType } from '#resources/nls/bundle';\n\ntype Props<\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n> = {\n  series: (BarSeriesData<K, D> | LineAreaSeriesData<K, D>)[];\n  leafGroupsInfo: GroupLevelItem[];\n  isDataCursorEnabled?: boolean;\n  dataCursorPosition?: DataCursorPosition;\n  isHoriz: boolean;\n  getDataItemPos: (seriesIndex: number, groupIndex: number) => Dimension | undefined;\n  datatip?: (context: {\n    data: D;\n    seriesIndex: number;\n    groupIndex: number;\n    id: K;\n    groupPath: number[];\n  }) => {\n    content: ComponentChildren;\n    borderColor?: Property.BorderColor;\n  };\n  xScale: Scale;\n  getDataItem: (seriesIndex: number, groupIndex: number, groupPath: number[]) => D | undefined;\n  hoveredItemInfo?: Info;\n  focusedItemInfo?: Info;\n  width: number;\n  height: number;\n  valueFormats?: ValueFormats;\n  findNearest: (x: number, y?: number, y2?: number) => any;\n  timeAxisType?: 'mixedFrequency' | 'skipGaps' | 'enabled';\n  touchResponse: 'touchStart' | 'touchHold';\n  isDisabled: boolean;\n  defaultXFormatter?: (value: number) => string;\n  defaultYFormatter?: (value: number) => string;\n  defaultY2Formatter?: (value: number) => string;\n  hasXYValues?: boolean;\n  getGroupFromPath: (path: number[]) => string[];\n  translations: BundleType;\n};\nconst DATA_CURSOR_OFFSET = 10;\n\nexport const useChartDatatip = <\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n>({\n  isDataCursorEnabled,\n  dataCursorPosition,\n  isHoriz,\n  datatip,\n  xScale,\n  getDataItem,\n  getDataItemPos,\n  hoveredItemInfo,\n  focusedItemInfo,\n  series,\n  valueFormats,\n  leafGroupsInfo,\n  width,\n  height,\n  findNearest,\n  timeAxisType,\n  touchResponse,\n  isDisabled,\n  defaultXFormatter,\n  defaultYFormatter,\n  defaultY2Formatter,\n  hasXYValues,\n  translations,\n  getGroupFromPath\n}: Props<K, D>) => {\n  const hasData = leafGroupsInfo.length > 0 && series.length > 0;\n  let activeInfo = !hasData\n    ? undefined\n    : !isDisabled\n    ? focusedItemInfo?.isCurrent\n      ? focusedItemInfo\n      : hoveredItemInfo?.isCurrent &&\n        hoveredItemInfo.seriesIndex !== undefined &&\n        hoveredItemInfo.groupIndex !== undefined\n      ? hoveredItemInfo\n      : undefined\n    : undefined;\n\n  const anchor = focusedItemInfo?.isCurrent || isDataCursorEnabled ? 'element' : 'pointer';\n  const elementBounds = focusedItemInfo?.isCurrent\n    ? getDataItemPos(focusedItemInfo.seriesIndex!, focusedItemInfo.groupIndex!)\n    : undefined;\n\n  const { direction } = useUser();\n  const isRtl = direction === 'rtl';\n\n  let placement = 'top-start' as Placement;\n  let offset = calculateOffset(isRtl, width, elementBounds);\n\n  if (\n    isDataCursorEnabled &&\n    dataCursorPosition?.x != null &&\n    (dataCursorPosition?.y != null || dataCursorPosition?.y2 != null)\n  ) {\n    const neareast = findNearest(dataCursorPosition.x, dataCursorPosition.y, dataCursorPosition.y2);\n    activeInfo = activeInfo || neareast;\n    // TOD0: The offset for data cursor should be calculated according to\n    // datatip content dimensions as well.\n    const xPos = xScale.transform(dataCursorPosition.x);\n    offset = { mainAxis: -1, crossAxis: -1 };\n    if (isHoriz) {\n      placement = 'end';\n      offset.mainAxis = -1 * DATA_CURSOR_OFFSET;\n      offset.crossAxis = xPos - height / 2;\n    } else {\n      placement = 'top';\n      offset.crossAxis = isRtl ? width / 2 - xPos : xPos - width / 2;\n      offset.mainAxis = -1 * DATA_CURSOR_OFFSET;\n    }\n  }\n\n  let dtContent;\n  let item: D | undefined;\n  if (activeInfo?.seriesIndex != null && activeInfo?.groupIndex != null) {\n    item = getDataItem(\n      activeInfo.seriesIndex,\n      activeInfo.groupIndex!,\n      leafGroupsInfo[activeInfo.groupIndex].path\n    );\n    const datatipContext = item\n      ? {\n          data: item,\n          seriesIndex: activeInfo.seriesIndex,\n          groupIndex: activeInfo.groupIndex,\n          id: item.id,\n          groupPath: leafGroupsInfo[activeInfo.groupIndex].path\n        }\n      : undefined;\n\n    if (datatipContext) {\n      const datatipRenderer =\n        datatip ||\n        getDefaultDatatipRenderer({\n          series: series[activeInfo.seriesIndex],\n          groups: getGroupFromPath(leafGroupsInfo[activeInfo.groupIndex].path),\n          translations,\n          valueFormats,\n          timeAxisType,\n          defaultXFormatter,\n          defaultYFormatter,\n          defaultY2Formatter,\n          hasXYValues\n        });\n      dtContent = datatipRenderer(datatipContext);\n    }\n  }\n  const colors = getColorRamp();\n  const borderColor =\n    dtContent?.borderColor ||\n    (activeInfo &&\n      ((series[activeInfo.seriesIndex!] as BarSeriesData<K, D>)?.color ||\n        (series[activeInfo.seriesIndex!] as LineAreaSeriesData<K, D>)?.lineColor ||\n        (series[activeInfo.seriesIndex!] as LineAreaSeriesData<K, D>)?.areaColor)) ||\n    (activeInfo && colors[activeInfo.seriesIndex! % colors.length]);\n\n  const { datatipContent, datatipProps } = useDatatip({\n    content: dtContent?.content,\n    anchor,\n    placement,\n    offset,\n    borderColor,\n    touchResponse,\n    isDisabled\n  });\n\n  return { datatipContent, datatipProps };\n};\n"],"names":["_jsx"],"mappings":"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"}