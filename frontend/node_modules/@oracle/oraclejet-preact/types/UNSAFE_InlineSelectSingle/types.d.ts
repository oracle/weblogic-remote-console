/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
import type { ComponentChildren, ComponentProps } from 'preact';
import type { DataState, ListItemRendererContext, Metadata } from "../UNSAFE_Collection";
import type { Props as ListProps } from "../UNSAFE_ListView";
import type { SelectSingleFieldInput } from "../UNSAFE_SelectSingle/SelectSingleFieldInput";
import type { TestIdProps } from "../hooks/UNSAFE_useTestId";
import type { Item } from "../utils/UNSAFE_dataProvider";
import type { ItemTextType } from "../utils/UNSAFE_selectUtils";
import type { UnsafeDomHandle } from "../utils/UNSAFE_unsafeDomAccess";
import type { ValueUpdateDetail } from "../utils/UNSAFE_valueUpdateDetail";
type Key = string | number;
type Data = Record<string, unknown>;
type CommitMetadata = {
    reason: 'itemAction' | 'tabKey';
};
type PickedPropsFromListItemContext<K, D> = Pick<ListItemRendererContext<K, D>, 'data' | 'index'>;
type ItemRendererMetadata<K> = Pick<Metadata<K>, 'key' | 'suggestion'>;
type ItemRendererSelectionDetail<K> = {
    value: Set<K>;
    target: EventTarget | null;
};
type ItemRendererProps<K, D> = PickedPropsFromListItemContext<K, D> & {
    /**
     * Metadata for the item.
     */
    metadata: ItemRendererMetadata<K>;
    /**
     * User-entered search text.
     * This property will be undefined for the default, unfiltered list.
     */
    searchText?: string;
    /**
     * The selected keys in the dropdown.
     * This property will be undefined when nothing is selected.
     */
    selectedKeys?: Set<K>;
    /**
     * Callback function to trigger when the selection changes
     *
     * @param detail The selection change details
     */
    onSelectionChange: (detail: ItemRendererSelectionDetail<K>) => void;
};
type CommitDetail<K> = ValueUpdateDetail<K> & {
    reason: CommitMetadata['reason'];
};
type InlineSelectHandle = {
    focus: () => void;
    blur: () => void;
} & UnsafeDomHandle<Element>;
type InlineSelectSingleProps<K extends Key, D extends Data> = TestIdProps & {
    /**
     * The ID of an element (or space separated IDs of multiple elements) that
     * describes the input.
     */
    'aria-describedby'?: string;
    /**
     * Text to provide guidance to help the user understand what data to enter or select.
     */
    assistiveText?: string;
    /**
     * Specifies data for the dropdown list.
     *
     * Note that the <code>itemText</code> property allows for customizing the rendering
     * of each data item.
     */
    data?: DataState<K, D> | null;
    /**
     * Specifies whether the back icon should be shown.
     * <ul>
     * <li><code>'always'</code>: The back icon is always visible.</li>
     * <li><code>'never'</code>: The back icon is never visible.</li>
     * </ul>
     * @default 'never'
     */
    hasBackIcon?: 'always' | 'never';
    /**
     * Specifies whether the clear icon should be shown.
     * <ul>
     * <li><code>'conditionally'</code>: The clear icon is visible if the component has a non-empty value.</li>
     * <li><code>'never'</code>: The clear icon is never visible.</li>
     * </ul>
     * @default 'never'
     */
    hasClearIcon?: 'conditionally' | 'never';
    /**
     * Help source URL associated with the component.
     */
    helpSourceLink?: string;
    /**
     * Custom text to be rendered for the <code>helpSourceLink</code>.
     */
    helpSourceText?: string;
    /**
     * Specifies whether the component is waiting for <code>valueItem</code> to load.
     * While loading, InlineSelectSingle will show the progressive loading indicator in the text field.
     */
    isLoading?: boolean;
    /**
     * Render function for an item in the default list in the dropdown.
     */
    itemRenderer?: (itemRendererProps: ItemRendererProps<K, D>) => ComponentChildren;
    /**
     * Specifies how to get the text string to render for a data item.
     * This property can be set to either:
     * <ul>
     * <li>a string that specifies the name of a top level data attribute to render as text, or</li>
     * <li>a callback function that takes a properties object and returns the text string to
     * display.</li>
     * </ul>
     *
     * This text will be rendered for the selected <code>valueItem</code> of the component.
     * It will also be rendered for each item in the dropdown.  When rendered for the
     * dropdown items, default matching search term highlighting will still be applied.
     */
    itemText: ItemTextType<K, D>;
    /**
     * Specifies the label associated with the field.
     */
    label: string;
    /**
     * A short hint to display before the user selects or enters a value.
     */
    placeholder?: string;
    /**
     * Specifies how to align text within the field.
     */
    textAlign?: ComponentProps<typeof SelectSingleFieldInput>['textAlign'];
    /**
     * Specifies where the UserAssistance should be placed.
     * @default 'belowList'
     */
    userAssistancePosition?: 'aboveList' | 'belowList';
    /**
     * Specifies the key, data, and optional metadata for the selected value.
     */
    valueItem?: Item<K, D>;
    /**
     * The type of virtual keyboard to display for entering a value on mobile browsers.
     * This property has no effect on desktop browsers.
     */
    virtualKeyboard?: 'auto' | 'email' | 'number' | 'search' | 'tel' | 'text' | 'url';
    /**
     * Called when one clicks on the back icon.
     * Note: Only applicable when `hasBackIcon` is set to 'always'.
     */
    onBackIconAction?: () => void;
    /**
     * Callback invoked when the user commits the selected value.
     *
     * The function should set a new <code>valueItem</code> property.
     */
    onCommit: (detail: CommitDetail<K>) => void;
    /**
     * Callback function to trigger loading data for the dropdown list, which may or may not be
     * filtered by user entered search text.
     *
     * The function should set a new <code>DataState</code> as the <code>data</code> property.
     */
    onFilter?: ({ searchText }: {
        searchText?: string;
    }) => void;
    /**
     * Callback function to handle when the viewport of the dropdown list has changed, for example
     * by scrolling, including the case where the user scrolls to the end of the list and there are
     * more items to load.
     *
     * The function should set a new <code>DataState</code> for the specified range as the
     * <code>data</code> property.
     */
    onLoadRange?: ListProps<K, D>['onLoadRange'];
};
export type { CommitMetadata, Data, InlineSelectHandle, InlineSelectSingleProps, Key };
