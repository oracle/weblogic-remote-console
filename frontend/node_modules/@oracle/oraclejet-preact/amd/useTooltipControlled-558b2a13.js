define(['exports', 'preact/jsx-runtime', 'preact/hooks', './useId-c9578d26', './useHover-8b8a1496', './useFocus-4194fc59', './useTouch-37489bb5', './mergeProps-bcfa6a92', './useAnimation-5a74955f', './useComponentTheme-5aa41a8f', './useTestId-9afc201a', './useThemeInterpolations-14ffb628', './classNames-08d99695', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme', './useColorScheme-3022ec9a', './tooltipUtils-ae57629b'], (function(e,t,n,o,u,s,r,i,c,a,l,d,m,f,p,g){"use strict";const h=({children:e,id:o,isOpen:u,isDatatip:s,onTransitionEnd:r,testId:i,...p})=>{const g=n.useRef(null),h=n.useRef(null),T=l.useTestId(i),{baseTheme:b,variantClasses:v,styles:P}=a.useComponentTheme(f.TooltipContentRedwoodTheme,{variant:s?"datatip":"tooltip"}),E=d.useThemeInterpolations(),{nodeRef:C}=c.useAnimation(u?"mounted":"unmounted",{animationStates:{mounted:e=>{const t=e.firstChild;return{from:{maxHeight:"0",opacity:"0%"},to:{maxHeight:`${t?.offsetHeight}px`,opacity:s?"100%":"95%"},options:{duration:s?1:150,easing:[0,0,.2,1]}}},unmounted:e=>({from:{opacity:s?"100%":"95%"},to:{maxHeight:"0",opacity:"0%"},options:{duration:s?1:150,easing:[0,0,.2,1]}})},isAnimatedOnMount:!0,onAnimationEnd:()=>r?.()});return n.useEffect((()=>{g.current&&h.current?.offsetHeight&&(g.current.style.height=`${h.current?.offsetHeight}px`)}),[]),t.jsx("div",{ref:g,id:o,role:"tooltip",class:m.classNames([P.wrapper,E,b]),...T,children:t.jsx("div",{ref:C,class:P.inner,...p,children:t.jsx("div",{ref:h,class:m.classNames([v,P.content]),children:e})})})};e.TooltipContent=h,e.useTooltipControlled=({text:e,isOpen:c=!1,variant:a="tooltip",position:l="bottom",displayOnHover:d=!0,dismissOnClick:m=!0,focusStrategy:f="browser",isDisabled:T=!1,anchor:b={x:"element",y:"element"},offset:v,onToggle:P,testId:E})=>{const C=g.getGlobalTooltipManager(),x=T||!e,y=n.useRef(!0),[R,H]=n.useState(!x&&c?"mounting":"unmounted"),I=n.useRef(R),k=e=>{I.current=e,H(e)},[L,O]=n.useState(!1);O(!1);const w="datatip"===a,[A,D]=n.useState(!1),S="logical"===f,F=n.useRef(!0),{hoverProps:M,isHover:_}=u.useHover({isDisabled:!d}),{touchProps:j,isTouch:N}=r.useTouch({isDisabled:T}),{focusProps:B,isFocus:Y}=s.useFocus({isDisabled:S}),{hoverProps:G,isHover:U}=u.useHover({isDisabled:T||!c}),W="pointer"===b.x||"pointer"===b.y,$=n.useRef(o.useId()),K=n.useRef(null),X=n.useRef({x:-9999,y:-9999}),q=W&&!Y?X:K,z=w?0:g.SHOW_TOOLTIP_DELAY,J=w?0:g.HIDE_TOOLTIP_DELAY,Q=n.useRef(null),V=p.useColorScheme(),Z=n.useRef(!1),ee=n.useRef(!1),te=()=>{Q.current&&(clearTimeout(Q.current),Q.current=null)};n.useEffect((()=>{Z.current=S?A:Y&&C.isTabKeyActive(),Z.current&&(ee.current=!1)}),[Y,A,S,C]),n.useEffect((()=>{ee.current=_}),[_]),n.useEffect((()=>{F.current?F.current=!1:W&&_&&"unmounted"===R||(e=>{if(e)switch(R){case"unmounted":k("mountPending");break;case"unmounting":k("mounting"),P?.({value:!0});break;case"unmountPending":te(),k("mounted")}else switch(R){case"mounting":case"mounted":k("unmountPending");break;case"mountPending":te(),de(),k("unmounted")}})(_&&ee.current||(Y||A)&&Z.current||U||N)}),[_,Y,A,U,N,W,R,P]);const ne=n.useCallback((()=>{Z.current=!1,ee.current=!1,P?.({value:!1})}),[]),oe=n.useCallback((e=>{q.current instanceof Element&&q.current.contains(e.target)&&m&&(te(),document.removeEventListener("mousedown",oe,!0),ne())}),[m,q,ne]);n.useEffect((()=>{y.current?y.current=!1:k(c?"mounting":"unmounting")}),[c]),n.useEffect((()=>()=>{te(),Z.current=!1,ee.current=!1}),[]),n.useEffect((()=>{"mounting"===R?C.register(ne):"unmounted"===R&&(C.unregister(ne),document.removeEventListener("mousedown",oe,!0))}),[R,ne,C,oe]),n.useEffect((()=>(Q.current||"mountPending"!==R&&"unmountPending"!==R||("mountPending"===R&&document.addEventListener("mousedown",oe,!0),Q.current=setTimeout((()=>{te(),"mountPending"!==R&&"unmountPending"!==R||R!==I.current||P?.({value:"mountPending"===R})}),"mountPending"===R?z:J)),()=>{te()})),[R,z,J,P,oe]);const ue=e=>{D(!0),K.current=e,q.current=e},se=()=>{D(!1)},re=n.useCallback((e=>{K.current=e.currentTarget}),[]),ie=n.useCallback((e=>{e.eventPhase===Event.AT_TARGET&&(Z.current=!1)}),[]),ce=S?{}:{onFocus:re,onBlur:ie},ae={onMouseEnter:n.useCallback((e=>{K.current=e.target}),[])};let le;const de=()=>{X.current={x:-9999,y:-9999}};if(x)le=i.mergeProps(M,B,ae,ce);else{const e={"aria-describedby":$.current,...W&&{onMouseLeave:()=>{"mounting"!==R&&te()},onMouseMove:e=>{(e=>{if("unmounted"!==R&&("datatip"!==a||"mounted"!==R))return;const t=K?.current?.getBoundingClientRect(),n=document.body.scrollLeft+(t?.left||0)+(t?.width||0),o=document.body.scrollTop+(t?.top||0)+(t?.height||0),u="pointer"===b.x?e.clientX:n,s="pointer"===b.y?e.clientY:o;"mounted"===R?(X.current={x:u,y:s},!0!==L&&O(!0)):"unmounted"===R&&(te(),Q.current=setTimeout((()=>{"unmounted"===R&&(X.current={x:u,y:s},P?.({value:!0}))}),J))})(e)}}};le=i.mergeProps(M,B,j,ae,ce,e,S?{onLogicalFocus:ue,onLogicalBlur:se}:{})}if(x)return te(),de(),{tooltipContent:null,tooltipProps:le};const me=l,fe=t.jsx(h,{id:$.current,testId:E,isOpen:["mounting","mounted","unmountPending"].includes(R),...G,isDatatip:w,onTransitionEnd:()=>{"mounting"===R&&k("mounted"),"unmounting"===R&&(de(),k("unmounted"))},children:e}),pe=g.getWrappedTooltipContent(fe,a,V,q,me,v);return{tooltipContent:!["unmounted","mountPending"].includes(R)&&pe,tooltipProps:le}}}));
//# sourceMappingURL=useTooltipControlled-558b2a13.js.map
