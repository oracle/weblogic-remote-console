{"version":3,"file":"LabelValueLayout-efc94d8e.js","sources":["../../src/UNSAFE_LabelValueLayout/LabelValueLayout.tsx"],"sourcesContent":["import { ComponentChildren, JSX } from 'preact';\n\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { useFormContext } from '#hooks/UNSAFE_useFormContext';\nimport { useFormFieldContext } from '#hooks/UNSAFE_useFormFieldContext';\nimport { Size } from '#utils/UNSAFE_size';\nimport { labelSlotStyles, labelInnerStyles } from './LabelValueLayoutStyles.css';\nimport { useComponentTheme } from '#hooks/UNSAFE_useComponentTheme';\nimport { TextFieldRedwoodTheme } from '#UNSAFE_TextField/themes/redwood/TextFieldTheme';\nimport { LabelRedwoodTheme } from '#UNSAFE_Label/themes/redwood/LabelTheme';\nimport { FormLayoutRedwoodTheme } from '#UNSAFE_TextField/themes/redwood/FormLayoutTheme';\nimport { StyledLabelValueLayout } from './StyledLabelValueLayout';\nimport { LayoutColumnSpan } from '#utils/UNSAFE_styles/Layout';\nimport { computeStartLabelWidth } from '#utils/UNSAFE_formControlUtils';\n\ntype TextFieldProps = {\n  /**\n   * Defines how the label is going to be positioned. For a TextField only the start and top values are allowed.\n   */\n  labelEdge?: 'start' | 'top';\n  /**\n   * Specifies if the parent component is a TextField or TextArea\n   */\n  parentComponentVariant?: 'textField' | 'textArea';\n};\n\ntype FormComponentWrapperProps = {\n  /**\n   * The start, top and inside values are supported for a wrapped component.\n   */\n  labelEdge?: 'start' | 'top' | 'inside';\n  /**\n   * Specifies if the parent component is a Form Component Wrapper\n   */\n  parentComponentVariant: 'formComponentWrapper';\n  /**\n   * Specifies if there is assistive text or links at the top of the component below the label\n   */\n  hasTopUserAssistance?: boolean;\n};\n// The 'unknown' variant is used by FormGenerator when labeling a component that it does not\n// recognize as a known legacy component.  In such a case, we want to top align a start label\n// instead of centering it, for example.\ntype UnknownParentProps = {\n  /**\n   * Defines how the label is going to be positioned. For unknown types of parent components only\n   * the start and top values are allowed.\n   */\n  labelEdge?: 'start' | 'top';\n  parentComponentVariant: 'unknown';\n};\n\ntype Props = (TextFieldProps | FormComponentWrapperProps | UnknownParentProps) & {\n  /**\n   * Specifies how many columns to span in a FormLayout with direction === 'row'\n   */\n  columnSpan?: LayoutColumnSpan;\n  /**\n   * Label content of the layout\n   */\n  label?: ComponentChildren;\n  /**\n   * Defines the label width for labelEdge 'start' ('top' is always 100%)\n   */\n  labelStartWidth?: Size;\n  /**\n   * Value content of the layout\n   */\n  children: ComponentChildren;\n};\n\n/**\n * A layout component for rendering a label and value pair, used in form components\n * such as TextField, TextArea, and FormComponentWrapper.\n */\nexport const LabelValueLayout = ({\n  columnSpan = 1,\n  label,\n  labelEdge,\n  children,\n  labelStartWidth = '33%',\n  parentComponentVariant = 'textField',\n  ...rest\n}: Props) => {\n  const { baseTheme: textFieldTheme } = useComponentTheme(TextFieldRedwoodTheme);\n  const { baseTheme: labelTheme } = useComponentTheme(LabelRedwoodTheme);\n  const { baseTheme: formLayoutTheme } = useComponentTheme(FormLayoutRedwoodTheme);\n  const isTextField = parentComponentVariant.startsWith('text');\n  const isFormComponentWrapper = parentComponentVariant === 'formComponentWrapper';\n  const isUnknownParentComponentVariant = parentComponentVariant === 'unknown';\n  const isStart = labelEdge === 'start';\n  const isTop = labelEdge === 'top' || labelEdge === 'inside'; // 'inside' needs to pick up all 'top' styles.\n  const isInside = labelEdge === 'inside';\n\n  // JET-68190 - labelStartWidth needs to take columnSpan into account\n  const width = computeStartLabelWidth(labelStartWidth, columnSpan);\n\n  const valueWidth = `calc(100% - ${width})`;\n  const hasTopUserAssistance = !!(rest as FormComponentWrapperProps).hasTopUserAssistance;\n\n  const labelStyles: JSX.CSSProperties = isStart\n    ? { flexBasis: width, width: width, maxWidth: width }\n    : {};\n\n  const valueStyles: JSX.CSSProperties = isStart\n    ? { flexBasis: valueWidth, width: valueWidth, maxWidth: valueWidth }\n    : {};\n\n  const { isFormLayout, isReadonly: isFormReadonly, labelWrapping } = useFormContext();\n  const { isReadonly } = useFormFieldContext();\n  const isPureReadonly = (isFormLayout && isFormReadonly) || (!isFormLayout && isReadonly);\n\n  const labelStyleClasses = classNames([\n    formLayoutTheme,\n    labelSlotStyles.base,\n    isStart && labelSlotStyles.start,\n    isTop && labelSlotStyles.top,\n    isTop && hasTopUserAssistance && labelSlotStyles.topAndTopUA,\n    isTop && isPureReadonly && labelSlotStyles.topPureReadonly\n  ]);\n\n  const labelInnerClasses = classNames([\n    isTextField && textFieldTheme,\n    // JET-70804 - preact start label not centered when used outside of a core pack custom element\n    // always include the labelTheme so that CSS variables that LabelValueLayout depends on\n    // are always defined\n    labelTheme,\n    formLayoutTheme,\n    labelInnerStyles.base,\n    isStart && labelInnerStyles.start,\n    isUnknownParentComponentVariant && isStart && labelInnerStyles.startUnknownParent,\n    isTextField && isStart && !isPureReadonly && labelInnerStyles.startNotPureReadonly,\n    isFormComponentWrapper && isInside && labelInnerStyles.insideFormComponentWrapper,\n\n    // Form Component Wrapper\n    isFormComponentWrapper &&\n      isStart &&\n      !isPureReadonly &&\n      !hasTopUserAssistance &&\n      labelInnerStyles.startWithoutTopFormComponentWrapperUA,\n    labelWrapping === 'truncate' && labelInnerStyles.noWrap\n  ]);\n\n  return (\n    <StyledLabelValueLayout\n      // For readonly start aligned labels, we want the div that is the parent of the label to\n      // stretch to the height of the value content, including the end content (InputSensitiveText)\n      flexAlign={isReadonly && isStart ? 'stretch' : 'start'}\n      labelStyleClasses={labelStyleClasses}\n      labelStyles={labelStyles}\n      labelInnerClasses={labelInnerClasses}\n      label={label}\n      valueStyles={valueStyles}>\n      {children}\n    </StyledLabelValueLayout>\n  );\n};\n"],"names":["useComponentTheme","TextFieldRedwoodTheme","LabelRedwoodTheme","FormLayoutRedwoodTheme","computeStartLabelWidth","useFormContext","useFormFieldContext","classNames","labelSlotStyles","labelInnerStyles","_jsx","StyledLabelValueLayout"],"mappings":";;;;;;;;;;;;;;;;AAuEA;;;AAGG;AACI,MAAM,gBAAgB,GAAG,CAAC,EAC/B,UAAU,GAAG,CAAC,EACd,KAAK,EACL,SAAS,EACT,QAAQ,EACR,eAAe,GAAG,KAAK,EACvB,sBAAsB,GAAG,WAAW,EACpC,GAAG,IAAI,EACD,KAAI;IACV,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,GAAGA,mCAAiB,CAACC,oEAAqB,CAAC,CAAC;IAC/E,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,GAAGD,mCAAiB,CAACE,wDAAiB,CAAC,CAAC;IACvE,MAAM,EAAE,SAAS,EAAE,eAAe,EAAE,GAAGF,mCAAiB,CAACG,sEAAsB,CAAC,CAAC;IACjF,MAAM,WAAW,GAAG,sBAAsB,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AAC9D,IAAA,MAAM,sBAAsB,GAAG,sBAAsB,KAAK,sBAAsB,CAAC;AACjF,IAAA,MAAM,+BAA+B,GAAG,sBAAsB,KAAK,SAAS,CAAC;AAC7E,IAAA,MAAM,OAAO,GAAG,SAAS,KAAK,OAAO,CAAC;IACtC,MAAM,KAAK,GAAG,SAAS,KAAK,KAAK,IAAI,SAAS,KAAK,QAAQ,CAAC;AAC5D,IAAA,MAAM,QAAQ,GAAG,SAAS,KAAK,QAAQ,CAAC;;IAGxC,MAAM,KAAK,GAAGC,uCAAsB,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC;AAElE,IAAA,MAAM,UAAU,GAAG,CAAe,YAAA,EAAA,KAAK,GAAG,CAAC;AAC3C,IAAA,MAAM,oBAAoB,GAAG,CAAC,CAAE,IAAkC,CAAC,oBAAoB,CAAC;IAExF,MAAM,WAAW,GAAsB,OAAO;AAC5C,UAAE,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE;UACnD,EAAE,CAAC;IAEP,MAAM,WAAW,GAAsB,OAAO;AAC5C,UAAE,EAAE,SAAS,EAAE,UAAU,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE;UAClE,EAAE,CAAC;AAEP,IAAA,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,cAAc,EAAE,aAAa,EAAE,GAAGC,6BAAc,EAAE,CAAC;AACrF,IAAA,MAAM,EAAE,UAAU,EAAE,GAAGC,uCAAmB,EAAE,CAAC;AAC7C,IAAA,MAAM,cAAc,GAAG,CAAC,YAAY,IAAI,cAAc,MAAM,CAAC,YAAY,IAAI,UAAU,CAAC,CAAC;IAEzF,MAAM,iBAAiB,GAAGC,qBAAU,CAAC;QACnC,eAAe;AACf,QAAAC,sCAAe,CAAC,IAAI;QACpB,OAAO,IAAIA,sCAAe,CAAC,KAAK;QAChC,KAAK,IAAIA,sCAAe,CAAC,GAAG;AAC5B,QAAA,KAAK,IAAI,oBAAoB,IAAIA,sCAAe,CAAC,WAAW;AAC5D,QAAA,KAAK,IAAI,cAAc,IAAIA,sCAAe,CAAC,eAAe;AAC3D,KAAA,CAAC,CAAC;IAEH,MAAM,iBAAiB,GAAGD,qBAAU,CAAC;AACnC,QAAA,WAAW,IAAI,cAAc;;;;QAI7B,UAAU;QACV,eAAe;AACf,QAAAE,uCAAgB,CAAC,IAAI;QACrB,OAAO,IAAIA,uCAAgB,CAAC,KAAK;AACjC,QAAA,+BAA+B,IAAI,OAAO,IAAIA,uCAAgB,CAAC,kBAAkB;QACjF,WAAW,IAAI,OAAO,IAAI,CAAC,cAAc,IAAIA,uCAAgB,CAAC,oBAAoB;AAClF,QAAA,sBAAsB,IAAI,QAAQ,IAAIA,uCAAgB,CAAC,0BAA0B;;QAGjF,sBAAsB;YACpB,OAAO;AACP,YAAA,CAAC,cAAc;AACf,YAAA,CAAC,oBAAoB;AACrB,YAAAA,uCAAgB,CAAC,qCAAqC;AACxD,QAAA,aAAa,KAAK,UAAU,IAAIA,uCAAgB,CAAC,MAAM;AACxD,KAAA,CAAC,CAAC;IAEH,QACEC,eAACC,6CAAsB;;;;;;AAGrB,QAAA,SAAS,EAAE,UAAU,IAAI,OAAO,GAAG,SAAS,GAAG,OAAO,EACtD,iBAAiB,EAAE,iBAAiB,EACpC,WAAW,EAAE,WAAW,EACxB,iBAAiB,EAAE,iBAAiB,EACpC,KAAK,EAAE,KAAK,EACZ,WAAW,EAAE,WAAW,EAAA,QAAA,EACvB,QAAQ,EAAA,CACc,EACzB;AACJ;;;;"}