{"version":3,"file":"UNSAFE_ComboChart.js","sources":["../../src/UNSAFE_ComboChart/ComboChart.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComboChartProps, LineAreaItem } from './ComboChart.types';\nimport {\n  findNearestDataPoint,\n  getStartAndEndAxesOffset\n} from '#utils/PRIVATE_chartUtils/layoutUtils';\nimport { AreaSeries } from '#PRIVATE_LineAreaComponents/AreaSeries';\nimport { getMarkers, getSeriesData } from '#utils/PRIVATE_chartUtils/utils';\nimport { MarkersWithLabel } from '#PRIVATE_Chart/MarkersWithLabel';\nimport { getLineAreaChartNavUtil } from '#utils/PRIVATE_chartUtils/navUtils';\nimport { Chart } from '#PRIVATE_Chart';\nimport { Scale, TimeAxisProps } from '#utils/UNSAFE_visTypes/chart';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport { getColorRamp } from '#utils/UNSAFE_visUtils';\nimport { LineSeries } from '#PRIVATE_LineAreaComponents/LineSeries';\nimport { Point } from '#utils/PRIVATE_visSVGUtils';\nimport { getLineAreaSegments } from '#utils/PRIVATE_chartUtils/utils';\nimport { colorSchemeVars } from '@oracle/oraclejet-internal-theme-contract/themeContract.css';\nimport { getItemColor, getMarkerType } from '#utils/PRIVATE_chartUtils/dataStyleUtils';\nimport { BarGroup } from '#UNSAFE_BarChart/BarGroup';\nimport { getBarPosition } from '#UNSAFE_BarChart/utils/barLayoutUtils';\nimport { getLineAreaChartItemPosition } from '#PRIVATE_LineAreaComponents/utils/chartUtils';\nimport { getBarGapRatio } from '#UNSAFE_BarChart/utils/barSeriesUtils';\n\nconst LINE_WITH_AREA_OPACITY = 0.2;\n\n/**\n * The ComboChart displays information graphically using bars, lines and filled areas, making relationships among the data easier to understand.\n */\nexport function ComboChart<K extends string | number, D extends LineAreaItem<K>>({\n  width,\n  height,\n  selectedIds = [],\n  hiddenIds = [],\n  highlightedIds,\n  hideAndShowBehavior = 'none',\n  orientation = 'vertical',\n  yAxis,\n  series,\n  groups,\n  isStacked = false,\n  getDataItem,\n  selectionMode = 'none',\n  drilling = 'off',\n  dataItemGaps = 0.5,\n  dataLabelEffect = 'outline',\n  ...props\n}: ComboChartProps<K, D>) {\n  const { direction, forcedColors } = useUser();\n  const isHighContrast = forcedColors === 'active';\n  const filteredBarSeries = series.filter((currentSeries) => currentSeries.type === 'bar');\n  const isRtl = direction === 'rtl';\n  const isLog = yAxis?.scale === 'log';\n  const timeAxisType = (props.xAxis as TimeAxisProps)?.timeAxisType;\n  const hiddenSet = new Set(hiddenIds);\n  const selectedSet = new Set(selectedIds);\n  const highlightedSet = new Set(highlightedIds);\n  const isHoriz = orientation === 'horizontal';\n  const colors = getColorRamp();\n  // TODO: JET-71332 ; should only be (number | undefined)[][]\n  // remove the type inference from scatter chart item.\n  let renderedSeries = getSeriesData<K, D>(\n    series.length,\n    groups.length,\n    getDataItem,\n    hiddenSet,\n    isLog\n  );\n\n  const renderedGetDataItem = (seriesIndex: number, groupIndex: number): D | undefined => {\n    if (!isStacked) return getDataItem(seriesIndex, groupIndex);\n    return {\n      ...getDataItem(seriesIndex, groupIndex),\n      value: renderedSeries[seriesIndex][groupIndex]\n    } as D;\n  };\n\n  const getGapRatio = () => {\n    return 1;\n  };\n\n  const getNextChartItemFunc = (startIndex: number, endIndex: number) => {\n    // TODO: JET-71332\n    //@ts-ignore\n    return getLineAreaChartNavUtil<D>(\n      getDataItem,\n      series.length,\n      startIndex,\n      endIndex,\n      isStacked,\n      isRtl,\n      isHoriz\n    );\n  };\n  const isSplitDualY = typeof props.y2Axis?.split === 'number';\n  const getDataItemPos = (\n    xScale: Scale,\n    yScale: Scale,\n    y2Scale: Scale,\n    axisStepWidth: number,\n    averageGroupZ: number,\n    gapRatio: number\n  ) => {\n    const _getBarPosition = hasBar\n      ? getBarPosition(\n          filteredBarSeries,\n          groups,\n          getDataItem,\n          xScale,\n          yScale,\n          y2Scale,\n          hiddenSet,\n          dataItemGaps,\n          axisStepWidth,\n          averageGroupZ,\n          gapRatio,\n          yAxis?.scale === 'log',\n          isStacked,\n          isRtl,\n          isHoriz,\n          isSplitDualY,\n          timeAxisType\n        )\n      : undefined;\n\n    return (seriesIndex: number, groupIndex: number) => {\n      const seriesItem = series[seriesIndex];\n      if (seriesItem.type === 'bar') {\n        return _getBarPosition ? _getBarPosition(seriesIndex, groupIndex) : undefined;\n      } else {\n        return getLineAreaChartItemPosition(\n          seriesIndex,\n          groupIndex,\n          renderedSeries,\n          getDataItem,\n          groups,\n          isHoriz,\n          xScale,\n          yScale,\n          timeAxisType\n        );\n      }\n    };\n  };\n\n  const getMarkerColorAndType = (seriesIndex: number, groupIndex: number) => {\n    const color = getItemColor(seriesIndex, groupIndex, series, getDataItem);\n    const markerType = getMarkerType(seriesIndex, groupIndex, getDataItem);\n    return { color, markerType };\n  };\n\n  const findNearest = (xScale: Scale, yScale: Scale, y2Scale: Scale) => {\n    const getSeriesDataInfo = () => {\n      return {\n        offset: 0,\n        dataWidth: 0\n      };\n    };\n\n    const getYCoord = (value: number, yScale: Scale) => {\n      return yScale.transform(value);\n    };\n\n    return findNearestDataPoint<K, D>(\n      series,\n      groups,\n      xScale,\n      yScale,\n      renderedGetDataItem,\n      isStacked,\n      getSeriesDataInfo,\n      getYCoord,\n      isLog,\n      0,\n      hiddenSet,\n      timeAxisType,\n      y2Scale\n    );\n  };\n  const markers = getMarkers();\n\n  const allLineSegmentCoords: Point[][] = [];\n\n  const { hasBar, hasCenteredSeries, hasUncenteredSeries, hasArea } = (\n    series as { lineType: string; type: string }[]\n  ).reduce(\n    (acc, s) => {\n      return {\n        hasArea: acc.hasArea || s.type === 'area' || s.type === 'lineWithArea',\n        hasBar: acc.hasBar || s.type === 'bar',\n        hasCenteredSeries:\n          acc.hasCenteredSeries ||\n          s.lineType === 'centeredSegmented' ||\n          s.lineType === 'centeredStepped',\n        hasUncenteredSeries:\n          acc.hasUncenteredSeries || s.lineType === 'segmented' || s.lineType === 'stepped'\n      };\n    },\n    { hasBar: false, hasCenteredSeries: false, hasUncenteredSeries: false, hasArea: false }\n  );\n\n  const getOffset = (groupCount: number) => {\n    return getStartAndEndAxesOffset(\n      hasCenteredSeries,\n      hasUncenteredSeries,\n      isHoriz,\n      groupCount,\n      hasBar\n    );\n  };\n\n  return (\n    <Chart\n      width={width}\n      height={height}\n      selectedIds={selectedSet}\n      hiddenIds={hiddenIds}\n      hideAndShowBehavior={hideAndShowBehavior}\n      orientation={orientation}\n      yAxis={yAxis}\n      series={series}\n      defaultOverviewContentRenderer={() => {\n        return <OverviewComboChart groups={groups} series={series} getDataItem={getDataItem} />;\n      }}\n      groups={groups}\n      selectionMode={selectionMode}\n      drilling={drilling}\n      isStacked={isStacked}\n      getDataItem={getDataItem}\n      findNearest={findNearest}\n      getDataItemPos={getDataItemPos}\n      getMarkerInfo={getMarkerColorAndType}\n      renderGridLinesInFront={hasArea}\n      getNavUtil={getNextChartItemFunc}\n      getGapRatio={getGapRatio}\n      getStartAndEndAxesOffset={getOffset}\n      isRtl={isRtl}\n      {...props}>\n      {({\n        xStartIndex,\n        xEndIndex,\n        xScale,\n        groupsInfo,\n        yScale,\n        y2Scale,\n        activeId,\n        focusedItemInfo,\n        hoveredItemInfo,\n        isPointInsideMarquee,\n        getTextDimensions,\n        defaultFontSize,\n        axisStepWidth,\n        averageGroupZ,\n        getItemAriaLabel,\n        plotAreaClipPathId\n      }) => {\n        let barSeriesIndex = -1;\n        const leafGroups = groupsInfo.map(({ item }) => item);\n        renderedSeries = getSeriesData<K, D>(\n          series.length,\n          leafGroups.length,\n          getDataItem,\n          hiddenSet,\n          isLog\n        );\n\n        return (\n          <>\n            {renderedSeries.map((valueSeries, index) => {\n              const currentSeries = series[index];\n              const isAssociatedToY2 = currentSeries.associatedYAxis === 'y2';\n              const areaOpacity =\n                currentSeries.type === 'lineWithArea' ? LINE_WITH_AREA_OPACITY : 1;\n              const isAreaRendered =\n                currentSeries.type === 'area' || currentSeries.type === 'lineWithArea';\n              const isContrastLineNeeded = currentSeries.type === 'area';\n\n              if (valueSeries.length === 0) {\n                return;\n              }\n\n              const lineSegmentCoords: Point[][] = getLineAreaSegments<K, D>(\n                isAssociatedToY2 ? y2Scale : yScale,\n                xScale,\n                valueSeries,\n                xStartIndex,\n                xEndIndex,\n                isLog,\n                leafGroups,\n                index,\n                renderedGetDataItem,\n                timeAxisType\n              );\n              allLineSegmentCoords[index] = lineSegmentCoords[0];\n              const isBottomSegmentCurved =\n                currentSeries.type !== 'bar'\n                  ? currentSeries.lineType === 'curved' &&\n                    isStacked &&\n                    renderedSeries.length > 1 &&\n                    index > 0\n                  : isStacked && renderedSeries.length > 1 && index > 0;\n\n              const isHighlighted =\n                highlightedIds === undefined ||\n                highlightedSet.size === 0 ||\n                highlightedSet.has(currentSeries.id);\n\n              const prevCoords =\n                isStacked && index != 0\n                  ? allLineSegmentCoords.reduce((prevValue, newValue, j) => {\n                      // find the index i such that i < index, and series i  has at least\n                      // one or more data item unhidden. Only such series will can be\n                      // used as bottomCoord for current series. Otherwise we have to use\n                      // baseline coord\n                      if (j >= index) {\n                        return prevValue;\n                      }\n                      if (newValue.length > 0) {\n                        return j;\n                      }\n                      return prevValue;\n                    }, 0)\n                  : undefined;\n              if (currentSeries.type === 'bar') barSeriesIndex = barSeriesIndex + 1;\n              return (\n                <>\n                  {currentSeries.type === 'bar' &&\n                    leafGroups.slice(xStartIndex, xEndIndex + 1).map((_, index) => {\n                      const barGroup = (\n                        <BarGroup\n                          plotAreaClipPathId={plotAreaClipPathId}\n                          yScale={yScale}\n                          y2Scale={y2Scale}\n                          xScale={xScale}\n                          splitDualY={isSplitDualY}\n                          groupIndex={index + xStartIndex}\n                          selectedIds={selectedSet}\n                          hiddenIds={hiddenSet}\n                          highlightedIds={highlightedIds ? highlightedSet : highlightedIds}\n                          isDrillEnabled={drilling === 'on'}\n                          series={filteredBarSeries}\n                          barGapRatio={getBarGapRatio(isStacked, xStartIndex, xEndIndex)}\n                          dataItemGaps={dataItemGaps}\n                          isPointInsideMarquee={isPointInsideMarquee}\n                          isStacked={isStacked}\n                          axisStepWidth={axisStepWidth}\n                          averageGroupZ={averageGroupZ!}\n                          group={leafGroups[index]}\n                          timeAxisType={(props.xAxis as TimeAxisProps)?.timeAxisType}\n                          colors={colors}\n                          activeId={activeId}\n                          isLog={yAxis?.scale === 'log'}\n                          orientation={orientation}\n                          getDataItem={getDataItem}\n                          isSelectionEnabled={selectionMode != 'none'}\n                          isRtl={isRtl}\n                          focusedItemInfo={focusedItemInfo}\n                          hoveredItemInfo={hoveredItemInfo}\n                          getTextDimensions={getTextDimensions}\n                          defaultFontSize={defaultFontSize}\n                          seriesIndex={barSeriesIndex}\n                          getItemAriaLabel={getItemAriaLabel}\n                        />\n                      );\n\n                      return barGroup;\n                    })}\n                  {isAreaRendered && (\n                    <AreaSeries\n                      yScale={isAssociatedToY2 ? y2Scale : yScale}\n                      plotAreaClipPathId={plotAreaClipPathId}\n                      lineType={currentSeries.lineType}\n                      color={currentSeries.areaColor || colors[index % colors.length]}\n                      isHorizontal={isHoriz}\n                      areaColorOpacity={areaOpacity}\n                      isBottomSegmentCurved={isBottomSegmentCurved}\n                      bottomCoords={\n                        prevCoords !== undefined &&\n                        allLineSegmentCoords[prevCoords].some((value) => value != null)\n                          ? allLineSegmentCoords[prevCoords]\n                          : undefined\n                      }\n                      lineSegments={lineSegmentCoords}\n                      isLog={isLog}\n                      isHighlighted={isHighlighted}\n                      seriesIndex={index}\n                      groupWidth={axisStepWidth}\n                      isRtl={isRtl}\n                      timeAxisType={timeAxisType}\n                    />\n                  )}\n                  {currentSeries.type === 'line' && (\n                    <LineSeries\n                      plotAreaClipPathId={plotAreaClipPathId}\n                      lineType={currentSeries.lineType}\n                      lineColor={\n                        isContrastLineNeeded\n                          ? colorSchemeVars.dvt.contrastLine\n                          : currentSeries.lineColor\n                      }\n                      lineWidth={isContrastLineNeeded ? 1.25 : currentSeries.lineWidth}\n                      lineStyle={currentSeries.lineStyle || 'solid'}\n                      color={currentSeries.lineColor || colors[index % colors.length]}\n                      lineSegmentCoords={lineSegmentCoords}\n                      isHorizontal={isHoriz}\n                      isHighlighted={isHighlighted}\n                      seriesIndex={index}\n                      groupWidth={axisStepWidth}\n                      isRtl={isRtl}\n                      timeAxisType={timeAxisType}\n                    />\n                  )}\n                  {\n                    /*for non stacked charts, markers should render in the order of series.\n                     some markers might get hidden behind area but this preserves the legacy behavior. */\n                    !isStacked && (currentSeries.type === 'line' || isAreaRendered) && (\n                      <MarkersWithLabel\n                        yScale={isAssociatedToY2 ? y2Scale : yScale}\n                        xScale={xScale}\n                        groups={leafGroups}\n                        series={currentSeries}\n                        timeAxisType={timeAxisType}\n                        color={\n                          colors[\n                            index % colors.length\n                          ] /* TODO : make this use getItemColor function from dataStyleUtils. */\n                        }\n                        seriesIndex={index}\n                        startIndex={xStartIndex}\n                        endIndex={xEndIndex}\n                        markerType={markers[index % markers.length]}\n                        orientation={orientation}\n                        isLog={isLog}\n                        activeId={activeId}\n                        getDataItem={getDataItem}\n                        isPointInsideMarquee={isPointInsideMarquee}\n                        selectedIds={selectedSet}\n                        focusedItemIndex={\n                          focusedItemInfo.seriesIndex === index &&\n                          focusedItemInfo.isFocusVisible &&\n                          !(props.isDataCursorEnabled && props.dataCursorStyle?.isMarkerDisplayed)\n                            ? focusedItemInfo.groupIndex\n                            : undefined\n                        }\n                        hoveredItemIndex={\n                          hoveredItemInfo?.isCurrent && hoveredItemInfo.seriesIndex === index\n                            ? hoveredItemInfo.groupIndex\n                            : undefined\n                        }\n                        isSelectionEnabled={\n                          selectionMode === 'single' || selectionMode === 'multiple'\n                        }\n                        isDrillEnabled={drilling === 'on'}\n                        defaultFontSize={defaultFontSize}\n                        dataLabelEffect={dataLabelEffect}\n                        isHighContrast={isHighContrast}\n                        getItemAriaLabel={getItemAriaLabel}\n                      />\n                    )\n                  }\n                </>\n              );\n            })}\n          </>\n          //TODO - handle isStack part\n        );\n      }}\n    </Chart>\n  );\n}\n\nfunction OverviewComboChart<K extends string | number, D extends LineAreaItem<K>>(\n  props: ComboChartProps<K, D>\n) {\n  return (\n    <ComboChart\n      datatip={() => ({ content: '' })}\n      zoomAndScroll=\"off\"\n      plotArea={{\n        yMajorTick: {\n          isRendered: false\n        },\n        xMajorTick: {}\n      }}\n      xAxis={{\n        tickLabel: {\n          autoRotate: false,\n          // @ts-ignore\n          isRendered: props.xAxis?.timeAxisType ? true : false\n        }\n      }}\n      series={props.series}\n      groups={props.groups}\n      getDataItem={props.getDataItem}\n      yAxis={{\n        tickLabel: {\n          isRendered: false\n        }\n      }}\n      overview=\"off\"\n    />\n  );\n}\n"],"names":["useUser","getColorRamp","getSeriesData","getLineAreaChartNavUtil","getBarPosition","getLineAreaChartItemPosition","getItemColor","getMarkerType","findNearestDataPoint","getMarkers","getStartAndEndAxesOffset","_jsx","Chart","_Fragment","getLineAreaSegments","_jsxs","BarGroup","getBarGapRatio","AreaSeries","LineSeries","colorSchemeVars","MarkersWithLabel"],"mappings":"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"}