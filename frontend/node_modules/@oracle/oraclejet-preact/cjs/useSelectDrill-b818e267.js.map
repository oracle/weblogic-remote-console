{"version":3,"file":"useSelectDrill-b818e267.js","sources":["../../src/hooks/PRIVATE_useChartEvents/useDatatipAndCursor.ts","../../src/hooks/PRIVATE_useChartEvents/useSelectDrill.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { useChartDataCursor } from '#hooks/PRIVATE_useChartDataCursor';\nimport { useChartDatatip } from '#hooks/PRIVATE_useChartDatatip';\nimport { LineAreaItem } from '#UNSAFE_LineAreaChart/lineAreaChart.types';\nimport { ScatterItem } from '#UNSAFE_ScatterChart/scatterChart.types';\nimport { BarItemData } from '#UNSAFE_BarChart/barChart.types';\n\ntype DataCursorProps = Parameters<typeof useChartDataCursor>[0];\ntype DatatipProps<\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n> = Parameters<typeof useChartDatatip<K, D>>[0];\n\nexport function useChartDatatipAndCursor<\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n>({\n  series,\n  leafGroupsInfo,\n  width,\n  height,\n  findNearest,\n  getMarkerInfo,\n  onDataCursorPositionChange,\n  isDataCursorEnabled,\n  dataCursorPosition,\n  dataCursorStyle,\n  hoveredItemInfo,\n  focusedItemInfo,\n  getDataItem,\n  getDataItemPos,\n  datatip,\n  valueFormats,\n  isHoriz,\n  xScale,\n  yScale,\n  y2Scale,\n  plotAreaSpace,\n  timeAxisType,\n  touchResponse,\n  isDisabled,\n  defaultXFormatter,\n  defaultYFormatter,\n  defaultY2Formatter,\n  hasXYValues,\n  getGroupFromPath,\n  translations\n}: DataCursorProps & DatatipProps<K, D>) {\n  const { datatipContent, datatipProps } = useChartDatatip<K, D>({\n    series,\n    leafGroupsInfo,\n    width,\n    height,\n    isDataCursorEnabled,\n    dataCursorPosition,\n    hoveredItemInfo,\n    getDataItem,\n    getDataItemPos,\n    focusedItemInfo,\n    datatip,\n    valueFormats,\n    isHoriz,\n    xScale,\n    findNearest,\n    timeAxisType,\n    touchResponse,\n    isDisabled,\n    defaultXFormatter,\n    defaultYFormatter,\n    defaultY2Formatter,\n    hasXYValues,\n    translations,\n    getGroupFromPath\n  });\n\n  const { dataCursorContent, dataCursorProps } = useChartDataCursor({\n    touchResponse,\n    findNearest,\n    dataCursorPosition,\n    onDataCursorPositionChange,\n    isDataCursorEnabled,\n    dataCursorStyle,\n    isHoriz,\n    getMarkerInfo,\n    focusedItemInfo,\n    plotAreaSpace,\n    yScale,\n    y2Scale,\n    xScale,\n    getDataItemPos\n  });\n\n  return {\n    datatipContent,\n    dataCursorContent,\n    datatipProps: mergeProps(dataCursorProps, datatipProps)\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getInfo } from '#utils/UNSAFE_visUtils';\nimport { useChartDrill } from '#hooks/PRIVATE_useChartDrill';\nimport { useSelection } from '#hooks/PRIVATE_useVisSelection/useSelection';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { BarItemData } from '#UNSAFE_BarChart/barChart.types';\nimport { LineAreaItem } from '#UNSAFE_LineAreaChart/lineAreaChart.types';\nimport { ScatterItem } from '#UNSAFE_ScatterChart/scatterChart.types';\n\ntype DrillProps<K, D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>> = Parameters<\n  typeof useChartDrill<K, D>\n>[0];\n\ntype SelectionProps<K, D> = {\n  selection: K[];\n  onChange?: (detail: { ids: K[]; data: (D | undefined)[] }) => void;\n  getDataById: (id: K) => D | undefined;\n  ignoreAsTrigger?: (element: EventTarget | null) => boolean;\n};\n\nexport function useSelectDrill<K, D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>>({\n  selectionMode,\n  selection,\n  onChange,\n  rootRef,\n  drilling,\n  onItemDrill,\n  onGroupDrill,\n  focusedGroupInfo,\n  focusedItemInfo,\n  levelsArray,\n  getDataItem,\n  getDataById,\n  ignoreAsTrigger\n}: DrillProps<K, D> & SelectionProps<K, D>) {\n  const idExtracter = (event: Event): K | undefined => {\n    const isItemFocused = focusedItemInfo.isCurrent;\n    const info =\n      isItemFocused && event.type === 'keyup'\n        ? focusedItemInfo\n        : getInfo(rootRef, event.target as HTMLElement);\n    return info && info.seriesIndex != null && info.groupIndex != null\n      ? getDataItem(\n          info.seriesIndex,\n          info.groupIndex,\n          levelsArray[levelsArray.length - 1][info.groupIndex].path\n        )?.id\n      : undefined;\n  };\n\n  const { selectionProps, selectionContent } = useSelection<K, D>({\n    idExtracter,\n    isDrillEnabled: drilling === 'on',\n    selection,\n    selectionMode,\n    onChange,\n    getDataById,\n    ignoreAsTrigger\n  });\n\n  const drillProps = useChartDrill<K, D>({\n    rootRef,\n    selectionMode,\n    drilling,\n    focusedItemInfo,\n    focusedGroupInfo,\n    levelsArray,\n    getDataItem,\n    onItemDrill,\n    onGroupDrill\n  });\n\n  return { selectDrillProps: mergeProps(selectionProps, drillProps), selectionContent };\n}\n"],"names":["useChartDatatip","useChartDataCursor","mergeProps","getInfo","useSelection","useChartDrill"],"mappings":"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"}