{"version":3,"file":"chartUtils-84b671f7.js","sources":["../../src/utils/PRIVATE_visSVGUtils/areaUtils.ts","../../src/PRIVATE_LineAreaComponents/AreaSeries.tsx","../../src/PRIVATE_LineAreaComponents/utils/chartUtils.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2008 %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getCmdPoints } from '#utils/PRIVATE_chartUtils/utils';\nimport { AllLineType } from '#utils/UNSAFE_visTypes/common/common.types';\nimport { fixCoord, Point } from './lineUtils';\nimport { curveThroughPoints } from './pathUtils';\n\n/**\n * Returns a straight area path command.\n * @param {array} lineSegmentCoords Polyline top points array.\n * @param {array} bottomCoords Polyline bottom points array.\n * @return {string} Straight area path commands.\n */\nexport function getNonCurveAreaPath(\n  lineSegmentCoords: Point[],\n  bottomCoords: Point[],\n  areaType: AllLineType,\n  isHoriz: boolean,\n  isRtl: boolean,\n  groupWidth?: number,\n  timeAxisType?: 'enabled' | 'skipGaps' | 'mixedFrequency'\n) {\n  // Create the path data string\n  const highCoords = getCmdPoints(\n    lineSegmentCoords,\n    areaType,\n    isHoriz,\n    isRtl,\n    groupWidth,\n    timeAxisType,\n    true\n  ).split(',');\n  const lowCoords = getCmdPoints(\n    bottomCoords,\n    areaType,\n    isHoriz,\n    isRtl,\n    groupWidth,\n    timeAxisType,\n    true\n  ).split(',');\n\n  // Reverse the lowArray\n  const revLowArray = [];\n  for (let i = 0; i < lowCoords.length; i += 2) {\n    revLowArray.unshift(lowCoords[i], lowCoords[i + 1]);\n  }\n  return revLowArray.concat(highCoords);\n}\n\n/**\n * Returns a curved area path command, based on cubic hermite splines, that goes through the points in the points array.\n * @param {array} lineSegmentCoords Polyline top points array.\n * @param {array} bottomCoords Polyline bottom points array.\n * @param {boolean} connectWithLine Whether the first point is reached using lineTo. Otherwise, moveTo is used.\n * @param {string} splineType The spline type.\n * @return {string} Curved area path commands.\n */\nexport function getCurveAreaPath(\n  lineSegmentCoords: Point[],\n  bottomCoords: Point[],\n  connectWithLine: boolean,\n  splineType: string,\n  isBottomSegmentCurved?: boolean\n) {\n  let pathData;\n  if (lineSegmentCoords.length > 0) {\n    if (!isBottomSegmentCurved) {\n      pathData =\n        curveThroughPoints(lineSegmentCoords, connectWithLine, splineType) +\n        [...bottomCoords]\n          .reverse()\n          .map((bottomCoord) => {\n            return `L ${bottomCoord[0]} ${bottomCoord[1]}`;\n          })\n          .join(' ') +\n        'Z';\n    } else {\n      pathData =\n        curveThroughPoints(lineSegmentCoords, false, splineType) +\n        ' ' +\n        curveThroughPoints([...bottomCoords].reverse(), true, splineType) +\n        ' Z';\n    }\n  }\n  return pathData;\n}\n\nexport function getCmdsForArea(\n  lineSegmentCoords: Point[],\n  bottomCoords: Point[],\n  areaType: AllLineType,\n  isHoriz: boolean,\n  isBottomSegmentCurved: boolean,\n  isRtl: boolean,\n  groupWidth?: number,\n  timeAxisType?: 'enabled' | 'skipGaps' | 'mixedFrequency'\n) {\n  const l = lineSegmentCoords.map((coord) => fixCoord(coord, isHoriz));\n  const b = bottomCoords.map((coord) => fixCoord(coord, isHoriz));\n  if (areaType === 'curved') {\n    return getCurveAreaPath(l, b, false, isHoriz ? 'mh' : 'mv', isBottomSegmentCurved);\n  } else {\n    return getNonCurveAreaPath(\n      lineSegmentCoords,\n      bottomCoords,\n      areaType,\n      isHoriz,\n      isRtl,\n      groupWidth,\n      timeAxisType\n    ).join(' ');\n  }\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ColorProps } from '#utils/UNSAFE_interpolations/colors';\nimport { isNonCurvedLine } from '#utils/PRIVATE_chartUtils/utils';\nimport { Point } from '#utils/PRIVATE_visSVGUtils';\nimport { Scale } from '#utils/UNSAFE_visTypes/chart';\nimport { dvtVars } from '@oracle/oraclejet-internal-theme-contract/themeContract.css';\nimport { AllLineType } from '#utils/UNSAFE_visTypes/common/common.types';\nimport { getCmdsForArea } from '#utils/PRIVATE_visSVGUtils/areaUtils';\n\ntype AreaSeriesProps = {\n  yScale: Scale;\n  color: ColorProps['color'];\n  lineType?: AllLineType;\n  isHorizontal: boolean;\n  isLog: boolean;\n  areaColorOpacity: number;\n  lineSegments: Point[][];\n  bottomCoords?: Point[];\n  isHighlighted: boolean;\n  isBottomSegmentCurved: boolean;\n  seriesIndex: number;\n  isRtl: boolean;\n  groupWidth?: number;\n  timeAxisType?: 'enabled' | 'skipGaps' | 'mixedFrequency';\n  plotAreaClipPathId?: string;\n};\n\nexport function AreaSeries({\n  yScale,\n  lineType = 'straight',\n  color,\n  isHorizontal,\n  isLog,\n  areaColorOpacity,\n  lineSegments,\n  bottomCoords,\n  isHighlighted,\n  isBottomSegmentCurved,\n  seriesIndex,\n  groupWidth,\n  isRtl,\n  timeAxisType,\n  plotAreaClipPathId\n}: AreaSeriesProps) {\n  const style = {\n    fill: color,\n    opacity: isHighlighted\n      ? areaColorOpacity\n      : `calc(${dvtVars.dimmedOpacity} * ${areaColorOpacity})`\n  };\n  return (\n    <g clip-path={`url(#${plotAreaClipPathId})`}>\n      {lineSegments.map((lineSegment: Point[]) => {\n        if (lineSegment.length < 2) {\n          return;\n        }\n\n        let baseCoords;\n        if (bottomCoords) {\n          // custom bottom coords. eg: top of last series in stacked area\n          baseCoords = bottomCoords;\n        } else {\n          // TODO: make this more generic when we support apps setting baseline\n          // for log assume domain min is the baseline, otherwise use 0 baseline\n          const baselineCoord = yScale.transform(isLog ? yScale.domain()[0] : 0);\n          baseCoords = [\n            [lineSegment[0][0], baselineCoord],\n            [lineSegment[lineSegment.length - 1][0], baselineCoord]\n          ] as Point[];\n        }\n        const cmds = getCmdsForArea(\n          lineSegment,\n          baseCoords,\n          lineType,\n          isHorizontal,\n          isBottomSegmentCurved,\n          isRtl,\n          groupWidth,\n          timeAxisType\n        );\n        return isNonCurvedLine(lineType) ? (\n          <polygon\n            points={cmds}\n            style={style}\n            data-oj-private-series-index={seriesIndex}\n            data-oj-private-object={'area'}\n          />\n        ) : lineType === 'curved' ? (\n          <path\n            d={cmds}\n            style={style}\n            data-oj-private-series-index={seriesIndex}\n            data-oj-private-object={'area'}\n          />\n        ) : undefined;\n      })}\n    </g>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Group, Scale } from '#utils/UNSAFE_visTypes/chart';\n\nexport const getLineAreaChartItemPosition = (\n  seriesIndex: number,\n  groupIndex: number,\n  // TODO: JET-71332 ; should only be (number | undefined)[][]\n  // scatter chart does not call this function\n  renderedSeries: (number | undefined)[][] | (number[] | { x: number; y: number }[])[],\n  getDataItem: (seriesIndex: number, groupIndex: number) => { x?: any } | undefined,\n  groups: Group[],\n  isHoriz: boolean,\n  xScale: Scale,\n  yScale: Scale,\n  timeAxisType?: string\n) => {\n  // TODO: JET-71332; remove as number after JET-71332 is fixed\n  const value = renderedSeries[seriesIndex][groupIndex] as number;\n  if (value == null) {\n    return undefined;\n  }\n\n  let xVal = groupIndex;\n  if (timeAxisType) {\n    const val =\n      timeAxisType === 'mixedFrequency'\n        ? getDataItem(seriesIndex, groupIndex)?.x\n        : groups[groupIndex].id;\n    xVal = new Date(val).getTime();\n  }\n\n  const x = isHoriz ? yScale.transform(value) : xScale.transform(xVal);\n  const y = isHoriz ? xScale.transform(xVal) : yScale.transform(value);\n\n  return { x, y, height: 0, width: 0 };\n};\n"],"names":["getCmdPoints","curveThroughPoints","fixCoord","dvtVars","_jsx","isNonCurvedLine"],"mappings":"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"}