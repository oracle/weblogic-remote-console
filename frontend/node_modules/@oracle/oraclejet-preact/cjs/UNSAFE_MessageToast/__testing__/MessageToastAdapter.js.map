{"version":3,"file":"MessageToastAdapter.js","sources":["../../../../src/UNSAFE_MessageToast/__testing__/MessageToastAdapter.ts"],"sourcesContent":["import { byCss } from '@oracle/oraclejet-testing/UNSAFE_Locators';\nimport { TestAdapter } from '@oracle/oraclejet-testing/UNSAFE_TestAdapter';\nimport { TestElement } from '@oracle/oraclejet-testing/UNSAFE_Driver';\n\nexport class MessageToastAdapter extends TestAdapter {\n  /**\n   * Closes the message identified by the provided key.\n   * @param messageLocator.key {string | number} The key within the MessageToast's dataset associated with the individual message.\n   * @throws {Error} when the specified is not closable (closeAffordance set to \"off\")\n   */\n  async doClose(messageLocator: { key: string | number }): Promise<void> {\n    const driver = this.getTestDriver();\n    const toastSelector = `div[role=\"alert\"]${this.getMessageSelector(messageLocator.key)}`;\n    const closeButtonSelector = '[data-oj-message-close-button] button';\n\n    let closeButton;\n    try {\n      closeButton = await (\n        await this.getElement()\n      ).waitForElement(byCss(`${toastSelector} ${closeButtonSelector}`));\n    } catch {\n      throw new Error('The close operation is not applicable for the messageLocator.');\n    }\n\n    await driver.click(closeButton);\n  }\n\n  /**\n   * Retrieve a TestElement which represents the custom detail content of a single message.\n   * @param messageLocator.key {string | number} The key within the MessageToast's dataset associated with the individual message.\n   * @throws {Error} when the detail content rendered is not provided by the application\n   * @returns The detail content of the message rendered by the application\n   */\n  async findDetail(messageLocator: { key: string | number }): Promise<TestElement> {\n    const toastSelector = `div[role=\"alert\"]${this.getMessageSelector(messageLocator.key)}`;\n    const customDetailContentSelector = '[data-oj-message-custom-detail]';\n\n    try {\n      const customDetail = await (\n        await this.getElement()\n      ).waitForElement(byCss(`${toastSelector} ${customDetailContentSelector}`));\n      return customDetail;\n    } catch {\n      throw new Error('No corresponding detail template or renderer found for the messageLocator.');\n    }\n  }\n\n  /**\n   * Retrieve a TestElement which represents the custom icon content of a single message.\n   * @param messageLocator.key {string | number} The key within the MessageToast's dataset associated with the individual message.\n   * @throws {Error} when the icon content rendered is not provided by the application\n   * @returns The icon content of the message rendered by the application\n   */\n  async findIcon(messageLocator: { key: string | number }): Promise<TestElement> {\n    const toastSelector = `div[role=\"alert\"]${this.getMessageSelector(messageLocator.key)}`;\n    const customIconContentSelector = '[data-oj-message-custom-icon]';\n\n    try {\n      const customIcon = await (\n        await this.getElement()\n      ).waitForElement(byCss(`${toastSelector} ${customIconContentSelector}`));\n      return customIcon;\n    } catch {\n      throw new Error('No corresponding icon template or renderer found for the messageLocator.');\n    }\n  }\n\n  /**\n   * Creates the CSS selector for the message with the provided key.\n   *\n   * @param key The key of the message\n   * @returns the css selector that can used to fetch the message\n   */\n  private getMessageSelector(key: string | number) {\n    return typeof key === 'number'\n      ? `[data-oj-key=\"number-${key}\"]`\n      : `[data-oj-key=\"string-${key}\"]`;\n  }\n}\n"],"names":["TestAdapter","byCss"],"mappings":";;;;;;;;AAIM,MAAO,mBAAoB,SAAQA,8BAAW,CAAA;AAClD;;;;AAIG;IACH,MAAM,OAAO,CAAC,cAAwC,EAAA;AACpD,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;AACpC,QAAA,MAAM,aAAa,GAAG,CAAoB,iBAAA,EAAA,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,GAAG,CAAC,CAAA,CAAE,CAAC;QACxF,MAAM,mBAAmB,GAAG,uCAAuC,CAAC;AAEpE,QAAA,IAAI,WAAW,CAAC;AAChB,QAAA,IAAI;YACF,WAAW,GAAG,MAAM,CAClB,MAAM,IAAI,CAAC,UAAU,EAAE,EACvB,cAAc,CAACC,qBAAK,CAAC,CAAG,EAAA,aAAa,IAAI,mBAAmB,CAAA,CAAE,CAAC,CAAC,CAAC;SACpE;AAAC,QAAA,MAAM;AACN,YAAA,MAAM,IAAI,KAAK,CAAC,+DAA+D,CAAC,CAAC;SAClF;AAED,QAAA,MAAM,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;KACjC;AAED;;;;;AAKG;IACH,MAAM,UAAU,CAAC,cAAwC,EAAA;AACvD,QAAA,MAAM,aAAa,GAAG,CAAoB,iBAAA,EAAA,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,GAAG,CAAC,CAAA,CAAE,CAAC;QACxF,MAAM,2BAA2B,GAAG,iCAAiC,CAAC;AAEtE,QAAA,IAAI;YACF,MAAM,YAAY,GAAG,MAAM,CACzB,MAAM,IAAI,CAAC,UAAU,EAAE,EACvB,cAAc,CAACA,qBAAK,CAAC,CAAG,EAAA,aAAa,IAAI,2BAA2B,CAAA,CAAE,CAAC,CAAC,CAAC;AAC3E,YAAA,OAAO,YAAY,CAAC;SACrB;AAAC,QAAA,MAAM;AACN,YAAA,MAAM,IAAI,KAAK,CAAC,4EAA4E,CAAC,CAAC;SAC/F;KACF;AAED;;;;;AAKG;IACH,MAAM,QAAQ,CAAC,cAAwC,EAAA;AACrD,QAAA,MAAM,aAAa,GAAG,CAAoB,iBAAA,EAAA,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,GAAG,CAAC,CAAA,CAAE,CAAC;QACxF,MAAM,yBAAyB,GAAG,+BAA+B,CAAC;AAElE,QAAA,IAAI;YACF,MAAM,UAAU,GAAG,MAAM,CACvB,MAAM,IAAI,CAAC,UAAU,EAAE,EACvB,cAAc,CAACA,qBAAK,CAAC,CAAG,EAAA,aAAa,IAAI,yBAAyB,CAAA,CAAE,CAAC,CAAC,CAAC;AACzE,YAAA,OAAO,UAAU,CAAC;SACnB;AAAC,QAAA,MAAM;AACN,YAAA,MAAM,IAAI,KAAK,CAAC,0EAA0E,CAAC,CAAC;SAC7F;KACF;AAED;;;;;AAKG;AACK,IAAA,kBAAkB,CAAC,GAAoB,EAAA;QAC7C,OAAO,OAAO,GAAG,KAAK,QAAQ;cAC1B,CAAwB,qBAAA,EAAA,GAAG,CAAI,EAAA,CAAA;AACjC,cAAE,CAAA,qBAAA,EAAwB,GAAG,CAAA,EAAA,CAAI,CAAC;KACrC;AACF;;;;"}