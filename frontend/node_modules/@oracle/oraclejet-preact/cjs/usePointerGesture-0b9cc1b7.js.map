{"version":3,"file":"usePointerGesture-0b9cc1b7.js","sources":["../../src/PRIVATE_TimeComponent/hooks/usePointerGesture.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { useRef } from 'preact/hooks';\n\ntype PointerGesture = {\n  pointers: PointerEvent[];\n};\n\ntype UsePointerGestureOptions = {\n  captureTargetRef: RefObject<HTMLDivElement>;\n  numPointers: number;\n  onPointerGestureDown?: (detail: PointerGesture) => void;\n  onPointerGestureMove?: (detail: PointerGesture) => void;\n  onPointerGestureEnd?: (detail: PointerGesture) => void;\n  onExtraneousPointerDown?: (detail: PointerGesture) => void;\n  isDisabled?: boolean;\n};\n\n/**\n * Hook that enables and handles (multi) pointer gestures.\n */\nconst usePointerGesture = ({\n  captureTargetRef,\n  numPointers = 1,\n  onPointerGestureDown,\n  onPointerGestureMove,\n  onPointerGestureEnd,\n  onExtraneousPointerDown,\n  isDisabled = false\n}: UsePointerGestureOptions) => {\n  const activePointers = useRef<PointerEvent[]>([]);\n\n  if (isDisabled) {\n    activePointers.current = [];\n  }\n\n  const onPointerDown = (e: PointerEvent) => {\n    activePointers.current.push(e);\n    if (activePointers.current.length === numPointers) {\n      activePointers.current.forEach((e) =>\n        captureTargetRef.current!.setPointerCapture(e.pointerId)\n      );\n      onPointerGestureDown && onPointerGestureDown({ pointers: activePointers.current });\n    } else if (activePointers.current.length > numPointers) {\n      onExtraneousPointerDown && onExtraneousPointerDown({ pointers: activePointers.current });\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (activePointers.current.length === 0) return;\n\n    const index = activePointers.current.findIndex(\n      (pointerEvent) => pointerEvent.pointerId === e.pointerId\n    );\n    if (index === -1) return;\n\n    activePointers.current[index] = e;\n    if (activePointers.current.length === numPointers) {\n      onPointerGestureMove && onPointerGestureMove({ pointers: activePointers.current });\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    const index = activePointers.current.findIndex(\n      (pointerEvent) => pointerEvent.pointerId === e.pointerId\n    );\n    if (index === -1) return;\n\n    activePointers.current[index] = e;\n    if (activePointers.current.length === numPointers) {\n      onPointerGestureEnd && onPointerGestureEnd({ pointers: activePointers.current });\n    }\n    activePointers.current.splice(index, 1);\n  };\n\n  const onPointerCancel = onPointerUp;\n  const onPointerOut = onPointerUp;\n  const onPointerLeave = onPointerUp;\n\n  return isDisabled\n    ? {}\n    : {\n        onPointerDown,\n        onPointerMove,\n        onPointerUp,\n        onPointerCancel,\n        onPointerOut,\n        onPointerLeave\n      };\n};\n\nexport { usePointerGesture };\n"],"names":["useRef"],"mappings":";;;;;AAwBA;;AAEG;AACG,MAAA,iBAAiB,GAAG,CAAC,EACzB,gBAAgB,EAChB,WAAW,GAAG,CAAC,EACf,oBAAoB,EACpB,oBAAoB,EACpB,mBAAmB,EACnB,uBAAuB,EACvB,UAAU,GAAG,KAAK,EACO,KAAI;AAC7B,IAAA,MAAM,cAAc,GAAGA,YAAM,CAAiB,EAAE,CAAC,CAAC;IAElD,IAAI,UAAU,EAAE;AACd,QAAA,cAAc,CAAC,OAAO,GAAG,EAAE,CAAC;KAC7B;AAED,IAAA,MAAM,aAAa,GAAG,CAAC,CAAe,KAAI;AACxC,QAAA,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,cAAc,CAAC,OAAO,CAAC,MAAM,KAAK,WAAW,EAAE;YACjD,cAAc,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,KAC/B,gBAAgB,CAAC,OAAQ,CAAC,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC,CACzD,CAAC;YACF,oBAAoB,IAAI,oBAAoB,CAAC,EAAE,QAAQ,EAAE,cAAc,CAAC,OAAO,EAAE,CAAC,CAAC;SACpF;aAAM,IAAI,cAAc,CAAC,OAAO,CAAC,MAAM,GAAG,WAAW,EAAE;YACtD,uBAAuB,IAAI,uBAAuB,CAAC,EAAE,QAAQ,EAAE,cAAc,CAAC,OAAO,EAAE,CAAC,CAAC;SAC1F;AACH,KAAC,CAAC;AAEF,IAAA,MAAM,aAAa,GAAG,CAAC,CAAe,KAAI;AACxC,QAAA,IAAI,cAAc,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO;QAEhD,MAAM,KAAK,GAAG,cAAc,CAAC,OAAO,CAAC,SAAS,CAC5C,CAAC,YAAY,KAAK,YAAY,CAAC,SAAS,KAAK,CAAC,CAAC,SAAS,CACzD,CAAC;QACF,IAAI,KAAK,KAAK,CAAC,CAAC;YAAE,OAAO;AAEzB,QAAA,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,cAAc,CAAC,OAAO,CAAC,MAAM,KAAK,WAAW,EAAE;YACjD,oBAAoB,IAAI,oBAAoB,CAAC,EAAE,QAAQ,EAAE,cAAc,CAAC,OAAO,EAAE,CAAC,CAAC;SACpF;AACH,KAAC,CAAC;AAEF,IAAA,MAAM,WAAW,GAAG,CAAC,CAAe,KAAI;QACtC,MAAM,KAAK,GAAG,cAAc,CAAC,OAAO,CAAC,SAAS,CAC5C,CAAC,YAAY,KAAK,YAAY,CAAC,SAAS,KAAK,CAAC,CAAC,SAAS,CACzD,CAAC;QACF,IAAI,KAAK,KAAK,CAAC,CAAC;YAAE,OAAO;AAEzB,QAAA,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,cAAc,CAAC,OAAO,CAAC,MAAM,KAAK,WAAW,EAAE;YACjD,mBAAmB,IAAI,mBAAmB,CAAC,EAAE,QAAQ,EAAE,cAAc,CAAC,OAAO,EAAE,CAAC,CAAC;SAClF;QACD,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC1C,KAAC,CAAC;IAEF,MAAM,eAAe,GAAG,WAAW,CAAC;IACpC,MAAM,YAAY,GAAG,WAAW,CAAC;IACjC,MAAM,cAAc,GAAG,WAAW,CAAC;AAEnC,IAAA,OAAO,UAAU;AACf,UAAE,EAAE;AACJ,UAAE;YACE,aAAa;YACb,aAAa;YACb,WAAW;YACX,eAAe;YACf,YAAY;YACZ,cAAc;SACf,CAAC;AACR;;;;"}