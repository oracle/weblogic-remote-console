{"version":3,"file":"SwatchFlexView-aeaf6c3e.js","sources":["../../src/PRIVATE_SwatchFlexView/SwatchFlexView.tsx"],"sourcesContent":["import { useCallback, useRef, useState } from 'preact/hooks';\nimport { useResizeObserver } from '../hooks/UNSAFE_useResizeObserver';\nimport { BaseSwatchView, getColCount } from '../PRIVATE_BaseSwatchView';\nimport { BaseSwatchViewPublicProps as Props } from './BaseSwatchView.types';\nimport { forwardRef, ForwardedRef, useImperativeHandle } from 'preact/compat';\n\ntype SwatchFlexViewProps<K extends string | number, D> = Props<K, D>;\ntype SizeInfo = {\n  swatchWidth?: number;\n  swatchHeight?: number;\n  containerWidth?: number;\n};\n\nexport const SwatchFlexView = forwardRef(\n  <K extends string | number, D>(\n    props: SwatchFlexViewProps<K, D>,\n    ref?: ForwardedRef<HTMLDivElement>\n  ) => {\n    const rootRef = useRef<HTMLDivElement>(null);\n    useImperativeHandle(ref!, () => rootRef.current!, [rootRef]);\n\n    const [size, setSize] = useState<SizeInfo>({});\n    const updateSwatchSize = (swatchWidth: number, swatchHeight: number) => {\n      setSize((size: SizeInfo) => ({ ...size, swatchWidth, swatchHeight }));\n    };\n\n    const handleResize = useCallback(\n      (entry: ResizeObserverEntry) => {\n        const containerWidth = entry.contentRect.width;\n        if (size.containerWidth !== containerWidth) {\n          setSize((size: SizeInfo) => ({ ...size, containerWidth }));\n        }\n      },\n      [size]\n    );\n    useResizeObserver(rootRef, handleResize);\n\n    const columns = getColCount(8, size.swatchWidth, size.containerWidth);\n    const swatchSize = { width: size.swatchWidth, height: size.swatchHeight };\n\n    return (\n      <BaseSwatchView\n        {...props}\n        ref={rootRef}\n        columns={columns}\n        swatchSize={swatchSize}\n        updateSwatchSize={updateSwatchSize}\n      />\n    );\n  }\n);\n"],"names":["forwardRef","useRef","useImperativeHandle","useState","useCallback","useResizeObserver","getColCount","_jsx","BaseSwatchView"],"mappings":";;;;;;;;;AAaa,MAAA,cAAc,GAAGA,iBAAU,CACtC,CACE,KAAgC,EAChC,GAAkC,KAChC;AACF,IAAA,MAAM,OAAO,GAAGC,YAAM,CAAiB,IAAI,CAAC,CAAC;AAC7C,IAAAC,0BAAmB,CAAC,GAAI,EAAE,MAAM,OAAO,CAAC,OAAQ,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAE7D,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAGC,cAAQ,CAAW,EAAE,CAAC,CAAC;AAC/C,IAAA,MAAM,gBAAgB,GAAG,CAAC,WAAmB,EAAE,YAAoB,KAAI;AACrE,QAAA,OAAO,CAAC,CAAC,IAAc,MAAM,EAAE,GAAG,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,CAAC,CAAC,CAAC;AACxE,KAAC,CAAC;AAEF,IAAA,MAAM,YAAY,GAAGC,iBAAW,CAC9B,CAAC,KAA0B,KAAI;AAC7B,QAAA,MAAM,cAAc,GAAG,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC;AAC/C,QAAA,IAAI,IAAI,CAAC,cAAc,KAAK,cAAc,EAAE;AAC1C,YAAA,OAAO,CAAC,CAAC,IAAc,MAAM,EAAE,GAAG,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;SAC5D;AACH,KAAC,EACD,CAAC,IAAI,CAAC,CACP,CAAC;AACF,IAAAC,mCAAiB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;AAEzC,IAAA,MAAM,OAAO,GAAGC,0BAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AACtE,IAAA,MAAM,UAAU,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC;IAE1E,QACEC,eAACC,6BAAc,EAAA,EAAA,GACT,KAAK,EACT,GAAG,EAAE,OAAO,EACZ,OAAO,EAAE,OAAO,EAChB,UAAU,EAAE,UAAU,EACtB,gBAAgB,EAAE,gBAAgB,EAClC,CAAA,EACF;AACJ,CAAC;;;;"}