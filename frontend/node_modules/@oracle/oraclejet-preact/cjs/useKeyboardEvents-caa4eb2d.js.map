{"version":3,"file":"useKeyboardEvents-caa4eb2d.js","sources":["../../src/hooks/PRIVATE_useVisMeterEvents/events.ts","../../src/hooks/PRIVATE_useVisMeterEvents/useKeyboardEvents.ts"],"sourcesContent":["import type { MutableRef } from 'preact/hooks';\nimport { InputDetail } from '#utils/UNSAFE_meterUtils';\n\nexport const handleInput = (\n  inputValue: number | undefined,\n  currentInput: MutableRef<number | undefined>,\n  onInput?: (detail: InputDetail) => void\n) => {\n  onInput?.({ value: inputValue } as InputDetail);\n  currentInput.current = inputValue;\n};\n\nexport const cancelEvent = (event: Event) => {\n  event.preventDefault();\n  event.stopPropagation();\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { MutableRef } from 'preact/hooks';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport { handleInput, cancelEvent } from './events';\nimport { CommitDetail, InputDetail } from '#utils/UNSAFE_meterUtils';\nimport { adjustForStep } from '#utils/PRIVATE_meterUtils/meterUtils';\n\nexport function useKeyboardEvents(\n  value: number,\n  min: number,\n  max: number,\n  step: number,\n  currentInputRef: MutableRef<number | undefined>,\n  onCommit?: (detail: CommitDetail) => void,\n  onInput?: (detail: InputDetail) => void\n) {\n  const { direction } = useUser();\n\n  const isRtl = direction === 'rtl';\n\n  const stepIncrementedVal = adjustForStep(value + step, step, min, max);\n  const stepDecrementedVal = adjustForStep(value - step, step, min, max);\n\n  const keyDownHandler = (event: KeyboardEvent) => {\n    const key = event.key;\n\n    switch (key) {\n      case 'Tab':\n        return;\n      case 'ArrowDown':\n        handleInput(Math.max(min, stepDecrementedVal), currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'ArrowUp':\n        handleInput(Math.min(max, stepIncrementedVal), currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'ArrowLeft': {\n        const inputValue = isRtl\n          ? Math.min(max, stepIncrementedVal)\n          : Math.max(min, stepDecrementedVal);\n        handleInput(inputValue, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      }\n      case 'ArrowRight': {\n        const inputValue = isRtl\n          ? Math.max(min, stepDecrementedVal)\n          : Math.min(max, stepIncrementedVal);\n        handleInput(inputValue, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      }\n    }\n  };\n\n  const keyUpHandler = (event: KeyboardEvent) => {\n    const key = event.key;\n\n    switch (key) {\n      case 'Enter':\n        onCommit?.({ value: value } as CommitDetail);\n        cancelEvent(event);\n        break;\n      case 'Tab':\n        handleInput(value, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'Home':\n        handleInput(min, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'End':\n        handleInput(max, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n    }\n  };\n\n  return {\n    onKeyUp: keyUpHandler,\n    onKeyDown: keyDownHandler\n  };\n}\n"],"names":["useUser","adjustForStep"],"mappings":"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"}