{"version":3,"file":"useLegendContextMenu-2a905d60.js","sources":["../../src/PRIVATE_BaseLegend/LegendImageMarker.tsx","../../src/PRIVATE_BaseLegend/LegendSymbol.tsx","../../src/PRIVATE_BaseLegend/LegendText.tsx","../../src/PRIVATE_BaseLegend/BaseLegendItem.tsx","../../src/PRIVATE_BaseLegend/BaseLegend.tsx","../../src/UNSAFE_Legend/useLegendDatatip.ts","../../src/PRIVATE_BaseLegend/useLegendContextMenu.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from '#PRIVATE_BaseLegend/themes/LegendStyles.css';\n\ntype ImageMarkerProps = {\n  source: string;\n};\n\nexport function ImageMarker(props: ImageMarkerProps) {\n  const { imageMarkerStyle } = styles;\n  return <img class={imageMarkerStyle} src={props.source} role=\"none\" />;\n}\n","import { SvgSymbol } from '#PRIVATE_SvgShapes';\nimport { ImageMarker } from './LegendImageMarker';\nimport { Property } from 'csstype';\nimport { styles } from '#PRIVATE_BaseLegend/themes/LegendStyles.css';\nimport { SymbolProps } from '#utils/UNSAFE_visTypes/legend';\n\ntype LegendSymbolProps = {\n  isHidden?: boolean;\n  lineLength?: number;\n  width?: Property.Width;\n  height?: Property.Height;\n  borderColor?: Property.Color;\n} & SymbolProps;\n\nexport const LegendSymbol = ({\n  // The default color is not in the redwood pallete.\n  // TODO: replace default legend color with UX approved pallete color when available.\n  markerColor = '#a6acb1',\n  lineColor = '#a6acb1',\n  markerShape = 'square',\n  isHidden = false,\n  lineStyle = 'none',\n  ...props\n}: LegendSymbolProps) => {\n  const { legendSymbolBaseStyle } = styles;\n  const dimensionsNotSet = props.width == null && props.height == null;\n  const setAspectRatioNone =\n    !dimensionsNotSet && (markerShape === 'rectangle' || markerShape === 'ellipse');\n  const defaultLineWidth = lineStyle != 'none' && markerShape != 'none' ? 2 : 3;\n  return (\n    <div className={legendSymbolBaseStyle} style={{ width: props.width, height: props.height }}>\n      {props.source ? (\n        <ImageMarker source={props.source} />\n      ) : (\n        <SvgSymbol\n          setAspectRatioNone={setAspectRatioNone}\n          markerShape={isHidden ? 'square' : markerShape}\n          lineStyle={isHidden ? 'none' : lineStyle}\n          lineColor={lineColor}\n          lineLength={props.lineLength}\n          lineWidth={props.lineWidth != null ? props.lineWidth : defaultLineWidth}\n          markerColor={isHidden ? 'transparent' : markerColor}\n          borderColor={isHidden ? markerColor || lineColor : props.borderColor}\n          setAbsolutePos={true}\n        />\n      )}\n    </div>\n  );\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Text } from '#UNSAFE_Text';\nimport { Property } from 'csstype';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { styles } from '#PRIVATE_BaseLegend/themes/LegendStyles.css';\n\ntype LegendTextProps = {\n  text: string;\n  type: 'label' | 'title';\n  fontStyle?: Property.FontStyle;\n  fontSize?: Property.FontSize;\n  fontWeight?: Property.FontWeight;\n  textDecoration?: Property.TextDecoration;\n  color?: Property.Color;\n  fontFamily?: Property.FontFamily;\n  id?: string;\n  align?: 'start' | 'center' | 'end';\n};\n\n/**\n * Returns the legend text component.\n */\nexport const LegendText = ({\n  text,\n  type = 'label',\n  id,\n  align = 'start',\n  ...props\n}: LegendTextProps) => {\n  const {\n    legendTextBaseStyle,\n    legendTextTitle,\n    legendTitleStartAlign,\n    legendTitleCenterAlign,\n    legendTitleEndAlign\n  } = styles;\n  const isTitle = type === 'title';\n  return (\n    <div\n      class={classNames([\n        legendTextBaseStyle,\n        isTitle ? legendTextTitle : '',\n        isTitle && align === 'start' ? legendTitleStartAlign : '',\n        isTitle && align === 'center' ? legendTitleCenterAlign : '',\n        isTitle && align === 'end' ? legendTitleEndAlign : ''\n      ])}\n      style={{\n        ...props\n      }}>\n      <Text size=\"inherit\" variant=\"inherit\" weight=\"inherit\" truncation={'ellipsis'} id={id}>\n        {text}\n      </Text>\n    </div>\n  );\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { JSX } from 'preact';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { ForwardedRef, forwardRef } from 'preact/compat';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { styles } from './themes/LegendStyles.css';\nimport { getLegendCurrentItemStyle } from '#utils/PRIVATE_legendUtils/legendUtils';\nimport { SymbolProps, TextStylesProps } from '#utils/UNSAFE_visTypes/legend';\nimport { LegendSymbol } from './LegendSymbol';\nimport { LegendText } from './LegendText';\n\ntype BaseLegendItemProps = {\n  text: string;\n  itemIdx: number;\n  sectionIdx: number;\n  itemId?: number | string;\n  isCurrent: boolean;\n  isFocused: boolean;\n  isHighlighted?: boolean;\n  isHidden?: boolean;\n  symbolWidth?: number;\n  symbolHeight?: number;\n  id?: string;\n  'aria-label'?: UnpackSignals<JSX.AriaAttributes>['aria-label'];\n  class?: string;\n  minWidth?: number;\n  gridCol?: number;\n  gridRow?: number;\n  hideAndShowBehavior?: 'on' | 'off';\n  actionable?: 'off' | 'inherit';\n  hoverBehavior?: 'dim' | 'none';\n} & SymbolProps &\n  TextStylesProps;\n\nexport const BaseLegendItem = forwardRef(\n  (\n    {\n      id,\n      text,\n      sectionIdx,\n      itemIdx,\n      itemId,\n      isHighlighted,\n      symbolHeight,\n      symbolWidth,\n      isFocused,\n      isCurrent,\n      isHidden,\n      actionable = 'inherit',\n      hoverBehavior = 'none',\n      hideAndShowBehavior = 'off',\n      ...props\n    }: BaseLegendItemProps,\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const textStyles = {\n      fontFamily: props.textFontFamily,\n      fontSize: props.textFontSize,\n      color: props.textColor,\n      fontStyle: props.textFontStyle,\n      fontWeight: props.textFontWeight,\n      textDecoration: props.textTextDecoration\n    };\n\n    const symbolProps = {\n      lineStyle: props.lineStyle,\n      lineWidth: props.lineWidth,\n      markerShape: props.markerShape,\n      markerColor: props.markerColor,\n      source: props.source,\n      borderColor: props.borderColor,\n      lineColor: props.lineColor\n    };\n\n    const isNotDimmed = isHighlighted || isHighlighted == null;\n    const { legendItemBaseStyle, legendItemOpacity, legendItemFocusRing } = styles;\n\n    return (\n      <div\n        class={classNames([\n          legendItemBaseStyle,\n          getLegendCurrentItemStyle(\n            isCurrent,\n            isHighlighted,\n            hideAndShowBehavior,\n            hoverBehavior,\n            isHidden,\n            actionable\n          ),\n          !isNotDimmed ? legendItemOpacity : '',\n          isFocused ? legendItemFocusRing : '',\n          props.class\n        ])}\n        style={{\n          gridRow: props.gridRow,\n          gridColumn: props.gridCol,\n          minWidth: props.minWidth !== undefined ? `${props.minWidth}px` : undefined\n        }}\n        id={id}\n        ref={ref}\n        data-oj-private-section={sectionIdx}\n        data-oj-private-item={itemIdx}\n        data-oj-private-item-id={itemId}\n        role={isHidden != null ? 'menuitemcheckbox' : 'img'}\n        aria-checked={isHidden != null ? !isHidden : undefined}\n        aria-label={props['aria-label'] || text}>\n        <LegendSymbol\n          {...symbolProps}\n          isHidden={isHidden}\n          lineLength={symbolWidth}\n          width={symbolWidth != null ? `${symbolWidth}px` : undefined}\n          height={symbolHeight != null ? `${symbolHeight}px` : undefined}\n        />\n        <LegendText {...textStyles} text={text} type=\"label\" />\n      </div>\n    );\n  }\n);\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { BaseLegendItem } from './BaseLegendItem';\nimport { getItemProps, getGridCellIndices } from '#utils/PRIVATE_legendUtils/legendUtils';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { styles } from './themes/LegendStyles.css';\nimport { BaseLegendProps, LegendItemData } from '#utils/UNSAFE_visTypes/legend';\n\n/**\n * The controlled legend reponsible only for rendering the legend items.\n */\nexport const BaseLegend = <\n  K extends string | number,\n  D extends LegendItemData<K> = LegendItemData<K>\n>({\n  orientation = 'horizontal',\n  highlightedIds,\n  hiddenIds,\n  focusedItemInfo,\n  hoveredItemInfo,\n  sectionIdx,\n  activeId,\n  isReadOnly,\n  items,\n  symbolHeight,\n  symbolWidth,\n  hideAndShowBehavior = 'off',\n  hoverBehavior = 'none',\n  isTestEnv,\n  ...props\n}: BaseLegendProps<K, D>) => {\n  const isHoriz = orientation === 'horizontal';\n  const columTemplates = isHoriz ? `repeat(${props.itemsPerRow}, ${props.itemWidth})` : undefined;\n  const {\n    baseLegendStyles,\n    baseLegendHorizontal,\n    baseLegendVertical,\n    baseLegendVerticalItem,\n    baseLegendPaddingBottom,\n    baseLegendPaddingTop,\n    baseLegendPaddingEnd\n  } = styles;\n\n  return (\n    <div\n      className={classNames([\n        baseLegendStyles,\n        isHoriz ? baseLegendHorizontal : baseLegendVertical\n      ])}\n      style={{\n        gridTemplateColumns: columTemplates,\n        // set maxWidth to 100% on second render for text truncation to work.\n        maxWidth: '100%'\n      }}>\n      {items.map((item: LegendItemData<K>, index: number) => {\n        const {\n          markerColor,\n          markerShape,\n          source,\n          borderColor,\n          lineColor,\n          isCurrent,\n          isFocused,\n          isHidden,\n          isHighlighted,\n          key,\n          actionable,\n          text,\n          lineStyle,\n          lineWidth\n        } = getItemProps<K>(\n          item,\n          index,\n          sectionIdx,\n          focusedItemInfo,\n          isReadOnly,\n          hoveredItemInfo,\n          hiddenIds,\n          highlightedIds\n        );\n        const isFocusedItem =\n          focusedItemInfo.sectionIdx === sectionIdx && focusedItemInfo.itemIdx === index;\n        const { gridRow, gridCol } = getGridCellIndices(\n          items.length,\n          index,\n          props.itemsPerRow,\n          props.itemsPerCol\n        );\n        const needsBottomSpace = gridRow != null && gridRow != props.itemsPerCol;\n        const needsTopSpace = gridRow != null && gridRow != 1;\n        return (\n          <BaseLegendItem\n            ref={isFocusedItem ? props.focusedItemRef : undefined}\n            text={text}\n            itemIdx={index}\n            sectionIdx={sectionIdx}\n            itemId={isTestEnv ? item.id : undefined}\n            symbolHeight={symbolHeight}\n            symbolWidth={symbolWidth}\n            markerColor={markerColor}\n            markerShape={markerShape}\n            lineStyle={lineStyle}\n            lineWidth={lineWidth}\n            source={source}\n            borderColor={borderColor}\n            aria-label={item['aria-label']}\n            lineColor={lineColor}\n            isCurrent={isCurrent}\n            isFocused={isFocused}\n            isHidden={isHidden}\n            isHighlighted={isHighlighted}\n            key={key}\n            gridRow={gridRow}\n            gridCol={gridCol}\n            minWidth={props.itemWidth}\n            id={isCurrent ? activeId : ''}\n            textColor={props.textColor}\n            textFontFamily={props.textFontFamily}\n            textFontSize={props.textFontSize}\n            textFontStyle={props.textFontStyle}\n            textFontWeight={props.textFontWeight}\n            textTextDecoration={props.textTextDecoration}\n            class={classNames([\n              isHoriz ? '' : baseLegendVerticalItem,\n              needsTopSpace ? baseLegendPaddingTop : '',\n              needsBottomSpace ? baseLegendPaddingBottom : '',\n              baseLegendPaddingEnd\n            ])}\n            hideAndShowBehavior={hideAndShowBehavior}\n            hoverBehavior={hoverBehavior}\n            actionable={actionable}\n          />\n        );\n      })}\n    </div>\n  );\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { MutableRef, useLayoutEffect, useState } from 'preact/hooks';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport { ItemInfo } from '#utils/UNSAFE_visTypes/legend';\nimport { DATATIP_OFFSET } from '#utils/UNSAFE_visUtils/datatipUtils';\nimport { useDatatip } from '#hooks/PRIVATE_useDatatip';\n\ntype props = {\n  text?: string;\n  rootDimsRef: MutableRef<DOMRect | undefined>;\n  focusedItemRef: RefObject<HTMLDivElement>;\n  focusedItemInfo: ItemInfo;\n  touchResponse: 'touchStart' | 'touchHold';\n  isDisabled: boolean;\n};\n\n/**\n * Calculate the datatip offset for datatip when keyboard focus is active.\n * @param focusedItemRef The ref for currentItem node.\n * @param rootRef The ref for root of the legend.\n * @param currentItem The ItemInfo of the current keyboard focused item.\n * @returns\n */\nconst calculateOffset = (\n  focusedItemRef: RefObject<HTMLDivElement>,\n  rootDimsRef: MutableRef<DOMRect | undefined>,\n  currentItem: ItemInfo,\n  isRtl: boolean\n) => {\n  let crossAxis = 0;\n  let mainAxisOffset = DATATIP_OFFSET;\n  if (focusedItemRef.current && currentItem.isCurrent && rootDimsRef.current) {\n    const rootDim = rootDimsRef.current;\n    const itemDim = focusedItemRef.current.getBoundingClientRect();\n    crossAxis = itemDim.x + itemDim.width / 2 - (rootDim.x + rootDim.width / 2);\n    crossAxis = isRtl ? -1 * crossAxis : crossAxis;\n    mainAxisOffset += rootDim.y - itemDim.y;\n    mainAxisOffset = Math.min(\n      DATATIP_OFFSET,\n      Math.max(mainAxisOffset, itemDim.height - rootDim.height + DATATIP_OFFSET)\n    );\n  }\n  return { crossAxis, mainAxis: mainAxisOffset };\n};\n\nexport const useLegendDatatip = ({\n  text,\n  rootDimsRef,\n  focusedItemRef,\n  focusedItemInfo,\n  touchResponse,\n  isDisabled\n}: props) => {\n  const { direction } = useUser();\n  const isRtl = direction === 'rtl';\n  const [offset, setOffset] = useState<{ mainAxis?: number; crossAxis?: number }>(\n    calculateOffset(focusedItemRef, rootDimsRef, focusedItemInfo, isRtl)\n  );\n\n  useLayoutEffect(() => {\n    setOffset(calculateOffset(focusedItemRef, rootDimsRef, focusedItemInfo, isRtl));\n  }, [focusedItemInfo, focusedItemRef, isRtl, rootDimsRef]);\n\n  const anchor = focusedItemInfo?.isCurrent ? 'element' : 'pointer';\n\n  return useDatatip({\n    content: text,\n    placement: 'top',\n    anchor,\n    offset,\n    touchResponse,\n    isDisabled\n  });\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport {\n  LegendContextMenuContext,\n  SectionalLegendContextMenuContext,\n  ItemInfo,\n  LegendSectionData\n} from '#utils/UNSAFE_visTypes/legend';\nimport { type gestureTypes, useContextMenu } from '#hooks/PRIVATE_useVisContextMenu';\nimport { getItemInfo } from '#utils/PRIVATE_legendUtils/legendUtils';\nimport { ContextMenuConfig } from '#utils/UNSAFE_visTypes/common';\n\ntype BaseProps = {\n  isReadOnly: boolean;\n  rootRef: RefObject<HTMLDivElement>;\n  focusedItemInfo: ItemInfo;\n  onContextMenuDismissed?: (gesture: gestureTypes) => void;\n};\n\ntype LegendUseContextMenuProps<D> = BaseProps & {\n  items: D[];\n  contextMenuConfig?: ContextMenuConfig<LegendContextMenuContext<D>>;\n};\n\ntype SectionalLegendUseContextMenuProps<D, S> = BaseProps & {\n  sections: S[];\n  contextMenuConfig?: ContextMenuConfig<SectionalLegendContextMenuContext<D>>;\n};\n\nexport const useLegendContextMenu = <D>({\n  rootRef,\n  contextMenuConfig,\n  focusedItemInfo,\n  items,\n  isReadOnly,\n  onContextMenuDismissed\n}: LegendUseContextMenuProps<D>) => {\n  const { contextMenuProps, contextMenuContent } = useContextMenu<LegendContextMenuContext<D>>({\n    onContextMenuHandler: ({ gesture, target }) => {\n      if (gesture === 'keyboard') {\n        const itemIdx = focusedItemInfo.itemIdx;\n        const elem = rootRef.current?.querySelector(`[data-oj-private-item=\"${itemIdx}\"]`) || null;\n        const data = items[itemIdx];\n        const context = { type: 'item' as const, data };\n        return {\n          type: 'element',\n          context,\n          elem\n        };\n      }\n      const itemIdx = getItemInfo(target as HTMLElement)?.itemIdx;\n      const data = itemIdx !== undefined ? items[itemIdx] : null;\n      const context = data ? { type: 'item' as const, data } : { type: 'background' as const };\n      return {\n        type: 'pointer',\n        context\n      };\n    },\n    contextMenuOptions: {\n      isDisabled: !contextMenuConfig || isReadOnly //If there is no context menu renderer or if isReadOnly is true, we disable the hook\n    },\n    rootRef,\n    contextMenuConfig,\n    onContextMenuDismissed\n  });\n\n  return { contextMenuContent, contextMenuProps };\n};\n\nexport const useSectionalLegendContextMenu = <K, D, S extends LegendSectionData<K, D>>({\n  rootRef,\n  contextMenuConfig,\n  focusedItemInfo,\n  sections,\n  isReadOnly,\n  onContextMenuDismissed\n}: SectionalLegendUseContextMenuProps<D, S>) => {\n  const { contextMenuProps, contextMenuContent } = useContextMenu<\n    SectionalLegendContextMenuContext<D>\n  >({\n    onContextMenuHandler: ({ gesture, target }) => {\n      if (gesture === 'keyboard') {\n        const itemIdx = focusedItemInfo.itemIdx;\n        const sectionIdx = focusedItemInfo.sectionIdx;\n        const data = sections[sectionIdx]?.items[itemIdx];\n        if (data) {\n          const elem =\n            rootRef.current?.querySelector(\n              `[data-oj-private-item=\"${itemIdx}\"][data-oj-private-section=\"${sectionIdx}\"]`\n            ) || null;\n          const context = { type: 'item' as const, itemIndexPath: [sectionIdx, itemIdx], data };\n          return {\n            type: 'element',\n            context,\n            elem\n          };\n        }\n      }\n      const itemIdx = getItemInfo(target as HTMLElement)?.itemIdx;\n      const sectionIdx = getItemInfo(target as HTMLElement)?.sectionIdx;\n      const data =\n        sectionIdx !== undefined && itemIdx !== undefined\n          ? sections[sectionIdx]?.items[itemIdx]\n          : null;\n      const itemIndexPath = [sectionIdx!, itemIdx!];\n      const context = data\n        ? { type: 'item' as const, data, itemIndexPath }\n        : { type: 'background' as const };\n      return {\n        type: 'pointer',\n        context\n      };\n    },\n    contextMenuOptions: {\n      isDisabled: !contextMenuConfig || isReadOnly //If there is no context menu renderer or if isReadOnly is true, we disable the hook\n    },\n    rootRef,\n    contextMenuConfig,\n    onContextMenuDismissed\n  });\n\n  return { contextMenuContent, contextMenuProps };\n};\n"],"names":["styles","_jsx","SvgSymbol","classNames","Text","forwardRef","_jsxs","getLegendCurrentItemStyle","getItemProps","getGridCellIndices","DATATIP_OFFSET","useUser","useState","useLayoutEffect","useDatatip","useContextMenu","getItemInfo"],"mappings":"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"}