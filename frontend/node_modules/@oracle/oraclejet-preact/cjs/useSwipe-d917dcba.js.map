{"version":3,"file":"useSwipe-d917dcba.js","sources":["../../src/hooks/UNSAFE_useSwipe/useSwipe.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useRef, useCallback } from 'preact/hooks';\n\n/*\n  threshold: Minimal threshold required before recognizing\n  tolerance: A tolerance value which allows the user to move their finger about a length measured in pixels.\n  This allows the swipe gesture to be triggered more easily since a User might not move their finger\n  in a straight line.\n*/\ntype SwipeOptions = {\n  threshold?: number;\n  maximumTime?: number;\n  tolerance?: number;\n  isDisabled?: boolean;\n};\n\ntype SwipeInfo = {\n  direction: 'left' | 'right' | 'up' | 'down';\n};\n\ntype SwipeState = {\n  pointerDownId: number | null;\n  startTime: number | null;\n  prevClientX: number;\n  prevClientY: number;\n};\n\nexport function useSwipe(\n  onSwipe: (e: SwipeInfo) => void,\n  { threshold = 10, maximumTime = 300, tolerance = 50, isDisabled = false }: SwipeOptions = {\n    threshold: 10,\n    maximumTime: 300,\n    tolerance: 50,\n    isDisabled: false\n  }\n): { swipeProps: Record<string, any> } {\n  const ref = useRef<SwipeState>({\n    pointerDownId: 0,\n    startTime: null,\n    prevClientX: 0,\n    prevClientY: 0\n  });\n\n  const clearSwipe = useCallback(() => {\n    ref.current = {\n      pointerDownId: null,\n      startTime: 0,\n      prevClientX: 0,\n      prevClientY: 0\n    };\n  }, []);\n\n  const onPointerDown = useCallback(\n    (e: PointerEvent) => {\n      if (!ref.current.pointerDownId) {\n        ref.current = {\n          pointerDownId: e.pointerId,\n          startTime: e.timeStamp,\n          prevClientX: e.clientX,\n          prevClientY: e.clientY\n        };\n      } else {\n        clearSwipe();\n      }\n    },\n    [clearSwipe]\n  );\n\n  const onPointerUp = useCallback(\n    (ev: PointerEvent) => {\n      if (ev.pointerId === ref.current.pointerDownId) {\n        if (ref.current.startTime && ev.timeStamp - ref.current.startTime < maximumTime) {\n          if (\n            ref.current.prevClientX - ev.clientX > threshold &&\n            Math.abs(ev.clientY - ref.current.prevClientY) <= tolerance\n          ) {\n            onSwipe?.({ direction: 'left' });\n          } else if (\n            ev.clientX - ref.current.prevClientX > threshold &&\n            Math.abs(ev.clientY - ref.current.prevClientY) <= tolerance\n          ) {\n            onSwipe?.({ direction: 'right' });\n          } else if (\n            ref.current.prevClientY - ev.clientY > threshold &&\n            Math.abs(ev.clientX - ref.current.prevClientX) <= tolerance\n          ) {\n            onSwipe?.({ direction: 'up' });\n          } else if (\n            ev.clientY - ref.current.prevClientY > threshold &&\n            Math.abs(ev.clientX - ref.current.prevClientX) <= tolerance\n          ) {\n            onSwipe?.({ direction: 'down' });\n          }\n        }\n      }\n      // state would be reset to its original state whether swipe is completed or cancelled\n      clearSwipe();\n    },\n    [threshold, onSwipe, clearSwipe, maximumTime, tolerance]\n  );\n\n  const swipeProps = isDisabled\n    ? {}\n    : {\n        /** event handlers to spread on the target element. */\n        onPointerDown,\n        onPointerUp,\n        onPointerCancel: clearSwipe\n      };\n\n  return {\n    swipeProps\n  };\n}\n"],"names":["useRef","useCallback"],"mappings":"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"}