/* @oracle/oraclejet-preact: undefined */
'use strict';

var hooks = require('preact/hooks');
var useUser = require('./useUser-f900ddf1.js');

/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
/**
 * A hook that handles mouse and keyboard gesture that toggles the expanded state.
 * @param keyExtractor
 * @param expanded
 * @param onToggle
 * @returns
 */
function useExpandCollapse(keyExtractor, isExpanded, onToggle, allowArrowKeysOnly) {
    const { direction } = useUser.useUser();
    const onClick = hooks.useCallback((event) => {
        if (allowArrowKeysOnly !== true && onToggle) {
            handleToggle(event, keyExtractor, onToggle);
        }
    }, [keyExtractor, onToggle, allowArrowKeysOnly]);
    const onKeyUp = hooks.useCallback((event) => {
        if (allowArrowKeysOnly !== true && (event.key === 'Enter' || event.key === ' ')) {
            handleToggle(event, keyExtractor, onToggle);
        }
        else if (event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
            const isRtl = direction === 'rtl';
            const isLeftArrow = event.key === 'ArrowLeft' && !isRtl;
            handleArrowKey(isLeftArrow, event.target, isExpanded, keyExtractor, onToggle);
            // arrow key might cause it to scroll horizontally
            event.preventDefault();
            event.stopPropagation();
        }
    }, [keyExtractor, onToggle, isExpanded, direction, allowArrowKeysOnly]);
    // prevent default (propagation) for keyDown to prevent scrolling the container
    const onKeyDown = hooks.useCallback((event) => {
        if (allowArrowKeysOnly !== true && (event.key === 'Enter' || event.key === ' ')) {
            event.preventDefault();
        }
        else if (event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
            event.preventDefault();
        }
    }, [allowArrowKeysOnly]);
    return onToggle ? { onClick, onKeyDown, onKeyUp } : {};
}
const handleArrowKey = (isLeftArrow, target, isExpanded, keyExtractor, onToggle) => {
    const itemKey = keyExtractor(target);
    if (onToggle && itemKey) {
        const contains = isExpanded(itemKey);
        if ((isLeftArrow && contains) || (!isLeftArrow && !contains)) {
            onToggle({ value: itemKey });
        }
    }
};
const handleToggle = (event, keyExtractor, onToggle) => {
    const itemKey = keyExtractor(event.target);
    if (onToggle && itemKey) {
        onToggle({ value: itemKey });
        if (event.type === 'click') {
            event.stopPropagation();
        }
    }
};

exports.useExpandCollapse = useExpandCollapse;
//# sourceMappingURL=useExpandCollapse-336b4f0c.js.map
