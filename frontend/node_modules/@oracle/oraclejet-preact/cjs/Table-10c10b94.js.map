{"version":3,"file":"Table-10c10b94.js","sources":["../../src/PRIVATE_Table/TableColGroup.tsx","../../src/PRIVATE_Table/TableSkeleton.tsx","../../src/PRIVATE_Table/TableSkeletonRow.tsx","../../src/PRIVATE_Table/utils/TableThemeUtils.ts","../../src/PRIVATE_Table/utils/TableDomUtils.ts","../../src/PRIVATE_Table/utils/TableTooltipUtils.ts","../../src/PRIVATE_Table/TableCell.tsx","../../src/PRIVATE_Table/TableRow.tsx","../../src/PRIVATE_Table/TableNoData.tsx","../../src/PRIVATE_Table/TableBody.tsx","../../src/PRIVATE_Table/TableHeaderCell.tsx","../../src/PRIVATE_Table/TableHeader.tsx","../../src/PRIVATE_Table/TableFooterCell.tsx","../../src/PRIVATE_Table/TableFooter.tsx","../../src/PRIVATE_Table/TableDragIndicator.tsx","../../src/PRIVATE_Table/TableContextMenu.tsx","../../src/PRIVATE_Table/hooks/useDataManager.ts","../../src/PRIVATE_Table/utils/TableScrollUtils.ts","../../src/PRIVATE_Table/utils/TableFocusUtils.tsx","../../src/PRIVATE_Table/hooks/useContextMenu.ts","../../src/PRIVATE_Table/hooks/useTruncationTooltip.tsx","../../src/PRIVATE_Table/hooks/useFocusHandling.ts","../../src/PRIVATE_Table/utils/TableActionUtils.ts","../../src/PRIVATE_Table/utils/TableInteractionUtils.ts","../../src/PRIVATE_Table/utils/TableNavigationUtils.ts","../../src/PRIVATE_Table/utils/TableSelectionUtils.ts","../../src/PRIVATE_Table/hooks/useKeyboardHandling.ts","../../src/PRIVATE_Table/utils/TableSizingUtils.ts","../../src/PRIVATE_Table/hooks/usePointerHandling.ts","../../src/PRIVATE_Table/hooks/useScrollHandling.ts","../../src/PRIVATE_Table/hooks/useInteractionManager.ts","../../src/PRIVATE_Table/utils/TableLayoutUtils.ts","../../src/PRIVATE_Table/hooks/useSizingManager.ts","../../src/PRIVATE_Table/Table.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\n/**\n * Props for the TableColGroup Component\n */\nexport type TableColGroupProps = {\n  tableId: string;\n  isRendered: boolean;\n  columnWidthsArray: (number | undefined)[];\n};\n\n/**\n * The internal component used to render a single colgroup in Table.\n */\nexport function TableColGroup({ tableId, isRendered, columnWidthsArray }: TableColGroupProps) {\n  const getColStyle = (columnWidth?: number) => {\n    return columnWidth == null ? '' : `width:${columnWidth}px;`;\n  };\n\n  return isRendered ? (\n    <colgroup>\n      {columnWidthsArray.map((columnWidth?: number) => {\n        return <col style={getColStyle(columnWidth)} data-oj-table-col={tableId} />;\n      })}\n    </colgroup>\n  ) : null;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { Size } from '../utils/UNSAFE_size';\nimport { dimensionInterpolations } from '../utils/UNSAFE_interpolations/dimensions';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { tableSkeletonStyles, tableSkeletonStylesHC } from './themes/TableSkeletonStyles.css';\n\nconst dimensions = ['height', 'width'] as const;\n//This type has StyleInterpolationProps with the height prop made required.\ntype TableSkeletonProps = {\n  isHighContrast: boolean;\n  height?: Size;\n  width?: Size;\n};\n\n// Create an array [dimensionInterpolations['height'], dimensionInterpolations['width']]\nconst skeletonDimensionInterpolation = Array.from(dimensions, (x) => dimensionInterpolations[x]);\nconst interpolations = [...Object.values(skeletonDimensionInterpolation)];\nconst SkeletonInterpolations = mergeInterpolations<TableSkeletonProps>(interpolations);\n\n/**\n * TableSkeleton component allows the appropriate skeleton to be rendered based on the\n * property values\n **/\nexport function TableSkeleton({ ...props }: TableSkeletonProps) {\n  const skeletonStyles = props.isHighContrast ? tableSkeletonStylesHC : tableSkeletonStyles;\n  const classes = classNames([skeletonStyles.bar]);\n\n  const skeletonDimensions = SkeletonInterpolations({ width: '100%', ...props });\n  return <div style={skeletonDimensions} class={classes} />;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { BundleType } from '../resources/nls/bundle';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { LOADMORE_STYLE_CLASS } from '../PRIVATE_LoadMoreCollection';\nimport { tableSkeletonStyles, tableSkeletonStylesHC } from './themes/TableSkeletonStyles.css';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { TableSkeleton } from './TableSkeleton';\n\ntype SkeletonRowProps = {\n  tableId: string;\n  colspan: number;\n  hasTabIndex: boolean;\n  isShowFocusRing: boolean;\n  isPendingLayout?: boolean;\n  isLoadMore?: boolean;\n  isHighContrast: boolean;\n};\n\n/**\n * TableSkeletonRow renders a set of 'loading' skeletons.\n **/\nexport function TableSkeletonRow({\n  tableId,\n  colspan,\n  hasTabIndex,\n  isShowFocusRing,\n  isPendingLayout = false,\n  isLoadMore = false,\n  isHighContrast\n}: SkeletonRowProps) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const skeletonStyles = isHighContrast ? tableSkeletonStylesHC : tableSkeletonStyles;\n  const cellClassArray = [skeletonStyles.cell];\n  if (isShowFocusRing) {\n    cellClassArray.push(skeletonStyles.focus);\n  }\n  const cellClasses = classNames(cellClassArray);\n  const innerCellClasses = classNames([skeletonStyles.innerCell]);\n  const rowClasses = classNames([skeletonStyles.row, skeletonStyles.rowHeight]);\n  const firstRowClasses = isPendingLayout\n    ? classNames([skeletonStyles.row, skeletonStyles.headerHeight])\n    : rowClasses;\n\n  const accCellContent = (\n    <div style={'width:1px;height:0px;overflow:hidden;'}>{translations.collection_loading()}</div>\n  );\n\n  return (\n    <tr class={LOADMORE_STYLE_CLASS} role={'row'}>\n      <td\n        class={cellClasses}\n        colSpan={colspan}\n        role={'gridcell'}\n        tabIndex={hasTabIndex ? 0 : -1}\n        data-oj-cell-type={isPendingLayout ? 'pending' : isLoadMore ? 'loadMore' : 'loading'}\n        {...(isPendingLayout\n          ? { 'data-oj-table-pending-cell': tableId }\n          : isLoadMore\n          ? { 'data-oj-table-load-more-cell': tableId }\n          : { 'data-oj-table-loading-cell': tableId })}\n        data-oj-table-focusable={tableId}>\n        <div class={innerCellClasses}>\n          {accCellContent}\n          {[...Array(isLoadMore ? 3 : 25)].map((_element, index) => (\n            <div class={index === 0 ? firstRowClasses : rowClasses}>\n              <TableSkeleton height=\"4x\" isHighContrast={isHighContrast} />\n            </div>\n          ))}\n        </div>\n      </td>\n    </tr>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { textAlignStyles, verticalAlignStyles } from '../themes/Table.css';\nimport { CellStyles, tableCellStyles, tableCellStylesHC } from '../themes/TableCellStyles.css';\nimport {\n  FooterCellStyles,\n  tableFooterCellStyles,\n  tableFooterCellStylesHC\n} from '../themes/TableFooterCellStyles.css';\nimport {\n  HeaderCellStyles,\n  tableHeaderCellStyles,\n  tableHeaderCellStylesHC\n} from '../themes/TableHeaderCellStyles.css';\nimport { CellPadding, CurrentRowVariant } from '../../UNSAFE_TableView';\n\ntype DataCellThemingProps = {\n  isFirstColumnIndex: boolean;\n  isFinalColumnIndex: boolean;\n  isFirstRowIndex: boolean;\n  isFinalRowIndex: boolean;\n  hasVerticalGridlines: boolean;\n  hasHorizontalGridlines: boolean;\n  hasLastHorizontalGridline: boolean;\n  isRowSelected: boolean;\n  isPreviousRowSelected: boolean;\n  isColumnSelected: boolean;\n  isNextColumnSelected: boolean;\n  isPreviousColumnSelected: boolean;\n  isShowFocusRing: boolean;\n  isSticky: boolean;\n  isRowSelectionEnabled: boolean;\n  isRowSingleSelection: boolean;\n  isActive: boolean;\n  isHover: boolean;\n  isPseudoHover: boolean;\n  isStickyStartEdge: boolean;\n  isStickyEndEdge: boolean;\n  hasStartEdge: boolean;\n  hasEndEdge: boolean;\n  isRtl: boolean;\n  isHighContrast: boolean;\n  horizontalAlignment: 'start' | 'end' | 'left' | 'right' | 'center';\n  verticalAlignment: 'top' | 'center' | 'bottom';\n  variant?: CurrentRowVariant;\n  padding?: CellPadding;\n};\n\n/**\n * Helper function to generate the class array for a data cell.\n */\nexport const getDataCellClassArray = ({\n  isFirstColumnIndex,\n  isFinalColumnIndex,\n  isFirstRowIndex,\n  isFinalRowIndex,\n  hasVerticalGridlines,\n  hasHorizontalGridlines,\n  hasLastHorizontalGridline,\n  isRowSelected,\n  isPreviousRowSelected,\n  isColumnSelected,\n  isNextColumnSelected,\n  isPreviousColumnSelected,\n  isShowFocusRing,\n  isSticky,\n  isRowSelectionEnabled,\n  isRowSingleSelection,\n  isActive,\n  isHover,\n  isPseudoHover,\n  isStickyStartEdge,\n  isStickyEndEdge,\n  hasStartEdge,\n  hasEndEdge,\n  isRtl,\n  isHighContrast,\n  horizontalAlignment,\n  verticalAlignment,\n  variant,\n  padding\n}: DataCellThemingProps) => {\n  const cellStyles = isHighContrast ? tableCellStylesHC : tableCellStyles;\n  const classArray = [cellStyles.base];\n\n  // Padding styling logic\n  const { isTopPadding, isBottomPadding, isStartPadding, isEndPadding } = _getPaddingInfo(padding);\n\n  // Horizontal and vertical alignment styling logic\n  _applyAlignmentStyling(classArray, horizontalAlignment, verticalAlignment);\n\n  // Sticky styling logic\n  _applyStickyStyling(classArray, cellStyles, isSticky, isStickyStartEdge, isStickyEndEdge, isRtl);\n\n  // Interaction styling logic\n  if (isRowSelectionEnabled) {\n    if (isActive) {\n      classArray.push(cellStyles.active);\n    } else if (isHover) {\n      classArray.push(cellStyles.hover);\n    } else if (isPseudoHover) {\n      classArray.push(cellStyles.pseudoHover);\n    }\n  }\n  if (variant === 'highlight') {\n    classArray.push(cellStyles.rowHighlight);\n  }\n  _applyFocusStyling(classArray, cellStyles, isShowFocusRing);\n\n  // Selected Rows and Horizontal Gridline styling logic\n  let hasBackground = false;\n  if (isRowSelected) {\n    hasBackground = true;\n    classArray.push(cellStyles.selectedBackground);\n  }\n  if (isRowSingleSelection && (isRowSelected || isPreviousRowSelected)) {\n    classArray.push(cellStyles.horizontalSelectedGridTop);\n    classArray.push(\n      isTopPadding ? cellStyles.selectedBorderTopPadding : cellStyles.selectedBorderTopNoPadding\n    );\n  } else if (!isFirstRowIndex && hasHorizontalGridlines) {\n    classArray.push(cellStyles.horizontalGridTop);\n    classArray.push(isTopPadding ? cellStyles.borderTopPadding : cellStyles.borderTopNoPadding);\n  } else {\n    classArray.push(isTopPadding ? cellStyles.topSpacerPadding : cellStyles.topSpacerNoPadding);\n  }\n  if (isFinalRowIndex) {\n    classArray.push(cellStyles.lastRow);\n    if (isRowSingleSelection && isRowSelected) {\n      classArray.push(cellStyles.horizontalSelectedGridBottom);\n      classArray.push(\n        isBottomPadding\n          ? cellStyles.selectedBorderBottomPadding\n          : cellStyles.selectedBorderBottomNoPadding\n      );\n    } else if (hasLastHorizontalGridline) {\n      classArray.push(cellStyles.horizontalGridBottom);\n      classArray.push(\n        isBottomPadding ? cellStyles.borderBottomPadding : cellStyles.borderBottomNoPadding\n      );\n    } else {\n      classArray.push(\n        isBottomPadding ? cellStyles.bottomSpacerPadding : cellStyles.bottomSpacerNoPadding\n      );\n    }\n  } else {\n    classArray.push(cellStyles.notLastRow);\n    classArray.push(isBottomPadding ? cellStyles.bottomPadding : cellStyles.bottomNoPadding);\n  }\n\n  // Selected Columns and Vertical Gridline styling logic\n  if (isColumnSelected) {\n    if (!hasBackground) {\n      classArray.push(cellStyles.selectedBackground);\n      hasBackground = true;\n    }\n    _applySelectedColumnStyling(\n      classArray,\n      cellStyles,\n      isStartPadding,\n      isEndPadding,\n      hasStartEdge,\n      hasEndEdge\n    );\n  } else {\n    if (!hasBackground) {\n      classArray.push(cellStyles.background);\n    }\n    _applyColumnStyling(\n      classArray,\n      cellStyles,\n      isStartPadding,\n      isEndPadding,\n      isFirstColumnIndex,\n      isFinalColumnIndex,\n      hasStartEdge,\n      hasEndEdge,\n      isNextColumnSelected,\n      isPreviousColumnSelected,\n      hasVerticalGridlines\n    );\n  }\n  return classArray;\n};\n\ntype HeaderFooterCellThemingProps = {\n  isHeader: boolean;\n  isActiveStyle: boolean;\n  isHoverStyle: boolean;\n  isPreviousCellActiveStyle: boolean;\n  isPreviousCellHoverStyle: boolean;\n  isFirstColumnIndex: boolean;\n  isFinalColumnIndex: boolean;\n  hasVerticalGridlines: boolean;\n  isSelected: boolean;\n  isNextColumnSelected: boolean;\n  isPreviousColumnSelected: boolean;\n  isSticky: boolean;\n  stickyInteractionIndex?: number;\n  stickyNeighborIndex?: number;\n  isShowFocusRing: boolean;\n  isStickyStartEdge: boolean;\n  isStickyEndEdge: boolean;\n  hasStartEdge: boolean;\n  hasEndEdge: boolean;\n  isRtl: boolean;\n  horizontalAlignment: 'start' | 'end' | 'left' | 'right' | 'center';\n  verticalAlignment: 'top' | 'center' | 'bottom';\n  isHighContrast: boolean;\n  padding?: CellPadding;\n};\n\n/**\n * Helper function to generate the class array for a header or footer cell.\n */\nexport const getHeaderFooterCellClassArray = ({\n  isHeader,\n  isActiveStyle,\n  isHoverStyle,\n  isPreviousCellActiveStyle,\n  isPreviousCellHoverStyle,\n  isFirstColumnIndex,\n  isFinalColumnIndex,\n  hasVerticalGridlines,\n  isSelected,\n  isNextColumnSelected,\n  isPreviousColumnSelected,\n  isSticky,\n  isShowFocusRing,\n  isStickyStartEdge,\n  isStickyEndEdge,\n  hasStartEdge,\n  hasEndEdge,\n  isRtl,\n  horizontalAlignment,\n  verticalAlignment,\n  isHighContrast,\n  padding\n}: HeaderFooterCellThemingProps) => {\n  let cellStyles;\n\n  if (isHeader) {\n    cellStyles = isHighContrast ? tableHeaderCellStylesHC : tableHeaderCellStyles;\n  } else {\n    cellStyles = isHighContrast ? tableFooterCellStylesHC : tableFooterCellStyles;\n  }\n  const classArray = [cellStyles.base];\n\n  // Padding styling logic\n  const { isTopPadding, isBottomPadding, isStartPadding, isEndPadding } = _getPaddingInfo(padding);\n  classArray.push(isBottomPadding ? cellStyles.bottomPadding : cellStyles.bottomNoPadding);\n  classArray.push(isTopPadding ? cellStyles.topPadding : cellStyles.topNoPadding);\n\n  // Horizontal and vertical alignment styling logic\n  _applyAlignmentStyling(classArray, horizontalAlignment, verticalAlignment);\n\n  // Sticky styling logic\n  _applyStickyStyling(classArray, cellStyles, isSticky, isStickyStartEdge, isStickyEndEdge, isRtl);\n\n  // Interaction styling logic\n  _applyFocusStyling(classArray, cellStyles, isShowFocusRing);\n\n  // Selected and Vertical Gridline styling logic\n  if (isSelected) {\n    if (isActiveStyle) {\n      classArray.push(cellStyles.activeSelected);\n    } else if (isHoverStyle) {\n      classArray.push(cellStyles.hoverSelected);\n    }\n    classArray.push(cellStyles.selectedBackground);\n\n    _applySelectedColumnStyling(\n      classArray,\n      cellStyles,\n      isStartPadding,\n      isEndPadding,\n      hasStartEdge,\n      hasEndEdge\n    );\n  } else {\n    if (isActiveStyle) {\n      classArray.push(cellStyles.active);\n    } else if (isHoverStyle) {\n      classArray.push(cellStyles.hover);\n    }\n    classArray.push(cellStyles.background);\n\n    _applyColumnStyling(\n      classArray,\n      cellStyles,\n      isStartPadding,\n      isEndPadding,\n      isFirstColumnIndex,\n      isFinalColumnIndex,\n      hasStartEdge,\n      hasEndEdge,\n      isNextColumnSelected,\n      isPreviousColumnSelected,\n      hasVerticalGridlines,\n      isActiveStyle,\n      isHoverStyle,\n      isPreviousCellActiveStyle,\n      isPreviousCellHoverStyle\n    );\n  }\n  return classArray;\n};\n\nconst _getPaddingInfo = (padding?: CellPadding) => {\n  const isPaddingDisabled = padding === 'disabled';\n  const isComplexPadding = padding instanceof Object;\n  const isBottomPadding = !(\n    isPaddingDisabled ||\n    (isComplexPadding && padding?.bottom === 'disabled')\n  );\n  const isEndPadding = !(isPaddingDisabled || (isComplexPadding && padding?.end === 'disabled'));\n  const isStartPadding = !(\n    isPaddingDisabled ||\n    (isComplexPadding && padding?.start === 'disabled')\n  );\n  const isTopPadding = !(isPaddingDisabled || (isComplexPadding && padding?.top === 'disabled'));\n  return { isTopPadding, isBottomPadding, isStartPadding, isEndPadding };\n};\n\nconst _applyAlignmentStyling = (\n  classArray: string[],\n  horizontalAlignment: 'start' | 'end' | 'left' | 'right' | 'center',\n  verticalAlignment: 'top' | 'center' | 'bottom'\n) => {\n  classArray.push(textAlignStyles[horizontalAlignment]);\n  classArray.push(verticalAlignStyles[verticalAlignment]);\n};\n\nconst _applyFocusStyling = (\n  classArray: string[],\n  cellStyles: CellStyles | HeaderCellStyles | FooterCellStyles,\n  isShowFocusRing: boolean\n) => {\n  if (isShowFocusRing) {\n    classArray.push(cellStyles.focused);\n  }\n};\n\nconst _applyStickyStyling = (\n  classArray: string[],\n  cellStyles: CellStyles | HeaderCellStyles | FooterCellStyles,\n  isSticky: boolean,\n  isStickyStartEdge: boolean,\n  isStickyEndEdge: boolean,\n  isRtl: boolean\n) => {\n  if (isSticky) {\n    classArray.push(cellStyles.stickyColumn);\n  }\n  if (isStickyStartEdge) {\n    classArray.push(cellStyles.stickyEdge);\n    classArray.push(isRtl ? cellStyles.stickyEdgeLeft : cellStyles.stickyEdgeRight);\n  } else if (isStickyEndEdge) {\n    classArray.push(cellStyles.stickyEdge);\n    classArray.push(isRtl ? cellStyles.stickyEdgeRight : cellStyles.stickyEdgeLeft);\n  }\n};\n\nconst _applyColumnStyling = (\n  classArray: string[],\n  cellStyles: CellStyles | HeaderCellStyles | FooterCellStyles,\n  isStartPadding: boolean,\n  isEndPadding: boolean,\n  isFirstColumnIndex: boolean,\n  isFinalColumnIndex: boolean,\n  hasStartEdge: boolean,\n  hasEndEdge: boolean,\n  isNextColumnSelected: boolean,\n  isPreviousColumnSelected: boolean,\n  hasVerticalGridlines: boolean,\n  isActiveStyle?: boolean,\n  isHoverStyle?: boolean,\n  isPreviousCellActiveStyle?: boolean,\n  isPreviousCellHoverStyle?: boolean\n) => {\n  if (hasStartEdge) {\n    if (isPreviousColumnSelected) {\n      classArray.push(cellStyles.verticalSelectedGridStart);\n      classArray.push(\n        isStartPadding\n          ? cellStyles.selectedBorderStartPadding\n          : cellStyles.selectedBorderStartNoPadding\n      );\n    } else if (\n      isActiveStyle ||\n      isHoverStyle ||\n      isPreviousCellActiveStyle ||\n      isPreviousCellHoverStyle ||\n      (!isFirstColumnIndex && hasVerticalGridlines)\n    ) {\n      classArray.push(cellStyles.verticalGridStart);\n      classArray.push(\n        isStartPadding ? cellStyles.borderStartPadding : cellStyles.borderStartNoPadding\n      );\n    } else if (isStartPadding) {\n      classArray.push(cellStyles.startSpacerPadding);\n    } else {\n      classArray.push(cellStyles.startSpacerNoPadding);\n    }\n  } else if (isStartPadding) {\n    classArray.push(cellStyles.startPadding);\n  } else {\n    classArray.push(cellStyles.startNoPadding);\n  }\n\n  if (hasEndEdge) {\n    if (isNextColumnSelected) {\n      classArray.push(cellStyles.verticalSelectedGridEnd);\n      classArray.push(\n        isEndPadding ? cellStyles.selectedBorderEndPadding : cellStyles.selectedBorderEndNoPadding\n      );\n    } else if (isActiveStyle || isHoverStyle || (!isFinalColumnIndex && hasVerticalGridlines)) {\n      classArray.push(cellStyles.verticalGridEnd);\n      classArray.push(isEndPadding ? cellStyles.borderEndPadding : cellStyles.borderEndNoPadding);\n    } else if (isEndPadding) {\n      classArray.push(cellStyles.endSpacerPadding);\n    } else {\n      classArray.push(cellStyles.endSpacerNoPadding);\n    }\n  } else if (isEndPadding) {\n    classArray.push(cellStyles.endPadding);\n  } else {\n    classArray.push(cellStyles.endNoPadding);\n  }\n};\n\nconst _applySelectedColumnStyling = (\n  classArray: string[],\n  cellStyles: CellStyles | HeaderCellStyles | FooterCellStyles,\n  isStartPadding: boolean,\n  isEndPadding: boolean,\n  hasStartEdge: boolean,\n  hasEndEdge: boolean\n) => {\n  if (hasStartEdge) {\n    classArray.push(cellStyles.verticalSelectedGridStart);\n    classArray.push(\n      isStartPadding\n        ? cellStyles.selectedBorderStartPadding\n        : cellStyles.selectedBorderStartNoPadding\n    );\n  } else {\n    classArray.push(isStartPadding ? cellStyles.startPadding : cellStyles.startNoPadding);\n  }\n  if (hasEndEdge) {\n    classArray.push(cellStyles.verticalSelectedGridEnd);\n    classArray.push(\n      isEndPadding ? cellStyles.selectedBorderEndPadding : cellStyles.selectedBorderEndNoPadding\n    );\n  } else {\n    classArray.push(isEndPadding ? cellStyles.endPadding : cellStyles.endNoPadding);\n  }\n};\n\n/**\n * Helper function to convert a column's horizontal alignment value into a form control's value.\n */\nexport const getFormTextAlign = (\n  horizontalAlignment: 'start' | 'end' | 'left' | 'right' | 'center',\n  isRtl: boolean\n) => {\n  switch (horizontalAlignment) {\n    case 'left':\n      return isRtl ? 'end' : 'start';\n    case 'center':\n      return undefined;\n    default:\n      return horizontalAlignment;\n  }\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { keyExtractor } from '../../utils/PRIVATE_collectionUtils';\nimport { FocusableElement } from '../../utils/PRIVATE_tabbableUtils';\nimport { ActiveCell, TableColumn } from '../Table';\n\n/**\n * Returns the cell type for the given cell element\n */\nexport const getCellType = (element: FocusableElement) => {\n  return element.dataset['ojCellType'];\n};\n\n/**\n * Returns the row key for the given row element\n */\nexport const getRowKey = <K>(element: HTMLElement) => {\n  return (\n    element.dataset['ojKeyType'] === 'number'\n      ? Number(element.dataset['ojKey'])\n      : element.dataset['ojKey']\n  ) as K;\n};\n\n/**\n * Returns whether or not auto focus is enabled on the specified cell\n */\nexport const isAutoFocusCell = <K, C>(\n  rootElement: HTMLElement,\n  tableId: string,\n  activeCell: ActiveCell<K, C>\n) => {\n  const cellElement = getElementFromCell(rootElement, tableId, activeCell);\n  return cellElement != null && cellElement.dataset['ojTableAutoFocus'] === 'enabled';\n};\n\n/**\n * Returns the key for the row at the given index\n */\nexport const getRowKeyForRowIndex = <K>(\n  rootElement: HTMLElement,\n  tableId: string,\n  index: number\n) => {\n  const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n  if (rowElements.length > index) {\n    return getRowKey<K>(rowElements[index] as HTMLElement);\n  }\n  return undefined;\n};\n\n/**\n * Returns the index of the given row element\n */\nexport const getRowIndexForRowElement = (\n  rootElement: HTMLElement,\n  tableId: string,\n  rowElement: HTMLElement\n) => {\n  const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n  const index = Array.prototype.indexOf.call(rowElements, rowElement);\n  if (index > -1) {\n    return index;\n  }\n  return undefined;\n};\n\n/**\n * Returns the index of the row for the given key.\n */\nexport function getRowIndexForRowKey<K>(rootElement: HTMLElement, tableId: string, rowKey: K) {\n  const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n  for (let i = 0; i < rowElements.length; i++) {\n    if (rowKey === getRowKey(rowElements[i] as HTMLElement)) {\n      return i;\n    }\n  }\n  return undefined;\n}\n\n/**\n * Returns the column key for the given cell element\n */\nexport const getColumnKey = <C>(element: HTMLElement) => {\n  return element.dataset['ojColumnKey'] as C;\n};\n\n/**\n * Returns the key for the column at the given index\n */\nexport const getColumnKeyForColumnIndex = (\n  rootElement: HTMLElement,\n  tableId: string,\n  index: number\n) => {\n  const headerElements = rootElement.querySelectorAll(`[data-oj-table-header-cell='${tableId}']`);\n  if (headerElements.length > index) {\n    return getColumnKey(headerElements[index] as HTMLElement);\n  }\n  return undefined;\n};\n\n/**\n * Returns the index of the given column header element or footer element\n */\nexport const getColumnIndexForHeaderFooterElement = (\n  rootElement: HTMLElement,\n  tableId: string,\n  cellElement: HTMLElement,\n  isHeader: boolean\n) => {\n  const columnElements = rootElement.querySelectorAll(\n    isHeader\n      ? `[data-oj-table-header-cell='${tableId}']`\n      : `[data-oj-table-footer-cell='${tableId}']`\n  );\n  const index = Array.prototype.indexOf.call(columnElements, cellElement);\n  if (index > -1) {\n    return index;\n  }\n  return undefined;\n};\n\n/**\n * Helper method to get the cell key definition from an element\n */\nexport function logicalCellExtractor<K extends string | number, D, C extends string>(\n  element: HTMLElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  cellSelector?: string,\n  onlyAncestors?: boolean\n): ActiveCell<K, C> | undefined {\n  const selectorString =\n    cellSelector != null ? cellSelector : `[data-oj-table-focusable='${tableId}']`;\n  const startingElement = onlyAncestors ? element.parentElement : element;\n  if (startingElement != null) {\n    const cellElement = startingElement.closest(selectorString) as HTMLElement;\n    if (cellElement != null) {\n      const cellType = getCellType(cellElement);\n      if (cellType === 'data') {\n        return {\n          rowKey: keyExtractor<K>(cellElement, `[data-oj-table-data-row='${tableId}']`)!,\n          columnKey: getColumnKey<C>(cellElement),\n          type: cellType\n        };\n      } else if (cellType === 'header' || cellType === 'footer') {\n        return { columnKey: getColumnKey<C>(cellElement), type: cellType };\n      } else if (cellType === 'noData' || cellType === 'pending') {\n        return { type: cellType };\n      } else if (cellType === 'loading' || cellType === 'loadMore') {\n        const columnKey = getBoundaryColumnKey<K, D, C>(columnsArray, true);\n        if (columnKey != null) {\n          return { columnKey: columnKey, type: cellType };\n        }\n      }\n    }\n  }\n  return undefined;\n}\n\n/**\n * Helper method to get an element from a cell descriptor\n */\nexport function getElementFromCell<K, C>(\n  rootElement: HTMLElement,\n  tableId: string,\n  cell: ActiveCell<K, C>\n): HTMLElement | undefined {\n  if (cell.type === 'header') {\n    // header case\n    const headerElements = rootElement.querySelectorAll(`[data-oj-table-header-cell='${tableId}']`);\n    for (const headerElement of headerElements) {\n      if (cell.columnKey === getColumnKey(headerElement as HTMLElement)) {\n        return headerElement as HTMLElement;\n      }\n    }\n  } else if (cell.type === 'footer') {\n    // footer case\n    const footerElements = rootElement.querySelectorAll(`[data-oj-table-footer-cell='${tableId}']`);\n    for (const footerElement of footerElements) {\n      if (cell.columnKey === getColumnKey(footerElement as HTMLElement)) {\n        return footerElement as HTMLElement;\n      }\n    }\n  } else if (cell.type === 'data') {\n    // data body case\n    const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n    for (const rowElement of rowElements) {\n      if (cell.rowKey === getRowKey(rowElement as HTMLElement)) {\n        const cellElements = rowElement.querySelectorAll(`[data-oj-table-focusable='${tableId}']`);\n        for (const cellElement of cellElements) {\n          if (cell.columnKey === getColumnKey(cellElement as HTMLElement)) {\n            return cellElement as HTMLElement;\n          }\n        }\n      }\n    }\n  } else if (cell.type === 'noData') {\n    // no data case\n    return rootElement.querySelector(`[data-oj-table-nodata-cell='${tableId}']`) as HTMLElement;\n  } else if (cell.type === 'pending') {\n    // pending skeletons case\n    return rootElement.querySelector(`[data-oj-table-pending-cell='${tableId}']`) as HTMLElement;\n  } else if (cell.type === 'loading') {\n    // loading skeletons case\n    return rootElement.querySelector(`[data-oj-table-loading-cell='${tableId}']`) as HTMLElement;\n  } else if (cell.type === 'loadMore') {\n    // loadMore skeletons case\n    return rootElement.querySelector(`[data-oj-table-load-more-cell='${tableId}']`) as HTMLElement;\n  }\n  return undefined;\n}\n\n/**\n * Helper method to get the top scroller offset of the Table\n */\nexport const getScrollerTopOffset = (rootElement: HTMLElement, tableId: string) => {\n  const headerRowElement = rootElement.querySelector(\n    `[data-oj-table-header-row='${tableId}']`\n  ) as HTMLElement;\n  return headerRowElement != null ? headerRowElement.getBoundingClientRect().height : 0;\n};\n\n/**\n * Helper method to get the bottom scroller offset of the Table\n */\nexport const getScrollerBottomOffset = (rootElement: HTMLElement, tableId: string) => {\n  const footerRowElement = rootElement.querySelector(\n    `[data-oj-table-footer-row='${tableId}']`\n  ) as HTMLElement;\n  return footerRowElement != null ? footerRowElement.getBoundingClientRect().height : 0;\n};\n\n/**\n * Returns the key of the first focusable row in the Table\n */\nexport const getFirstFocusableRowKey = <K>(rootElement: HTMLElement, tableId: string) => {\n  const firstRowElement = rootElement.querySelector(`[data-oj-table-data-row='${tableId}']`);\n  if (firstRowElement != null) {\n    return getRowKey<K>(firstRowElement as HTMLElement);\n  }\n  return undefined;\n};\n\n/**\n * Returns the key of the last focusable row in the Table\n */\nexport const getLastFocusableRowKey = <K>(rootElement: HTMLElement, tableId: string) => {\n  const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n  const rowCount = rowElements.length;\n  if (rowCount > 0) {\n    return getRowKey(rowElements[rowCount - 1] as HTMLElement) as K;\n  }\n  return undefined;\n};\n\n/**\n * Returns the cell definition of the first rendered cell in the Table\n */\nexport const getFirstFocusableCell = <K extends string | number, C extends string>(\n  rootElement: HTMLElement,\n  tableId: string\n): ActiveCell<K, C> | undefined => {\n  const firstCellElement = rootElement.querySelector(\n    `[data-oj-table-focusable='${tableId}']`\n  ) as HTMLElement;\n  if (firstCellElement != null) {\n    const firstCellType = getCellType(firstCellElement);\n    if (firstCellType === 'header' || firstCellType === 'footer') {\n      return { columnKey: getColumnKey<C>(firstCellElement), type: firstCellType };\n    } else if (firstCellType === 'noData') {\n      return { type: 'noData' };\n    }\n    return {\n      rowKey: keyExtractor<K>(firstCellElement, `[data-oj-table-data-row='${tableId}']`)!,\n      columnKey: getColumnKey<C>(firstCellElement),\n      type: 'data'\n    };\n  }\n  return undefined;\n};\n\n/**\n * Helper function to get the first or last column key.\n */\nexport const getBoundaryColumnKey = <K, D, C>(\n  columnsArray: TableColumn<K, D, C>[],\n  isFirst: boolean\n) => {\n  if (columnsArray.length > 0) {\n    return isFirst ? columnsArray[0].key : columnsArray[columnsArray.length - 1].key;\n  }\n  return undefined;\n};\n\n/**\n * Helper method to get the 'pending' layout cell\n */\nexport const getPendingLayoutCellElement = (rootElement: HTMLElement, tableId: string) => {\n  return rootElement.querySelector(`[data-oj-table-pending-cell='${tableId}']`) as HTMLElement;\n};\n\n/**\n * Helper method to get the 'noData' cell\n */\nexport const getNoDataCellElement = (rootElement: HTMLElement, tableId: string) => {\n  return rootElement.querySelector(`[data-oj-table-nodata-cell='${tableId}']`) as HTMLElement;\n};\n\n/**\n * Helper method to determine if the 'loading' cell is present in the Table\n */\nexport const hasLoadingCell = (rootElement: HTMLElement, tableId: string) => {\n  return rootElement.querySelector(`[data-oj-table-loading-cell='${tableId}']`) != null;\n};\n\n/**\n * Helper method to determine if the no data cell is present in the Table\n */\nexport const hasNoDataCell = (rootElement: HTMLElement, tableId: string) => {\n  return getNoDataCellElement(rootElement, tableId) != null;\n};\n\n/**\n * Helper method to determine if footer cells are present in the Table\n */\nexport const hasFooterCells = (rootElement: HTMLElement, tableId: string) => {\n  return rootElement.querySelectorAll(`[data-oj-table-footer-row='${tableId}']`).length > 0;\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { getCellType, getElementFromCell, logicalCellExtractor } from './TableDomUtils';\nimport { preventBrowserTooltipStyle } from '../themes/Table.css';\nimport { ActiveCell, TableColumn } from '../Table';\nimport { Cell } from '../../UNSAFE_TableView';\n\n/**\n * Browser zoom levels are not handled identically between Range sizes and Element sizes, so this offset\n * should be used when comparing horizontal widths. Using a smaller value (0.01 for example) causes false\n * positives, while using a larger value (0.05 for example) causes actual truncations to be missed.\n */\nconst HORIZONTAL_TRUNCATION_OFFSET = 0.015;\n\n/**\n * Default Redwood line-height overrides cause false positives as the Range sizes are always for a 'normal'\n * line-height, and none of the default scale fonts have 'normal' line-height values. This causes offsets\n * of between 0.5px and 1.5px. As a true truncation will cause an offset of closer to a full line height\n * (at least 12px for 2xs text), use a larger offset value than the currently observed 1.5px max for safety.\n */\nconst VERTICAL_TRUNCATION_OFFSET = 5;\n\n/**\n * Helper method to determine if a given cell contains truncated text.\n */\nexport const hasTruncatedText = (cellElement: HTMLElement) => {\n  if (cellElement.getAttribute('data-oj-table-tooltip') !== 'enabled') {\n    return false;\n  }\n  const innerText = String(cellElement.innerText).trim();\n  if (innerText === '') {\n    return false;\n  }\n\n  const walker = document.createTreeWalker(cellElement, NodeFilter.SHOW_TEXT);\n  while (walker.nextNode()) {\n    const range = new Range();\n    const textNode = walker.currentNode;\n    range.selectNodeContents(textNode);\n    const untruncatedTextLength = range.getBoundingClientRect().width;\n    const untruncatedTextHeight = range.getBoundingClientRect().height;\n\n    let firstParent = true;\n    let parentElement = textNode.parentElement;\n    while (parentElement != null) {\n      const parentStyles = getComputedStyle(parentElement);\n      if (firstParent) {\n        // only verify truncation status of 'visible' text nodes\n        if (untruncatedTextLength === 0 || parentStyles.visibility === 'hidden') {\n          break;\n        }\n        firstParent = false;\n      }\n      const horizontalPadding =\n        parseFloat(parentStyles.paddingLeft) + parseFloat(parentStyles.paddingRight);\n      const horizontalBorder =\n        parseFloat(parentStyles.borderLeft) + parseFloat(parentStyles.borderRight);\n      const renderedTextLength =\n        parentElement.getBoundingClientRect().width - horizontalPadding - horizontalBorder;\n\n      const verticalPadding =\n        parseFloat(parentStyles.paddingTop) + parseFloat(parentStyles.paddingBottom);\n      const verticalBorder =\n        parseFloat(parentStyles.borderTop) + parseFloat(parentStyles.borderBottom);\n      const renderedTextHeight =\n        parentElement.getBoundingClientRect().height - verticalPadding - verticalBorder;\n\n      if (\n        untruncatedTextLength - renderedTextLength > HORIZONTAL_TRUNCATION_OFFSET ||\n        untruncatedTextHeight - renderedTextHeight > VERTICAL_TRUNCATION_OFFSET\n      ) {\n        return true;\n      }\n      if (parentElement === cellElement) {\n        break;\n      }\n      parentElement = parentElement.parentElement;\n    }\n  }\n  return false;\n};\n\n/**\n * Helper function to handle updating the Table's tooltip due to a focus navigation gesture.\n */\nexport function handleNavigationTooltipGesture<K, C>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  cell: ActiveCell<K, C>,\n  showTooltip: (cell: Cell<K, C>) => void,\n  hideTooltip: (isImmediate?: boolean) => void\n) {\n  hideTooltip(true);\n  if (cell.type === 'data' || cell.type === 'header' || cell.type === 'footer') {\n    const cellElement = getElementFromCell(rootElement, tableId, cell);\n    if (cellElement != null) {\n      showTooltip(cell);\n    }\n  }\n}\n\n/**\n * Helper function to handle updating the Table's tooltip due to a pointer move gesture.\n */\nexport function handleMoveTooltipGesture<K extends string | number, D, C extends string>(\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  event: PointerEvent,\n  showTooltip: (cell: Cell<K, C>) => void,\n  hideTooltip: (isImmediate?: boolean) => void,\n  tooltipId: string\n) {\n  let tooltipShown = false;\n  const targetElement = event.relatedTarget as HTMLElement;\n  if (targetElement != null && targetElement.closest(`#${tooltipId}`) != null) {\n    return;\n  }\n  const cellElement = (event.target as HTMLElement).closest(\n    `[data-oj-table-focusable='${tableId}']`\n  ) as HTMLElement;\n  if (cellElement != null) {\n    const type = getCellType(cellElement);\n    if (type === 'data' || type === 'header' || type === 'footer') {\n      showTooltip(logicalCellExtractor<K, D, C>(cellElement, tableId, columnsArray) as Cell<K, C>);\n      tooltipShown = true;\n    }\n  }\n  if (!tooltipShown) {\n    hideTooltip();\n  }\n}\n\n/**\n * Helper function to handle updating the Table's tooltip due to a pointer leave gesture.\n */\nexport const handleLeaveTableTooltipGesture = (\n  rootElement: HTMLDivElement,\n  event: PointerEvent,\n  hideTooltip: (isImmediate?: boolean) => void,\n  tooltipId: string\n) => {\n  const targetElement = event.relatedTarget as HTMLElement;\n  if (targetElement != null && targetElement.closest(`#${tooltipId}`) != null) {\n    // the pointer 'left' the table, but is only over a cell tooltip - in most cases, we want\n    // to just return here as the pointer is still 'over' the table. however, this can also\n    // occur when the pointer is technically outside of the table's bounds, and in that case\n    // we don't actually want to return as we should clear out our cell tooltip as expected\n    const boundingRect = rootElement.getBoundingClientRect();\n    const isOutOfBounds =\n      event.clientX < boundingRect.left ||\n      event.clientX > boundingRect.right ||\n      event.clientY < boundingRect.top ||\n      event.clientY > boundingRect.bottom;\n    if (!isOutOfBounds) {\n      return;\n    }\n  }\n  hideTooltip();\n};\n\n// Pointer Enter handler for elements that need to prevent default browser tooltips\nconst _pointerEnterHandler = (event: PointerEvent) => {\n  const targetElement = event.target as HTMLElement;\n  targetElement.classList.add(preventBrowserTooltipStyle);\n};\n\n// Pointer Leave handler for elements that need to prevent default browser tooltips\nconst _pointerLeaveHandler = (event: PointerEvent) => {\n  const targetElement = event.target as HTMLElement;\n  targetElement.classList.remove(preventBrowserTooltipStyle);\n};\n\n/*\n * Props that can be spread on elements that need to prevent default browser tooltips\n */\nexport const preventBrowserTooltipProps = {\n  onPointerEnter: _pointerEnterHandler,\n  onPointerLeave: _pointerLeaveHandler\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren } from 'preact';\nimport {\n  CurrentRowVariant,\n  DataCellFocusTarget,\n  DataCellPadding,\n  DataCellTooltip,\n  TableRendererContext,\n  TableRowContext\n} from '../UNSAFE_TableView';\nimport { FormContext } from '../hooks/UNSAFE_useFormContext';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { getFormTextAlign, getDataCellClassArray } from './utils/TableThemeUtils';\nimport { preventBrowserTooltipProps } from './utils/TableTooltipUtils';\n\n/**\n * Props for the TableCell Component\n */\nexport type TableCellProps<K, D, C> = {\n  tableId: string;\n  rowData: D;\n  columnKey: C;\n  columnIndex: number;\n  rowKey: K;\n  rowIndex: number;\n  isFinalRowIndex: boolean;\n  isFinalColumnIndex: boolean;\n  isFirstLogicalColumnIndex: boolean;\n  isFinalLogicalColumnIndex: boolean;\n  hasVerticalGridlines: boolean;\n  hasHorizontalGridlines: boolean;\n  hasFooters: boolean;\n  hasVerticalUnderflow: boolean;\n  hasMore: boolean;\n  isRowSelected: boolean;\n  isPreviousRowSelected: boolean;\n  isColumnSelected: boolean;\n  isNextColumnSelected: boolean;\n  isPreviousColumnSelected: boolean;\n  isSticky: boolean;\n  isShowFocusRing: boolean;\n  hasTabIndex: boolean;\n  isTabbableMode: boolean;\n  isStickyStartEdge: boolean;\n  isStickyEndEdge: boolean;\n  hasStartEdge: boolean;\n  hasEndEdge: boolean;\n  isRtl: boolean;\n  isHighContrast: boolean;\n  isAccRowHeader: boolean;\n  isRowSelectionEnabled: boolean;\n  isRowSingleSelection: boolean;\n  applyActiveStyle: boolean;\n  applyHoverStyle: boolean;\n  applyPseudoHoverStyle: boolean;\n  field?: keyof D;\n  focusTarget?: DataCellFocusTarget<K, D>;\n  renderer?: (context: TableRendererContext<K, D, C>) => ComponentChildren;\n  selectorRenderer?: () => ComponentChildren;\n  variant?: CurrentRowVariant;\n  padding?: DataCellPadding<K, D>;\n  tooltip?: DataCellTooltip<K, D>;\n  horizontalAlignment?: 'start' | 'end' | 'left' | 'right' | 'center';\n  verticalAlignment?: 'top' | 'center' | 'bottom';\n};\n\nfunction _defaultCellRenderer<K, D, C>({ rowData, field }: TableRendererContext<K, D, C>) {\n  return field != null ? String(rowData[field]) : undefined;\n}\n\n/**\n * The internal component used to render a single cell in a TableRow.\n */\nexport function TableCell<K, D, C>({\n  tableId,\n  rowData,\n  field,\n  columnKey,\n  columnIndex,\n  rowKey,\n  rowIndex,\n  isFinalRowIndex,\n  isFinalColumnIndex,\n  isFirstLogicalColumnIndex,\n  isFinalLogicalColumnIndex,\n  hasVerticalGridlines,\n  hasHorizontalGridlines,\n  hasFooters,\n  hasVerticalUnderflow,\n  hasMore,\n  isRowSelected,\n  isPreviousRowSelected,\n  isColumnSelected,\n  isNextColumnSelected,\n  isPreviousColumnSelected,\n  isSticky,\n  isShowFocusRing,\n  hasTabIndex,\n  isTabbableMode,\n  isAccRowHeader,\n  focusTarget = 'cell',\n  renderer = _defaultCellRenderer,\n  selectorRenderer,\n  isRowSelectionEnabled,\n  isRowSingleSelection,\n  variant,\n  applyActiveStyle,\n  applyHoverStyle,\n  applyPseudoHoverStyle,\n  isStickyStartEdge,\n  isStickyEndEdge,\n  hasStartEdge,\n  hasEndEdge,\n  isRtl,\n  isHighContrast,\n  padding,\n  tooltip,\n  horizontalAlignment = 'start',\n  verticalAlignment = 'center'\n}: TableCellProps<K, D, C>) {\n  const browser = getClientHints().browser;\n\n  const rowContext: TableRowContext<K, D> = { key: rowKey, data: rowData };\n  const columnPadding = typeof padding === 'function' ? padding(rowContext) : padding;\n  const columnTooltip = typeof tooltip === 'function' ? tooltip(rowContext) : tooltip;\n  const supportsDefaultTooltip = columnTooltip !== 'disabled';\n  const hasLastHorizontalGridline =\n    hasHorizontalGridlines && (hasMore || hasVerticalUnderflow || !hasFooters);\n\n  const cellClasses = classNames(\n    getDataCellClassArray({\n      isFirstColumnIndex: columnIndex === 0 || isFirstLogicalColumnIndex,\n      isFinalColumnIndex: isFinalColumnIndex || isFinalLogicalColumnIndex,\n      isFirstRowIndex: rowIndex === 0,\n      isFinalRowIndex,\n      hasVerticalGridlines,\n      hasHorizontalGridlines,\n      hasLastHorizontalGridline,\n      isRowSelected,\n      isPreviousRowSelected,\n      isColumnSelected,\n      isNextColumnSelected,\n      isPreviousColumnSelected,\n      isSticky,\n      hasStartEdge,\n      hasEndEdge,\n      isShowFocusRing,\n      isRowSelectionEnabled,\n      isRowSingleSelection,\n      isActive: applyActiveStyle,\n      isHover: applyHoverStyle,\n      isPseudoHover: applyPseudoHoverStyle,\n      isStickyStartEdge,\n      isStickyEndEdge,\n      isRtl,\n      isHighContrast,\n      horizontalAlignment,\n      verticalAlignment,\n      variant,\n      padding: columnPadding\n    })\n  );\n\n  const cellRendererProps = {\n    rowData: rowData,\n    rowKey: rowKey,\n    field: field,\n    columnKey: columnKey,\n    selector: selectorRenderer,\n    isTabbable: isTabbableMode\n  };\n\n  const supportsAutoFocus =\n    typeof focusTarget === 'function'\n      ? focusTarget(rowContext) === 'content'\n      : focusTarget === 'content';\n\n  return (\n    <td\n      aria-colindex={columnIndex + 1}\n      class={cellClasses}\n      tabIndex={hasTabIndex ? 0 : -1}\n      role={isAccRowHeader ? 'rowheader' : 'gridcell'}\n      data-oj-cell-type={'data'}\n      data-oj-column-key={columnKey}\n      data-oj-table-focusable={tableId}\n      data-oj-table-data-cell={tableId}\n      data-oj-table-tooltip={supportsDefaultTooltip ? 'enabled' : undefined}\n      data-oj-table-auto-focus={supportsAutoFocus ? 'enabled' : undefined}\n      {...(supportsDefaultTooltip && browser === 'safari' ? preventBrowserTooltipProps : {})}\n      {...(isColumnSelected ? { 'aria-selected': true } : {})}>\n      <FormContext.Provider value={{ textAlign: getFormTextAlign(horizontalAlignment, isRtl) }}>\n        {renderer(cellRendererProps)}\n      </FormContext.Provider>\n    </td>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { memo } from 'preact/compat';\nimport { SelectionDetail } from '../UNSAFE_Collection';\nimport { Selector } from '../UNSAFE_Selector';\nimport { CurrentRowVariant, TableSelectionDetail } from '../UNSAFE_TableView';\nimport { tableRowStyles, tableRowStylesHC } from './themes/TableRowStyles.css';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { Keys, containsKey, isSameKey } from '../utils/UNSAFE_keys';\nimport { TableColumn } from './Table';\nimport { TableCell } from './TableCell';\nimport { BundleType } from '../resources/nls/bundle';\nimport { useInteractionStyle } from '../hooks/UNSAFE_useInteractionStyle';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\n\n/**\n * Props for the TableRow Component\n */\nexport type TableRowProps<K extends string | number, D, C extends string> = {\n  tableId: string;\n  rowKey: K;\n  rowData: D;\n  rowIndex: number;\n  isFinalRow: boolean;\n  columnsArray: TableColumn<K, D, C>[];\n  rowHeaderColumnKeys: Set<C>;\n  hasVerticalGridlines: boolean;\n  hasHorizontalGridlines: boolean;\n  hasFooters: boolean;\n  hasVerticalUnderflow: boolean;\n  hasMore: boolean;\n  isSelected: boolean;\n  isPreviousSelected: boolean;\n  isRowSelectionEnabled: boolean;\n  isSingleRowSelectionEnabled: boolean;\n  isRtl: boolean;\n  isHighContrast: boolean;\n  selectedRowKeys?: Keys<K>;\n  isShowFocusRing: boolean;\n  activeColumnKey?: C;\n  isTabbableMode: boolean;\n  selectedColumnKeys?: Keys<C>;\n  variant?: CurrentRowVariant;\n  onSelectionChange?: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void;\n  startStickyEdge?: number;\n  endStickyEdge?: number;\n  firstStickyColumnIndex?: number;\n  finalStickyColumnIndex?: number;\n  columnBorderEdges: { hasStart: boolean; hasEnd: boolean; width: number }[];\n  disabledInteractionKeys?: ('enter' | 'space')[];\n};\n\n/**\n * The internal component used to render a single row in Table.\n */\nfunction TableRow<K extends string | number, D, C extends string>({\n  tableId,\n  rowKey,\n  rowData,\n  rowIndex,\n  isFinalRow,\n  columnsArray,\n  rowHeaderColumnKeys,\n  hasVerticalGridlines,\n  hasHorizontalGridlines,\n  hasFooters,\n  hasVerticalUnderflow,\n  hasMore,\n  isSelected,\n  isPreviousSelected,\n  isRowSelectionEnabled,\n  isSingleRowSelectionEnabled,\n  selectedRowKeys = { all: false, keys: new Set<K>() },\n  isShowFocusRing,\n  activeColumnKey,\n  isTabbableMode,\n  selectedColumnKeys = { all: false, keys: new Set<C>() },\n  variant,\n  disabledInteractionKeys,\n  onSelectionChange,\n  startStickyEdge,\n  endStickyEdge,\n  firstStickyColumnIndex,\n  finalStickyColumnIndex,\n  columnBorderEdges,\n  isRtl,\n  isHighContrast\n}: TableRowProps<K, D, C>) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const { interactionProps, applyActiveStyle, applyHoverStyle, applyPseudoHoverStyle } =\n    useInteractionStyle({ disabledKeys: disabledInteractionKeys });\n\n  const rowStyles = isHighContrast ? tableRowStylesHC : tableRowStyles;\n  const classArray = [rowStyles.base, isFinalRow ? rowStyles.lastRowHeight : rowStyles.rowHeight];\n  const classes = classNames(classArray);\n\n  const accessibleRowName = (rowIndex + 2).toString();\n  const handleRowSelectorChange = (detail: SelectionDetail<K>) => {\n    if (onSelectionChange != null) {\n      onSelectionChange(\n        {\n          value: {\n            row: detail.value,\n            column: { all: false, keys: new Set<C>() }\n          },\n          target: detail.target\n        },\n        false\n      );\n    }\n  };\n  const selectorRenderer =\n    isRowSelectionEnabled && !isSingleRowSelectionEnabled\n      ? () => {\n          // conversion from 0-based index and adding the header row as it is always rendered\n          return (\n            <Selector\n              aria-label={translations.collection_selectRow({ ROW_NAME: accessibleRowName })}\n              onChange={handleRowSelectorChange}\n              rowKey={rowKey}\n              selectedKeys={selectedRowKeys}\n            />\n          );\n        }\n      : undefined;\n\n  let isPreviousColumnSelected = false;\n  let isPreviousStickyColumnSelected = false;\n  return (\n    <tr\n      aria-rowindex={rowIndex + 2}\n      class={classes}\n      role={'row'}\n      data-oj-key={rowKey}\n      data-oj-table-data-row={tableId}\n      {...(isRowSelectionEnabled\n        ? isSelected\n          ? { 'aria-selected': true }\n          : { 'aria-selected': false }\n        : {})}\n      {...(typeof rowKey === 'number' && { 'data-oj-key-type': 'number' })}\n      {...(isRowSelectionEnabled && interactionProps)}>\n      {columnsArray.map((column: TableColumn<K, D, C>, columnIndex: number) => {\n        const columnKey = column.key;\n        const isColumnSelected = containsKey(selectedColumnKeys, columnKey);\n        const isActive = columnKey === activeColumnKey;\n        const hasTabIndex = isActive && !isTabbableMode;\n        const isSticky = column.value.sticky === 'enabled';\n        let nextVisibleColumn;\n        let isNextVisibleColumnSelected = false;\n        let isPreviousVisibleColumnSelected = false;\n        let isFirstLogicalColumnIndex = false;\n        let isFinalLogicalColumnIndex = false;\n        if (isSticky) {\n          if (startStickyEdge != null && firstStickyColumnIndex === columnIndex) {\n            isFirstLogicalColumnIndex = true;\n          }\n          if (endStickyEdge != null && finalStickyColumnIndex === columnIndex) {\n            isFinalLogicalColumnIndex = true;\n          }\n          if (\n            (startStickyEdge != null && startStickyEdge > columnIndex) ||\n            (endStickyEdge != null && endStickyEdge <= columnIndex)\n          ) {\n            for (let i = columnIndex + 1; i < columnsArray.length; i++) {\n              if (columnsArray[i].value.sticky === 'enabled') {\n                nextVisibleColumn = columnsArray[i];\n                break;\n              }\n            }\n          } else {\n            nextVisibleColumn =\n              columnIndex < columnsArray.length - 1 ? columnsArray[columnIndex + 1] : undefined;\n          }\n          isNextVisibleColumnSelected =\n            startStickyEdge === columnIndex\n              ? false\n              : nextVisibleColumn != null && containsKey(selectedColumnKeys, nextVisibleColumn.key);\n          if (\n            (startStickyEdge != null && startStickyEdge >= columnIndex) ||\n            (endStickyEdge != null && endStickyEdge < columnIndex)\n          ) {\n            isPreviousVisibleColumnSelected = isPreviousStickyColumnSelected;\n          } else if (endStickyEdge !== columnIndex) {\n            isPreviousVisibleColumnSelected = isPreviousColumnSelected;\n          }\n        } else {\n          isPreviousVisibleColumnSelected = isPreviousColumnSelected;\n        }\n        const cellProps = {\n          tableId: tableId,\n          rowData: rowData,\n          field: column.value.field,\n          stickyColumn: column.value.sticky,\n          columnKey: columnKey,\n          columnIndex: columnIndex,\n          rowKey: rowKey,\n          rowIndex: rowIndex,\n          isFinalRowIndex: isFinalRow,\n          isFinalColumnIndex: columnIndex === columnsArray.length - 1,\n          isFirstLogicalColumnIndex: isFirstLogicalColumnIndex,\n          isFinalLogicalColumnIndex: isFinalLogicalColumnIndex,\n          hasVerticalGridlines: hasVerticalGridlines,\n          hasHorizontalGridlines: hasHorizontalGridlines,\n          hasFooters: hasFooters,\n          hasVerticalUnderflow: hasVerticalUnderflow,\n          hasMore: hasMore,\n          isRowSelected: isSelected,\n          isPreviousRowSelected: isPreviousSelected,\n          isSticky: isSticky,\n          isColumnSelected: isColumnSelected,\n          isNextColumnSelected: isNextVisibleColumnSelected,\n          isPreviousColumnSelected: isPreviousVisibleColumnSelected,\n          isShowFocusRing: isShowFocusRing && isActive,\n          hasTabIndex: hasTabIndex,\n          isTabbableMode: isTabbableMode,\n          isAccRowHeader: rowHeaderColumnKeys.has(column.key),\n          renderer: column.value.renderer,\n          selectorRenderer: selectorRenderer,\n          isRowSelectionEnabled: isRowSelectionEnabled,\n          variant: variant,\n          isRowSingleSelection: isSingleRowSelectionEnabled,\n          applyActiveStyle: applyActiveStyle,\n          applyHoverStyle: applyHoverStyle,\n          applyPseudoHoverStyle: applyPseudoHoverStyle,\n          isStickyStartEdge: columnIndex === startStickyEdge,\n          isStickyEndEdge: columnIndex === endStickyEdge,\n          hasStartEdge: columnBorderEdges[columnIndex].hasStart,\n          hasEndEdge: columnBorderEdges[columnIndex].hasEnd,\n          isRtl: isRtl,\n          isHighContrast: isHighContrast,\n          padding: column.value.padding,\n          tooltip: column.value.tooltip,\n          focusTarget: column.value.focusTarget,\n          horizontalAlignment:\n            column.value.alignment?.horizontal != null\n              ? column.value.alignment.horizontal\n              : column.value.horizontalAlignment,\n          verticalAlignment: column.value.alignment?.vertical\n        };\n        isPreviousColumnSelected = isColumnSelected;\n        if (isSticky) {\n          isPreviousStickyColumnSelected = isColumnSelected;\n        }\n        return <TableCell {...cellProps} />;\n      })}\n    </tr>\n  );\n}\n\nconst _areStringSetsEquivalent = (set1?: Set<string>, set2?: Set<string>) => {\n  if (set1 == null) {\n    return set2 == null;\n  }\n  if (set2 == null) {\n    return false;\n  }\n  return set1.size === set2.size && [...set1].every((x) => set2.has(x));\n};\n\nconst _areColumnsArraysEquivalent = (\n  columnsArray1: TableColumn<string | number, unknown, string>[],\n  columnsArray2: TableColumn<string | number, unknown, string>[]\n) => {\n  if (columnsArray1.length === columnsArray2.length) {\n    for (let i = 0; i < columnsArray1.length; i++) {\n      if (\n        columnsArray1[i].key !== columnsArray2[i].key ||\n        columnsArray1[i].value !== columnsArray2[i].value\n      ) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n};\n\nexport const MemoizeTableRow = memo(\n  TableRow,\n  (\n    prev: TableRowProps<string | number, unknown, string>,\n    next: TableRowProps<string | number, unknown, string>\n  ) => {\n    if (prev && next) {\n      return (\n        prev.tableId === next.tableId &&\n        prev.rowKey === next.rowKey &&\n        prev.rowData === next.rowData &&\n        prev.rowIndex === next.rowIndex &&\n        prev.isFinalRow === next.isFinalRow &&\n        _areColumnsArraysEquivalent(prev.columnsArray, next.columnsArray) &&\n        prev.hasHorizontalGridlines === next.hasHorizontalGridlines &&\n        prev.hasVerticalGridlines === next.hasVerticalGridlines &&\n        (!next.isFinalRow ||\n          (prev.hasFooters === next.hasFooters &&\n            prev.hasVerticalUnderflow === next.hasVerticalUnderflow &&\n            prev.hasMore === next.hasMore)) &&\n        _areStringSetsEquivalent(prev.rowHeaderColumnKeys, next.rowHeaderColumnKeys) &&\n        prev.isSelected === next.isSelected &&\n        prev.isPreviousSelected === next.isPreviousSelected &&\n        prev.isRowSelectionEnabled === next.isRowSelectionEnabled &&\n        prev.isSingleRowSelectionEnabled === next.isSingleRowSelectionEnabled &&\n        (prev.isRowSelectionEnabled && !prev.isSingleRowSelectionEnabled\n          ? isSameKey(prev.selectedRowKeys, next.selectedRowKeys)\n          : true) &&\n        isSameKey(prev.selectedColumnKeys, next.selectedColumnKeys) &&\n        prev.isShowFocusRing === next.isShowFocusRing &&\n        prev.activeColumnKey === next.activeColumnKey &&\n        prev.isTabbableMode === next.isTabbableMode &&\n        prev.variant === next.variant &&\n        prev.onSelectionChange === next.onSelectionChange &&\n        prev.startStickyEdge === next.startStickyEdge &&\n        prev.endStickyEdge === next.endStickyEdge &&\n        prev.firstStickyColumnIndex === next.firstStickyColumnIndex &&\n        prev.finalStickyColumnIndex === next.finalStickyColumnIndex &&\n        prev.columnBorderEdges === next.columnBorderEdges &&\n        prev.isRtl === next.isRtl &&\n        prev.isHighContrast === next.isHighContrast &&\n        prev.disabledInteractionKeys === next.disabledInteractionKeys\n      );\n    }\n    return false;\n  }\n);\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { ComponentChildren, RefObject } from 'preact';\nimport { TableNoDataRendererContext } from '../UNSAFE_TableView';\nimport { useLayoutEffect } from 'preact/hooks';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { tableRowStyles } from './themes/TableRowStyles.css';\nimport { TableNoDataVariantOptions } from './themes/TableNoDataStyles.css';\nimport { TableNoDataRedwoodTheme } from './themes/redwood/TableNoDataTheme';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { BundleType } from '../resources/nls/bundle';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\n\n/**\n * Props for the TableCell Component\n */\nexport type TableNoDataProps = {\n  rootRef: RefObject<HTMLDivElement>;\n  tableId: string;\n  columnsCount: number;\n  isShowFocusRing: boolean;\n  hasTabIndex: boolean;\n  isTabbableMode: boolean;\n  ariaRowIndex: number;\n  renderer?: (context: TableNoDataRendererContext) => ComponentChildren;\n};\n\n/**\n * The internal component used to render a single cell in a TableRow.\n */\nexport function TableNoData({\n  rootRef,\n  tableId,\n  columnsCount,\n  isShowFocusRing,\n  hasTabIndex,\n  isTabbableMode,\n  ariaRowIndex,\n  renderer\n}: TableNoDataProps) {\n  const browser = getClientHints().browser;\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const rowClasses = classNames([tableRowStyles.base]);\n\n  const { classes: themeClasses } = useComponentTheme<TableNoDataVariantOptions>(\n    TableNoDataRedwoodTheme,\n    {\n      defaultRenderer: renderer == null ? 'isDefaultRenderer' : 'notDefaultRenderer',\n      showFocusRing: isShowFocusRing ? 'isShowFocusRing' : 'notShowFocusRing'\n    }\n  );\n\n  const cellClasses = classNames([themeClasses]);\n\n  function defaultContentRenderer() {\n    return translations.collection_noData();\n  }\n\n  const contentRenderer = renderer != null ? renderer : defaultContentRenderer;\n\n  // in firefox, table element heights are not stretched unless explicitly set in some cases\n  useLayoutEffect(() => {\n    if (browser === 'firefox') {\n      const rootElement = rootRef.current;\n      if (rootElement != null) {\n        const tableBodyElement = rootElement.querySelector(\n          `[data-oj-table-body='${tableId}']`\n        ) as HTMLElement;\n        const noDataElement = rootElement.querySelector(\n          `[data-oj-table-nodata-cell='${tableId}']`\n        ) as HTMLElement;\n        if (tableBodyElement != null && noDataElement != null) {\n          noDataElement.style.height = '';\n          noDataElement.style.height = `${tableBodyElement.getBoundingClientRect().height}px`;\n        }\n      }\n    }\n  });\n\n  return (\n    <tr aria-rowindex={ariaRowIndex} class={rowClasses} role={'row'}>\n      <td\n        aria-colindex={1}\n        class={cellClasses}\n        style={browser !== 'firefox' ? 'height: 100%;' : undefined}\n        tabIndex={hasTabIndex ? 0 : -1}\n        role={'gridcell'}\n        colSpan={columnsCount}\n        data-oj-cell-type={'noData'}\n        data-oj-table-focusable={tableId}\n        data-oj-table-nodata-cell={tableId}>\n        {contentRenderer({ isTabbable: isTabbableMode })}\n      </td>\n    </tr>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Fragment, type RefObject } from 'preact';\nimport { useCallback } from 'preact/hooks';\nimport { LoadMoreCollection } from '../PRIVATE_LoadMoreCollection';\nimport { ActiveCell, TableColumn, TableData, ViewportInfo } from './Table';\nimport { TableSkeletonRow } from './TableSkeletonRow';\nimport { MemoizeTableRow } from './TableRow';\nimport { ItemContext } from '../UNSAFE_Collection';\nimport {\n  CurrentRowVariant,\n  TableNoDataRendererContext,\n  TableRowContext,\n  TableSelectionDetail\n} from '../UNSAFE_TableView';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { backgroundStyles } from './themes/Table.css';\nimport { Keys, containsKey } from '../utils/UNSAFE_keys';\nimport { TableNoData } from './TableNoData';\nimport { ComponentChildren } from 'preact';\n\n/**\n * Props for the TableBody Component\n */\nexport type TableBodyProps<K extends string | number, D, C extends string> = {\n  rootRef: RefObject<HTMLDivElement>;\n  viewportInfo: ViewportInfo;\n  tableId: string;\n  isValidRender: boolean;\n  getAccessibleRowHeaders: (context: TableRowContext<K, D>) => Set<C>;\n  tableData: TableData<K, D>[];\n  columnsArray: TableColumn<K, D, C>[];\n  hasVerticalGridlines: boolean;\n  hasHorizontalGridlines: boolean;\n  hasFooters: boolean;\n  hasVerticalUnderflow: boolean;\n  isShowFocusRing: boolean;\n  isTabbableMode: boolean;\n  hasMore: boolean;\n  isRtl: boolean;\n  isHighContrast: boolean;\n  onLoadMore: () => void;\n  activeCell?: ActiveCell<K, C>;\n  currentRowKey?: K;\n  currentRowVariant?: CurrentRowVariant;\n  selected: { row?: Keys<K>; column?: Keys<C> };\n  isRowSelectionEnabled: boolean;\n  isSingleRowSelectionEnabled: boolean;\n  onSelectionChange?: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void;\n  noDataRenderer?: (context: TableNoDataRendererContext) => ComponentChildren;\n  startStickyEdge?: number;\n  endStickyEdge?: number;\n  firstStickyColumnIndex?: number;\n  finalStickyColumnIndex?: number;\n  columnBorderEdges: { hasStart: boolean; hasEnd: boolean; width: number }[];\n  disabledInteractionKeys?: ('enter' | 'space')[];\n};\n\n/**\n * The internal component used to render a single cell in a TableRow.\n */\nexport function TableBody<K extends string | number, D, C extends string>({\n  rootRef,\n  viewportInfo,\n  tableId,\n  isValidRender,\n  getAccessibleRowHeaders,\n  tableData,\n  columnsArray,\n  hasVerticalGridlines,\n  hasHorizontalGridlines,\n  hasFooters,\n  hasVerticalUnderflow,\n  isShowFocusRing,\n  isTabbableMode,\n  hasMore,\n  onLoadMore,\n  activeCell,\n  currentRowKey,\n  currentRowVariant,\n  selected,\n  isRowSelectionEnabled,\n  isSingleRowSelectionEnabled,\n  disabledInteractionKeys,\n  onSelectionChange,\n  noDataRenderer,\n  startStickyEdge,\n  endStickyEdge,\n  firstStickyColumnIndex,\n  finalStickyColumnIndex,\n  columnBorderEdges,\n  isRtl,\n  isHighContrast\n}: TableBodyProps<K, D, C>) {\n  const browser = getClientHints().browser;\n\n  // returns a TableRowContext based on ItemContext (added key)\n  const getRowContext = useCallback((context: ItemContext<TableData<K, D>>) => {\n    return {\n      index: context.index,\n      data: context.data.data,\n      key: context.data.metadata\n    };\n  }, []);\n\n  let isPreviousSelected = false;\n  const collectionChildrenFunc = (context: ItemContext<TableData<K, D>>) => {\n    const tableRowContext = getRowContext(context);\n    const rowKey = tableRowContext.key;\n    const containsActiveCell = activeCell?.rowKey === rowKey;\n    const activeColumnKey = containsActiveCell ? activeCell.columnKey : undefined;\n    const isSelected = containsKey(selected.row, rowKey);\n    const rowProps = {\n      tableId: tableId,\n      columnsArray: columnsArray,\n      rowHeaderColumnKeys: getAccessibleRowHeaders(tableRowContext),\n      hasVerticalGridlines: hasVerticalGridlines,\n      hasHorizontalGridlines: hasHorizontalGridlines,\n      hasFooters: hasFooters,\n      hasVerticalUnderflow: hasVerticalUnderflow,\n      hasMore: hasMore,\n      isSelected: isSelected,\n      isPreviousSelected: isPreviousSelected,\n      disabledInteractionKeys: disabledInteractionKeys,\n      onSelectionChange: onSelectionChange,\n      isRowSelectionEnabled: isRowSelectionEnabled,\n      isSingleRowSelectionEnabled: isSingleRowSelectionEnabled,\n      variant: currentRowKey === rowKey ? currentRowVariant : 'none',\n      isShowFocusRing: isShowFocusRing && containsActiveCell,\n      activeColumnKey: activeColumnKey,\n      isTabbableMode: isTabbableMode,\n      selectedRowKeys: selected.row,\n      selectedColumnKeys: selected.column,\n      rowIndex: tableRowContext.index,\n      rowKey: rowKey,\n      rowData: tableRowContext.data,\n      isFinalRow: tableRowContext.index === tableData.length - 1,\n      startStickyEdge: startStickyEdge,\n      endStickyEdge: endStickyEdge,\n      firstStickyColumnIndex: firstStickyColumnIndex,\n      finalStickyColumnIndex: finalStickyColumnIndex,\n      columnBorderEdges: columnBorderEdges,\n      isRtl: isRtl,\n      isHighContrast: isHighContrast\n    };\n    isPreviousSelected = isSelected;\n    return <MemoizeTableRow {...rowProps} />;\n  };\n\n  const getNoDataProps = () => {\n    const isActive = activeCell?.type === 'noData';\n    const hasTabIndex = isActive && !isTabbableMode;\n    return {\n      rootRef: rootRef,\n      tableId: tableId,\n      columnsCount: columnsArray.length,\n      isShowFocusRing: isShowFocusRing && isActive,\n      hasTabIndex: hasTabIndex,\n      isTabbableMode: isTabbableMode,\n      ariaRowIndex: isValidRender ? 2 : 1,\n      renderer: isValidRender ? noDataRenderer : undefined\n    };\n  };\n\n  const isShowEmptyLoading = tableData.length === 0 && hasMore;\n  const isShowNoData = tableData.length === 0 && !hasMore;\n  const loadMoreViewportConfig = {\n    scroller: () => viewportInfo.viewportConfig.scroller().current\n  };\n\n  return (\n    <tbody class={backgroundStyles.inherit} role={'presentation'} data-oj-table-body={tableId}>\n      {isShowNoData || !isValidRender ? (\n        <TableNoData {...getNoDataProps()} />\n      ) : (\n        <Fragment>\n          <LoadMoreCollection<TableData<K, D>>\n            data={tableData}\n            loadMoreIndicator={\n              <TableSkeletonRow\n                tableId={tableId}\n                hasTabIndex={\n                  isShowEmptyLoading\n                    ? activeCell?.type === 'loading'\n                    : activeCell?.type === 'loadMore'\n                }\n                colspan={columnsArray.length}\n                isLoadMore={!isShowEmptyLoading}\n                isShowFocusRing={\n                  isShowFocusRing &&\n                  (isShowEmptyLoading\n                    ? activeCell?.type === 'loading'\n                    : activeCell?.type === 'loadMore')\n                }\n                isHighContrast={isHighContrast}\n              />\n            }\n            hasMore={hasMore}\n            onLoadMore={onLoadMore}\n            viewportConfig={loadMoreViewportConfig}>\n            {collectionChildrenFunc}\n          </LoadMoreCollection>\n          <tr\n            style={browser !== 'firefox' ? 'height: 100%;' : undefined}\n            role={'presentation'}\n            data-oj-table-spacer-row={tableId}\n          />\n        </Fragment>\n      )}\n    </tbody>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren } from 'preact';\nimport { useCallback } from 'preact/hooks';\nimport { SelectionDetail } from '../UNSAFE_Collection';\nimport { SelectorAll } from '../UNSAFE_SelectorAll';\nimport {\n  CellPadding,\n  TableHeaderRendererContext,\n  TableSelectionDetail,\n  SortCriterionDetail\n} from '../UNSAFE_TableView';\nimport { FormContext } from '../hooks/UNSAFE_useFormContext';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { Keys, isSameKey } from '../utils/UNSAFE_keys';\nimport {\n  justifyContentStyles,\n  tableHeaderCellTextStyles,\n  tableHeaderSortContainerStyles\n} from './themes/Table.css';\nimport { tableHeaderCellStyles } from './themes/TableHeaderCellStyles.css';\nimport { getFormTextAlign, getHeaderFooterCellClassArray } from './utils/TableThemeUtils';\nimport { preventBrowserTooltipProps } from './utils/TableTooltipUtils';\nimport { BundleType } from '../resources/nls/bundle';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { SortControl } from '../UNSAFE_SortControl';\nimport { SortableContext } from '#hooks/UNSAFE_useSortableContext';\n\n/**\n * Props for the TableHeaderCell Component\n */\nexport type TableHeaderCellProps<K, C> = {\n  tableId: string;\n  columnKey: C;\n  columnIndex: number;\n  isFinalColumnIndex: boolean;\n  isFirstLogicalColumnIndex: boolean;\n  isFinalLogicalColumnIndex: boolean;\n  hasVerticalGridlines: boolean;\n  isSelected: boolean;\n  isNextColumnSelected: boolean;\n  isPreviousColumnSelected: boolean;\n  isSticky: boolean;\n  isColumnSelectable: boolean;\n  isRowSelectionEnabled: boolean;\n  isShowFocusRing: boolean;\n  hasTabIndex: boolean;\n  isTabbableMode: boolean;\n  isStickyStartEdge: boolean;\n  isStickyEndEdge: boolean;\n  isRtl: boolean;\n  isAccColumnHeader: boolean;\n  isHighContrast: boolean;\n  headerText?: string;\n  selectedRowKeys?: Keys<K>;\n  stickyTopOffset?: number;\n  hasStartEdge: boolean;\n  hasEndEdge: boolean;\n  isActiveStyle: boolean;\n  isHoverStyle: boolean;\n  isPreviousCellActiveStyle: boolean;\n  isPreviousCellHoverStyle: boolean;\n  focusTarget?: 'cell' | 'content';\n  renderer?: (context: TableHeaderRendererContext<C>) => ComponentChildren;\n  onSelectionChange?: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void;\n  isShowSortIcon: boolean;\n  sortable?: 'enabled' | 'disabled';\n  sortDirection?: 'ascending' | 'descending' | 'unsorted';\n  onSortCriterionChange?: (detail: SortCriterionDetail<C>) => void;\n  padding?: CellPadding;\n  tooltip?: 'enabled' | 'disabled';\n  horizontalAlignment?: 'start' | 'end' | 'left' | 'right' | 'center';\n  verticalAlignment?: 'top' | 'center' | 'bottom';\n};\n\n/**\n * The internal component used to render a single cell in a TableHeaderRow.\n */\nexport function TableHeaderCell<K, C>({\n  tableId,\n  columnKey,\n  columnIndex,\n  isFinalColumnIndex,\n  isFirstLogicalColumnIndex,\n  isFinalLogicalColumnIndex,\n  hasVerticalGridlines,\n  isSelected,\n  isNextColumnSelected,\n  isPreviousColumnSelected,\n  isSticky,\n  isColumnSelectable,\n  isRowSelectionEnabled,\n  selectedRowKeys = { all: false, keys: new Set<K>() },\n  isShowFocusRing,\n  hasTabIndex,\n  isTabbableMode,\n  headerText,\n  stickyTopOffset = 0,\n  focusTarget = 'cell',\n  renderer,\n  onSelectionChange,\n  isShowSortIcon,\n  sortable = 'disabled',\n  sortDirection = 'unsorted',\n  onSortCriterionChange,\n  isStickyStartEdge,\n  isStickyEndEdge,\n  hasStartEdge,\n  hasEndEdge,\n  isActiveStyle,\n  isHoverStyle,\n  isPreviousCellActiveStyle,\n  isPreviousCellHoverStyle,\n  isRtl,\n  isAccColumnHeader,\n  isHighContrast,\n  padding,\n  tooltip,\n  horizontalAlignment = 'start',\n  verticalAlignment = 'center'\n}: TableHeaderCellProps<K, C>) {\n  const browser = getClientHints().browser;\n  const supportsDefaultTooltip = tooltip !== 'disabled';\n  const supportsAutoFocus = focusTarget === 'content';\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const cellClasses = classNames(\n    getHeaderFooterCellClassArray({\n      isHeader: true,\n      isActiveStyle,\n      isHoverStyle,\n      isPreviousCellActiveStyle,\n      isPreviousCellHoverStyle,\n      isFirstColumnIndex: columnIndex === 0 || isFirstLogicalColumnIndex,\n      isFinalColumnIndex: isFinalColumnIndex || isFinalLogicalColumnIndex,\n      hasVerticalGridlines,\n      isSelected,\n      isNextColumnSelected,\n      isPreviousColumnSelected,\n      isSticky,\n      isShowFocusRing,\n      isStickyStartEdge,\n      isStickyEndEdge,\n      hasStartEdge,\n      hasEndEdge,\n      isRtl,\n      horizontalAlignment,\n      verticalAlignment,\n      isHighContrast,\n      padding\n    })\n  );\n\n  let selectorAllState: 'all' | 'none' | 'partial' | 'partial-all';\n  if (isSameKey(selectedRowKeys, { all: true, deletedKeys: new Set<K>() })) {\n    selectorAllState = 'all';\n  } else if (isSameKey(selectedRowKeys, { all: false, keys: new Set<K>() })) {\n    selectorAllState = 'none';\n  } else {\n    selectorAllState = 'partial';\n  }\n\n  const handleSelectorChange = (detail: SelectionDetail<K>) => {\n    if (onSelectionChange != null) {\n      onSelectionChange(\n        {\n          value: {\n            row: detail.value,\n            column: { all: false, keys: new Set<C>() }\n          },\n          target: detail.target\n        },\n        false\n      );\n    }\n  };\n\n  const selectorRenderer = isRowSelectionEnabled\n    ? () => (\n        <SelectorAll\n          aria-label={translations.collection_selectAllRows()}\n          onChange={handleSelectorChange}\n          selected={selectorAllState}\n        />\n      )\n    : undefined;\n\n  const handleSortGesture = useCallback(() => {\n    if (onSortCriterionChange != null) {\n      const newDirection = sortDirection === 'ascending' ? 'descending' : 'ascending';\n      onSortCriterionChange([{ key: columnKey, sortDirection: newDirection }]);\n    }\n  }, [columnKey, sortDirection, onSortCriterionChange]);\n\n  const headerCellRendererProps = {\n    key: columnKey,\n    headerText: headerText,\n    sortable: sortable,\n    sortDirection: sortDirection,\n    selector: selectorRenderer,\n    isTabbable: isTabbableMode\n  };\n\n  const getHeaderCellRenderer = useCallback(() => {\n    if (renderer != null) {\n      return renderer;\n    }\n    return ({ headerText, sortable, sortDirection }: TableHeaderRendererContext<C>) => {\n      const text =\n        headerText != null ? (\n          <div class={tableHeaderCellTextStyles.base}>\n            <span class={tableHeaderCellStyles.defaultRendererSpan}>{headerText}</span>\n          </div>\n        ) : undefined;\n      if (sortable === 'enabled' || sortDirection !== 'unsorted') {\n        const isIconFirst =\n          horizontalAlignment === 'end' ||\n          (!isRtl && horizontalAlignment === 'right') ||\n          (isRtl && horizontalAlignment === 'left');\n\n        const containerClasses = classNames([\n          tableHeaderSortContainerStyles.base,\n          justifyContentStyles[horizontalAlignment]\n        ]);\n        return (\n          <div class={containerClasses}>\n            {isIconFirst && <SortControl />}\n            {text}\n            {!isIconFirst && <SortControl />}\n          </div>\n        );\n      }\n      return text;\n    };\n  }, [renderer, horizontalAlignment, isRtl]);\n\n  const getAriaSelected = () => {\n    if (isSelected) {\n      return { 'aria-selected': true };\n    }\n    return isColumnSelectable ? { 'aria-selected': false } : undefined;\n  };\n\n  const getAriaSort = () => {\n    if (sortDirection === 'ascending' || sortDirection === 'descending') {\n      return { 'aria-sort': sortDirection };\n    }\n    return undefined;\n  };\n\n  return (\n    <SortableContext.Provider\n      value={{ isRendered: isShowSortIcon, sortable, sortDirection, onSort: handleSortGesture }}>\n      <th\n        aria-colindex={columnIndex + 1}\n        {...getAriaSelected()}\n        {...getAriaSort()}\n        class={cellClasses}\n        style={`top:${stickyTopOffset}px;`}\n        tabIndex={hasTabIndex ? 0 : -1}\n        role={isAccColumnHeader ? 'columnheader' : 'gridcell'}\n        data-oj-cell-type={'header'}\n        data-oj-column-key={columnKey}\n        data-oj-table-focusable={tableId}\n        data-oj-table-header-cell={tableId}\n        data-oj-table-tooltip={supportsDefaultTooltip ? 'enabled' : undefined}\n        data-oj-table-auto-focus={supportsAutoFocus ? 'enabled' : undefined}\n        {...(supportsDefaultTooltip && browser === 'safari' ? preventBrowserTooltipProps : {})}>\n        <FormContext.Provider value={{ textAlign: getFormTextAlign(horizontalAlignment, isRtl) }}>\n          {getHeaderCellRenderer()(headerCellRendererProps)}\n        </FormContext.Provider>\n      </th>\n    </SortableContext.Provider>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { Keys, containsKey } from '../utils/UNSAFE_keys';\nimport { TableSelectionDetail, SortCriterionDetail } from '../UNSAFE_TableView';\nimport { TableColumn } from './Table';\nimport { TableHeaderCell } from './TableHeaderCell';\nimport { backgroundStyles, tableHeaderRowStyles } from './themes/Table.css';\n\n/**\n * Props for the TableHeader Component\n */\nexport type TableHeaderProps<K, D, C> = {\n  tableId: string;\n  isRendered: boolean;\n  columnsArray: TableColumn<K, D, C>[];\n  hasVerticalGridlines: boolean;\n  activeKey?: C;\n  isTabbableMode: boolean;\n  isShowFocusRing: boolean;\n  selectedColumnKeys?: Keys<C>;\n  selectedRowKeys?: Keys<K>;\n  isColumnSelectionEnabled: boolean;\n  isRowSelectionEnabled: boolean;\n  isResizeHover: boolean;\n  isRtl: boolean;\n  isHighContrast: boolean;\n  onSelectionChange?: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void;\n  isForceSortIcons: boolean;\n  activeStyleKey?: C;\n  hoverStyleKey?: C;\n  sortCriterion?: { key: C; sortDirection: 'ascending' | 'descending' }[];\n  onSortCriterionChange?: (detail: SortCriterionDetail<C>) => void;\n  stickyTopOffset?: number;\n  startStickyEdge?: number;\n  endStickyEdge?: number;\n  firstStickyColumnIndex?: number;\n  finalStickyColumnIndex?: number;\n  columnBorderEdges: { hasStart: boolean; hasEnd: boolean; width: number }[];\n};\n\n/**\n * The internal component used to render a header region in Table.\n */\nexport function TableHeader<K, D, C>({\n  tableId,\n  isRendered,\n  columnsArray,\n  hasVerticalGridlines,\n  activeKey,\n  isTabbableMode,\n  isShowFocusRing,\n  selectedColumnKeys,\n  selectedRowKeys,\n  isColumnSelectionEnabled,\n  isRowSelectionEnabled,\n  onSelectionChange,\n  isForceSortIcons,\n  activeStyleKey,\n  hoverStyleKey,\n  sortCriterion,\n  onSortCriterionChange,\n  stickyTopOffset,\n  startStickyEdge,\n  endStickyEdge,\n  firstStickyColumnIndex,\n  finalStickyColumnIndex,\n  columnBorderEdges,\n  isResizeHover,\n  isRtl,\n  isHighContrast\n}: TableHeaderProps<K, D, C>) {\n  const rowClasses = classNames([tableHeaderRowStyles.base]);\n\n  const getStyle = () => {\n    return isResizeHover ? 'cursor: col-resize;' : '';\n  };\n\n  let previousColumnKey: C | undefined;\n  let previousStickyColumnKey: C | undefined;\n  let isPreviousSelectable = false;\n  let isPreviousStickySelectable = false;\n  let isPreviousColumnSelected = false;\n  let isPreviousStickyColumnSelected = false;\n  return isRendered ? (\n    <thead class={backgroundStyles.inherit} role={'presentation'}>\n      <tr\n        aria-rowindex={1}\n        class={rowClasses}\n        role={'row'}\n        style={getStyle()}\n        data-oj-table-header-row={tableId}>\n        {columnsArray.map((column: TableColumn<K, D, C>, columnIndex: number) => {\n          const columnKey = column.key;\n          let sortDirection;\n          if (sortCriterion != null) {\n            for (const criterion of sortCriterion) {\n              if (criterion.key === columnKey) {\n                sortDirection = criterion.sortDirection;\n                break;\n              }\n            }\n          }\n          const sortable = column.value.sortable;\n          const hasSortIcon = sortable === 'enabled' || sortDirection != null;\n          const isShowSortIcon =\n            hasSortIcon &&\n            (isForceSortIcons || sortDirection != null || hoverStyleKey === columnKey);\n          const isSticky = column.value.sticky === 'enabled';\n          const isSelectable = isColumnSelectionEnabled && column.value.selectable !== 'disabled';\n          const isSelected = containsKey(selectedColumnKeys, columnKey);\n          const isActive = columnKey === activeKey;\n          const hasTabIndex = isActive && !isTabbableMode;\n          let previousVisibleColumnKey;\n          let isPreviousVisibleColumnSelectable = false;\n          let isPreviousVisibleColumnSelected = false;\n          let nextVisibleColumn;\n          let isNextVisibleColumnSelected = false;\n          let isFirstLogicalColumnIndex = false;\n          let isFinalLogicalColumnIndex = false;\n          if (isSticky) {\n            if (startStickyEdge != null && firstStickyColumnIndex === columnIndex) {\n              isFirstLogicalColumnIndex = true;\n            }\n            if (endStickyEdge != null && finalStickyColumnIndex === columnIndex) {\n              isFinalLogicalColumnIndex = true;\n            }\n            if (\n              (startStickyEdge != null && startStickyEdge > columnIndex) ||\n              (endStickyEdge != null && endStickyEdge <= columnIndex)\n            ) {\n              for (let i = columnIndex + 1; i < columnsArray.length; i++) {\n                if (columnsArray[i].value.sticky === 'enabled') {\n                  nextVisibleColumn = columnsArray[i];\n                  break;\n                }\n              }\n            } else {\n              nextVisibleColumn =\n                columnIndex < columnsArray.length - 1 ? columnsArray[columnIndex + 1] : undefined;\n            }\n            isNextVisibleColumnSelected =\n              startStickyEdge === columnIndex\n                ? false\n                : nextVisibleColumn != null &&\n                  containsKey(selectedColumnKeys, nextVisibleColumn.key);\n            if (\n              (startStickyEdge != null && startStickyEdge >= columnIndex) ||\n              (endStickyEdge != null && endStickyEdge < columnIndex)\n            ) {\n              previousVisibleColumnKey = previousStickyColumnKey;\n              isPreviousVisibleColumnSelectable = isPreviousStickySelectable;\n              isPreviousVisibleColumnSelected = isPreviousStickyColumnSelected;\n            } else if (endStickyEdge !== columnIndex) {\n              previousVisibleColumnKey = previousColumnKey;\n              isPreviousVisibleColumnSelectable = isPreviousSelectable;\n              isPreviousVisibleColumnSelected = isPreviousColumnSelected;\n            }\n          } else {\n            previousVisibleColumnKey = previousColumnKey;\n            isPreviousVisibleColumnSelectable = isPreviousSelectable;\n            isPreviousVisibleColumnSelected = isPreviousColumnSelected;\n          }\n          const headerCellProps = {\n            tableId: tableId,\n            hasVerticalGridlines: hasVerticalGridlines,\n            columnKey: columnKey,\n            columnIndex: columnIndex,\n            isFinalColumnIndex: columnIndex === columnsArray.length - 1,\n            isFirstLogicalColumnIndex: isFirstLogicalColumnIndex,\n            isFinalLogicalColumnIndex: isFinalLogicalColumnIndex,\n            stickyTopOffset: stickyTopOffset,\n            isSticky: isSticky,\n            isSelected: isSelected,\n            isNextColumnSelected: isNextVisibleColumnSelected,\n            isPreviousColumnSelected: isPreviousVisibleColumnSelected,\n            hasStartEdge: columnBorderEdges[columnIndex].hasStart,\n            hasEndEdge: columnBorderEdges[columnIndex].hasEnd,\n            selectedRowKeys: selectedRowKeys,\n            isColumnSelectable: isSelectable,\n            isRowSelectionEnabled: isRowSelectionEnabled,\n            isShowFocusRing: isShowFocusRing && isActive,\n            hasTabIndex: hasTabIndex,\n            isTabbableMode: isTabbableMode,\n            headerText: column.value.headerText,\n            renderer: column.value.headerRenderer,\n            onSelectionChange: onSelectionChange,\n            isShowSortIcon: isShowSortIcon,\n            sortable: sortable,\n            sortDirection: sortDirection,\n            onSortCriterionChange: onSortCriterionChange,\n            isStickyStartEdge: columnIndex === startStickyEdge,\n            isStickyEndEdge: columnIndex === endStickyEdge,\n            isActiveStyle: isSelectable && activeStyleKey === columnKey,\n            isHoverStyle: isSelectable && hoverStyleKey === columnKey,\n            isPreviousCellActiveStyle:\n              activeStyleKey != null &&\n              activeStyleKey === previousVisibleColumnKey &&\n              isPreviousVisibleColumnSelectable,\n            isPreviousCellHoverStyle:\n              hoverStyleKey != null &&\n              hoverStyleKey === previousVisibleColumnKey &&\n              isPreviousVisibleColumnSelectable,\n            isRtl: isRtl,\n            isAccColumnHeader: column.value.accessibleColumnHeader !== 'disabled',\n            isHighContrast: isHighContrast,\n            padding: column.value.headerPadding,\n            tooltip: column.value.headerTooltip,\n            focusTarget: column.value.headerFocusTarget,\n            horizontalAlignment:\n              column.value.headerAlignment?.horizontal != null\n                ? column.value.headerAlignment.horizontal\n                : column.value.horizontalAlignment,\n            verticalAlignment: column.value.headerAlignment?.vertical\n          };\n          previousColumnKey = columnKey;\n          isPreviousSelectable = isSelectable;\n          isPreviousColumnSelected = isSelected;\n          if (isSticky) {\n            previousStickyColumnKey = columnKey;\n            isPreviousStickySelectable = isSelectable;\n            isPreviousStickyColumnSelected = isSelected;\n          }\n          return <TableHeaderCell {...headerCellProps} />;\n        })}\n      </tr>\n    </thead>\n  ) : null;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren } from 'preact';\nimport { CellPadding, TableFooterRendererContext } from '../UNSAFE_TableView';\nimport { FormContext } from '../hooks/UNSAFE_useFormContext';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { getFormTextAlign, getHeaderFooterCellClassArray } from './utils/TableThemeUtils';\nimport { preventBrowserTooltipProps } from './utils/TableTooltipUtils';\n\n/**\n * Props for the TableFooterCell Component\n */\nexport type TableFooterCellProps<C> = {\n  tableId: string;\n  columnKey: C;\n  columnIndex: number;\n  isFinalColumnIndex: boolean;\n  isFirstLogicalColumnIndex: boolean;\n  isFinalLogicalColumnIndex: boolean;\n  hasVerticalGridlines: boolean;\n  isSelected: boolean;\n  isNextColumnSelected: boolean;\n  isPreviousColumnSelected: boolean;\n  isSticky: boolean;\n  isColumnSelectable: boolean;\n  isShowFocusRing: boolean;\n  hasTabIndex: boolean;\n  isTabbableMode: boolean;\n  isStickyStartEdge: boolean;\n  isStickyEndEdge: boolean;\n  hasStartEdge: boolean;\n  hasEndEdge: boolean;\n  isActiveStyle: boolean;\n  isHoverStyle: boolean;\n  isPreviousCellActiveStyle: boolean;\n  isPreviousCellHoverStyle: boolean;\n  isRtl: boolean;\n  isHighContrast: boolean;\n  footerText?: string;\n  stickyBottomOffset?: number;\n  focusTarget?: 'cell' | 'content';\n  renderer?: (context: TableFooterRendererContext<C>) => ComponentChildren;\n  padding?: CellPadding;\n  tooltip?: 'enabled' | 'disabled';\n  horizontalAlignment?: 'start' | 'end' | 'left' | 'right' | 'center';\n  verticalAlignment?: 'top' | 'center' | 'bottom';\n};\n\nfunction _defaultFooterCellRenderer<C>({ footerText }: TableFooterRendererContext<C>) {\n  return footerText != null ? footerText : undefined;\n}\n\n/**\n * The internal component used to render a single cell in a TableFooterRow.\n */\nexport function TableFooterCell<C>({\n  tableId,\n  columnKey,\n  columnIndex,\n  isFinalColumnIndex,\n  isFirstLogicalColumnIndex,\n  isFinalLogicalColumnIndex,\n  hasVerticalGridlines,\n  isSelected,\n  isNextColumnSelected,\n  isPreviousColumnSelected,\n  isSticky,\n  isColumnSelectable,\n  isShowFocusRing,\n  hasTabIndex,\n  isTabbableMode,\n  stickyBottomOffset = 0,\n  focusTarget = 'cell',\n  footerText,\n  renderer = _defaultFooterCellRenderer,\n  isStickyStartEdge,\n  isStickyEndEdge,\n  hasStartEdge,\n  hasEndEdge,\n  isActiveStyle,\n  isHoverStyle,\n  isPreviousCellActiveStyle,\n  isPreviousCellHoverStyle,\n  isRtl,\n  isHighContrast,\n  padding,\n  tooltip,\n  horizontalAlignment = 'start',\n  verticalAlignment = 'center'\n}: TableFooterCellProps<C>) {\n  const browser = getClientHints().browser;\n  const supportsDefaultTooltip = tooltip !== 'disabled';\n  const supportsAutoFocus = focusTarget === 'content';\n\n  const cellClasses = classNames(\n    getHeaderFooterCellClassArray({\n      isHeader: false,\n      isActiveStyle,\n      isHoverStyle,\n      isPreviousCellActiveStyle,\n      isPreviousCellHoverStyle,\n      isFirstColumnIndex: columnIndex === 0 || isFirstLogicalColumnIndex,\n      isFinalColumnIndex: isFinalColumnIndex || isFinalLogicalColumnIndex,\n      hasVerticalGridlines,\n      isSelected,\n      isNextColumnSelected,\n      isPreviousColumnSelected,\n      isSticky,\n      hasStartEdge,\n      hasEndEdge,\n      isShowFocusRing,\n      isStickyStartEdge,\n      isStickyEndEdge,\n      isRtl,\n      horizontalAlignment,\n      verticalAlignment,\n      isHighContrast,\n      padding\n    })\n  );\n\n  const footerCellRendererProps = {\n    key: columnKey,\n    footerText: footerText,\n    isTabbable: isTabbableMode\n  };\n\n  return (\n    <td\n      aria-colindex={columnIndex + 1}\n      {...(isSelected\n        ? { 'aria-selected': true }\n        : isColumnSelectable\n        ? { 'aria-selected': false }\n        : {})}\n      class={cellClasses}\n      style={`bottom:${stickyBottomOffset}px;`}\n      tabIndex={hasTabIndex ? 0 : -1}\n      role={'gridcell'}\n      data-oj-cell-type={'footer'}\n      data-oj-column-key={columnKey}\n      data-oj-table-focusable={tableId}\n      data-oj-table-footer-cell={tableId}\n      data-oj-table-tooltip={supportsDefaultTooltip ? 'enabled' : undefined}\n      data-oj-table-auto-focus={supportsAutoFocus ? 'enabled' : undefined}\n      {...(supportsDefaultTooltip && browser === 'safari' ? preventBrowserTooltipProps : {})}>\n      <FormContext.Provider value={{ textAlign: getFormTextAlign(horizontalAlignment, isRtl) }}>\n        {renderer(footerCellRendererProps)}\n      </FormContext.Provider>\n    </td>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { Keys, containsKey } from '../utils/UNSAFE_keys';\nimport { TableColumn } from './Table';\nimport { TableFooterCell } from './TableFooterCell';\nimport { backgroundStyles, tableFooterRowStyles } from './themes/Table.css';\n\n/**\n * Props for the TableFooter Component\n */\nexport type TableFooterProps<K, D, C> = {\n  tableId: string;\n  isRendered: boolean;\n  columnsArray: TableColumn<K, D, C>[];\n  hasVerticalGridlines: boolean;\n  activeKey?: C;\n  isTabbableMode: boolean;\n  isShowFocusRing: boolean;\n  isRtl: boolean;\n  isHighContrast: boolean;\n  selectedColumnKeys?: Keys<C>;\n  isColumnSelectionEnabled: boolean;\n  activeStyleKey?: C;\n  hoverStyleKey?: C;\n  stickyBottomOffset?: number;\n  startStickyEdge?: number;\n  endStickyEdge?: number;\n  firstStickyColumnIndex?: number;\n  finalStickyColumnIndex?: number;\n  columnBorderEdges: { hasStart: boolean; hasEnd: boolean; width: number }[];\n  dataRowCount: number;\n};\n\n/**\n * The internal component used to render a footer region in Table.\n */\nexport function TableFooter<K, D, C>({\n  tableId,\n  isRendered,\n  columnsArray,\n  hasVerticalGridlines,\n  activeKey,\n  isTabbableMode,\n  isShowFocusRing,\n  selectedColumnKeys,\n  isColumnSelectionEnabled,\n  activeStyleKey,\n  hoverStyleKey,\n  stickyBottomOffset,\n  startStickyEdge,\n  endStickyEdge,\n  firstStickyColumnIndex,\n  finalStickyColumnIndex,\n  columnBorderEdges,\n  dataRowCount,\n  isRtl,\n  isHighContrast\n}: TableFooterProps<K, D, C>) {\n  const rowClasses = classNames([tableFooterRowStyles.base]);\n\n  let previousColumnKey: C | undefined;\n  let previousStickyColumnKey: C | undefined;\n  let isPreviousSelectable = false;\n  let isPreviousStickySelectable = false;\n  let isPreviousColumnSelected = false;\n  let isPreviousStickyColumnSelected = false;\n  return isRendered ? (\n    <tfoot class={backgroundStyles.inherit} role={'presentation'}>\n      <tr\n        aria-rowindex={Math.max(dataRowCount, 1) + 2}\n        class={rowClasses}\n        role={'row'}\n        data-oj-table-footer-row={tableId}>\n        {columnsArray.map((column: TableColumn<K, D, C>, columnIndex: number) => {\n          const columnKey = column.key;\n          const isSticky = column.value.sticky === 'enabled';\n          const isSelectable = isColumnSelectionEnabled && column.value.selectable !== 'disabled';\n          const isSelected = containsKey(selectedColumnKeys, columnKey);\n          const isActive = columnKey === activeKey;\n          const hasTabIndex = isActive && !isTabbableMode;\n          let previousVisibleColumnKey;\n          let isPreviousVisibleColumnSelectable = false;\n          let isPreviousVisibleColumnSelected = false;\n          let nextVisibleColumn;\n          let isNextVisibleColumnSelected = false;\n          let isFirstLogicalColumnIndex = false;\n          let isFinalLogicalColumnIndex = false;\n          if (isSticky) {\n            if (startStickyEdge != null && firstStickyColumnIndex === columnIndex) {\n              isFirstLogicalColumnIndex = true;\n            }\n            if (endStickyEdge != null && finalStickyColumnIndex === columnIndex) {\n              isFinalLogicalColumnIndex = true;\n            }\n            if (\n              (startStickyEdge != null && startStickyEdge > columnIndex) ||\n              (endStickyEdge != null && endStickyEdge <= columnIndex)\n            ) {\n              for (let i = columnIndex + 1; i < columnsArray.length; i++) {\n                if (columnsArray[i].value.sticky === 'enabled') {\n                  nextVisibleColumn = columnsArray[i];\n                  break;\n                }\n              }\n            } else {\n              nextVisibleColumn =\n                columnIndex < columnsArray.length - 1 ? columnsArray[columnIndex + 1] : undefined;\n            }\n            isNextVisibleColumnSelected =\n              startStickyEdge === columnIndex\n                ? false\n                : nextVisibleColumn != null &&\n                  containsKey(selectedColumnKeys, nextVisibleColumn.key);\n            if (\n              (startStickyEdge != null && startStickyEdge >= columnIndex) ||\n              (endStickyEdge != null && endStickyEdge < columnIndex)\n            ) {\n              previousVisibleColumnKey = previousStickyColumnKey;\n              isPreviousVisibleColumnSelectable = isPreviousStickySelectable;\n              isPreviousVisibleColumnSelected = isPreviousStickyColumnSelected;\n            } else if (endStickyEdge !== columnIndex) {\n              previousVisibleColumnKey = previousColumnKey;\n              isPreviousVisibleColumnSelectable = isPreviousSelectable;\n              isPreviousVisibleColumnSelected = isPreviousColumnSelected;\n            }\n          } else {\n            previousVisibleColumnKey = previousColumnKey;\n            isPreviousVisibleColumnSelectable = isPreviousSelectable;\n            isPreviousVisibleColumnSelected = isPreviousColumnSelected;\n          }\n          const footerCellProps = {\n            tableId: tableId,\n            columnKey: columnKey,\n            columnIndex: columnIndex,\n            isFinalColumnIndex: columnIndex === columnsArray.length - 1,\n            isFirstLogicalColumnIndex: isFirstLogicalColumnIndex,\n            isFinalLogicalColumnIndex: isFinalLogicalColumnIndex,\n            hasVerticalGridlines: hasVerticalGridlines,\n            stickyBottomOffset: stickyBottomOffset,\n            isSticky: isSticky,\n            isSelected: isSelected,\n            isNextColumnSelected: isNextVisibleColumnSelected,\n            isPreviousColumnSelected: isPreviousVisibleColumnSelected,\n            hasStartEdge: columnBorderEdges[columnIndex].hasStart,\n            hasEndEdge: columnBorderEdges[columnIndex].hasEnd,\n            isColumnSelectable: isSelectable,\n            isShowFocusRing: isShowFocusRing && isActive,\n            hasTabIndex: hasTabIndex,\n            isTabbableMode: isTabbableMode,\n            footerText: column.value.footerText,\n            renderer: column.value.footerRenderer,\n            isStickyStartEdge: columnIndex === startStickyEdge,\n            isStickyEndEdge: columnIndex === endStickyEdge,\n            isActiveStyle: isSelectable && activeStyleKey === columnKey,\n            isHoverStyle: isSelectable && hoverStyleKey === columnKey,\n            isPreviousCellActiveStyle:\n              activeStyleKey != null &&\n              activeStyleKey === previousVisibleColumnKey &&\n              isPreviousVisibleColumnSelectable,\n            isPreviousCellHoverStyle:\n              hoverStyleKey != null &&\n              hoverStyleKey === previousVisibleColumnKey &&\n              isPreviousVisibleColumnSelectable,\n            isRtl: isRtl,\n            isHighContrast: isHighContrast,\n            padding: column.value.footerPadding,\n            tooltip: column.value.footerTooltip,\n            focusTarget: column.value.footerFocusTarget,\n            horizontalAlignment:\n              column.value.footerAlignment?.horizontal != null\n                ? column.value.footerAlignment.horizontal\n                : column.value.horizontalAlignment,\n            verticalAlignment: column.value.footerAlignment?.vertical\n          };\n          previousColumnKey = columnKey;\n          isPreviousSelectable = isSelectable;\n          isPreviousColumnSelected = isSelected;\n          if (isSticky) {\n            previousStickyColumnKey = columnKey;\n            isPreviousStickySelectable = isSelectable;\n            isPreviousStickyColumnSelected = isSelected;\n          }\n          return <TableFooterCell {...footerCellProps} />;\n        })}\n      </tr>\n    </tfoot>\n  ) : null;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { tableDragIndicatorStyles } from './themes/Table.css';\n\n/**\n * Props for the TableDragIndicator Component\n */\nexport type TableDragIndicatorProps = {\n  isRtl: boolean;\n  position?: number;\n  height?: number;\n};\n\n/**\n * The internal component used to render a drag indicator line in the Table.\n */\nexport function TableDragIndicator({ position, isRtl, height }: TableDragIndicatorProps) {\n  const tableDragIndicatorClasses = classNames([tableDragIndicatorStyles.base]);\n\n  const getDragIndicatorStyle = () => {\n    const heightString = height != null ? `height:${height}px;` : '';\n    if (position != null) {\n      return isRtl\n        ? `right:${position}px;cursor:col-resize;${heightString}`\n        : `left:${position}px;cursor:col-resize;${heightString}`;\n    }\n    return `display:none;`;\n  };\n\n  return <div class={tableDragIndicatorClasses} style={getDragIndicatorStyle()} />;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentProps } from 'preact';\nimport { useCallback, useRef, useState, Dispatch, StateUpdater } from 'preact/hooks';\nimport { BundleType } from '../resources/nls/bundle';\nimport { FocusableHandle } from '../hooks/UNSAFE_useFocusableTextField';\nimport { SelectableHandle } from '../hooks/UNSAFE_useSelectableTextField';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { ValueUpdateDetail } from '../utils/UNSAFE_valueUpdateDetail';\nimport { AppliedColumnWidths } from './Table';\nimport { Button } from '../UNSAFE_Button';\nimport { Dialog } from '../UNSAFE_Dialog';\nimport { Flex } from '../UNSAFE_Flex';\nimport { Menu, MenuItem, SelectMenuItem, SelectSingleMenuGroup, Submenu } from '../UNSAFE_Menu';\nimport { NumberInputText } from '../UNSAFE_NumberInputText';\nimport {\n  CellContextMenuContext,\n  ColumnResizeDetail,\n  SortCriterionDetail,\n  TableContextMenuConfig\n} from '../UNSAFE_TableView';\n\ntype Props<K extends string | number, D, C extends string> = {\n  contextMenuConfig: TableContextMenuConfig<K, D, C>;\n  contextMenuContext: CellContextMenuContext<K, D, C>;\n} & Omit<ComponentProps<typeof Menu>, 'children'>;\n\n/**\n * The internal component used to render a custom context menu on the Table\n */\nexport function TableContextMenu<K extends string | number, D, C extends string>({\n  contextMenuConfig,\n  contextMenuContext,\n  ...menuProps\n}: Props<K, D, C>) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const accessibleLabel =\n    contextMenuConfig.accessibleLabel != null\n      ? contextMenuConfig.accessibleLabel\n      : translations.accContextMenuLabel();\n\n  return contextMenuConfig.itemsRenderer(contextMenuContext) != null ? (\n    <Menu aria-label={accessibleLabel} {...menuProps}>\n      {menuProps.isOpen && contextMenuConfig.itemsRenderer(contextMenuContext)}\n    </Menu>\n  ) : (\n    <></>\n  );\n}\n\ntype SortItemProps<C extends string> = {\n  columnKey: C;\n  isDisabled: boolean;\n  currentSortDirection?: 'ascending' | 'descending';\n  onSortCriterionChange?: (detail: SortCriterionDetail<C>) => void;\n};\n\n/**\n * The internal component used to render the context menu sort item on the Table\n */\nexport function TableContextMenuSort<C extends string>({\n  columnKey,\n  isDisabled,\n  currentSortDirection,\n  onSortCriterionChange\n}: SortItemProps<C>) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const _handleSort: Required<ComponentProps<typeof SelectSingleMenuGroup>>['onCommit'] = ({\n    value\n  }) => {\n    if (onSortCriterionChange != null && value !== currentSortDirection) {\n      onSortCriterionChange([\n        { key: columnKey, sortDirection: value === 'ascending' ? 'ascending' : 'descending' }\n      ]);\n    }\n  };\n\n  return (\n    <Submenu label={translations.collection_sortColumnMenu()}>\n      <SelectSingleMenuGroup value={currentSortDirection} onCommit={_handleSort}>\n        <SelectMenuItem\n          isDisabled={isDisabled}\n          value=\"ascending\"\n          label={translations.collection_sortAscendingSubMenu()}\n        />\n        <SelectMenuItem\n          isDisabled={isDisabled}\n          value=\"descending\"\n          label={translations.collection_sortDescendingSubMenu()}\n        />\n      </SelectSingleMenuGroup>\n    </Submenu>\n  );\n}\n\ntype ResizeItemProps = {\n  isDisabled: boolean;\n  setIsResizeDialogOpen: Dispatch<StateUpdater<boolean>>;\n};\n\n/**\n * The internal component used to render the context menu column resize item on the Table\n */\nexport function TableContextMenuResize({ isDisabled, setIsResizeDialogOpen }: ResizeItemProps) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const handleResize = () => {\n    setIsResizeDialogOpen(true);\n  };\n\n  return (\n    <MenuItem\n      label={translations.collection_resizeColumnMenu()}\n      onAction={handleResize}\n      isDisabled={isDisabled}\n    />\n  );\n}\n\ntype ResizeDialogProps<C extends string> = {\n  isOpen: boolean;\n  columnKey: C;\n  onColumnResize?: (detail: ColumnResizeDetail<C>) => void;\n  appliedColumnWidths: AppliedColumnWidths<C>;\n  setIsResizeDialogOpen: Dispatch<StateUpdater<boolean>>;\n};\n\n/**\n * The internal component used to render the column resize dialog on the Table\n */\nexport function TableResizeColumnDialog<C extends string>({\n  isOpen,\n  columnKey,\n  onColumnResize,\n  appliedColumnWidths,\n  setIsResizeDialogOpen\n}: ResizeDialogProps<C>) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const initialWidth = Math.round(appliedColumnWidths.netColumnWidths[columnKey]);\n  const initialWidthRef = useRef<number>(initialWidth);\n\n  const numberInputRef = useRef<FocusableHandle & SelectableHandle>(null);\n\n  const [widthValue, setWidthValue] = useState<string | undefined>(String(initialWidth));\n\n  let isDisabled;\n  let messages: ComponentProps<typeof NumberInputText>['messages'];\n  if (\n    widthValue == null ||\n    Number.isNaN(parseInt(widthValue)) ||\n    String(parseInt(widthValue)) !== widthValue.trim() ||\n    parseInt(widthValue) < 16 ||\n    parseInt(widthValue) > 100000\n  ) {\n    messages = [\n      {\n        severity: 'error',\n        detail: translations.collection_resizeMessageDetail({ MIN: '16', MAX: '100000' })\n      }\n    ];\n    isDisabled = true;\n  } else {\n    isDisabled = false;\n  }\n\n  const apply = useCallback(() => {\n    if (columnKey != null && onColumnResize != null && widthValue != null) {\n      if (parseInt(widthValue) !== initialWidthRef.current) {\n        onColumnResize({\n          key: columnKey,\n          newWidth: parseInt(widthValue),\n          allColumnWidths: appliedColumnWidths.netColumnWidths,\n          paddingWidth: appliedColumnWidths.totalBorderOffset,\n          gesture: 'contextMenu',\n          type: 'absolute'\n        });\n      }\n    }\n    setIsResizeDialogOpen(false);\n  }, [columnKey, onColumnResize, widthValue, appliedColumnWidths, setIsResizeDialogOpen]);\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Enter' && !isDisabled) {\n        apply();\n      }\n    },\n    [apply, isDisabled]\n  );\n\n  const cancel = useCallback(() => {\n    setIsResizeDialogOpen(false);\n  }, [setIsResizeDialogOpen]);\n\n  const handleOnInput = useCallback((detail: ValueUpdateDetail<string>) => {\n    setWidthValue(detail.value);\n  }, []);\n\n  const footer = (\n    <Flex gap=\"2x\">\n      <Button onAction={cancel} label={translations.collection_cancel()} />\n      <Button\n        variant=\"callToAction\"\n        onAction={apply}\n        label={translations.collection_apply()}\n        isDisabled={isDisabled}\n      />\n    </Flex>\n  );\n\n  return (\n    <Dialog\n      autoFocusRef={numberInputRef}\n      isOpen={isOpen}\n      modality={'modal'}\n      header={translations.collection_resizeColumnDialog()}\n      footer={footer}>\n      <div onKeyDown={handleKeyDown}>\n        <NumberInputText\n          label={translations.collection_width()}\n          onInput={handleOnInput}\n          suffix={translations.collection_pixels()}\n          messages={messages}\n          isRequired={true}\n          isRequiredShown={true}\n          ref={numberInputRef}\n          value={widthValue}\n        />\n      </div>\n    </Dialog>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { useCallback, useMemo, useRef } from 'preact/hooks';\nimport { TableData } from '../Table';\n\ntype UseDataManagerProps<K, D> = {\n  data?: D[];\n  getRowKey: (data: D) => K;\n  hasMore: boolean;\n  onLoadMore: () => void;\n};\n\n/**\n * Hook that manages data on the Preact Table\n */\nexport function useDataManager<K extends string | number, D>({\n  data,\n  getRowKey,\n  hasMore,\n  onLoadMore\n}: UseDataManagerProps<K, D>) {\n  const tableData = useMemo(() => {\n    const newDataArray =\n      data != null\n        ? data.map((d: D) => {\n            const key = getRowKey(d);\n            return { data: d, metadata: key };\n          })\n        : [];\n    return newDataArray as Array<TableData<K, D>>;\n  }, [data, getRowKey]);\n\n  // debounce loadMore calls to prevent state changes from triggering multiple calls\n  const loadMoreDataRef = useRef<TableData<K, D>[]>();\n  if (!hasMore) {\n    // clear loadMoreData cache once more data is not available\n    loadMoreDataRef.current = undefined;\n  }\n  const onTableLoadMore = useCallback(() => {\n    if (tableData === loadMoreDataRef.current) {\n      return;\n    }\n    loadMoreDataRef.current = tableData;\n    return onLoadMore();\n  }, [tableData, onLoadMore]);\n\n  return { tableData, onTableLoadMore };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { Dispatch, MutableRef } from 'preact/hooks';\nimport { scrollerStyles } from '../themes/Table.css';\nimport {\n  AppliedColumnWidths,\n  ScrollDetail,\n  SizingInfo,\n  StickyColumnInfo,\n  TableColumn,\n  ViewportInfo\n} from '../Table';\nimport {\n  TableHorizontalScrollPosition,\n  TableVerticalScrollPosition,\n  TableViewportConfig\n} from '../../UNSAFE_TableView';\nimport { findElementByKey } from '../../utils/PRIVATE_collectionUtils';\nimport {\n  getColumnKey,\n  getElementFromCell,\n  getRowKey,\n  getRowKeyForRowIndex,\n  getScrollerBottomOffset,\n  getScrollerTopOffset\n} from './TableDomUtils';\n\n/**\n * A helper function to make sure specified elem is visible in the specified container\n */\nfunction _scrollColumnIntoView<K, D, C extends string>(\n  columnElement: HTMLElement,\n  scrollerElement: HTMLElement,\n  viewportInfo: ViewportInfo,\n  columnsArray: TableColumn<K, D, C>[],\n  stickyColumnInfo: StickyColumnInfo,\n  scrollbarWidth: number,\n  isRtl: boolean,\n  appliedColumnWidths?: AppliedColumnWidths<C>,\n  location?: 'inView' | 'start' | 'end'\n) {\n  const columnKey = getColumnKey(columnElement);\n\n  let columnIndex;\n  for (let i = 0; i < columnsArray.length; i++) {\n    if (columnsArray[i].key === columnKey) {\n      columnIndex = i;\n      break;\n    }\n  }\n  if (columnIndex != null && appliedColumnWidths != null) {\n    let startOffset = 0;\n    let endOffset = 0;\n    if (viewportInfo.isExternalScroller) {\n      const scrollerOffsetStart = viewportInfo.viewportConfig.scrollerOffsetStart;\n      if (scrollerOffsetStart != null) {\n        startOffset = scrollerOffsetStart;\n      }\n      const scrollerOffsetEnd = viewportInfo.viewportConfig.scrollerOffsetEnd;\n      if (scrollerOffsetEnd != null) {\n        endOffset = scrollerOffsetEnd;\n      }\n    }\n\n    let stickyCount = 0;\n    const borderOffset = appliedColumnWidths.borderOffset;\n    const stickyColumns = stickyColumnInfo.stickyColumns;\n    for (let i = 0; i < stickyColumns.length; i++) {\n      const stickyIndex = stickyColumns[i];\n      if (stickyIndex < columnIndex) {\n        startOffset += appliedColumnWidths.netColumnWidths[columnsArray[stickyIndex].key];\n        stickyCount += 1;\n      } else {\n        break;\n      }\n    }\n    startOffset += startOffset > 0 ? stickyCount * borderOffset + borderOffset : 0;\n    if (!appliedColumnWidths.borderEdges[columnIndex].hasStart) {\n      startOffset += borderOffset;\n    }\n    stickyCount = 0;\n    for (let i = stickyColumns.length - 1; i > -1; i--) {\n      const stickyIndex = stickyColumns[i];\n      if (stickyIndex > columnIndex) {\n        endOffset += appliedColumnWidths.netColumnWidths[columnsArray[stickyIndex].key];\n        stickyCount += 1;\n      } else {\n        break;\n      }\n    }\n    endOffset += endOffset > 0 ? stickyCount * borderOffset + borderOffset : 0;\n    if (!appliedColumnWidths.borderEdges[columnIndex].hasEnd) {\n      endOffset += borderOffset;\n    }\n\n    const horizontalOverflowDiff = _getHorizontalOverflowDiff(\n      columnElement,\n      scrollerElement,\n      startOffset,\n      endOffset,\n      scrollbarWidth,\n      isRtl\n    );\n    const leftOverflowDiff = horizontalOverflowDiff.left;\n    const hasLeftOverflow = leftOverflowDiff >= 0;\n    const rightOverflowDiff = horizontalOverflowDiff.right;\n    const hasRightOverflow = rightOverflowDiff >= 0;\n\n    // don't adjust scroll position if row has overflow in both directions\n    if (hasLeftOverflow && hasRightOverflow) {\n      return;\n    }\n\n    if (location == null || location === 'inView') {\n      // if column fits fully in viewport, scroll overflow side into view\n      // otherwise, scroll the shortest amount to fill viewport with column\n      if (hasLeftOverflow) {\n        if (Math.abs(rightOverflowDiff) > Math.abs(leftOverflowDiff)) {\n          scrollerElement.scrollLeft = _roundScrollValue(\n            scrollerElement.scrollLeft - leftOverflowDiff,\n            false\n          );\n        } else {\n          scrollerElement.scrollLeft = _roundScrollValue(\n            scrollerElement.scrollLeft + rightOverflowDiff,\n            true\n          );\n        }\n      } else if (hasRightOverflow) {\n        if (Math.abs(leftOverflowDiff) > Math.abs(rightOverflowDiff)) {\n          scrollerElement.scrollLeft = _roundScrollValue(\n            scrollerElement.scrollLeft + rightOverflowDiff,\n            true\n          );\n        } else {\n          scrollerElement.scrollLeft = _roundScrollValue(\n            scrollerElement.scrollLeft - leftOverflowDiff,\n            false\n          );\n        }\n      }\n    } else if (location === 'start') {\n      scrollerElement.scrollLeft = _roundScrollValue(\n        scrollerElement.scrollLeft - leftOverflowDiff,\n        false\n      );\n    } else {\n      scrollerElement.scrollLeft = _roundScrollValue(\n        scrollerElement.scrollLeft + rightOverflowDiff,\n        true\n      );\n    }\n  }\n}\n\n/**\n * A helper function to make sure specified elem is visible in the specified container\n */\nconst _scrollRowIntoView = (\n  rootElement: HTMLDivElement,\n  viewportInfo: ViewportInfo,\n  tableId: string,\n  rowElement: HTMLElement,\n  scrollerElement: HTMLElement,\n  scrollbarHeight: number,\n  location?: 'inView' | 'top' | 'bottom'\n) => {\n  let topOffset = 0;\n  let bottomOffset = 0;\n\n  if (viewportInfo.isExternalScroller) {\n    const scrollerOffsetTop = viewportInfo.viewportConfig.scrollerOffsetTop;\n    if (scrollerOffsetTop != null) {\n      topOffset = scrollerOffsetTop;\n    }\n    const scrollerOffsetBottom = viewportInfo.viewportConfig.scrollerOffsetBottom;\n    if (scrollerOffsetBottom != null) {\n      bottomOffset = scrollerOffsetBottom;\n    }\n  }\n  topOffset += getScrollerTopOffset(rootElement, tableId);\n  bottomOffset += getScrollerBottomOffset(rootElement, tableId);\n\n  const verticalOverflowDiff = _getVerticalOverflowDiff(\n    rowElement,\n    scrollerElement,\n    topOffset,\n    bottomOffset,\n    scrollbarHeight\n  );\n  const topOverflowDiff = verticalOverflowDiff.top;\n  const hasTopOverflow = topOverflowDiff >= 0;\n  const bottomOverflowDiff = verticalOverflowDiff.bottom;\n  const hasBottomOverflow = bottomOverflowDiff >= 0;\n\n  // don't adjust scroll position if row has overflow in both directions\n  if (hasTopOverflow && hasBottomOverflow) {\n    return;\n  }\n  if (location == null || location === 'inView') {\n    // if row fits fully in viewport, scroll overflow side into view\n    // otherwise, scroll the shortest amount to fill viewport with row\n    if (hasBottomOverflow) {\n      if (Math.abs(topOverflowDiff) > Math.abs(bottomOverflowDiff)) {\n        scrollerElement.scrollTop = _roundScrollValue(\n          scrollerElement.scrollTop + bottomOverflowDiff,\n          true\n        );\n      } else {\n        scrollerElement.scrollTop = _roundScrollValue(\n          scrollerElement.scrollTop - topOverflowDiff,\n          false\n        );\n      }\n    } else if (hasTopOverflow) {\n      if (Math.abs(bottomOverflowDiff) > Math.abs(topOverflowDiff)) {\n        scrollerElement.scrollTop = _roundScrollValue(\n          scrollerElement.scrollTop - topOverflowDiff,\n          false\n        );\n      } else {\n        scrollerElement.scrollTop = _roundScrollValue(\n          scrollerElement.scrollTop + bottomOverflowDiff,\n          true\n        );\n      }\n    }\n  } else if (location === 'top') {\n    scrollerElement.scrollTop = _roundScrollValue(\n      scrollerElement.scrollTop - topOverflowDiff,\n      false\n    );\n  } else {\n    scrollerElement.scrollTop = _roundScrollValue(\n      scrollerElement.scrollTop + bottomOverflowDiff,\n      true\n    );\n  }\n};\n\n/**\n * Helper method to round a desired scrollTop or scrollLeft value to the nearest valid value\n * depending on the client browser.\n */\nconst _roundScrollValue = (value: number, isOver: boolean) => {\n  // use Math.floor() and Math.ceil() to ensure we round to nearest containing valid\n  // pixel value in either direction as valid scrollTop values are only integers\n  return isOver ? Math.ceil(value) : Math.floor(value);\n};\n\n/**\n * A helper to get the horizontal overflow diff of the given element\n */\nconst _getHorizontalOverflowDiff = (\n  element: HTMLElement,\n  scrollerElement: HTMLElement,\n  startOffset: number,\n  endOffset: number,\n  scrollbarWidth: number,\n  isRtl: boolean\n) => {\n  const elementRect = element.getBoundingClientRect();\n  const scrollerRect = scrollerElement.getBoundingClientRect();\n\n  if (isRtl) {\n    return {\n      left: scrollerRect.left - elementRect.left + endOffset + scrollbarWidth,\n      right: elementRect.right - scrollerRect.right + startOffset\n    };\n  } else {\n    return {\n      left: scrollerRect.left - elementRect.left + startOffset,\n      right: elementRect.right - scrollerRect.right + endOffset + scrollbarWidth\n    };\n  }\n};\n\n/**\n * A helper to get the vertical overflow diff of the given element\n */\nexport const _getVerticalOverflowDiff = (\n  element: HTMLElement,\n  scrollerElement: HTMLElement,\n  topOffset: number,\n  bottomOffset: number,\n  scrollbarHeight: number\n) => {\n  const elementRect = element.getBoundingClientRect();\n  const scrollerRect = scrollerElement.getBoundingClientRect();\n\n  return {\n    top: scrollerRect.top - elementRect.top + topOffset,\n    bottom: elementRect.bottom - scrollerRect.bottom + bottomOffset + scrollbarHeight\n  };\n};\n\n/**\n * Helper to set the horizontal scroll position on the Table.\n */\nexport function setHorizontalScrollPosition<K, D, C>(\n  scrollerElement: HTMLElement,\n  columnsArray: TableColumn<K, D, C>[],\n  fullColumnWidths: number[],\n  isRtl: boolean,\n  horizontalScrollPosition?: TableHorizontalScrollPosition<C>\n) {\n  const x = _getScrollLeftFromScrollPosition(\n    scrollerElement,\n    columnsArray,\n    fullColumnWidths,\n    horizontalScrollPosition\n  );\n  scrollerElement.scrollLeft = x != null ? (isRtl ? -x : x) : 0;\n}\n\n/**\n * Helper to set the vertical scroll position on the Table.\n */\nexport function setVerticalScrollPosition<K>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  tableId: string,\n  verticalScrollPosition?: TableVerticalScrollPosition<K>\n) {\n  const y = _getScrollTopFromScrollPosition(\n    rootElement,\n    scrollerElement,\n    tableId,\n    verticalScrollPosition\n  );\n  scrollerElement.scrollTop = y != null ? y : 0;\n}\n\n/**\n * Helper to determine the 'x' value of a given scroll position.\n */\nfunction _getScrollLeftFromScrollPosition<K, D, C>(\n  scrollerElement: HTMLElement,\n  columnsArray: TableColumn<K, D, C>[],\n  fullColumnWidths: number[],\n  scrollPosition?: TableHorizontalScrollPosition<C>\n) {\n  if (scrollPosition != null) {\n    let columnKey;\n    let useColumn = false;\n    if (scrollPosition.columnKey != null) {\n      // columnKey takes precedence over everything else\n      useColumn = true;\n      columnKey = scrollPosition.columnKey;\n    } else if (scrollPosition.offsetX != null && scrollPosition.x == null) {\n      // offsetX can be used on its own if it is the only horizontal aspect provided\n      useColumn = true;\n      const currentHorizontalScrollPosition = getHorizontalScrollPosition(\n        scrollerElement,\n        columnsArray,\n        fullColumnWidths\n      );\n      columnKey = currentHorizontalScrollPosition.columnKey;\n    }\n    if (useColumn) {\n      if (columnKey != null) {\n        let x = 0;\n        for (let i = 0; i < fullColumnWidths.length; i++) {\n          if (columnsArray[i].key === columnKey) {\n            return x + (scrollPosition.offsetX != null ? scrollPosition.offsetX : 0);\n          }\n          if (columnsArray[i].value.sticky !== 'enabled') {\n            x += fullColumnWidths[i];\n          }\n        }\n      }\n    } else if (scrollPosition.x != null) {\n      return scrollPosition.x;\n    }\n  }\n  // either nothing was provided, or what was provided was invalid\n  return undefined;\n}\n\n/**\n * Helper to determine the 'y' value of a given scroll position.\n */\nfunction _getScrollTopFromScrollPosition<K>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  tableId: string,\n  scrollPosition?: TableVerticalScrollPosition<K>\n) {\n  if (scrollPosition != null) {\n    let rowKey;\n    let useRow = false;\n    if (scrollPosition.rowKey != null) {\n      // rowKey takes precedence over everything else\n      useRow = true;\n      rowKey = scrollPosition.rowKey;\n    } else if (scrollPosition.offsetY != null && scrollPosition.y == null) {\n      // offsetY can be used on its own if it is the only vertical aspect provided\n      useRow = true;\n      rowKey = getVerticalScrollPosition(rootElement, scrollerElement, tableId).rowKey;\n    }\n    if (useRow) {\n      if (rowKey != null) {\n        let y = 0;\n        const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n        for (let i = 0; i < rowElements.length; i++) {\n          if (rowKey === getRowKey(rowElements[i] as HTMLElement)) {\n            return y + (scrollPosition.offsetY != null ? scrollPosition.offsetY : 0);\n          }\n          y += rowElements[i].getBoundingClientRect().height;\n        }\n      }\n    } else if (scrollPosition.y != null) {\n      return scrollPosition.y;\n    }\n  }\n  // either nothing was provided, or what was provided was invalid\n  return undefined;\n}\n\n/**\n * Helper to get the logical scroll position for the given scrollLeft value. If no scrollLeft value is given,\n * it will use the current scrollLeft value of the Table.\n */\nexport function getHorizontalScrollPosition<K, D, C>(\n  scrollerElement: HTMLElement,\n  columnsArray: TableColumn<K, D, C>[],\n  fullColumnWidths: number[],\n  newScrollLeft?: number\n) {\n  // ensure scroll position x value is initialized\n  const scrollLeft = Math.abs(newScrollLeft == null ? scrollerElement.scrollLeft : newScrollLeft);\n\n  const scrollPosition: TableHorizontalScrollPosition<C> = {\n    x: scrollLeft,\n    columnKey: undefined,\n    offsetX: undefined\n  };\n\n  let columnEnd = 0;\n  if (columnsArray.length > 0) {\n    if (scrollLeft === 0) {\n      scrollPosition.columnKey = columnsArray[0].key;\n      scrollPosition.offsetX = 0;\n      return scrollPosition;\n    }\n  }\n  for (let i = 0; i < columnsArray.length; i++) {\n    if (columnsArray[i].value.sticky !== 'enabled') {\n      columnEnd += fullColumnWidths[i];\n    }\n    if (scrollLeft <= columnEnd - 0.5) {\n      scrollPosition.columnKey = columnsArray[i].key;\n      scrollPosition.offsetX = fullColumnWidths[i] + scrollLeft - columnEnd;\n      break;\n    }\n  }\n  return scrollPosition;\n}\n\n/**\n * Helper to get the logical scroll position for the given scrollTop value. If no scrollTop value is given,\n * it will use the current scrollTop value of the Table.\n */\nexport function getVerticalScrollPosition<K>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  tableId: string,\n  newScrollTop?: number\n) {\n  // ensure scroll position y value is initialized\n  const scrollTop = Math.abs(newScrollTop == null ? scrollerElement.scrollTop : newScrollTop);\n\n  const scrollPosition: TableVerticalScrollPosition<K> = {\n    y: scrollTop,\n    rowKey: undefined,\n    offsetY: undefined\n  };\n\n  let rowBottom = 0;\n  const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n  if (rowElements.length > 0) {\n    if (scrollTop === 0) {\n      scrollPosition.rowKey = getRowKeyForRowIndex<K>(rootElement, tableId, 0)!;\n      scrollPosition.offsetY = 0;\n      return scrollPosition;\n    }\n  }\n  for (let i = 0; i < rowElements.length; i++) {\n    const rowHeight = rowElements[i].getBoundingClientRect().height;\n    rowBottom += rowHeight;\n    if (scrollTop <= rowBottom - 0.5) {\n      scrollPosition.rowKey = getRowKeyForRowIndex<K>(rootElement, tableId, i)!;\n      scrollPosition.offsetY = rowHeight + scrollTop - rowBottom;\n      break;\n    }\n  }\n  return scrollPosition;\n}\n\nexport function applyScrollDetail<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  viewportInfo: ViewportInfo,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  stickyColumnInfo: StickyColumnInfo,\n  sizingInfo: SizingInfo,\n  scrollDetail: ScrollDetail<K, C>,\n  isRtl: boolean,\n  appliedColumnWidths?: AppliedColumnWidths<C>\n) {\n  if (scrollDetail.cell.type === 'data') {\n    const rowElement = findElementByKey(\n      rootElement,\n      scrollDetail.cell.rowKey,\n      `[data-oj-table-data-row='${tableId}']`\n    ) as HTMLElement;\n    if (rowElement != null && scrollDetail.locationY != null && !sizingInfo.isInitialRender) {\n      const scrollbarHeight = sizingInfo.boxHeight - sizingInfo.contentHeight;\n      _scrollRowIntoView(\n        rootElement,\n        viewportInfo,\n        tableId,\n        rowElement,\n        scrollerElement,\n        scrollbarHeight,\n        scrollDetail.locationY\n      );\n    }\n  }\n  if (\n    scrollDetail.cell.type === 'data' ||\n    scrollDetail.cell.type === 'header' ||\n    scrollDetail.cell.type === 'footer'\n  ) {\n    const cellElement = getElementFromCell(rootElement, tableId, scrollDetail.cell);\n    if (cellElement != null && scrollDetail.locationX != null && !sizingInfo.isInitialRender) {\n      const scrollbarWidth = sizingInfo.boxWidth - sizingInfo.contentWidth;\n      _scrollColumnIntoView(\n        cellElement,\n        scrollerElement,\n        viewportInfo,\n        columnsArray,\n        stickyColumnInfo,\n        scrollbarWidth,\n        isRtl,\n        appliedColumnWidths,\n        scrollDetail.locationX\n      );\n    }\n  }\n  if (scrollDetail.cell.type === 'loadMore' || scrollDetail.cell.type === 'loading') {\n    const cellElement = getElementFromCell(rootElement, tableId, scrollDetail.cell);\n    if (cellElement != null && scrollDetail.locationY != null && !sizingInfo.isInitialRender) {\n      const scrollbarHeight = sizingInfo.boxHeight - sizingInfo.contentHeight;\n      _scrollRowIntoView(\n        rootElement,\n        viewportInfo,\n        tableId,\n        cellElement,\n        scrollerElement,\n        scrollbarHeight,\n        scrollDetail.cell.type === 'loading' && scrollDetail.locationY === 'inView'\n          ? 'top'\n          : scrollDetail.locationY\n      );\n    }\n  }\n}\n\n/**\n * Helper function to update the 'left' and 'right' values of all sticky columns to correspond\n * to the given sizing information.\n */\nexport function updateStickyColumns<K, D, C extends string>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  viewportInfo: ViewportInfo,\n  tableId: string,\n  isRtl: boolean,\n  columnsArray: TableColumn<K, D, C>[],\n  stickyColumnInfo: StickyColumnInfo,\n  fullColumnWidths: number[],\n  stickyEdgesState: { start?: number; end?: number },\n  setStickyEdgesState: (stickyEdgesState: { start?: number; end?: number }) => void,\n  isHorizontalScroll: boolean\n) {\n  let stickyIndex;\n  let stickyStartOffset = 0;\n  let stickyEndOffset = 0;\n  if (viewportInfo.isExternalScroller) {\n    const scrollerOffsetStart = viewportInfo.viewportConfig.scrollerOffsetStart;\n    if (scrollerOffsetStart != null) {\n      stickyStartOffset = scrollerOffsetStart;\n    }\n    const scrollerOffsetEnd = viewportInfo.viewportConfig.scrollerOffsetEnd;\n    if (scrollerOffsetEnd != null) {\n      stickyEndOffset = scrollerOffsetEnd;\n    }\n  }\n\n  const stickyIndicies = stickyColumnInfo.stickyColumns;\n  for (let i = 0; i < stickyIndicies.length; i++) {\n    stickyIndex = stickyIndicies[i];\n    _applyStickyColumnOffset(rootElement, tableId, isRtl, stickyIndex, stickyStartOffset, true);\n    stickyStartOffset += fullColumnWidths[stickyIndex];\n  }\n  for (let i = stickyIndicies.length - 1; i > -1; i--) {\n    stickyIndex = stickyIndicies[i];\n    _applyStickyColumnOffset(rootElement, tableId, isRtl, stickyIndex, stickyEndOffset, false);\n    stickyEndOffset += fullColumnWidths[stickyIndex];\n  }\n\n  // only apply sticky edge styling if horizontal overflow is present\n  if (isHorizontalScroll) {\n    updateStickyEdges(\n      scrollerElement,\n      columnsArray,\n      stickyColumnInfo,\n      fullColumnWidths,\n      stickyEdgesState,\n      setStickyEdgesState\n    );\n  } else if (stickyEdgesState.start != null || stickyEdgesState.end != null) {\n    setStickyEdgesState({});\n  }\n}\n\n/**\n * Helper function to get the sticky column indicies.\n */\nexport const getStickyColumnIndicies = <K, D, C>(columnsArray: TableColumn<K, D, C>[]) => {\n  const stickyColumns = [];\n  for (let i = 0; i < columnsArray.length; i++) {\n    if (columnsArray[i].value.sticky === 'enabled') {\n      stickyColumns.push(i);\n    }\n  }\n  return stickyColumns;\n};\n\n/**\n * Helper function to update the 'left' and 'right' values of a specific column.\n */\nconst _applyStickyColumnOffset = (\n  rootElement: HTMLDivElement,\n  tableId: string,\n  isRtl: boolean,\n  columnIndex: number,\n  stickyOffset: number,\n  isStart: boolean\n) => {\n  const styleProperty = (isStart && !isRtl) || (!isStart && isRtl) ? 'left' : 'right';\n  const styleValue = `${stickyOffset}px`;\n\n  const headerElements = rootElement.querySelectorAll(`[data-oj-table-header-cell='${tableId}']`);\n  const headerElement = headerElements[columnIndex] as HTMLElement;\n  headerElement.style[styleProperty] = styleValue;\n\n  const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n  for (let j = 0; j < rowElements.length; j++) {\n    const rowElement = rowElements[j] as HTMLElement;\n    const cellElements = rowElement.querySelectorAll(`[data-oj-table-data-cell='${tableId}']`);\n    const cellElement = cellElements[columnIndex] as HTMLElement;\n    cellElement.style[styleProperty] = styleValue;\n  }\n\n  const footerElements = rootElement.querySelectorAll(`[data-oj-table-footer-cell='${tableId}']`);\n  if (footerElements.length > 0) {\n    const footerElement = footerElements[columnIndex] as HTMLElement;\n    footerElement.style[styleProperty] = styleValue;\n  }\n};\n\n/**\n * Helper function to update the sticky edges based on the given scrollLeft value.\n */\nexport function updateStickyEdges<K, D, C>(\n  scrollerElement: HTMLElement,\n  columnsArray: TableColumn<K, D, C>[],\n  stickyColumnInfo: StickyColumnInfo,\n  fullColumnWidths: number[],\n  stickyEdgesState: { start?: number; end?: number },\n  setStickyEdgesState: (stickyEdgesState: { start?: number; end?: number }) => void,\n  scrollLeft?: number\n) {\n  if (columnsArray.length > 0) {\n    let i;\n    let currentScrollIndex;\n    const newScrollPosition = getHorizontalScrollPosition(\n      scrollerElement,\n      columnsArray,\n      fullColumnWidths,\n      scrollLeft\n    );\n    for (i = 0; i < columnsArray.length; i++) {\n      if (columnsArray[i].key === newScrollPosition.columnKey) {\n        currentScrollIndex = i;\n        break;\n      }\n    }\n\n    let startIndex;\n    const stickyIndicies = stickyColumnInfo.stickyColumns;\n    // browser zoom levels cause rounding issues where the start scroll\n    // position may never be reached, but it should always be within 1\n    if (newScrollPosition.x! >= 1) {\n      for (i = 0; i < stickyIndicies.length; i++) {\n        const currentIndex = stickyIndicies[i];\n        if (currentIndex < currentScrollIndex!) {\n          startIndex = currentIndex;\n        } else {\n          break;\n        }\n      }\n    }\n\n    let endIndex;\n    let currentWidth = 0;\n    const maxScrollPos = scrollerElement.scrollWidth - scrollerElement.clientWidth;\n    const endOverflow = maxScrollPos - newScrollPosition.x!;\n    // browser zoom levels cause rounding issues where the max scroll\n    // position may never be reached, but it should always be within 1\n    if (endOverflow >= 1) {\n      for (let i = columnsArray.length - 1; i > -1; i--) {\n        if (stickyIndicies.indexOf(i) !== -1) {\n          endIndex = i;\n        } else {\n          currentWidth += fullColumnWidths[i];\n          if (currentWidth > endOverflow) {\n            break;\n          }\n        }\n      }\n    }\n    if (stickyEdgesState.start != startIndex || stickyEdgesState.end != endIndex) {\n      setStickyEdgesState({ start: startIndex, end: endIndex });\n    }\n  }\n}\n\n/**\n * Helper function to hide a currently shown tooltip once the anchor cell scrolls out of view.\n */\nexport function hideOutOfViewTooltip(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  tableId: string,\n  sizingInfo: SizingInfo,\n  stickyColumnInfo: StickyColumnInfo,\n  fullColumnWidths: number[],\n  tooltipAnchorRef: MutableRef<HTMLElement | undefined>,\n  hideTooltip: (isImmediate?: boolean) => void,\n  isRtl: boolean\n) {\n  if (tooltipAnchorRef.current != null) {\n    const verticalOverflowDiff = _getVerticalOverflowDiff(\n      tooltipAnchorRef.current,\n      scrollerElement,\n      getScrollerTopOffset(rootElement, tableId),\n      getScrollerBottomOffset(rootElement, tableId),\n      sizingInfo.boxHeight! - sizingInfo.contentHeight!\n    );\n    const topOverflowDiff = verticalOverflowDiff.top;\n    const hasTopOverflow = topOverflowDiff >= 0;\n    const bottomOverflowDiff = verticalOverflowDiff.bottom;\n    const hasBottomOverflow = bottomOverflowDiff >= 0;\n\n    if (\n      (hasTopOverflow && Math.abs(topOverflowDiff) > tooltipAnchorRef.current.offsetHeight) ||\n      (hasBottomOverflow && Math.abs(bottomOverflowDiff) > tooltipAnchorRef.current.offsetHeight)\n    ) {\n      hideTooltip(true);\n      return;\n    }\n\n    let startOffset = 0;\n    let endOffset = 0;\n\n    const stickyColumns = stickyColumnInfo.stickyColumns;\n    for (let i = 0; i < stickyColumns.length; i++) {\n      const stickyIndex = stickyColumns[i];\n      startOffset += fullColumnWidths[stickyIndex];\n    }\n    for (let i = stickyColumns.length - 1; i > -1; i--) {\n      const stickyIndex = stickyColumns[i];\n      endOffset += fullColumnWidths[stickyIndex];\n    }\n    const horizontalOverflowDiff = _getHorizontalOverflowDiff(\n      tooltipAnchorRef.current,\n      scrollerElement,\n      startOffset,\n      endOffset,\n      sizingInfo.boxWidth! - sizingInfo.contentWidth!,\n      isRtl\n    );\n    const leftOverflowDiff = horizontalOverflowDiff.left;\n    const hasLeftOverflow = leftOverflowDiff >= 0;\n    const rightOverflowDiff = horizontalOverflowDiff.right;\n    const hasRightOverflow = rightOverflowDiff >= 0;\n\n    if (\n      (hasLeftOverflow && Math.abs(leftOverflowDiff) > tooltipAnchorRef.current.offsetWidth) ||\n      (hasRightOverflow && Math.abs(rightOverflowDiff) > tooltipAnchorRef.current.offsetWidth)\n    ) {\n      hideTooltip(true);\n    }\n  }\n}\n\n/**\n * Helper function to reset the scroll position of the scroller element\n */\nexport const resetVerticalScrollPosition = (scrollerElement: HTMLElement) => {\n  scrollerElement.scrollTop = 0;\n};\n\n/**\n * Helper function to get the viewport config. TODO: this needs help for table still\n */\nexport const getViewportConfig = (\n  scrollerRef: RefObject<HTMLElement>,\n  config?: TableViewportConfig\n) => {\n  return (\n    config ?? {\n      scroller: () => {\n        return scrollerRef;\n      }\n    }\n  );\n};\n\n/**\n * Helper function to update the scroller element's styling based on overflow status.\n */\nexport const applyOverflowStatus = (\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  tableId: string,\n  contentWidth: number,\n  availableWidth: number,\n  contentHeight: number,\n  availableHeight: number,\n  scrollbarWidth: number,\n  overflowRef: MutableRef<{ isHorizontal: boolean; isVertical: boolean }>,\n  setHasVerticalUnderflow: Dispatch<boolean>\n) => {\n  // check for at least 0.5px difference to account for browser rounding issues\n  const hasHorizontalOverflow = contentWidth - availableWidth > 0.5;\n  const hasVerticalOverflow = contentHeight - availableHeight > 0.5;\n  if (hasHorizontalOverflow) {\n    scrollerElement.classList.remove(scrollerStyles.noHorizontalScroll);\n    scrollerElement.classList.add(scrollerStyles.horizontalScroll);\n  } else {\n    scrollerElement.classList.remove(scrollerStyles.horizontalScroll);\n    scrollerElement.classList.add(scrollerStyles.noHorizontalScroll);\n  }\n  if (hasVerticalOverflow) {\n    scrollerElement.classList.remove(scrollerStyles.noVerticalScroll);\n    scrollerElement.classList.add(scrollerStyles.verticalScroll);\n    scrollerElement.style.paddingInlineEnd = '';\n  } else {\n    scrollerElement.classList.remove(scrollerStyles.verticalScroll);\n    scrollerElement.classList.add(scrollerStyles.noVerticalScroll);\n    scrollerElement.style.paddingInlineEnd = `${scrollbarWidth}px`;\n  }\n  overflowRef.current.isHorizontal = hasHorizontalOverflow;\n  overflowRef.current.isVertical = hasVerticalOverflow;\n  applyUnderflowStatus(rootElement, tableId, setHasVerticalUnderflow);\n};\n\n/**\n * Helper function to update the undeflow status of the Table based on the spacer element sizing.\n */\nexport const applyUnderflowStatus = (\n  rootElement: HTMLDivElement,\n  tableId: string,\n  setHasVerticalUnderflow: Dispatch<boolean>\n) => {\n  const spacerRowElement = rootElement.querySelector(\n    `[data-oj-table-spacer-row='${tableId}']`\n  ) as HTMLElement;\n  if (spacerRowElement != null) {\n    setHasVerticalUnderflow(spacerRowElement.offsetHeight > 0);\n  }\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Dispatch, MutableRef, StateUpdater } from 'preact/hooks';\nimport {\n  ActiveCell,\n  ActiveCellDetail,\n  AppliedColumnWidths,\n  CurrencyStatus,\n  SizingInfo,\n  StickyColumnInfo,\n  TableColumn,\n  TableData,\n  ViewportInfo\n} from '../Table';\nimport { TableContextMenuResize, TableContextMenuSort } from '../TableContextMenu';\nimport { getBoundaryColumnKey, getElementFromCell, isAutoFocusCell } from './TableDomUtils';\nimport { applyScrollDetail, resetVerticalScrollPosition } from './TableScrollUtils';\nimport {\n  Cell,\n  CellContextMenuContext,\n  CellOverride,\n  SortCriterionDetail\n} from '../../UNSAFE_TableView';\n\n/**\n * Helper function to determine if a given active cell represents a 'transient' state.\n */\nexport function isTransientCell<K, C>(activeCell?: ActiveCell<K, C>) {\n  return (\n    activeCell != null &&\n    (activeCell.type === 'loadMore' ||\n      activeCell.type === 'loading' ||\n      activeCell.type === 'pending')\n  );\n}\n\n/**\n * Helper function to compare two given cell descriptors.\n */\nexport function cellComparator<K, C>(\n  cell1?: ActiveCell<K, C> | Cell<K, C>,\n  cell2?: ActiveCell<K, C> | Cell<K, C>\n) {\n  if (cell1 == null) {\n    return cell2 == null;\n  }\n  if (cell2 == null) {\n    return false;\n  }\n  if (cell1.type === cell2.type && cell1.rowKey === cell2.rowKey) {\n    // special case the transient 'loading' cell types as column keys are hints used for when a user\n    // navigates back to another region using the keyboard - otherwise we'd go to the first column\n    if (cell1.type === 'loading' || cell1.type === 'loadMore' || cell1.type === 'pending') {\n      return true;\n    }\n    return cell1.columnKey === cell2.columnKey;\n  }\n  return false;\n}\n\nexport function getCellContextMenuContextFromCell<K extends string | number, D, C extends string>(\n  tableData: TableData<K, D>[],\n  columnsArray: TableColumn<K, D, C>[],\n  setIsResizeDialogOpen: Dispatch<StateUpdater<boolean>>,\n  cell?: ActiveCell<K, C>,\n  sortCriterion?: { key: C; sortDirection: 'ascending' | 'descending' }[],\n  onSortCriterionChange?: (detail: SortCriterionDetail<C>) => void\n) {\n  if (cell?.type === 'data' || cell?.type === 'header' || cell?.type === 'footer') {\n    let isSortable = false;\n    let isResizable = false;\n    for (let i = 0; i < columnsArray.length; i++) {\n      const column = columnsArray[i];\n      if (column.key === cell.columnKey) {\n        isSortable = column.value.sortable === 'enabled';\n        isResizable = column.value.resizable === 'enabled';\n        break;\n      }\n    }\n    let currentSortDirection;\n    if (sortCriterion != null) {\n      for (const criterion of sortCriterion) {\n        if (criterion.key === cell.columnKey) {\n          currentSortDirection = criterion.sortDirection;\n          break;\n        }\n      }\n    }\n    const allMenuItems = {\n      resizeColumn: (\n        <TableContextMenuResize\n          isDisabled={!isResizable}\n          setIsResizeDialogOpen={setIsResizeDialogOpen}\n        />\n      ),\n      sortColumn: (\n        <TableContextMenuSort\n          columnKey={cell.columnKey}\n          isDisabled={!isSortable}\n          currentSortDirection={currentSortDirection}\n          onSortCriterionChange={onSortCriterionChange}\n        />\n      )\n    };\n\n    const hasResizableColumns = columnsArray.some((column: TableColumn<K, D, C>) => {\n      return column.value.resizable === 'enabled';\n    });\n    const hasSortableColumns = columnsArray.some((column: TableColumn<K, D, C>) => {\n      return column.value.sortable === 'enabled';\n    });\n\n    const defaultMenuItems =\n      hasResizableColumns || hasSortableColumns ? (\n        <>\n          {hasResizableColumns ? allMenuItems['resizeColumn'] : undefined}\n          {hasSortableColumns ? allMenuItems['sortColumn'] : undefined}\n        </>\n      ) : undefined;\n\n    if (cell.type === 'data') {\n      for (const rowData of tableData) {\n        if (rowData.metadata === cell.rowKey) {\n          return {\n            allMenuItems,\n            defaultMenuItems,\n            rowData: rowData.data,\n            rowKey: cell.rowKey,\n            columnKey: cell.columnKey,\n            type: 'data'\n          } as CellContextMenuContext<K, D, C>;\n        }\n      }\n    } else {\n      return {\n        allMenuItems,\n        defaultMenuItems,\n        columnKey: cell.columnKey,\n        type: cell.type\n      } as CellContextMenuContext<K, D, C>;\n    }\n  }\n  return undefined;\n}\n\n/**\n * Helper function to determine the resulting cell from a cell override.\n */\nfunction _getCellFromCellOverride<K, D, C>(\n  tableData: TableData<K, D>[],\n  columnsArray: TableColumn<K, D, C>[],\n  cellOverride: CellOverride<K, C>,\n  currentCell?: Cell<K, C>\n): Cell<K, C> | undefined {\n  let cellType;\n  let cellRowKey;\n  let cellColumnKey;\n  if (cellOverride.rowKey != null) {\n    cellType = 'data';\n    cellRowKey = cellOverride.rowKey;\n    if (cellOverride.columnKey != null) {\n      cellColumnKey = cellOverride.columnKey;\n    } else if (currentCell?.columnKey != null) {\n      cellColumnKey = currentCell.columnKey;\n    } else {\n      cellColumnKey = getBoundaryColumnKey<K, D, C>(columnsArray, true);\n    }\n    if (cellColumnKey == null) {\n      return undefined;\n    }\n  } else if (cellOverride.columnKey != null) {\n    cellColumnKey = cellOverride.columnKey;\n    if (cellOverride.type != null) {\n      cellType = cellOverride.type;\n    } else if (currentCell?.type != null && currentCell.type !== 'noData') {\n      cellType = currentCell.type;\n    } else {\n      cellType = 'header';\n    }\n    if (cellType === 'data') {\n      if (currentCell?.rowKey != null) {\n        cellRowKey = currentCell.rowKey;\n      } else if (tableData.length > 0) {\n        cellRowKey = tableData[0].metadata;\n      }\n      if (cellRowKey == null) {\n        return undefined;\n      }\n    }\n  } else if (cellOverride.type != null) {\n    cellType = cellOverride.type;\n    if (cellType !== 'noData') {\n      if (currentCell?.columnKey != null) {\n        cellColumnKey = currentCell.columnKey;\n      } else {\n        cellColumnKey = getBoundaryColumnKey<K, D, C>(columnsArray, true);\n      }\n      if (cellColumnKey == null) {\n        return undefined;\n      }\n      if (cellType === 'data') {\n        if (currentCell?.rowKey != null) {\n          cellRowKey = currentCell.rowKey;\n        } else if (tableData.length > 0) {\n          cellRowKey = tableData[0].metadata;\n        }\n        if (cellRowKey == null) {\n          return undefined;\n        }\n      }\n    }\n  } else {\n    return undefined;\n  }\n  return { type: cellType, rowKey: cellRowKey, columnKey: cellColumnKey } as Cell<K, C>;\n}\n\n/**\n * Helper function to determine the resulting cell type from a cell override.\n */\nfunction _getCellTypeFromCellOverride<K, C>(\n  cellOverride: CellOverride<K, C>,\n  currentCell?: Cell<K, C>\n) {\n  if (cellOverride.type != null) {\n    return cellOverride.type;\n  }\n  if (cellOverride.rowKey != null) {\n    return 'data';\n  }\n  // if no type or rowKey was given, a columnKey must have been given\n  if (currentCell?.type != null && currentCell.type !== 'noData') {\n    return currentCell.type;\n  }\n  return 'header';\n}\n\n/**\n * Helper function to apply a current cell override if necessary.\n */\nexport function applyCurrentCellOverride<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  viewportInfo: ViewportInfo,\n  tableId: string,\n  tableData: TableData<K, D>[],\n  columnsArray: TableColumn<K, D, C>[],\n  stickyColumnInfo: StickyColumnInfo,\n  sizingInfoRef: MutableRef<SizingInfo>,\n  currencyStatusRef: MutableRef<CurrencyStatus<K, D, C>>,\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void,\n  isEmbeddedSelect: boolean,\n  isPendingLayout: boolean,\n  isDataLoaded: boolean,\n  isRtl: boolean,\n  currentCellOverride?: CellOverride<K, C>,\n  appliedColumnWidths?: AppliedColumnWidths<C>\n) {\n  // when embedded select, use most recent non-null current cell value as override base\n  const currentCell = isEmbeddedSelect\n    ? currencyStatusRef.current.previousEmbeddedSelectCurrentCell\n    : currencyStatusRef.current.currentCell;\n  // ensure any new currentCellOverride settings are applied if necessary\n  if (\n    currencyStatusRef.current.hasPendingCurrentCellOverride ||\n    currencyStatusRef.current.currentCellOverride !== currentCellOverride\n  ) {\n    if (currentCellOverride != null) {\n      // attempt to find the cell the override specifies\n      const realizedCell = _getCellFromCellOverride<K, D, C>(\n        tableData,\n        columnsArray,\n        currentCellOverride,\n        currentCell\n      );\n      if (realizedCell != null) {\n        // override cell was determined - apply the override immediately\n        onActiveCellChanged(\n          { value: realizedCell },\n          isAutoFocusCell(rootElement, tableId, realizedCell)\n        );\n        currencyStatusRef.current.currentCellOverride = currentCellOverride;\n        currencyStatusRef.current.hasPendingCurrentCellOverride = false;\n        if (isEmbeddedSelect) {\n          // scroll 'current-cell-override' vertically into view immediately for embedded select\n          // otherwise, cell will be scrolled into view once the component or cell receives focus\n          if (!isPendingLayout && getElementFromCell(rootElement, tableId, realizedCell) != null) {\n            applyScrollDetail(\n              rootElement,\n              scrollerElement,\n              viewportInfo,\n              tableId,\n              columnsArray,\n              stickyColumnInfo,\n              sizingInfoRef.current,\n              { cell: realizedCell, locationY: 'inView' },\n              isRtl,\n              appliedColumnWidths\n            );\n            currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n          } else if (isPendingLayout || !isDataLoaded) {\n            // corresponding element was not found - data is not ready for scrolling\n            currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = true;\n          } else {\n            // corresponding element was not found - value was garbage\n            currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n          }\n        } else {\n          // not in an embedded select, so no scrolling should be performed\n          currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n        }\n      } else if (!isDataLoaded) {\n        // override cell could not be determined - data is still fetching\n        currencyStatusRef.current.hasPendingCurrentCellOverride = true;\n      } else {\n        // override cell could not be determined - value was garbage\n        currencyStatusRef.current.currentCellOverride = currentCellOverride;\n        currencyStatusRef.current.hasPendingCurrentCellOverride = false;\n        currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n      }\n    } else {\n      // override is set to clear the current cell\n      onActiveCellChanged({ value: currentCellOverride });\n      currencyStatusRef.current.currentCellOverride = currentCellOverride;\n      currencyStatusRef.current.hasPendingCurrentCellOverride = false;\n      if (isEmbeddedSelect) {\n        // scroll back to the top for embedded select\n        resetVerticalScrollPosition(scrollerElement);\n      }\n      currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n    }\n  } else if (currencyStatusRef.current.hasPendingCurrentCellOverrideScroll) {\n    // try and apply any pending scroll from a previous cell override at this time\n    if (currencyStatusRef.current.currentCell != null) {\n      if (\n        !isPendingLayout &&\n        getElementFromCell(rootElement, tableId, currencyStatusRef.current.currentCell) != null\n      ) {\n        applyScrollDetail(\n          rootElement,\n          scrollerElement,\n          viewportInfo,\n          tableId,\n          columnsArray,\n          stickyColumnInfo,\n          sizingInfoRef.current,\n          { cell: currencyStatusRef.current.currentCell, locationY: 'inView' },\n          isRtl,\n          appliedColumnWidths\n        );\n        currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n      } else if (!isPendingLayout && isDataLoaded) {\n        // corresponding element was not found - value was garbage\n        currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n      }\n    } else {\n      // there is no longer a current cell to try and scroll to\n      currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n    }\n  }\n}\n\n/**\n * Helper to determine if the given render state includes the cell specified.\n */\nfunction _renderIncludesCell<K, D, C>(\n  cell: ActiveCell<K, C>,\n  columnsArray: TableColumn<K, D, C>[],\n  tableData: TableData<K, D>[],\n  hasMore: boolean,\n  isPendingLayout: boolean,\n  hasFooters: boolean\n) {\n  // pending layout is special as other regions exist, but are not yet navigable\n  if (isPendingLayout) {\n    return cell.type === 'pending';\n  }\n  if (cell.type === 'header' || (hasFooters && cell.type === 'footer')) {\n    for (let i = 0; i < columnsArray.length; i++) {\n      if (columnsArray[i].key === cell.columnKey) {\n        return true;\n      }\n    }\n  } else if (tableData.length > 0) {\n    if (cell.type === 'loadMore') {\n      return hasMore;\n    }\n    if (cell.type === 'data') {\n      let isColumnValid = false;\n      for (let i = 0; i < columnsArray.length; i++) {\n        if (columnsArray[i].key === cell.columnKey) {\n          isColumnValid = true;\n          break;\n        }\n      }\n      if (isColumnValid) {\n        for (let i = 0; i < tableData.length; i++) {\n          if (tableData[i].metadata === cell.rowKey) {\n            return true;\n          }\n        }\n      }\n    }\n  } else {\n    return (cell.type === 'loading' && hasMore) || (cell.type === 'noData' && !hasMore);\n  }\n  return false;\n}\n\n/**\n * Helper to get the cell that should currently be a tab stop for the given render state.\n */\nexport function determineActiveCell<K, D, C>(\n  columnsArray: TableColumn<K, D, C>[],\n  currencyStatusRef: MutableRef<CurrencyStatus<K, D, C>>,\n  tableData: TableData<K, D>[],\n  hasMore: boolean,\n  isPendingLayout: boolean,\n  isEmbeddedSelect: boolean,\n  hasFooters: boolean,\n  currentCellOverride?: CellOverride<K, C>\n): ActiveCell<K, C> | undefined {\n  if (isPendingLayout) {\n    return { type: 'pending' };\n  }\n  // if no columns are specified, it is a special case 'noData' display\n  const firstColumnKey = getBoundaryColumnKey<K, D, C>(columnsArray, true);\n  if (firstColumnKey == null) {\n    return { type: 'noData' };\n  }\n  // if nothing specifies where focus should go, use the first header cell\n  const defaultFirstCell: ActiveCell<K, C> = {\n    type: 'header',\n    columnKey: firstColumnKey\n  };\n\n  // when embedded select, use most recent non-null current cell value as override base\n  const currentCell = isEmbeddedSelect\n    ? currencyStatusRef.current.previousEmbeddedSelectCurrentCell\n    : currencyStatusRef.current.currentCell;\n  if (\n    currencyStatusRef.current.hasPendingCurrentCellOverride ||\n    currencyStatusRef.current.currentCellOverride !== currentCellOverride\n  ) {\n    if (currentCellOverride != null) {\n      // attempt to find the cell the override specifies\n      const realizedCell = _getCellFromCellOverride<K, D, C>(\n        tableData,\n        columnsArray,\n        currentCellOverride,\n        currentCell\n      );\n      if (\n        realizedCell != null &&\n        _renderIncludesCell(\n          realizedCell,\n          columnsArray,\n          tableData,\n          hasMore,\n          isPendingLayout,\n          hasFooters\n        )\n      ) {\n        return realizedCell;\n      }\n      // if here, the resulting cell from the override could not be determined or was not valid\n      const overrideCellType = _getCellTypeFromCellOverride(currentCellOverride, currentCell);\n      if (overrideCellType === 'data') {\n        if (tableData.length === 0 && hasMore) {\n          // pending 'data' override when 'loading' skeletons are shown\n          return { type: 'loading', columnKey: currentCell?.columnKey as C };\n        }\n      } else if (overrideCellType === 'noData' && tableData.length === 0 && hasMore) {\n        // pending 'noData' override when 'loading' skeletons are shown\n        return { type: 'loading', columnKey: currentCell?.columnKey as C };\n      }\n    } else if (\n      _renderIncludesCell(\n        defaultFirstCell,\n        columnsArray,\n        tableData,\n        hasMore,\n        isPendingLayout,\n        hasFooters\n      )\n    ) {\n      return defaultFirstCell;\n    } else {\n      return undefined;\n    }\n  }\n\n  // if here, there is no current cell override that can be applied during this render\n  const activeCell = currencyStatusRef.current.activeCell;\n  if (activeCell != null) {\n    if (activeCell.type === 'loadMore') {\n      const initialData = currencyStatusRef.current.loadMoreInitialData;\n      // if loadMore skeletons are no longer shown, or the data has changed, shift to\n      // the next row in the data set if possible - otherwise just the closest row\n      if (tableData.length > 0 && tableData !== initialData) {\n        const rowKey =\n          initialData != null && tableData.length > initialData.length\n            ? tableData[initialData.length].metadata\n            : tableData[tableData.length - 1].metadata;\n        const columnKey = currentCell?.columnKey != null ? currentCell.columnKey : firstColumnKey;\n        const cell: ActiveCell<K, C> = { type: 'data', rowKey: rowKey, columnKey: columnKey };\n        if (\n          _renderIncludesCell(cell, columnsArray, tableData, hasMore, isPendingLayout, hasFooters)\n        ) {\n          return cell;\n        }\n      } else if (tableData.length === 0) {\n        if (hasMore) {\n          return { type: 'loading', columnKey: currentCell?.columnKey as C };\n        } else {\n          return { type: 'noData' };\n        }\n      }\n    }\n    if (\n      _renderIncludesCell(activeCell, columnsArray, tableData, hasMore, isPendingLayout, hasFooters)\n    ) {\n      return activeCell;\n    } else if (activeCell.type === 'loading') {\n      if (currentCell != null && (currentCell.type === 'data' || currentCell.type === 'noData')) {\n        // if the current cell is already set to 'data' or 'noData', and is now available, return it\n        if (\n          _renderIncludesCell(\n            currentCell,\n            columnsArray,\n            tableData,\n            hasMore,\n            isPendingLayout,\n            hasFooters\n          )\n        ) {\n          return currentCell;\n        }\n      }\n      // otherwise, find the first row if available, and try and maintain the columnKey\n      if (tableData.length > 0) {\n        const rowKey = tableData[0].metadata;\n        const columnKey = currentCell?.columnKey != null ? currentCell.columnKey : firstColumnKey;\n        const cell: ActiveCell<K, C> = { type: 'data', rowKey: rowKey, columnKey: columnKey };\n        if (\n          _renderIncludesCell(cell, columnsArray, tableData, hasMore, isPendingLayout, hasFooters)\n        ) {\n          return cell;\n        }\n      } else {\n        return { type: 'noData' };\n      }\n    }\n  }\n\n  // if here, there is no active cell, or the active cell is no longer valid\n  if (currentCell != null) {\n    if (\n      _renderIncludesCell(\n        currentCell,\n        columnsArray,\n        tableData,\n        hasMore,\n        isPendingLayout,\n        hasFooters\n      )\n    ) {\n      return currentCell;\n    }\n    if (currentCell.type === 'data') {\n      if (tableData.length === 0 && hasMore) {\n        // pending 'data' override when 'loading' skeletons are shown\n        return { type: 'loading', columnKey: currentCell.columnKey };\n      }\n    } else if (currentCell.type === 'noData' && tableData.length === 0 && hasMore) {\n      // pending 'noData' override when 'loading' skeletons are shown\n      return { type: 'loading', columnKey: firstColumnKey };\n    }\n  }\n  if (\n    _renderIncludesCell(\n      defaultFirstCell,\n      columnsArray,\n      tableData,\n      hasMore,\n      isPendingLayout,\n      hasFooters\n    )\n  ) {\n    return defaultFirstCell;\n  }\n  return undefined;\n}\n","import { ComponentProps } from 'preact';\nimport { useCallback, useState, useRef } from 'preact/hooks';\nimport { Menu } from '../../UNSAFE_Menu';\nimport {\n  CellContextMenuContext,\n  SortCriterionDetail,\n  TableContextMenuConfig\n} from '../../UNSAFE_TableView';\nimport { useContextMenuGesture } from '../../hooks/UNSAFE_useContextMenuGesture';\nimport { ActiveCell, TableColumn, TableData } from '../Table';\nimport { getCellContextMenuContextFromCell } from '../utils/TableFocusUtils';\n\ntype MenuProps = Pick<\n  ComponentProps<typeof Menu>,\n  'anchorRef' | 'initialFocus' | 'placement' | 'offsetValue' | 'isOpen'\n>;\n\nconst TOUCH_OFFSET_VALUE = 40;\n\nconst menuPropGestureStates: Record<\n  'mouse' | 'keyboard' | 'touch',\n  Omit<Required<MenuProps>, 'anchorRef' | 'isOpen'>\n> = {\n  mouse: {\n    initialFocus: 'menu',\n    placement: 'bottom-start',\n    offsetValue: 2\n  },\n  keyboard: {\n    initialFocus: 'firstItem',\n    placement: 'bottom-start',\n    offsetValue: 0\n  },\n  touch: {\n    initialFocus: 'menu',\n    placement: 'end',\n    offsetValue: TOUCH_OFFSET_VALUE\n  }\n};\n\nconst _initialMenuProps: MenuProps = {\n  isOpen: false,\n  initialFocus: 'menu',\n  placement: 'bottom-start',\n  offsetValue: 0,\n  anchorRef: { current: null }\n};\n\nexport const useContextMenu = <K extends string | number, D, C extends string>(\n  tableId: string,\n  tableData: TableData<K, D>[],\n  columnsArray: TableColumn<K, D, C>[],\n  activeCell?: ActiveCell<K, C>,\n  contextMenuConfig?: TableContextMenuConfig<K, D, C>,\n  sortCriterion?: { key: C; sortDirection: 'ascending' | 'descending' }[],\n  onSortCriterionChange?: (detail: SortCriterionDetail<C>) => void\n) => {\n  const [contextMenuContext, setContextMenuContext] = useState<CellContextMenuContext<K, D, C>>();\n  const [menuProps, setMenuProps] = useState<MenuProps>(_initialMenuProps);\n  const currentCellElementRef = useRef<HTMLElement>();\n\n  const [isResizeDialogOpen, setIsResizeDialogOpen] = useState<boolean>(false);\n\n  const { triggerProps } = useContextMenuGesture(\n    ({ gesture, anchor, target }) => {\n      if (activeCell != null) {\n        const cellContextMenuContext = getCellContextMenuContextFromCell<K, D, C>(\n          tableData,\n          columnsArray,\n          setIsResizeDialogOpen,\n          activeCell,\n          sortCriterion,\n          onSortCriterionChange\n        );\n        if (cellContextMenuContext != null) {\n          // find the cell element the menu is being launched from\n          const cellElement = (target as HTMLElement).closest(\n            `[data-oj-table-focusable='${tableId}']`\n          ) as HTMLElement;\n          if (cellElement != null) {\n            currentCellElementRef.current = cellElement;\n            const anchorBasedOnGesture = gesture === 'keyboard' ? cellElement : anchor;\n            setContextMenuContext(cellContextMenuContext);\n            setMenuProps({\n              ...menuPropGestureStates[gesture],\n              anchorRef: { current: anchorBasedOnGesture },\n              isOpen: true\n            });\n          }\n        }\n      }\n    },\n    {\n      isDisabled: !contextMenuConfig\n    }\n  );\n\n  const handleCloseContextMenu = useCallback<Required<ComponentProps<typeof Menu>>['onClose']>(\n    (detail) => {\n      // set focus back on the cell that was determined as the initial target\n      if (detail.reason === 'dismissed' || detail.reason === 'itemAction') {\n        currentCellElementRef.current?.focus({ preventScroll: true });\n      }\n      // close the menu\n      setMenuProps({ ..._initialMenuProps });\n    },\n    []\n  );\n\n  return {\n    menuProps: { ...menuProps, onClose: handleCloseContextMenu },\n    onClose: handleCloseContextMenu,\n    contextMenuContext: contextMenuContext,\n    contextMenuTriggerProps: triggerProps,\n    isResizeDialogOpen: isResizeDialogOpen,\n    setIsResizeDialogOpen: setIsResizeDialogOpen\n  };\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { useCallback, useEffect, useRef, useState, MutableRef } from 'preact/hooks';\nimport { useId } from '../../hooks/UNSAFE_useId';\nimport { useColorScheme } from '../../hooks/UNSAFE_useColorScheme';\nimport { useScale } from '../../hooks/UNSAFE_useScale';\nimport { TooltipContent } from '../../hooks/UNSAFE_useTooltip/TooltipContent';\nimport {\n  getGlobalTooltipManager,\n  getWrappedTooltipContent,\n  SHOW_TOOLTIP_DELAY,\n  HIDE_TOOLTIP_DELAY\n} from '../../utils/PRIVATE_tooltipUtils';\nimport { ColumnResizeInfo } from '../Table';\nimport { getElementFromCell } from '../utils/TableDomUtils';\nimport { cellComparator } from '../utils/TableFocusUtils';\nimport { hasTruncatedText } from '../utils/TableTooltipUtils';\nimport { Cell } from '../../UNSAFE_TableView';\n\ntype UseTruncationTooltipOptions<C> = {\n  rootRef: RefObject<HTMLDivElement>;\n  tableId: string;\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>;\n};\n\n// delay small interaction times concerning a tooltip\nconst SMALL_INTERACTION_DELAY = 50;\nconst TABLE_HIDE_TOOLTIP_DELAY = Math.max(\n  Math.min(SHOW_TOOLTIP_DELAY - SMALL_INTERACTION_DELAY, HIDE_TOOLTIP_DELAY),\n  0\n);\n\n/**\n * Hook that manages cell template tooltip interactions on the Table when truncation is present.\n */\nexport function useTruncationTooltip<K, C>({\n  rootRef,\n  tableId,\n  resizeInfoRef\n}: UseTruncationTooltipOptions<C>) {\n  const globalTooltipManager = getGlobalTooltipManager();\n\n  const tooltipId = useId();\n\n  const tooltipCellRef = useRef<Cell<K, C>>();\n  const pendingShowTooltipCellRef = useRef<Cell<K, C>>();\n  const tooltipAnchorRef = useRef<HTMLElement>();\n  const tooltipTextRef = useRef<string>();\n  const [tooltipText, setTooltipText] = useState<string>();\n\n  const pointerDownRef = useRef<boolean>(false);\n  const pointerDownTimeoutRef = useRef<ReturnType<typeof setTimeout>>();\n\n  const showTooltipTimeoutRef = useRef<ReturnType<typeof setTimeout>>();\n  const hideTooltipTimeoutRef = useRef<ReturnType<typeof setTimeout>>();\n\n  // helper method for clearing the hide tooltip timeout\n  const _clearHideTooltipTimeout = useCallback(() => {\n    clearTimeout(hideTooltipTimeoutRef.current);\n    hideTooltipTimeoutRef.current = undefined;\n  }, []);\n\n  // helper method for clearing the show tooltip timeout\n  const _clearShowTooltipTimeout = useCallback(() => {\n    clearTimeout(showTooltipTimeoutRef.current);\n    showTooltipTimeoutRef.current = undefined;\n    pendingShowTooltipCellRef.current = undefined;\n  }, []);\n\n  // helper method for setting up the show tooltip timeout\n  const _setupShowTooltipTimeout = useCallback(() => {\n    showTooltipTimeoutRef.current = setTimeout(function () {\n      // when showing a tooltip, clear any pending 'clear tooltip timeouts'\n      if (hideTooltipTimeoutRef.current != null) {\n        _clearHideTooltipTimeout();\n      }\n      // only show a tooltip if not currently performing a column resize gesture\n      if (!resizeInfoRef.current.isResizing) {\n        showTooltipTimeoutRef.current = undefined;\n        const cell = pendingShowTooltipCellRef.current;\n        const rootElement = rootRef.current;\n        if (rootElement != null && cell != null) {\n          const cellElement = getElementFromCell(rootElement, tableId, cell);\n          if (cellElement != null && hasTruncatedText(cellElement)) {\n            setTooltipText(String(cellElement.innerText).trim());\n            tooltipAnchorRef.current = cellElement;\n            tooltipCellRef.current = cell;\n          }\n        }\n      }\n      pendingShowTooltipCellRef.current = undefined;\n    }, SHOW_TOOLTIP_DELAY);\n  }, [rootRef, tableId, resizeInfoRef, _clearHideTooltipTimeout]);\n\n  // helper method for setting up the hide tooltip timeout\n  const _setupHideTooltipTimeout = useCallback(() => {\n    hideTooltipTimeoutRef.current = setTimeout(function () {\n      // unlike in the showtooltip timeout logic, we do not want to clear\n      // pending show tooltip timeouts when clearing a tooltip as it could\n      // still be waiting to be shown in another location at this time\n      hideTooltipTimeoutRef.current = undefined;\n      setTooltipText(undefined);\n      tooltipAnchorRef.current = undefined;\n      tooltipCellRef.current = undefined;\n    }, TABLE_HIDE_TOOLTIP_DELAY);\n  }, []);\n\n  // callback method to signal a tooltip is desired on the given cell\n  const showTooltip = useCallback(\n    (anchorCell: Cell<K, C>) => {\n      if (cellComparator(tooltipCellRef.current, anchorCell)) {\n        // if the tooltip is already showing in the right cell, clear all timeouts\n        if (showTooltipTimeoutRef.current != null) {\n          _clearShowTooltipTimeout();\n        }\n        if (hideTooltipTimeoutRef.current != null) {\n          _clearHideTooltipTimeout();\n        }\n        return;\n      }\n      if (showTooltipTimeoutRef.current == null) {\n        // if no tooltip is already pending, start a new tooltip timeout\n        pendingShowTooltipCellRef.current = anchorCell;\n        _setupShowTooltipTimeout();\n      } else if (!cellComparator(pendingShowTooltipCellRef.current, anchorCell)) {\n        // if a different tooltip is already pending, start a new tooltip timeout\n        _clearShowTooltipTimeout();\n        pendingShowTooltipCellRef.current = anchorCell;\n        _setupShowTooltipTimeout();\n      }\n      if (tooltipCellRef.current != null && hideTooltipTimeoutRef.current == null) {\n        // if the tooltip is showing on a different cell, ensure a hide timeout is setup\n        _setupHideTooltipTimeout();\n      }\n    },\n    [\n      _setupShowTooltipTimeout,\n      _setupHideTooltipTimeout,\n      _clearShowTooltipTimeout,\n      _clearHideTooltipTimeout\n    ]\n  );\n\n  // callback method to signal the current tooltip is no longer desired\n  const hideTooltip = useCallback(\n    (isImmediate?: boolean) => {\n      // ignore hide tooltip calls if due to focus loss from a pointer down on the tooltip itself\n      if (pointerDownRef.current) {\n        return;\n      }\n      if (showTooltipTimeoutRef.current != null) {\n        _clearShowTooltipTimeout();\n      }\n      if (isImmediate) {\n        if (hideTooltipTimeoutRef.current != null) {\n          _clearHideTooltipTimeout();\n        }\n        setTooltipText(undefined);\n        tooltipAnchorRef.current = undefined;\n        tooltipCellRef.current = undefined;\n      } else if (hideTooltipTimeoutRef.current == null) {\n        _setupHideTooltipTimeout();\n      }\n    },\n    [_setupHideTooltipTimeout, _clearShowTooltipTimeout, _clearHideTooltipTimeout]\n  );\n\n  // Pointer move handler for the tooltip.\n  const _pointerMoveHandler = useCallback((_event: PointerEvent) => {\n    if (showTooltipTimeoutRef.current != null) {\n      clearTimeout(showTooltipTimeoutRef.current);\n      showTooltipTimeoutRef.current = undefined;\n      pendingShowTooltipCellRef.current = undefined;\n    }\n    if (hideTooltipTimeoutRef.current != null) {\n      clearTimeout(hideTooltipTimeoutRef.current);\n      hideTooltipTimeoutRef.current = undefined;\n    }\n  }, []);\n\n  // Pointer leave handler for the tooltip.\n  const _pointerLeaveHandler = useCallback(\n    (event: PointerEvent) => {\n      const targetElement = event.relatedTarget as HTMLElement;\n      if (targetElement != null && targetElement.closest(`#${tableId}`) != null) {\n        return;\n      }\n      hideTooltip();\n    },\n    [tableId, hideTooltip]\n  );\n\n  // Pointer down handler for the tooltip.\n  const _pointerDownHandler = useCallback((_event: PointerEvent) => {\n    pointerDownRef.current = true;\n    if (pointerDownTimeoutRef.current != null) {\n      clearTimeout(pointerDownTimeoutRef.current);\n    }\n    pointerDownTimeoutRef.current = setTimeout(function () {\n      pointerDownRef.current = false;\n      pointerDownTimeoutRef.current = undefined;\n    }, SMALL_INTERACTION_DELAY);\n  }, []);\n\n  // handles logic involving competing tooltips managed outside of the TableView.\n  // make sure this check runs BEFORE the rendered content is created below\n  const isOpenOverrideRef = useRef<boolean>(true);\n  if (tooltipText != null && tooltipText !== tooltipTextRef.current) {\n    isOpenOverrideRef.current = true;\n  }\n\n  const tooltipPointerProps = {\n    onPointerLeave: _pointerLeaveHandler,\n    onPointerMove: _pointerMoveHandler,\n    onPointerDown: _pointerDownHandler\n  };\n\n  // avoid applying undefined text after initial render completes as it can appear\n  // while the tooltip is going through its closing animation and looks broken\n  const renderRawContent = (\n    <TooltipContent\n      {...tooltipPointerProps}\n      id={tooltipId}\n      isOpen={isOpenOverrideRef.current}\n      isDatatip={false}>\n      {tooltipText != null ? tooltipText : tooltipTextRef.current}\n    </TooltipContent>\n  );\n\n  // make sure these are in sync AFTER the rendered content is created above - this helps ensure\n  // that empty text does not show up while the tooltip is going through a closing animation.\n  tooltipTextRef.current = tooltipText;\n\n  // offsets attempt to show the tooltip without overlapping content of nearby cells\n  const scale = useScale();\n  let mainAxisOffset = -8;\n  let crossAxisOffset = -14;\n  if (scale === 'md') {\n    mainAxisOffset = -7;\n    crossAxisOffset = -12;\n  } else if (scale === 'sm') {\n    mainAxisOffset = -6;\n    crossAxisOffset = -11;\n  }\n  const currentColorScheme = useColorScheme();\n  const tooltipContent =\n    tooltipAnchorRef.current != null\n      ? getWrappedTooltipContent(\n          renderRawContent,\n          'tooltip',\n          currentColorScheme,\n          tooltipAnchorRef as RefObject<HTMLElement>,\n          'end-top',\n          { mainAxis: mainAxisOffset, crossAxis: crossAxisOffset }\n        )\n      : undefined;\n\n  const destroyCallback = useCallback(() => {\n    hideTooltip(true);\n  }, [hideTooltip]);\n\n  useEffect(() => {\n    if (isOpenOverrideRef.current && tooltipAnchorRef.current != null) {\n      globalTooltipManager.register(destroyCallback);\n    } else {\n      globalTooltipManager.unregister(destroyCallback);\n    }\n  }, [tooltipAnchorRef, destroyCallback, tooltipText, globalTooltipManager]);\n\n  return { tooltipContent, tooltipId, showTooltip, hideTooltip, tooltipAnchorRef };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { useCallback, useEffect, useMemo, useRef, useState, MutableRef } from 'preact/hooks';\nimport {\n  getElementContainsFunc,\n  handleEnterActionableMode,\n  handleWrapActionableFocus\n} from '../../utils/PRIVATE_collectionUtils';\nimport {\n  FocusableElement,\n  allTabbableElements,\n  getActiveElement,\n  getBodyElement,\n  isTabbableElement\n} from '../../utils/PRIVATE_tabbableUtils';\nimport type { FocusGuardCallbackDetail } from '../../PRIVATE_FocusTracker';\nimport {\n  ActiveCell,\n  ActiveCellDetail,\n  AppliedColumnWidths,\n  CurrencyStatus,\n  ScrollDetail,\n  SizingInfo,\n  StickyColumnInfo,\n  TableColumn,\n  TableData,\n  ViewportInfo\n} from '../Table';\nimport {\n  getCellType,\n  getElementFromCell,\n  isAutoFocusCell,\n  logicalCellExtractor\n} from '../utils/TableDomUtils';\nimport {\n  applyCurrentCellOverride,\n  cellComparator,\n  determineActiveCell,\n  isTransientCell\n} from '../utils/TableFocusUtils';\nimport { applyScrollDetail } from '../utils/TableScrollUtils';\nimport { handleNavigationTooltipGesture } from '../utils/TableTooltipUtils';\nimport { Cell, CellOverride, CurrentCellDetail } from '../../UNSAFE_TableView';\n\ntype UseFocusHandlingProps<K, D, C extends string> = {\n  rootRef: RefObject<HTMLDivElement>;\n  viewportInfo: ViewportInfo;\n  tableId: string;\n  tableData: TableData<K, D>[];\n  hasMore: boolean;\n  hasFooters: boolean;\n  isRtl: boolean;\n  columnsArray: TableColumn<K, D, C>[];\n  stickyColumnInfo: StickyColumnInfo;\n  sizingInfoRef: MutableRef<SizingInfo>;\n  selectionExtensionElementRef: MutableRef<HTMLElement | undefined>;\n  cellSupportsTabbable: (cell: ActiveCell<K, C>) => boolean;\n  appliedColumnWidths?: AppliedColumnWidths<C>;\n  currentCellOverride?: CellOverride<K, C>;\n  onPersistCurrentCell?: (detail: CurrentCellDetail<K, C>) => void;\n  showTooltip: (cell: Cell<K, C>) => void;\n  hideTooltip: (isImmediate?: boolean) => void;\n  isPendingLayout: boolean;\n  isEmbeddedSelect: boolean;\n  isDataLoaded: boolean;\n};\n\n// constant timeout values for delays following a input gesture until enabling focus rings\nconst MOUSE_FOCUS_SHIFT_TIMEOUT = 100;\nconst TOUCH_FOCUS_SHIFT_TIMEOUT = 200;\n\n// constant event.key values that trigger focus ring logic\nconst NAVIGATION_KEYS = [\n  ' ',\n  'F2',\n  'Enter',\n  'Esc', // Firefox 36 and earlier uses 'Esc' instead of 'Escape'\n  'Escape',\n  'ArrowLeft',\n  'ArrowUp',\n  'ArrowRight',\n  'ArrowDown',\n  'Home',\n  'End',\n  'PageUp',\n  'PageDown'\n];\n\n// constant event.key values that trigger 'scroll to current' logic\nconst SCROLL_KEYS = [\n  ' ',\n  'F2',\n  'Enter',\n  'Esc', // Firefox 36 and earlier uses 'Esc' instead of 'Escape'\n  'Escape'\n];\n\n/**\n * Hook that manages focus interactions on the Preact Table\n */\nexport function useFocusHandling<K extends string | number, D, C extends string>({\n  rootRef,\n  viewportInfo,\n  tableId,\n  isRtl,\n  tableData,\n  hasMore,\n  hasFooters,\n  columnsArray,\n  stickyColumnInfo,\n  sizingInfoRef,\n  selectionExtensionElementRef,\n  cellSupportsTabbable,\n  appliedColumnWidths,\n  currentCellOverride,\n  onPersistCurrentCell,\n  showTooltip,\n  hideTooltip,\n  isPendingLayout,\n  isEmbeddedSelect,\n  isDataLoaded\n}: UseFocusHandlingProps<K, D, C>) {\n  // tracks whether the most recent 'blur' was caused by focus being lost by the browser window (or iframe)\n  const blurFromWindowRef = useRef<boolean>(false);\n\n  // tracks focus loss during render cycle for potential focus recapture cases\n  const isRenderCycle = useRef<boolean>(true);\n  isRenderCycle.current = true;\n  const blurredRenderCycleElementRef = useRef<FocusableElement | null>(null);\n  const isPendingLayoutFocusRef = useRef<boolean>(false);\n\n  // track current 'focus info' state\n  const hasFocusRef = useRef<boolean>(false);\n  const [isTabbableMode, setIsTabbableMode] = useState<boolean>(false);\n  const [isShowFocusRing, setIsShowFocusRing] = useState<boolean>(false);\n\n  // track pointer down information\n  const recentPointerRef = useRef<boolean>(false);\n  const pointerTimerRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const isShowFocusRingOverrideRef = useRef<boolean | null>(null);\n\n  // track the active and current cell information\n  const [activeCell, setActiveCell] = useState<ActiveCell<K, C> | undefined>(undefined);\n  const currencyStatusRef = useRef<CurrencyStatus<K, D, C>>({\n    hasPendingCurrentCellOverride: false,\n    hasPendingCurrentCellOverrideScroll: false\n  });\n\n  // track pending scrolls to minimize 'flash' of focus rings when scrolling\n  const [deferredScrollDetail, setDeferredScrollDetail] = useState<ScrollDetail<K, C> | undefined>(\n    undefined\n  );\n  const deferredScrollDetailRef = useRef<ScrollDetail<K, C>>();\n\n  // keep state and ref in-sync to avoid edge cases where a gesture updating the scroll detail is handled\n  // inbetween a render cycle that changes the scroll detail and the useEffect that applies the detail\n  const updateDeferredScrollDetail = useCallback((scrollDetail: ScrollDetail<K, C>) => {\n    setDeferredScrollDetail(scrollDetail);\n    deferredScrollDetailRef.current = scrollDetail;\n  }, []);\n\n  const wasTransient = isTransientCell(currencyStatusRef.current.activeCell);\n  const currentActiveCell = determineActiveCell<K, D, C>(\n    columnsArray,\n    currencyStatusRef,\n    tableData,\n    hasMore,\n    isPendingLayout,\n    isEmbeddedSelect,\n    hasFooters,\n    currentCellOverride\n  );\n\n  // intercept onPersistCurrentCell calls to ensure internal state is updated appropriately\n  const onActiveCellChanged = useMemo(() => {\n    return (\n      detail: ActiveCellDetail<K, C>,\n      isAutoFocus?: boolean,\n      isSelectionExtension?: boolean,\n      skipScrollCellIntoView?: boolean\n    ) => {\n      const newActiveCell = detail.value;\n      if (!cellComparator(currencyStatusRef.current.activeCell, newActiveCell)) {\n        setActiveCell(newActiveCell);\n        currencyStatusRef.current.activeCell = newActiveCell;\n        if (!isTransientCell(newActiveCell)) {\n          const newCurrentCell = newActiveCell as Cell<K, C>;\n          // only update current cell when 'active' is not one of the transient 'skeleton' regions\n          if (onPersistCurrentCell != null) {\n            onPersistCurrentCell({ value: newCurrentCell });\n          }\n          currencyStatusRef.current.currentCell = newCurrentCell;\n\n          // make sure pending current cell override states are updated on current changed\n          if (newCurrentCell != null) {\n            currencyStatusRef.current.previousEmbeddedSelectCurrentCell = newCurrentCell;\n          }\n          currencyStatusRef.current.currentCellOverride = currentCellOverride;\n          currencyStatusRef.current.hasPendingCurrentCellOverride = false;\n          currencyStatusRef.current.hasPendingCurrentCellOverrideScroll = false;\n        } else if (newActiveCell?.type === 'loadMore') {\n          currencyStatusRef.current.loadMoreInitialData = tableData;\n        }\n        if (!isSelectionExtension) {\n          selectionExtensionElementRef.current = undefined;\n          if (isAutoFocus && newActiveCell != null && cellSupportsTabbable(newActiveCell)) {\n            // attempt to auto-focus cell contents\n            setIsTabbableMode(true);\n            setIsShowFocusRing(false);\n          } else if (isTabbableMode) {\n            // exit tabbable mode when navigating away from auto-focus cell\n            setIsTabbableMode(false);\n          }\n        }\n      }\n      if (newActiveCell != null && !recentPointerRef.current && !skipScrollCellIntoView) {\n        updateDeferredScrollDetail({\n          cell: newActiveCell,\n          locationX: 'inView',\n          locationY: 'inView'\n        });\n      }\n    };\n  }, [\n    currentCellOverride,\n    isTabbableMode,\n    cellSupportsTabbable,\n    tableData,\n    onPersistCurrentCell,\n    selectionExtensionElementRef,\n    updateDeferredScrollDetail\n  ]);\n\n  // Helper function to set the Table's focus tracking state to reflect that it is inactive.\n  const _setAsInactive = useCallback(() => {\n    hasFocusRef.current = false;\n    isPendingLayoutFocusRef.current = false;\n\n    setIsTabbableMode(false);\n    setIsShowFocusRing(false);\n    hideTooltip();\n  }, [hideTooltip]);\n\n  // Helper function to set the Table's focus tracking state to reflect that one of its cells has focus.\n  const _enableNavigationMode = useCallback(\n    (cell: ActiveCell<K, C>, skipScrollCellIntoView?: boolean) => {\n      const rootElement = rootRef.current;\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (rootElement != null && scrollerElement != null) {\n        setIsTabbableMode(false);\n        const focusRingState =\n          isShowFocusRingOverrideRef.current !== null\n            ? isShowFocusRingOverrideRef.current\n            : !recentPointerRef.current;\n        setIsShowFocusRing(focusRingState);\n        if (focusRingState) {\n          handleNavigationTooltipGesture(rootElement, tableId, cell, showTooltip, hideTooltip);\n        }\n        onActiveCellChanged({ value: cell }, false, false, skipScrollCellIntoView);\n      }\n    },\n    [rootRef, viewportInfo, tableId, onActiveCellChanged, showTooltip, hideTooltip]\n  );\n\n  // Helper function to set the Table's focus tracking state to reflect that it is tabbable.\n  const _enableTabbableMode = useCallback(\n    (cell: ActiveCell<K, C>, isKeyboard?: boolean, skipScrollCellIntoView?: boolean) => {\n      const rootElement = rootRef.current;\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (rootElement != null && scrollerElement != null) {\n        setIsTabbableMode(true);\n        if (!isKeyboard) {\n          setIsShowFocusRing(false);\n          onActiveCellChanged({ value: cell }, true, false, skipScrollCellIntoView);\n        }\n      }\n    },\n    [rootRef, viewportInfo, onActiveCellChanged]\n  );\n\n  // Helper function to set the Table's focus tracking state to reflect that a user has\n  // exited tabbable mode via the keyboard (esc or 'F2')\n  const _disableTabbableMode = useCallback(\n    (cell: ActiveCell<K, C>) => {\n      const rootElement = rootRef.current;\n      if (rootElement != null) {\n        setIsTabbableMode(false);\n        const cellElement = getElementFromCell(rootElement, tableId, cell);\n        if (cellElement != null) {\n          cellElement.focus({ preventScroll: true });\n        } else {\n          rootElement.focus({ preventScroll: true });\n        }\n      }\n    },\n    [rootRef, tableId]\n  );\n\n  const notifyFocusFromPointer = useCallback((isTouch: boolean) => {\n    if (pointerTimerRef.current != null) {\n      clearTimeout(pointerTimerRef.current);\n    }\n    recentPointerRef.current = true;\n    pointerTimerRef.current = setTimeout(\n      () => {\n        recentPointerRef.current = false;\n      },\n      isTouch ? TOUCH_FOCUS_SHIFT_TIMEOUT : MOUSE_FOCUS_SHIFT_TIMEOUT\n    );\n  }, []);\n\n  // PointerDown handler for the outer Table. Focus transfers that occur following a pointerdown\n  // on desktop devices should not result in a focus ring being shown on the focused element\n  const _pointerDownHandler = useCallback(\n    (event: PointerEvent) => {\n      if (isShowFocusRing) {\n        setIsShowFocusRing(false);\n      }\n      if (event.pointerType !== 'touch') {\n        notifyFocusFromPointer(false);\n      }\n    },\n    [isShowFocusRing, notifyFocusFromPointer]\n  );\n\n  // PointerUp handler for the outer Table. Focus transfers that occur following a pointerup\n  // on any type of device should not result in a focus ring being shown on the focused element\n  const _pointerUpHandler = useCallback(\n    (event: PointerEvent) => {\n      notifyFocusFromPointer(event.pointerType === 'touch');\n    },\n    [notifyFocusFromPointer]\n  );\n\n  // Focus handler for the outer Table. On focus, a focusable area needs to be 'active'.\n  // If an 'active' area already exists, nothing further is needed. Otherwise, the first\n  // focusable element should be made 'active'.\n  const _onFocusHandler = (event: FocusEvent) => {\n    hasFocusRef.current = true;\n    const rootElement = rootRef.current;\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    if (rootElement != null) {\n      // don't scroll active into view if previous blur was due to window focus loss\n      const skipScrollCellIntoView = blurFromWindowRef.current || isPendingLayout;\n      blurFromWindowRef.current = false;\n\n      const targetElement = event.target as HTMLElement;\n      if (targetElement === rootElement || targetElement === scrollerElement) {\n        if (currentActiveCell != null) {\n          _enableNavigationMode(currentActiveCell, skipScrollCellIntoView);\n        }\n      } else {\n        const cell = logicalCellExtractor<K, D, C>(targetElement, tableId, columnsArray);\n        if (cell != null) {\n          if (getCellType(targetElement) != null) {\n            // handle individual focusable regions receiving focus\n            _enableNavigationMode(cell, skipScrollCellIntoView);\n          } else {\n            _enableTabbableMode(cell, false, skipScrollCellIntoView);\n          }\n        }\n      }\n    }\n    isShowFocusRingOverrideRef.current = null;\n  };\n\n  // Blur handler for the outer Table. When a blur is caused by the browser window itself\n  // losing focus (changing tabs or leaving an iframe for example), an eventual re-focus due\n  // to the window re-gaining focus needs to be handled differently (no auto-scroll mostly).\n  const _onBlurHandler = useCallback(\n    (event: FocusEvent) => {\n      const rootElement = rootRef.current;\n      if (rootElement != null) {\n        if (event.target === document.activeElement) {\n          // save focus ring state so it's set once focus comes back\n          isShowFocusRingOverrideRef.current = isShowFocusRing;\n        }\n        const relatedTarget = event.relatedTarget as Element;\n        const isUnknownRelatedTarget = relatedTarget == null;\n        blurFromWindowRef.current = isUnknownRelatedTarget;\n        if (isUnknownRelatedTarget || !getElementContainsFunc(rootElement, true)(relatedTarget)) {\n          _setAsInactive();\n          if (isRenderCycle.current) {\n            // store element that loses focus during a render cycle for recapturing focus logic\n            blurredRenderCycleElementRef.current = event.target as FocusableElement;\n          }\n        }\n      }\n    },\n    [rootRef, isShowFocusRing, _setAsInactive]\n  );\n\n  // KeyDown handler for the outer Table. This specific handler tracks 'focus' transfer keys\n  // Esc, F2, Enter, and Tab. It also ensures the active cell is scrolled into view on any key\n  const _onKeyDownHandler = useCallback(\n    (event: KeyboardEvent) => {\n      const rootElement = rootRef.current;\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (rootElement != null && scrollerElement != null) {\n        const isNavigationKey = NAVIGATION_KEYS.indexOf(event.key) > -1;\n        if (isNavigationKey) {\n          if (pointerTimerRef.current != null) {\n            clearTimeout(pointerTimerRef.current);\n          }\n          pointerTimerRef.current = null;\n          recentPointerRef.current = false;\n        }\n        if (isPendingLayout) {\n          if (isNavigationKey) {\n            setIsShowFocusRing(true);\n          }\n        } else if (activeCell != null) {\n          if (cellSupportsTabbable(activeCell)) {\n            if (event.key === 'F2') {\n              if (isTabbableMode) {\n                _disableTabbableMode(activeCell);\n              } else {\n                _enableTabbableMode(activeCell, true);\n              }\n            } else if (event.key === 'Esc' || event.key === 'Escape') {\n              // Firefox 36 and earlier uses 'Esc' instead of 'Escape'\n              _disableTabbableMode(activeCell);\n            } else if (event.key === 'Enter' && !isTabbableMode) {\n              _enableTabbableMode(activeCell, true);\n            }\n          }\n          if (!isTabbableMode) {\n            if (isNavigationKey) {\n              setIsShowFocusRing(true);\n            }\n            if (SCROLL_KEYS.indexOf(event.key) > -1) {\n              updateDeferredScrollDetail({\n                cell: activeCell,\n                locationX: 'inView',\n                locationY: 'inView'\n              });\n            }\n          }\n        }\n      }\n    },\n    [\n      rootRef,\n      viewportInfo,\n      isTabbableMode,\n      activeCell,\n      cellSupportsTabbable,\n      isPendingLayout,\n      _enableTabbableMode,\n      _disableTabbableMode,\n      updateDeferredScrollDetail\n    ]\n  );\n\n  // Callback for the outer Table's FocusTracker usage.\n  const onStartFocusTracking = useCallback(\n    (detail: {\n      activeElement: FocusableElement;\n      hasFocusWithin: boolean;\n      tabbableElements: FocusableElement[];\n    }) => {\n      const rootElement = rootRef.current;\n      if (rootElement != null && activeCell != null) {\n        handleEnterActionableMode(\n          detail.hasFocusWithin && getCellType(detail.activeElement) == null,\n          allTabbableElements(\n            getElementFromCell(rootElement, tableId, activeCell) as FocusableElement\n          ),\n          (value?: ActiveCell<K, D>) => {\n            setIsTabbableMode(value != undefined);\n          }\n        );\n      }\n    },\n    [rootRef, activeCell, tableId]\n  );\n\n  // Callback for the outer Table's FocusTracker usage.\n  const onFocusStartEdge = useCallback((detail: FocusGuardCallbackDetail) => {\n    handleWrapActionableFocus(true, detail.tabbableElements, (value?: ActiveCell<K, D>) => {\n      setIsTabbableMode(value != undefined);\n    });\n  }, []);\n\n  // Callback for the outer Table's FocusTracker usage.\n  const onFocusEndEdge = useCallback((detail: FocusGuardCallbackDetail) => {\n    handleWrapActionableFocus(false, detail.tabbableElements, (value?: ActiveCell<K, D>) => {\n      setIsTabbableMode(value != undefined);\n    });\n  }, []);\n\n  // Ensure focus is properly set at the completion of every render cycle\n  // NO DEPENDENCY ARRAY HERE TO ENSURE THIS RUNS ON EVERY RENDER CYCLE\n  useEffect(() => {\n    const rootElement = rootRef.current;\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    if (rootElement != null && scrollerElement != null) {\n      // internal method responsible for ensuring focus is applied to the appropriate cells or contents\n      const _applyInternalFocus = (\n        rootElement: HTMLDivElement,\n        activeElement: FocusableElement,\n        isCaptureFocus?: boolean\n      ) => {\n        if (currentActiveCell != null) {\n          // ensure real browser focus is on the correct cell element\n          const cellElement = getElementFromCell(rootElement, tableId, currentActiveCell);\n          if (cellElement != null) {\n            // cell is valid, so set focus on it if needed\n            if (!isTabbableMode && activeElement !== cellElement) {\n              if (\n                wasTransient &&\n                !isTransientCell(currentActiveCell) &&\n                isAutoFocusCell(rootElement, tableId, currentActiveCell) &&\n                cellSupportsTabbable(currentActiveCell)\n              ) {\n                _enableTabbableMode(currentActiveCell);\n              } else {\n                cellElement.focus({ preventScroll: true });\n              }\n              return;\n            } else if (\n              isTabbableMode &&\n              !getElementContainsFunc(cellElement, true)(activeElement)\n            ) {\n              handleEnterActionableMode(\n                false,\n                allTabbableElements(cellElement),\n                (value?: ActiveCell<K, D>) => {\n                  setIsTabbableMode(value != undefined);\n                  if (isCaptureFocus) {\n                    rootElement.focus({ preventScroll: true });\n                  }\n                },\n                true\n              );\n              return;\n            }\n          }\n        }\n        if (isCaptureFocus) {\n          rootElement.focus({ preventScroll: true });\n        }\n      };\n\n      // ensure the current cell is scrolled into view when necessary\n      // only run if the state and ref match - otherwise another render cycle may be pending\n      if (\n        deferredScrollDetail != null &&\n        deferredScrollDetail === deferredScrollDetailRef.current\n      ) {\n        applyScrollDetail(\n          rootElement,\n          scrollerElement,\n          viewportInfo,\n          tableId,\n          columnsArray,\n          stickyColumnInfo,\n          sizingInfoRef.current,\n          deferredScrollDetail,\n          isRtl,\n          appliedColumnWidths\n        );\n        deferredScrollDetailRef.current = undefined;\n      }\n\n      // ensure current-cell-override is up to date on each render\n      applyCurrentCellOverride(\n        rootElement,\n        scrollerElement,\n        viewportInfo,\n        tableId,\n        tableData,\n        columnsArray,\n        stickyColumnInfo,\n        sizingInfoRef,\n        currencyStatusRef,\n        onActiveCellChanged,\n        isEmbeddedSelect,\n        isPendingLayout,\n        isDataLoaded,\n        isRtl,\n        currentCellOverride,\n        appliedColumnWidths\n      );\n\n      const blurredRenderCycleElement = blurredRenderCycleElementRef.current;\n      blurredRenderCycleElementRef.current = null;\n      isRenderCycle.current = false;\n\n      const activeElement = getActiveElement(rootElement);\n      // if we were tracking focus during the render cycle, ensure we recapture focus if needed\n      if (\n        blurredRenderCycleElement != null &&\n        activeElement === getBodyElement(rootElement) &&\n        (!getElementContainsFunc(rootElement, true)(blurredRenderCycleElement) ||\n          !isTabbableElement(blurredRenderCycleElement, true))\n      ) {\n        _applyInternalFocus(rootElement, activeElement, true);\n      } else if (\n        hasFocusRef.current &&\n        cellComparator(activeCell, currencyStatusRef.current.activeCell)\n      ) {\n        _applyInternalFocus(rootElement, activeElement);\n      }\n    }\n  });\n\n  return {\n    focusHandlingProps: {\n      onPointerDown: _pointerDownHandler,\n      onPointerUp: _pointerUpHandler,\n      onFocus: _onFocusHandler,\n      onBlur: _onBlurHandler,\n      onKeyDown: _onKeyDownHandler\n    },\n    activeCell,\n    onActiveCellChanged,\n    currentCell: currencyStatusRef.current.currentCell,\n    currentActiveCell,\n    isShowFocusRing,\n    isTabbableMode,\n    onStartFocusTracking,\n    onFocusStartEdge,\n    onFocusEndEdge,\n    updateDeferredScrollDetail\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { keyExtractor } from '../../utils/PRIVATE_collectionUtils';\nimport { getRowIndexForRowElement, getElementFromCell } from './TableDomUtils';\nimport { ActiveCell, TableColumn, TableData } from '../Table';\nimport { RowActionDetail, SortCriterionDetail } from '../../UNSAFE_TableView';\n\n/**\n * Helper function to get the row action context from a pointer or keyboard event\n */\nfunction _getRowActionGestureContext<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  tableData: TableData<K, D>[],\n  targetElement: HTMLElement,\n  targetCell?: ActiveCell<K, C>\n) {\n  let rowKey: K | null;\n  let rowElement;\n  if (targetCell?.type === 'data') {\n    rowKey = targetCell.rowKey;\n    const targetCellElement = getElementFromCell(rootElement, tableId, targetCell);\n    if (targetCellElement != null) {\n      rowElement = targetCellElement.parentElement;\n    }\n  } else {\n    rowKey = keyExtractor<K>(targetElement, `[data-oj-table-data-row='${tableId}']`);\n    if (rowKey != null) {\n      rowElement = targetElement.closest(`[data-oj-table-data-row='${tableId}']`);\n    }\n  }\n  if (rowKey != null && rowElement != null) {\n    const rowIndex = getRowIndexForRowElement(rootElement, tableId, rowElement as HTMLElement);\n    if (rowIndex != null) {\n      return {\n        key: rowKey,\n        data: tableData[rowIndex].data\n      };\n    }\n  }\n  return undefined;\n}\n\n/**\n * Helper function to handle a row action gesture from a pointer or keyboard event\n */\nexport function handleRowActionGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  tableData: TableData<K, D>[],\n  onRowAction: (detail: RowActionDetail<K, D>) => void,\n  targetElement: HTMLElement,\n  targetCell?: ActiveCell<K, C>\n) {\n  const rowActionContext = _getRowActionGestureContext(\n    rootElement,\n    tableId,\n    tableData,\n    targetElement,\n    targetCell\n  );\n  if (rowActionContext != null) {\n    onRowAction({ context: rowActionContext, target: targetElement });\n    return true;\n  }\n  return false;\n}\n\n/**\n * Helper function to determine if a pointer or keyboard event should trigger a sort action gesture\n */\nfunction _isSortActionGesture<K, D, C>(columnsArray: TableColumn<K, D, C>[], columnKey: C) {\n  for (const column of columnsArray) {\n    if (column.key === columnKey) {\n      return column.value.sortable === 'enabled';\n    }\n  }\n  return false;\n}\n\n/**\n * Helper function to handle a sort action gesture\n */\nexport function handleSortActionGesture<K, D, C>(\n  columnsArray: TableColumn<K, D, C>[],\n  columnKey: C,\n  onSortCriterionChange: (detail: SortCriterionDetail<C>) => void,\n  sortCriterion?: { key: C; sortDirection: 'ascending' | 'descending' }[]\n) {\n  if (_isSortActionGesture(columnsArray, columnKey)) {\n    let sortDirection;\n    if (sortCriterion != null) {\n      for (const criterion of sortCriterion) {\n        if (criterion.key === columnKey) {\n          sortDirection = criterion.sortDirection;\n          break;\n        }\n      }\n    }\n    const newDirection = sortDirection === 'ascending' ? 'descending' : 'ascending';\n    onSortCriterionChange([{ key: columnKey, sortDirection: newDirection }]);\n    return true;\n  }\n  return false;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Dispatch, StateUpdater } from 'preact/hooks';\nimport { ActiveCell, ColumnHeaderFooterInfo } from '../Table';\nimport { getCellType, getColumnKey } from './TableDomUtils';\n\n/**\n * Helper function to handle a hover gesture over a column header or footer region.\n */\nexport function handleOverColumnHeaderFooterGesture<C>(\n  tableId: string,\n  event: PointerEvent,\n  setHoverStyleColumnInfo: Dispatch<StateUpdater<ColumnHeaderFooterInfo<C> | undefined>>,\n  hoverStyleColumnInfo?: ColumnHeaderFooterInfo<C>\n) {\n  // only track 'hover' information for mouse events\n  if (event.pointerType === 'mouse') {\n    const cellElement = (event.target as HTMLElement).closest(\n      `[data-oj-table-focusable='${tableId}']`\n    ) as HTMLElement;\n    if (cellElement != null) {\n      const cellType = getCellType(cellElement);\n      if (cellType === 'header' || cellType === 'footer') {\n        const isHeader = cellType === 'header';\n        const columnKey = getColumnKey<C>(cellElement);\n        if (\n          columnKey !== hoverStyleColumnInfo?.key ||\n          !hoverStyleColumnInfo?.isHeader !== isHeader\n        ) {\n          setHoverStyleColumnInfo({ key: columnKey, isHeader: cellType === 'header' });\n          return;\n        }\n      }\n    }\n  }\n  handleEndInteractionColumnHeaderFooterGesture(setHoverStyleColumnInfo, hoverStyleColumnInfo);\n}\n\n/**\n * Helper function to handle an active gesture over a column header or footer region.\n */\nexport function handleActiveColumnHeaderFooterGesture<K, C>(\n  tableId: string,\n  event: KeyboardEvent | PointerEvent,\n  setActiveStyleColumnInfo: Dispatch<StateUpdater<ColumnHeaderFooterInfo<C> | undefined>>,\n  activeStyleColumnInfo?: ColumnHeaderFooterInfo<C>,\n  activeCell?: ActiveCell<K, C>\n) {\n  let cellType;\n  let columnKey;\n  if (activeCell != null) {\n    cellType = activeCell.type;\n    columnKey = activeCell.columnKey;\n  } else if (event instanceof PointerEvent && event.pointerType === 'touch') {\n    // only handle touch events since hover events have the same treatment\n    const cellElement = (event.target as HTMLElement).closest(\n      `[data-oj-table-focusable='${tableId}']`\n    ) as HTMLElement;\n    if (cellElement != null) {\n      cellType = getCellType(cellElement);\n      columnKey = getColumnKey<C>(cellElement);\n    }\n  }\n  if (columnKey != null && (cellType === 'header' || cellType === 'footer')) {\n    const isHeader = cellType === 'header';\n    if (columnKey !== activeStyleColumnInfo?.key || !activeStyleColumnInfo?.isHeader !== isHeader) {\n      setActiveStyleColumnInfo({ key: columnKey, isHeader: cellType === 'header' });\n      return;\n    }\n  }\n  handleEndInteractionColumnHeaderFooterGesture(setActiveStyleColumnInfo, activeStyleColumnInfo);\n}\n\n/**\n * Helper function to handle the end of an interaction style gesture for the table region.\n */\nexport function handleEndInteractionColumnHeaderFooterGesture<C>(\n  setInteractionStyleColumnInfo: Dispatch<StateUpdater<ColumnHeaderFooterInfo<C> | undefined>>,\n  interactionStyleColumnInfo?: ColumnHeaderFooterInfo<C>\n) {\n  if (interactionStyleColumnInfo != null) {\n    setInteractionStyleColumnInfo(undefined);\n  }\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { MutableRef } from 'preact/hooks';\nimport { ActiveCell, ActiveCellDetail, ScrollDetail, SizingInfo, TableColumn } from '../Table';\nimport {\n  getBoundaryColumnKey,\n  getElementFromCell,\n  getFirstFocusableRowKey,\n  getLastFocusableRowKey,\n  getRowKey,\n  hasFooterCells,\n  hasNoDataCell,\n  isAutoFocusCell,\n  getScrollerBottomOffset,\n  getRowKeyForRowIndex,\n  getRowIndexForRowKey\n} from './TableDomUtils';\nimport { cellComparator } from './TableFocusUtils';\nimport { getVerticalScrollPosition } from './TableScrollUtils';\nimport { findElementByKey } from '../../utils/PRIVATE_collectionUtils';\n\n/**\n * Helper function to handle an 'Up' or 'Down' arrow key press.\n * Up - Moves to the same cell in the previous row (including headers and footers). No op if already on the first row.\n * Down - Moves to the same cell in the next row (including headers and footers). No op if already on the last row.\n */\nexport function handleAdjacentRowGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  initialCell: ActiveCell<K, C>,\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void,\n  isPrevious: boolean,\n  isExtendSelectionGesture: boolean,\n  hideTooltip: (isImmediate?: boolean) => void,\n  updateDeferredScrollDetail: (scrollDetail: ScrollDetail<K, C>) => void\n) {\n  const firstColumnKey = getBoundaryColumnKey<K, D, C>(columnsArray, true);\n  if (firstColumnKey == null) {\n    return;\n  }\n  let newCell = initialCell;\n  const cellType = initialCell.type;\n  if (cellType === 'noData') {\n    const newColumnKey = firstColumnKey;\n    if (isPrevious) {\n      newCell = { columnKey: newColumnKey, type: 'header' };\n      onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n    } else if (hasFooterCells(rootElement, tableId)) {\n      newCell = { columnKey: newColumnKey, type: 'footer' };\n      onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n    }\n  } else if (cellType === 'loading') {\n    if (isPrevious) {\n      newCell = { columnKey: initialCell.columnKey, type: 'header' };\n      onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n    } else if (hasFooterCells(rootElement, tableId)) {\n      newCell = { columnKey: initialCell.columnKey, type: 'footer' };\n      onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n    }\n  } else if (cellType === 'loadMore') {\n    if (isPrevious) {\n      const rowKey = getLastFocusableRowKey<K>(rootElement, tableId);\n      if (rowKey != null) {\n        newCell = { rowKey: rowKey, columnKey: initialCell.columnKey, type: 'data' };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      }\n    } else if (hasFooterCells(rootElement, tableId)) {\n      newCell = { columnKey: initialCell.columnKey, type: 'footer' };\n      onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n    }\n  } else if (cellType !== 'pending') {\n    if (cellType === 'data') {\n      const currentRowKey = initialCell.rowKey;\n      const currentRowElement = findElementByKey(\n        rootElement,\n        currentRowKey,\n        `[data-oj-table-data-row='${tableId}']`\n      );\n      if (currentRowElement != null) {\n        const adjacentRowElement = isPrevious\n          ? (currentRowElement.previousElementSibling as HTMLElement)\n          : (currentRowElement.nextElementSibling as HTMLElement);\n        // if adjacent row has no children, it is the 'buffer' row used for height sizing\n        if (adjacentRowElement != null && adjacentRowElement.children.length > 0) {\n          const rowKey = getRowKey<K>(adjacentRowElement);\n          if (rowKey != null) {\n            newCell = { rowKey: rowKey, columnKey: initialCell.columnKey, type: 'data' };\n            onActiveCellChanged(\n              { value: newCell },\n              isAutoFocusCell(rootElement, tableId, newCell),\n              isExtendSelectionGesture\n            );\n          } else if (!isExtendSelectionGesture) {\n            newCell = { columnKey: initialCell.columnKey, type: 'loadMore' };\n            if (getElementFromCell(rootElement, tableId, newCell) != null) {\n              onActiveCellChanged(\n                { value: newCell },\n                isAutoFocusCell(rootElement, tableId, newCell)\n              );\n            }\n          }\n        } else if (!isExtendSelectionGesture && isPrevious) {\n          newCell = { columnKey: initialCell.columnKey, type: 'header' };\n          onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n        } else if (!isExtendSelectionGesture && hasFooterCells(rootElement, tableId)) {\n          newCell = { columnKey: initialCell.columnKey, type: 'footer' };\n          onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n        }\n      }\n    } else if (cellType === 'header' && !isPrevious) {\n      const rowKey = getFirstFocusableRowKey<K>(rootElement, tableId);\n      if (rowKey != null) {\n        newCell = { rowKey: rowKey, columnKey: initialCell.columnKey, type: 'data' };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      } else if (hasNoDataCell(rootElement, tableId)) {\n        newCell = { type: 'noData' };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      } else {\n        newCell = { columnKey: initialCell.columnKey, type: 'loading' };\n        if (getElementFromCell(rootElement, tableId, newCell) != null) {\n          onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n        } else if (hasFooterCells(rootElement, tableId)) {\n          newCell = { columnKey: initialCell.columnKey, type: 'footer' };\n          onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n        }\n      }\n    } else if (cellType === 'footer' && isPrevious) {\n      if (hasNoDataCell(rootElement, tableId)) {\n        newCell = { type: 'noData' };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      } else {\n        newCell = { columnKey: initialCell.columnKey, type: 'loading' };\n        if (getElementFromCell(rootElement, tableId, newCell) != null) {\n          onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n        } else {\n          newCell = { columnKey: initialCell.columnKey, type: 'loadMore' };\n          if (getElementFromCell(rootElement, tableId, newCell) != null) {\n            onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n          } else {\n            const rowKey = getLastFocusableRowKey<K>(rootElement, tableId);\n            if (rowKey != null) {\n              newCell = { rowKey: rowKey, columnKey: initialCell.columnKey, type: 'data' };\n              onActiveCellChanged(\n                { value: newCell },\n                isAutoFocusCell(rootElement, tableId, newCell)\n              );\n            } else {\n              newCell = { columnKey: initialCell.columnKey, type: 'header' };\n              onActiveCellChanged(\n                { value: newCell },\n                isAutoFocusCell(rootElement, tableId, newCell)\n              );\n            }\n          }\n        }\n      }\n    }\n  }\n  if (!cellComparator(initialCell, newCell)) {\n    hideTooltip(true);\n  } else {\n    updateDeferredScrollDetail({ cell: newCell, locationX: 'inView', locationY: 'inView' });\n  }\n}\n\n/**\n * Helper function to handle a 'PageUp' or 'PageDown' arrow key press.\n * PageUp - Moves to the same cell in the first visible row in the current viewport,\n * and scrolls the Table so it becomes the last visible row in the viewport when able.\n * PageDown - Moves to the same cell in the last visible row in the current viewport,\n * and scrolls the Table so it becomes the first visible row in the viewport when able.\n */\nexport function handlePageRowGesture<K extends string | number, C extends string>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  tableId: string,\n  sizingInfoRef: MutableRef<SizingInfo>,\n  initialCell: ActiveCell<K, C>,\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void,\n  isPrevious: boolean,\n  hideTooltip: (isImmediate?: boolean) => void,\n  updateDeferredScrollDetail: (scrollDetail: ScrollDetail<K, C>) => void\n) {\n  if (initialCell.type !== 'noData' && initialCell.type !== 'pending') {\n    const rowElements = rootElement.querySelectorAll(`[data-oj-table-data-row='${tableId}']`);\n    if (rowElements.length > 0) {\n      const verticalScrollPosition = getVerticalScrollPosition(\n        rootElement,\n        scrollerElement,\n        tableId\n      );\n      const verticalRowIndex = getRowIndexForRowKey(\n        rootElement,\n        tableId,\n        verticalScrollPosition.rowKey!\n      );\n      let targetRowIndex;\n      if (isPrevious) {\n        if (verticalScrollPosition.offsetY === 0) {\n          targetRowIndex = Math.max(verticalRowIndex! - 1, 0);\n        } else {\n          targetRowIndex = verticalRowIndex!;\n        }\n      } else {\n        const scrollerRect = scrollerElement.getBoundingClientRect();\n        const scrollbarHeight =\n          sizingInfoRef.current.boxHeight! - sizingInfoRef.current.contentHeight!;\n        const scrollerBottom =\n          scrollerRect.bottom + getScrollerBottomOffset(rootElement, tableId) + scrollbarHeight;\n        targetRowIndex = verticalRowIndex!;\n        while (rowElements.length > targetRowIndex + 1) {\n          targetRowIndex += 1;\n          const elementBottom = rowElements[targetRowIndex].getBoundingClientRect().bottom;\n          if (elementBottom > scrollerBottom) {\n            break;\n          }\n        }\n      }\n      const newRowKey = getRowKeyForRowIndex<K>(rootElement, tableId, targetRowIndex);\n      if (newRowKey != null) {\n        const newCell: ActiveCell<K, C> = {\n          rowKey: newRowKey,\n          columnKey: initialCell.columnKey,\n          type: 'data'\n        };\n        if (newRowKey !== initialCell.rowKey) {\n          onActiveCellChanged(\n            { value: newCell },\n            isAutoFocusCell(rootElement, tableId, newCell),\n            false,\n            true\n          );\n        }\n        if (!cellComparator(initialCell, newCell)) {\n          hideTooltip(true);\n        }\n        updateDeferredScrollDetail({\n          cell: newCell,\n          locationX: 'inView',\n          locationY: isPrevious ? 'bottom' : 'top'\n        });\n      }\n    }\n  }\n}\n\n/**\n * Helper function to get the column key next to the given column key in the specified direction. Returns\n * null if there is no adjacent column in the direction specified.\n */\nfunction _getAdjacentColumnKey<K, D, C>(\n  initialKey: C,\n  columnsArray: TableColumn<K, D, C>[],\n  isPrevious: boolean\n) {\n  let currentIndex = -1;\n  const columnsCount = columnsArray.length;\n  for (let i = 0; i < columnsCount; i++) {\n    if (columnsArray[i].key === initialKey) {\n      currentIndex = i;\n      break;\n    }\n  }\n  if (isPrevious && currentIndex !== 0) {\n    return columnsArray[currentIndex - 1].key;\n  } else if (!isPrevious && currentIndex !== columnsCount - 1) {\n    return columnsArray[currentIndex + 1].key;\n  }\n  return undefined;\n}\n\n/**\n * Helper function to handle a 'Previous' or 'Next' arrow key press.\n * Previous - Moves to the previous cell in the current row. No op if already on the first cell in that row.\n * Next - Moves to the next cell in the current row. No op if already on the last cell in that row.\n */\nexport function handleAdjacentColumnGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  initialCell: ActiveCell<K, C>,\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void,\n  isPrevious: boolean,\n  hideTooltip: (isImmediate?: boolean) => void,\n  updateDeferredScrollDetail: (scrollDetail: ScrollDetail<K, C>) => void\n) {\n  let newCell = initialCell;\n  const cellType = initialCell.type;\n  if (cellType === 'data' || cellType === 'header' || cellType === 'footer') {\n    const initialKey = initialCell.columnKey;\n    const newKey = _getAdjacentColumnKey(initialKey, columnsArray, isPrevious);\n    if (newKey != null) {\n      if (cellType === 'data') {\n        newCell = { rowKey: initialCell.rowKey, columnKey: newKey, type: cellType };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      } else {\n        newCell = { columnKey: newKey, type: cellType };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      }\n    }\n  }\n  if (!cellComparator(initialCell, newCell)) {\n    hideTooltip(true);\n  } else {\n    updateDeferredScrollDetail({ cell: newCell, locationX: 'inView', locationY: 'inView' });\n  }\n}\n\n/**\n * Helper function to handle a 'Home' or 'End' key press.\n * Home - Jumps to the first cell in the current row. No op if already on the first cell in that row.\n * Ctrl/Cmd + Home - Jumps to the first cell in the first data row. If no data rows are present,\n * jumps to the first cell in the current region (header or footer). No op if already on that cell.\n * End - Jumps to the last cell in the current row. No op if already on the last cell in that row.\n * Ctrl/Cmd + End - Jumps to the last cell in the last data row. If no data rows are present,\n * jumps to the last cell in the current region (header or footer). No op if already on that cell.\n */\nexport function handleJumpColumnGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  initialCell: ActiveCell<K, C>,\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void,\n  isPrevious: boolean,\n  includeRows: boolean,\n  hideTooltip: (isImmediate?: boolean) => void,\n  updateDeferredScrollDetail: (scrollDetail: ScrollDetail<K, C>) => void\n) {\n  const newKey = getBoundaryColumnKey<K, D, C>(columnsArray, isPrevious);\n  if (newKey == null) {\n    return;\n  }\n  let newCell = initialCell;\n  const cellType = initialCell.type;\n  if (cellType === 'data' || cellType === 'header' || cellType === 'footer') {\n    const initialKey = initialCell.columnKey;\n    if (includeRows) {\n      if (hasNoDataCell(rootElement, tableId)) {\n        newCell = { type: 'noData' };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      } else {\n        const newRowKey = isPrevious\n          ? getFirstFocusableRowKey<K>(rootElement, tableId)\n          : getLastFocusableRowKey<K>(rootElement, tableId);\n        if (newRowKey != null) {\n          newCell = { rowKey: newRowKey, columnKey: newKey, type: 'data' };\n          onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n        }\n      }\n    } else if (newKey !== initialKey) {\n      if (cellType === 'data') {\n        newCell = { rowKey: initialCell.rowKey, columnKey: newKey, type: cellType };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      } else {\n        newCell = { columnKey: newKey, type: cellType };\n        onActiveCellChanged({ value: newCell }, isAutoFocusCell(rootElement, tableId, newCell));\n      }\n    }\n  }\n  if (!cellComparator(initialCell, newCell)) {\n    hideTooltip(true);\n  } else {\n    updateDeferredScrollDetail({ cell: newCell, locationX: 'inView', locationY: 'inView' });\n  }\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { MutableRef } from 'preact/hooks';\nimport { keyExtractor } from '../../utils/PRIVATE_collectionUtils';\nimport { Keys, containsKey, isSameKey, addKey, removeKey } from '../../utils/UNSAFE_keys';\nimport { ActiveCell, ActiveCellDetail, ScrollDetail, TableColumn } from '../Table';\nimport {\n  logicalCellExtractor,\n  getCellType,\n  getRowKey,\n  getRowKeyForRowIndex,\n  getRowIndexForRowElement,\n  getElementFromCell,\n  getColumnIndexForHeaderFooterElement\n} from './TableDomUtils';\nimport { TableSelectionDetail, TableSelectionMode } from '../../UNSAFE_TableView';\n\n/**\n * Helper function to handle a selection gesture (click, spacebar, etc...)\n */\nexport function handleSelectionGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  targetElement: HTMLElement,\n  isModifierKey: boolean,\n  onSelectionChange: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void,\n  isDropDownSelection: boolean,\n  selectionMode?: TableSelectionMode,\n  selected?: { row?: Keys<K>; column?: Keys<C> }\n) {\n  const emptyKeys = { all: false, keys: new Set() };\n  let selectedRows = selected?.row != null ? selected.row : (emptyKeys as Keys<K>);\n  let selectedColumns = selected?.column != null ? selected.column : (emptyKeys as Keys<C>);\n\n  const newRowKey = keyExtractor<K>(targetElement, `[data-oj-table-data-row='${tableId}']`);\n  if (newRowKey != null) {\n    if (\n      selectionMode?.row === 'single' ||\n      selectionMode?.row === 'multiple' ||\n      selectionMode?.row === 'multipleToggle'\n    ) {\n      const isToggleSelectionMode = isDropDownSelection || selectionMode.row === 'multipleToggle';\n      const isMultiSelectRowGesture = isModifierKey || isToggleSelectionMode;\n      if (selectedRows == null) {\n        selectedRows = { all: false, keys: new Set([newRowKey]) };\n      } else if (!containsKey(selectedRows, newRowKey)) {\n        if (isMultiSelectRowGesture && selectionMode.row !== 'single') {\n          selectedRows = addKey(selectedRows, newRowKey);\n        } else {\n          selectedRows = { all: false, keys: new Set([newRowKey]) };\n        }\n      } else if (isMultiSelectRowGesture) {\n        selectedRows = removeKey(selectedRows, newRowKey, false);\n      } else {\n        selectedRows = { all: false, keys: new Set([newRowKey]) };\n      }\n      selectedColumns = emptyKeys as Keys<C>;\n    }\n  } else if (selectionMode?.column === 'single' || selectionMode?.column === 'multiple') {\n    const cellElement = targetElement.closest(\n      `[data-oj-table-focusable='${tableId}']`\n    ) as HTMLElement;\n    if (cellElement != null) {\n      const cellType = getCellType(cellElement);\n      if (cellType === 'header' || cellType === 'footer') {\n        const index = getColumnIndexForHeaderFooterElement(\n          rootElement,\n          tableId,\n          cellElement,\n          cellType === 'header'\n        );\n        if (index != null) {\n          const column = columnsArray[index];\n          if (column.value.selectable !== 'disabled') {\n            if (selectedColumns == null) {\n              selectedColumns = { all: false, keys: new Set([column.key]) };\n            } else if (!containsKey(selectedColumns, column.key)) {\n              if (isModifierKey && selectionMode.column === 'multiple') {\n                selectedColumns = addKey(selectedColumns, column.key);\n              } else {\n                selectedColumns = { all: false, keys: new Set([column.key]) };\n              }\n            } else if (isModifierKey) {\n              selectedColumns = removeKey(selectedColumns, column.key, false);\n            } else {\n              selectedColumns = { all: false, keys: new Set([column.key]) };\n            }\n            selectedRows = emptyKeys as Keys<K>;\n          }\n        }\n      }\n    }\n  }\n\n  if (!isSameKey(selectedRows, selected?.row) || !isSameKey(selectedColumns, selected?.column)) {\n    onSelectionChange(\n      { value: { row: selectedRows, column: selectedColumns }, target: targetElement },\n      false\n    );\n  }\n}\n\n/**\n * Helper function to calculate and apply a new selection state corresponding to the range provided\n */\nfunction _applyRangeSelection<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  targetElement: HTMLElement,\n  startIndex: number,\n  endIndex: number,\n  isRowGesture: boolean,\n  onSelectionChange: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void,\n  isDropDownSelection: boolean,\n  selectionMode?: TableSelectionMode,\n  selected?: { row?: Keys<K>; column?: Keys<C> },\n  previousEndIndex?: number\n) {\n  const emptyKeys = { all: false, keys: new Set() };\n  let selectedRows = selected?.row != null ? selected.row : (emptyKeys as Keys<K>);\n  let selectedColumns = selected?.column != null ? selected.column : (emptyKeys as Keys<C>);\n\n  if (isRowGesture) {\n    selectedColumns = emptyKeys as Keys<C>;\n    if (selectionMode?.row === 'multiple' || selectionMode?.row === 'multipleToggle') {\n      const isToggleSelectionMode = isDropDownSelection || selectionMode.row === 'multipleToggle';\n      selectedRows = isToggleSelectionMode ? selectedRows : (emptyKeys as Keys<K>);\n      // selected rows should be added in the order that they are selected\n      if (startIndex <= endIndex) {\n        for (let i = startIndex; i <= endIndex; i++) {\n          const key = getRowKeyForRowIndex<K>(rootElement, tableId, i);\n          selectedRows = addKey(selectedRows, key) as Keys<K>;\n        }\n        // toggle selection gesture is additive except for rows added from previous gesture\n        if (isToggleSelectionMode && previousEndIndex != null) {\n          if (previousEndIndex > endIndex) {\n            for (let i = previousEndIndex; i > endIndex; i--) {\n              const key = getRowKeyForRowIndex<K>(rootElement, tableId, i);\n              selectedRows = removeKey(selectedRows, key, false) as Keys<K>;\n            }\n          } else if (previousEndIndex < startIndex) {\n            for (let i = previousEndIndex; i < startIndex; i++) {\n              const key = getRowKeyForRowIndex<K>(rootElement, tableId, i);\n              selectedRows = removeKey(selectedRows, key, false) as Keys<K>;\n            }\n          }\n        }\n      } else {\n        for (let i = startIndex; i >= endIndex; i--) {\n          const key = getRowKeyForRowIndex<K>(rootElement, tableId, i);\n          selectedRows = addKey(selectedRows, key) as Keys<K>;\n        }\n        // toggle selection gesture is additive except for rows added from previous gesture\n        if (isToggleSelectionMode && previousEndIndex != null) {\n          if (previousEndIndex < endIndex) {\n            for (let i = previousEndIndex; i < endIndex; i++) {\n              const key = getRowKeyForRowIndex<K>(rootElement, tableId, i);\n              selectedRows = removeKey(selectedRows, key, false) as Keys<K>;\n            }\n          } else if (previousEndIndex > startIndex) {\n            for (let i = previousEndIndex; i > startIndex; i--) {\n              const key = getRowKeyForRowIndex<K>(rootElement, tableId, i);\n              selectedRows = removeKey(selectedRows, key, false) as Keys<K>;\n            }\n          }\n        }\n      }\n    }\n  } else {\n    selectedRows = emptyKeys as Keys<K>;\n    if (selectionMode?.column === 'multiple') {\n      selectedColumns = emptyKeys as Keys<C>;\n      // selected columns should be added in the order that they are selected\n      if (startIndex <= endIndex) {\n        for (let i = startIndex; i <= endIndex; i++) {\n          const column = columnsArray[i];\n          if (column.value.selectable !== 'disabled') {\n            selectedColumns = addKey(selectedColumns, column.key);\n          }\n        }\n      } else {\n        for (let i = startIndex; i >= endIndex; i--) {\n          const column = columnsArray[i];\n          if (column.value.selectable !== 'disabled') {\n            selectedColumns = addKey(selectedColumns, column.key);\n          }\n        }\n      }\n    }\n  }\n\n  if (!isSameKey(selectedRows, selected?.row) || !isSameKey(selectedColumns, selected?.column)) {\n    onSelectionChange(\n      { value: { row: selectedRows, column: selectedColumns }, target: targetElement },\n      true\n    );\n  }\n}\n\n/**\n * Determines whether a potential range selection gesture is valid based on the given target\n */\nexport function isRangeSelectionGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  targetElement: HTMLElement,\n  activeCell: ActiveCell<K, C>,\n  selectionMode?: TableSelectionMode\n) {\n  const targetCell = logicalCellExtractor<K, D, C>(targetElement, tableId, columnsArray);\n  if (\n    (((selectionMode?.row === 'multiple' || selectionMode?.row === 'multipleToggle') &&\n      activeCell.type === 'data') ||\n      (selectionMode?.column === 'multiple' &&\n        (activeCell.type === 'header' || activeCell.type === 'footer'))) &&\n    targetCell?.type === activeCell.type\n  ) {\n    const activeCellElement = getElementFromCell(rootElement, tableId, activeCell);\n    const targetCellElement = getElementFromCell(rootElement, tableId, targetCell);\n    if (activeCellElement != null && targetCellElement != null) {\n      const isRow = targetCell.type === 'data';\n      if (isRow) {\n        return (\n          getRowIndexForRowElement(\n            rootElement,\n            tableId,\n            activeCellElement.parentElement as HTMLElement\n          ) != null &&\n          getRowIndexForRowElement(\n            rootElement,\n            tableId,\n            targetCellElement.parentElement as HTMLElement\n          ) != null\n        );\n      } else if (targetCell.type === 'header' || targetCell.type === 'footer') {\n        const isHeader = targetCell.type === 'header';\n        return (\n          getColumnIndexForHeaderFooterElement(rootElement, tableId, activeCellElement, isHeader) !=\n            null &&\n          getColumnIndexForHeaderFooterElement(rootElement, tableId, targetCellElement, isHeader) !=\n            null\n        );\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Helper function to handle a range selection gesture (shift+click)\n */\nexport function handleRangeSelectionGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  targetElement: HTMLElement,\n  activeCell: ActiveCell<K, C>,\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void,\n  selectionExtensionElementRef: MutableRef<HTMLElement | undefined>,\n  onSelectionChange: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void,\n  isDropDownSelection: boolean,\n  selectionMode?: TableSelectionMode,\n  selected?: { row?: Keys<K>; column?: Keys<C> }\n) {\n  const targetCell = logicalCellExtractor<K, D, C>(targetElement, tableId, columnsArray);\n  if (targetCell != null) {\n    const activeCellElement = getElementFromCell(rootElement, tableId, activeCell);\n    const targetCellElement = getElementFromCell(rootElement, tableId, targetCell);\n    if (activeCellElement != null && targetCellElement != null) {\n      if (\n        (((selectionMode?.row === 'multiple' || selectionMode?.row === 'multipleToggle') &&\n          targetCell.type === 'data') ||\n          (selectionMode?.column === 'multiple' &&\n            (targetCell.type === 'header' || targetCell.type === 'footer'))) &&\n        targetCell.type === activeCell.type\n      ) {\n        let startIndex;\n        let endIndex;\n        let previousEndIndex;\n        let endElement;\n        const isToggleSelectionMode = isDropDownSelection || selectionMode.row === 'multipleToggle';\n        const isRow = targetCell.type === 'data';\n        if (isRow) {\n          endElement = targetCellElement.parentElement as HTMLElement;\n          const startElement =\n            isToggleSelectionMode && selectionExtensionElementRef.current != null\n              ? selectionExtensionElementRef.current\n              : (activeCellElement.parentElement as HTMLElement);\n          startIndex = getRowIndexForRowElement(rootElement, tableId, startElement);\n          endIndex = getRowIndexForRowElement(rootElement, tableId, endElement);\n          const previousElement = isToggleSelectionMode\n            ? (activeCellElement.parentElement as HTMLElement)\n            : selectionExtensionElementRef.current;\n          if (previousElement != null) {\n            previousEndIndex = getRowIndexForRowElement(rootElement, tableId, previousElement);\n          }\n        } else if (targetCell.type === 'header' || targetCell.type === 'footer') {\n          const isHeader = targetCell.type === 'header';\n          endElement = targetCellElement;\n          startIndex = getColumnIndexForHeaderFooterElement(\n            rootElement,\n            tableId,\n            activeCellElement,\n            isHeader\n          );\n          endIndex = getColumnIndexForHeaderFooterElement(\n            rootElement,\n            tableId,\n            targetCellElement,\n            isHeader\n          );\n        }\n        if (startIndex != null && endIndex != null) {\n          if (!isRow || !isToggleSelectionMode) {\n            selectionExtensionElementRef.current = endElement;\n          } else {\n            if (selectionExtensionElementRef.current == null) {\n              selectionExtensionElementRef.current = activeCellElement.parentElement as HTMLElement;\n            }\n            onActiveCellChanged({ value: targetCell }, false, true);\n            targetCellElement.focus({ preventScroll: true });\n          }\n          _applyRangeSelection(\n            rootElement,\n            tableId,\n            columnsArray,\n            targetElement,\n            startIndex,\n            endIndex,\n            isRow,\n            onSelectionChange,\n            isDropDownSelection,\n            selectionMode,\n            selected,\n            previousEndIndex\n          );\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Helper function to handle a selection extension gesture (shift+arrow key)\n */\nexport function handleExtendSelectionGesture<K extends string | number, D, C extends string>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  columnsArray: TableColumn<K, D, C>[],\n  targetElement: HTMLElement,\n  isPrevious: boolean,\n  activeCell: ActiveCell<K, C>,\n  selectionExtensionElementRef: MutableRef<HTMLElement | undefined>,\n  onSelectionChange: (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => void,\n  isDropDownSelection: boolean,\n  updateDeferredScrollDetail: (scrollDetail: ScrollDetail<K, C>) => void,\n  selectionMode?: TableSelectionMode,\n  selected?: { row?: Keys<K>; column?: Keys<C> }\n) {\n  const activeCellElement = getElementFromCell(rootElement, tableId, activeCell);\n  if (activeCellElement != null) {\n    let startIndex;\n    let startElement;\n    const isToggleSelectionMode = isDropDownSelection || selectionMode?.row === 'multipleToggle';\n    const isRow = activeCell.type === 'data';\n    const isHeader = activeCell.type === 'header';\n    if (isRow) {\n      startElement =\n        isToggleSelectionMode && selectionExtensionElementRef.current != null\n          ? selectionExtensionElementRef.current\n          : (activeCellElement.parentElement as HTMLElement);\n      startIndex = getRowIndexForRowElement(rootElement, tableId, startElement);\n    } else {\n      startElement = activeCellElement;\n      startIndex = getColumnIndexForHeaderFooterElement(\n        rootElement,\n        tableId,\n        startElement,\n        isHeader\n      );\n    }\n    if (startIndex != null) {\n      let endIndex;\n      let previousEndIndex;\n      let extendedElement;\n      const cursorElement =\n        isToggleSelectionMode && isRow\n          ? (activeCellElement.parentElement as HTMLElement)\n          : selectionExtensionElementRef.current;\n      if (cursorElement != null) {\n        previousEndIndex = isRow\n          ? getRowIndexForRowElement(rootElement, tableId, cursorElement)\n          : getColumnIndexForHeaderFooterElement(rootElement, tableId, cursorElement, isHeader);\n        extendedElement = isPrevious\n          ? (cursorElement.previousElementSibling as HTMLElement)\n          : (cursorElement.nextElementSibling as HTMLElement);\n        if (extendedElement != null && (!isRow || (isRow && getRowKey(extendedElement) != null))) {\n          if (!isToggleSelectionMode || !isRow) {\n            selectionExtensionElementRef.current = extendedElement;\n          } else if (selectionExtensionElementRef.current == null) {\n            selectionExtensionElementRef.current = activeCellElement.parentElement as HTMLElement;\n          }\n          endIndex = isRow\n            ? getRowIndexForRowElement(rootElement, tableId, extendedElement)\n            : getColumnIndexForHeaderFooterElement(rootElement, tableId, extendedElement, isHeader);\n        } else {\n          endIndex = isRow\n            ? getRowIndexForRowElement(rootElement, tableId, cursorElement)\n            : getColumnIndexForHeaderFooterElement(rootElement, tableId, cursorElement, isHeader);\n        }\n      } else {\n        extendedElement = isPrevious\n          ? (startElement.previousElementSibling as HTMLElement)\n          : (startElement.nextElementSibling as HTMLElement);\n        if (extendedElement != null && (!isRow || (isRow && getRowKey(extendedElement) != null))) {\n          selectionExtensionElementRef.current = extendedElement;\n          endIndex = isRow\n            ? getRowIndexForRowElement(rootElement, tableId, extendedElement)\n            : getColumnIndexForHeaderFooterElement(rootElement, tableId, extendedElement, isHeader);\n        } else {\n          endIndex = startIndex;\n        }\n      }\n      if (endIndex != null) {\n        _applyRangeSelection(\n          rootElement,\n          tableId,\n          columnsArray,\n          targetElement,\n          startIndex,\n          endIndex,\n          isRow,\n          onSelectionChange,\n          isDropDownSelection,\n          selectionMode,\n          selected,\n          previousEndIndex\n        );\n      }\n\n      // scroll 'extensionElement' into view if focus is not shifted\n      if (!isRow || !isToggleSelectionMode) {\n        const extensionElement =\n          selectionExtensionElementRef.current != null\n            ? selectionExtensionElementRef.current\n            : activeCellElement;\n        let extensionCell;\n        if (isRow) {\n          const rowKey = keyExtractor<K>(extensionElement, `[data-oj-table-data-row='${tableId}']`);\n          if (rowKey != null) {\n            extensionCell = {\n              type: activeCell.type,\n              rowKey: rowKey,\n              columnKey: activeCell.columnKey\n            };\n          }\n        } else {\n          extensionCell = logicalCellExtractor<K, D, C>(extensionElement, tableId, columnsArray);\n        }\n        if (extensionCell != null) {\n          updateDeferredScrollDetail({\n            cell: extensionCell,\n            locationX: 'inView',\n            locationY: 'inView'\n          });\n        }\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { useCallback, Dispatch, MutableRef, StateUpdater } from 'preact/hooks';\nimport { getClientHints } from '../../utils/PRIVATE_clientHints';\nimport { Keys } from '../../utils/UNSAFE_keys';\nimport {\n  ActiveCell,\n  ActiveCellDetail,\n  ColumnHeaderFooterInfo,\n  ScrollDetail,\n  SizingInfo,\n  TableColumn,\n  TableData,\n  ViewportInfo\n} from '../Table';\nimport { handleRowActionGesture, handleSortActionGesture } from '../utils/TableActionUtils';\nimport { getElementFromCell, isAutoFocusCell } from '../utils/TableDomUtils';\nimport {\n  handleActiveColumnHeaderFooterGesture,\n  handleEndInteractionColumnHeaderFooterGesture\n} from '../utils/TableInteractionUtils';\nimport {\n  handleAdjacentRowGesture,\n  handleAdjacentColumnGesture,\n  handlePageRowGesture,\n  handleJumpColumnGesture\n} from '../utils/TableNavigationUtils';\nimport { handleSelectionGesture, handleExtendSelectionGesture } from '../utils/TableSelectionUtils';\nimport {\n  RowActionDetail,\n  SortCriterionDetail,\n  TableSelectionDetail,\n  TableSelectionMode\n} from '../../UNSAFE_TableView';\n\ntype UseKeyboardHandlingProps<K, D, C extends string> = {\n  rootRef: RefObject<HTMLDivElement>;\n  viewportInfo: ViewportInfo;\n  tableId: string;\n  tableData: TableData<K, D>[];\n  isRtl: boolean;\n  isTabbableMode: boolean;\n  columnsArray: TableColumn<K, D, C>[];\n  sizingInfoRef: MutableRef<SizingInfo>;\n  selectionExtensionElementRef: MutableRef<HTMLElement | undefined>;\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void;\n  activeCell?: ActiveCell<K, C>;\n  isDropDownSelection: boolean;\n  selectionMode?: TableSelectionMode;\n  selected?: { row?: Keys<K>; column?: Keys<C> };\n  onTableSelectionChange?: (\n    detail: TableSelectionDetail<K, C>,\n    isExtendableSelection: boolean\n  ) => void;\n  activeStyleColumnInfo: ColumnHeaderFooterInfo<C> | undefined;\n  setActiveStyleColumnInfo: Dispatch<StateUpdater<ColumnHeaderFooterInfo<C> | undefined>>;\n  onRowAction?: (detail: RowActionDetail<K, D>) => void;\n  sortCriterion?: { key: C; sortDirection: 'ascending' | 'descending' }[];\n  onSortCriterionChange?: (detail: SortCriterionDetail<C>) => void;\n  hideTooltip: (isImmediate?: boolean) => void;\n  updateDeferredScrollDetail: (scrollDetail: ScrollDetail<K, C>) => void;\n};\n\n/**\n * Hook that manages keyboard interactions on the Preact Table\n */\nexport function useKeyboardHandling<K extends string | number, D, C extends string>({\n  rootRef,\n  viewportInfo,\n  tableId,\n  tableData,\n  isRtl,\n  isTabbableMode,\n  columnsArray,\n  sizingInfoRef,\n  selectionExtensionElementRef,\n  activeCell,\n  onActiveCellChanged,\n  isDropDownSelection,\n  selectionMode,\n  selected,\n  onTableSelectionChange,\n  activeStyleColumnInfo,\n  setActiveStyleColumnInfo,\n  onRowAction,\n  sortCriterion,\n  onSortCriterionChange,\n  hideTooltip,\n  updateDeferredScrollDetail\n}: UseKeyboardHandlingProps<K, D, C>) {\n  // Keydown handler for the outer Table. This handles all internal\n  // keyboard navigation for the Table.\n  const _keyDownHandler = useCallback(\n    (event: KeyboardEvent) => {\n      const rootElement = rootRef.current;\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (rootElement != null && scrollerElement != null) {\n        const platform = getClientHints().platform;\n        const keyHandlers: Record<string, () => void> = {\n          ' ': function () {\n            if (activeCell != null) {\n              if (!isTabbableMode) {\n                handleActiveColumnHeaderFooterGesture(\n                  tableId,\n                  event,\n                  setActiveStyleColumnInfo,\n                  activeStyleColumnInfo,\n                  activeCell\n                );\n                if (onTableSelectionChange != null && !event.repeat) {\n                  handleSelectionGesture(\n                    rootElement,\n                    tableId,\n                    columnsArray,\n                    getElementFromCell(rootElement, tableId, activeCell) as HTMLElement,\n                    true,\n                    onTableSelectionChange,\n                    isDropDownSelection,\n                    selectionMode,\n                    selected\n                  );\n                }\n                event.preventDefault();\n              }\n              if (\n                onRowAction != null &&\n                !event.repeat &&\n                handleRowActionGesture(\n                  rootElement,\n                  tableId,\n                  tableData,\n                  onRowAction,\n                  event.target as HTMLElement,\n                  activeCell\n                )\n              ) {\n                event.stopPropagation();\n              }\n            }\n          },\n          Enter: function () {\n            if (activeCell != null) {\n              if (activeCell.type === 'data') {\n                if (isDropDownSelection && !isTabbableMode) {\n                  if (onTableSelectionChange != null && !event.repeat) {\n                    handleSelectionGesture(\n                      rootElement,\n                      tableId,\n                      columnsArray,\n                      getElementFromCell(rootElement, tableId, activeCell) as HTMLElement,\n                      true,\n                      onTableSelectionChange,\n                      isDropDownSelection,\n                      selectionMode,\n                      selected\n                    );\n                  }\n                  event.preventDefault();\n                }\n                if (\n                  onRowAction != null &&\n                  !event.repeat &&\n                  handleRowActionGesture(\n                    rootElement,\n                    tableId,\n                    tableData,\n                    onRowAction,\n                    event.target as HTMLElement,\n                    activeCell\n                  )\n                ) {\n                  event.stopPropagation();\n                }\n              } else if (\n                activeCell.type === 'header' &&\n                !isTabbableMode &&\n                !event.repeat &&\n                onSortCriterionChange != null &&\n                handleSortActionGesture(\n                  columnsArray,\n                  activeCell.columnKey,\n                  onSortCriterionChange,\n                  sortCriterion\n                )\n              ) {\n                event.stopPropagation();\n              }\n            }\n          },\n          ArrowUp: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              let isExtendSelectionGesture = false;\n              if (\n                !isTabbableMode &&\n                activeCell.type === 'data' &&\n                event.shiftKey &&\n                onTableSelectionChange != null &&\n                (selectionMode?.row === 'multiple' || selectionMode?.row === 'multipleToggle')\n              ) {\n                handleExtendSelectionGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  rootElement,\n                  true,\n                  activeCell,\n                  selectionExtensionElementRef,\n                  onTableSelectionChange,\n                  isDropDownSelection,\n                  updateDeferredScrollDetail,\n                  selectionMode,\n                  selected\n                );\n                isExtendSelectionGesture = true;\n              }\n              if (\n                !isExtendSelectionGesture ||\n                isDropDownSelection ||\n                selectionMode?.row === 'multipleToggle'\n              ) {\n                handleAdjacentRowGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  activeCell,\n                  onActiveCellChanged,\n                  true,\n                  isExtendSelectionGesture,\n                  hideTooltip,\n                  updateDeferredScrollDetail\n                );\n              }\n              event.preventDefault();\n            }\n          },\n          ArrowDown: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              let isExtendSelectionGesture = false;\n              if (\n                !isTabbableMode &&\n                activeCell.type === 'data' &&\n                event.shiftKey &&\n                onTableSelectionChange != null &&\n                (selectionMode?.row === 'multiple' || selectionMode?.row === 'multipleToggle')\n              ) {\n                handleExtendSelectionGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  rootElement,\n                  false,\n                  activeCell,\n                  selectionExtensionElementRef,\n                  onTableSelectionChange,\n                  isDropDownSelection,\n                  updateDeferredScrollDetail,\n                  selectionMode,\n                  selected\n                );\n                isExtendSelectionGesture = true;\n              }\n              if (\n                !isExtendSelectionGesture ||\n                isDropDownSelection ||\n                selectionMode?.row === 'multipleToggle'\n              ) {\n                handleAdjacentRowGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  activeCell,\n                  onActiveCellChanged,\n                  false,\n                  isExtendSelectionGesture,\n                  hideTooltip,\n                  updateDeferredScrollDetail\n                );\n              }\n              event.preventDefault();\n            }\n          },\n          ArrowLeft: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              if (\n                !isTabbableMode &&\n                (activeCell.type === 'header' || activeCell.type === 'footer') &&\n                event.shiftKey &&\n                onTableSelectionChange != null &&\n                selectionMode?.column === 'multiple'\n              ) {\n                handleExtendSelectionGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  rootElement,\n                  true,\n                  activeCell,\n                  selectionExtensionElementRef,\n                  onTableSelectionChange,\n                  isDropDownSelection,\n                  updateDeferredScrollDetail,\n                  selectionMode,\n                  selected\n                );\n              } else {\n                handleAdjacentColumnGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  activeCell,\n                  onActiveCellChanged,\n                  !isRtl,\n                  hideTooltip,\n                  updateDeferredScrollDetail\n                );\n              }\n              event.preventDefault();\n            }\n          },\n          ArrowRight: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              if (\n                !isTabbableMode &&\n                (activeCell.type === 'header' || activeCell.type === 'footer') &&\n                event.shiftKey &&\n                onTableSelectionChange != null &&\n                selectionMode?.column === 'multiple'\n              ) {\n                handleExtendSelectionGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  rootElement,\n                  false,\n                  activeCell,\n                  selectionExtensionElementRef,\n                  onTableSelectionChange,\n                  isDropDownSelection,\n                  updateDeferredScrollDetail,\n                  selectionMode,\n                  selected\n                );\n              } else {\n                handleAdjacentColumnGesture(\n                  rootElement,\n                  tableId,\n                  columnsArray,\n                  activeCell,\n                  onActiveCellChanged,\n                  isRtl,\n                  hideTooltip,\n                  updateDeferredScrollDetail\n                );\n              }\n              event.preventDefault();\n            }\n          },\n          PageUp: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              handlePageRowGesture(\n                rootElement,\n                scrollerElement,\n                tableId,\n                sizingInfoRef,\n                activeCell,\n                onActiveCellChanged,\n                true,\n                hideTooltip,\n                updateDeferredScrollDetail\n              );\n              event.preventDefault();\n            }\n          },\n          PageDown: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              handlePageRowGesture(\n                rootElement,\n                scrollerElement,\n                tableId,\n                sizingInfoRef,\n                activeCell,\n                onActiveCellChanged,\n                false,\n                hideTooltip,\n                updateDeferredScrollDetail\n              );\n              event.preventDefault();\n            }\n          },\n          Home: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              handleJumpColumnGesture(\n                rootElement,\n                tableId,\n                columnsArray,\n                activeCell,\n                onActiveCellChanged,\n                true,\n                platform === 'mac' ? event.metaKey : event.ctrlKey,\n                hideTooltip,\n                updateDeferredScrollDetail\n              );\n              event.preventDefault();\n            }\n          },\n          End: function () {\n            if (\n              activeCell != null &&\n              (!isTabbableMode || isAutoFocusCell(rootElement, tableId, activeCell))\n            ) {\n              handleJumpColumnGesture(\n                rootElement,\n                tableId,\n                columnsArray,\n                activeCell,\n                onActiveCellChanged,\n                false,\n                platform === 'mac' ? event.metaKey : event.ctrlKey,\n                hideTooltip,\n                updateDeferredScrollDetail\n              );\n              event.preventDefault();\n            }\n          }\n        };\n        if (Object.keys(keyHandlers).includes(event.key)) {\n          keyHandlers[event.key]();\n        }\n      }\n    },\n    [\n      rootRef,\n      viewportInfo,\n      tableId,\n      tableData,\n      isRtl,\n      isTabbableMode,\n      columnsArray,\n      sizingInfoRef,\n      selectionExtensionElementRef,\n      activeCell,\n      onActiveCellChanged,\n      isDropDownSelection,\n      selectionMode,\n      selected,\n      onTableSelectionChange,\n      activeStyleColumnInfo,\n      setActiveStyleColumnInfo,\n      onRowAction,\n      sortCriterion,\n      onSortCriterionChange,\n      hideTooltip,\n      updateDeferredScrollDetail\n    ]\n  );\n\n  // Keyup handler for the outer Table.\n  const _keyUpHandler = useCallback(\n    (event: KeyboardEvent) => {\n      const keyHandlers: Record<string, () => void> = {\n        ' ': function () {\n          if (activeCell != null) {\n            handleEndInteractionColumnHeaderFooterGesture(\n              setActiveStyleColumnInfo,\n              activeStyleColumnInfo\n            );\n          }\n        }\n      };\n      if (Object.keys(keyHandlers).includes(event.key)) {\n        keyHandlers[event.key]();\n      }\n    },\n    [activeCell, activeStyleColumnInfo, setActiveStyleColumnInfo]\n  );\n\n  return { onKeyDown: _keyDownHandler, onKeyUp: _keyUpHandler };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { MutableRef } from 'preact/hooks';\nimport { AppliedColumnWidths, ColumnResizeInfo, TableColumn } from '../Table';\nimport { ColumnResizingDetail, ColumnResizeDetail } from '../../UNSAFE_TableView';\nimport { getElementContainsFunc } from '../../utils/PRIVATE_collectionUtils';\n\n/**\n * Helper function to handle a hover over a resizable column region gesture.\n */\nexport function handleOverResizeRegionGesture<K, D, C>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  event: PointerEvent,\n  columnsArray: TableColumn<K, D, C>[],\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>,\n  isRtl: boolean\n) {\n  // handle hover feedback around potentially resizable columns\n  _updateResizingState(rootElement, tableId, event, columnsArray, resizeInfoRef, isRtl);\n}\n\n/**\n * Helper function to handle a column resize start gesture (pointer down).\n */\nexport function handleColumnResizeStartGesture<K, D, C extends string>(\n  rootElement: HTMLDivElement,\n  scrollerElement: HTMLElement,\n  tableId: string,\n  event: PointerEvent,\n  columnsArray: TableColumn<K, D, C>[],\n  appliedColumnWidths: AppliedColumnWidths<C>,\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>,\n  isRtl: boolean,\n  hideTooltip: (isImmediate?: boolean) => void,\n  onColumnResizing?: (detail: ColumnResizingDetail<C>) => void\n) {\n  if (resizeInfoRef.current.key == null) {\n    _updateResizingState(rootElement, tableId, event, columnsArray, resizeInfoRef, isRtl);\n  }\n  if (resizeInfoRef.current.key != null) {\n    const rect = scrollerElement.getBoundingClientRect();\n    const pointerX = isRtl ? rect.right - event.clientX : event.clientX - rect.left;\n\n    resizeInfoRef.current = {\n      isResizing: true,\n      isResizeHover: true,\n      key: resizeInfoRef.current.key,\n      startX: pointerX,\n      delta: 0,\n      ignoreClick: resizeInfoRef.current.ignoreClick\n    };\n    if (onColumnResizing != null) {\n      onColumnResizing({\n        key: resizeInfoRef.current.key,\n        delta: 0,\n        allColumnWidths: appliedColumnWidths.netColumnWidths,\n        paddingWidth: appliedColumnWidths.totalBorderOffset\n      });\n    }\n    hideTooltip(true);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Helper function to ensure the resizing state is updated based on the latest pointer event.\n */\nfunction _updateResizingState<K, D, C>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  event: PointerEvent,\n  columnsArray: TableColumn<K, D, C>[],\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>,\n  isRtl: boolean\n) {\n  const headerRowElement = rootElement.querySelector(\n    `[data-oj-table-header-row='${tableId}']`\n  ) as HTMLElement;\n  if (headerRowElement != null) {\n    const headerElements = headerRowElement.querySelectorAll(\n      `[data-oj-table-header-cell='${tableId}']`\n    ) as NodeListOf<HTMLElement>;\n    if (getElementContainsFunc(headerRowElement)(event.target as HTMLElement)) {\n      let isResizeHover = false;\n      for (let i = 0; i < headerElements.length; i++) {\n        const headerElement = headerElements[i];\n        const cellRect = headerElement.getBoundingClientRect();\n        const endEdge = isRtl ? cellRect.left : cellRect.right;\n        if (Math.abs(endEdge - event.pageX) <= 8) {\n          if (columnsArray[i].value.edgeResizable !== 'enabled') {\n            break;\n          }\n          // resize operation on end side of header cell\n          resizeInfoRef.current.key = columnsArray[i].key;\n          headerRowElement.style.cursor = 'col-resize';\n          isResizeHover = true;\n          resizeInfoRef.current.isResizeHover = true;\n        }\n      }\n      if (!isResizeHover) {\n        headerRowElement.style.cursor = '';\n        resizeInfoRef.current.key = undefined;\n        resizeInfoRef.current.isResizeHover = false;\n      }\n    } else {\n      if (headerRowElement != null) {\n        headerRowElement.style.cursor = '';\n      }\n      resizeInfoRef.current.key = undefined;\n      resizeInfoRef.current.isResizeHover = false;\n    }\n  }\n}\n\n/**\n * Helper function to handle a pointer move gesture during a column resize.\n */\nexport function handleColumnResizingGesture<C extends string>(\n  scrollerElement: HTMLElement,\n  event: PointerEvent,\n  appliedColumnWidths: AppliedColumnWidths<C>,\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>,\n  isRtl: boolean,\n  onColumnResizing?: (detail: ColumnResizingDetail<C>) => void\n) {\n  if (resizeInfoRef.current.isResizing) {\n    const rect = scrollerElement.getBoundingClientRect();\n    const currentX = isRtl ? rect.right - event.clientX : event.clientX - rect.left;\n\n    resizeInfoRef.current.delta = currentX - resizeInfoRef.current.startX;\n    // handle resize move operation\n    if (onColumnResizing != null) {\n      onColumnResizing({\n        key: resizeInfoRef.current.key,\n        delta: resizeInfoRef.current.delta,\n        allColumnWidths: appliedColumnWidths.netColumnWidths,\n        paddingWidth: appliedColumnWidths.totalBorderOffset\n      });\n    }\n  }\n}\n\n/**\n * Helper function to handle a column resize end gesture (pointer up).\n */\nexport function handleColumnResizeEndGesture<C extends string>(\n  scrollerElement: HTMLElement,\n  event: PointerEvent,\n  appliedColumnWidths: AppliedColumnWidths<C>,\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>,\n  isRtl: boolean,\n  onColumnResize?: (detail: ColumnResizeDetail<C>) => void\n) {\n  if (resizeInfoRef.current.isResizing) {\n    if (onColumnResize != null) {\n      const rect = scrollerElement.getBoundingClientRect();\n      const currentX = isRtl ? rect.right - event.clientX : event.clientX - rect.left;\n\n      resizeInfoRef.current.delta = currentX - resizeInfoRef.current.startX;\n      onColumnResize({\n        key: resizeInfoRef.current.key,\n        delta: resizeInfoRef.current.delta,\n        allColumnWidths: appliedColumnWidths.netColumnWidths,\n        paddingWidth: appliedColumnWidths.totalBorderOffset,\n        gesture: 'pointer',\n        type: 'delta'\n      });\n    }\n  }\n  resizeInfoRef.current = {\n    isResizing: false,\n    isResizeHover: resizeInfoRef.current.isResizeHover,\n    ignoreClick: resizeInfoRef.current.ignoreClick\n  };\n}\n\n/**\n * Helper function to handle the pointer leaving the entire Table when previously hovering\n * over a column resize region.\n */\nexport function handleLeaveResizingGesture<C>(\n  rootElement: HTMLDivElement,\n  tableId: string,\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>\n) {\n  if (!resizeInfoRef.current.isResizing) {\n    const headerRowElement = rootElement.querySelector(\n      `[data-oj-table-header-row='${tableId}']`\n    ) as HTMLElement;\n    if (headerRowElement != null) {\n      headerRowElement.style.cursor = '';\n    }\n    resizeInfoRef.current.isResizeHover = false;\n  }\n}\n\n/**\n * Helper function to handle a pointer entering the Table when it was previously handling\n * a column resize gesture.\n */\nexport function handleEnterResizingGesture<C extends string>(\n  scrollerElement: HTMLElement,\n  event: PointerEvent,\n  appliedColumnWidths: AppliedColumnWidths<C>,\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>,\n  isRtl: boolean,\n  onColumnResize?: (detail: ColumnResizeDetail<C>) => void\n) {\n  // handle case where user was resizing, moved pointer out of the Table,\n  // released the button, and has now entered the table once again\n  if (resizeInfoRef.current.isResizing && event.buttons === 0) {\n    handleColumnResizeEndGesture(\n      scrollerElement,\n      event,\n      appliedColumnWidths,\n      resizeInfoRef,\n      isRtl,\n      onColumnResize\n    );\n  }\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { useCallback, useRef, useState, Dispatch, MutableRef, StateUpdater } from 'preact/hooks';\nimport { getClientHints } from '../../utils/PRIVATE_clientHints';\nimport { getIsSelectionPending } from '../../utils/PRIVATE_textSelectionUtils';\nimport { Keys } from '../../utils/UNSAFE_keys';\nimport {\n  ActiveCell,\n  ActiveCellDetail,\n  AppliedColumnWidths,\n  ColumnHeaderFooterInfo,\n  ColumnResizeInfo,\n  TableColumn,\n  TableData,\n  ViewportInfo\n} from '../Table';\nimport { handleRowActionGesture } from '../utils/TableActionUtils';\nimport { logicalCellExtractor } from '../utils/TableDomUtils';\nimport {\n  handleSelectionGesture,\n  handleRangeSelectionGesture,\n  isRangeSelectionGesture\n} from '../utils/TableSelectionUtils';\nimport {\n  handleOverResizeRegionGesture,\n  handleColumnResizeStartGesture,\n  handleColumnResizingGesture,\n  handleColumnResizeEndGesture,\n  handleLeaveResizingGesture,\n  handleEnterResizingGesture\n} from '../utils/TableSizingUtils';\nimport {\n  handleActiveColumnHeaderFooterGesture,\n  handleOverColumnHeaderFooterGesture,\n  handleEndInteractionColumnHeaderFooterGesture\n} from '../utils/TableInteractionUtils';\nimport {\n  handleLeaveTableTooltipGesture,\n  handleMoveTooltipGesture\n} from '../utils/TableTooltipUtils';\nimport {\n  Cell,\n  RowActionDetail,\n  ColumnResizingDetail,\n  ColumnResizeDetail,\n  TableSelectionDetail,\n  TableSelectionMode\n} from '../../UNSAFE_TableView';\n\ntype PointerInfo = {\n  target: EventTarget | null;\n  x: number;\n  y: number;\n};\n\ntype UsePointerHandlingOptions<K, D, C extends string> = {\n  rootRef: RefObject<HTMLDivElement>;\n  viewportInfo: ViewportInfo;\n  tableId: string;\n  tableData: TableData<K, D>[];\n  isRtl: boolean;\n  columnsArray: TableColumn<K, D, C>[];\n  appliedColumnWidths?: AppliedColumnWidths<C>;\n  resizeInfoRef: MutableRef<ColumnResizeInfo<C>>;\n  selectionExtensionElementRef: MutableRef<HTMLElement | undefined>;\n  onColumnResizing?: (detail: ColumnResizingDetail<C>) => void;\n  onColumnResize?: (detail: ColumnResizeDetail<C>) => void;\n  activeCell?: ActiveCell<K, C>;\n  onActiveCellChanged: (\n    detail: ActiveCellDetail<K, C>,\n    isAutoFocus?: boolean,\n    isSelectionExtension?: boolean,\n    skipScrollCellIntoView?: boolean\n  ) => void;\n  isDropDownSelection: boolean;\n  selectionMode?: TableSelectionMode;\n  selected?: { row?: Keys<K>; column?: Keys<C> };\n  onTableSelectionChange?: (\n    detail: TableSelectionDetail<K, C>,\n    isSelectionExtension: boolean\n  ) => void;\n  activeStyleColumnInfo: ColumnHeaderFooterInfo<C> | undefined;\n  setActiveStyleColumnInfo: Dispatch<StateUpdater<ColumnHeaderFooterInfo<C> | undefined>>;\n  onRowAction?: (detail: RowActionDetail<K, D>) => void;\n  showTooltip: (cell: Cell<K, C>) => void;\n  hideTooltip: (isImmediate?: boolean) => void;\n  tooltipId: string;\n};\n\n/**\n * Hook that manages pointer interactions on the Preact Table\n */\nexport function usePointerHandling<K extends string | number, D, C extends string>({\n  rootRef,\n  viewportInfo,\n  tableId,\n  tableData,\n  isRtl,\n  columnsArray,\n  appliedColumnWidths,\n  resizeInfoRef,\n  selectionExtensionElementRef,\n  onColumnResizing,\n  onColumnResize,\n  activeCell,\n  onActiveCellChanged,\n  isDropDownSelection,\n  selectionMode,\n  selected,\n  onTableSelectionChange,\n  activeStyleColumnInfo,\n  setActiveStyleColumnInfo,\n  onRowAction,\n  showTooltip,\n  hideTooltip,\n  tooltipId\n}: UsePointerHandlingOptions<K, D, C>) {\n  // tracks whether the most recent 'pointerdown' event was due to a touch gesture\n  const selectionTouchRef = useRef<boolean>(false);\n\n  // tracks the column key for any header or footer being hovered over\n  const [hoverStyleColumnInfo, setHoverStyleColumnInfo] = useState<ColumnHeaderFooterInfo<C>>();\n\n  // tracks the current 'pointer over' element for comparison during 'click' event handling to\n  // prevent screen readers from triggering undesired selection gestures from simulated events\n  const pointerInfoRef = useRef<PointerInfo>();\n\n  // Pointer move handler for the outer Table.\n  const _pointerMoveHandler = useCallback(\n    (event: PointerEvent) => {\n      const rootElement = rootRef.current;\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (rootElement != null) {\n        pointerInfoRef.current = { target: event.target, x: event.clientX, y: event.clientY };\n        handleMoveTooltipGesture(tableId, columnsArray, event, showTooltip, hideTooltip, tooltipId);\n        if (onColumnResizing != null) {\n          if (!resizeInfoRef.current.isResizing) {\n            handleOverResizeRegionGesture(\n              rootElement,\n              tableId,\n              event,\n              columnsArray,\n              resizeInfoRef,\n              isRtl\n            );\n          } else if (scrollerElement != null && appliedColumnWidths != null) {\n            handleColumnResizingGesture(\n              scrollerElement,\n              event,\n              appliedColumnWidths,\n              resizeInfoRef,\n              isRtl,\n              onColumnResizing\n            );\n          }\n        }\n      }\n    },\n    [\n      rootRef,\n      viewportInfo,\n      tableId,\n      columnsArray,\n      appliedColumnWidths,\n      resizeInfoRef,\n      isRtl,\n      onColumnResizing,\n      showTooltip,\n      hideTooltip,\n      tooltipId\n    ]\n  );\n\n  // Pointer over handler for the outer Table.\n  const _pointerOverHandler = useCallback(\n    (event: PointerEvent) => {\n      const rootElement = rootRef.current;\n      if (rootElement != null) {\n        pointerInfoRef.current = { target: event.target, x: event.clientX, y: event.clientY };\n        handleOverColumnHeaderFooterGesture(\n          tableId,\n          event,\n          setHoverStyleColumnInfo,\n          hoverStyleColumnInfo\n        );\n      }\n    },\n    [rootRef, tableId, hoverStyleColumnInfo]\n  );\n\n  // Pointer down handler for the outer Table. It ensures the area targeted is 'current'.\n  // NOTE - This event handling is triggered prior to 'onFocus' handling and ensures the\n  // 'pending current' area is set when an initial pointer interaction focuses the Table.\n  const _pointerDownHandler = useCallback(\n    (event: PointerEvent) => {\n      handleActiveColumnHeaderFooterGesture(\n        tableId,\n        event,\n        setActiveStyleColumnInfo,\n        activeStyleColumnInfo\n      );\n      const rootElement = rootRef.current;\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (rootElement != null) {\n        selectionTouchRef.current = event.pointerType === 'touch';\n        const targetElement = event.target as HTMLElement;\n        if (\n          onTableSelectionChange != null &&\n          activeCell != null &&\n          event.shiftKey &&\n          isRangeSelectionGesture(\n            rootElement,\n            tableId,\n            columnsArray,\n            targetElement,\n            activeCell,\n            selectionMode\n          )\n        ) {\n          // prevent focus change on selection extension gesture\n          if (!getIsSelectionPending()) {\n            event.preventDefault();\n          }\n        } else if (\n          scrollerElement != null &&\n          appliedColumnWidths != null &&\n          handleColumnResizeStartGesture(\n            rootElement,\n            scrollerElement,\n            tableId,\n            event,\n            columnsArray,\n            appliedColumnWidths,\n            resizeInfoRef,\n            isRtl,\n            hideTooltip,\n            onColumnResizing\n          )\n        ) {\n          // prevent focus change on column resize gesture\n          event.preventDefault();\n          resizeInfoRef.current.ignoreClick = true;\n        } else if (logicalCellExtractor<K, D, C>(targetElement, tableId, columnsArray) == null) {\n          // prevent focus shift when interacting with 'non-focusable' regions (ie - scrollbar)\n          event.preventDefault();\n        }\n      }\n    },\n    [\n      rootRef,\n      viewportInfo,\n      tableId,\n      columnsArray,\n      appliedColumnWidths,\n      resizeInfoRef,\n      activeStyleColumnInfo,\n      setActiveStyleColumnInfo,\n      isRtl,\n      hideTooltip,\n      activeCell,\n      selectionMode,\n      onTableSelectionChange,\n      onColumnResizing\n    ]\n  );\n\n  // Pointer up handler for the outer Table.\n  const _pointerUpHandler = useCallback(\n    (event: PointerEvent) => {\n      handleEndInteractionColumnHeaderFooterGesture(\n        setActiveStyleColumnInfo,\n        activeStyleColumnInfo\n      );\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (scrollerElement != null && appliedColumnWidths != null) {\n        handleColumnResizeEndGesture(\n          scrollerElement,\n          event,\n          appliedColumnWidths,\n          resizeInfoRef,\n          isRtl,\n          onColumnResize\n        );\n      }\n    },\n    [\n      viewportInfo,\n      appliedColumnWidths,\n      resizeInfoRef,\n      activeStyleColumnInfo,\n      setActiveStyleColumnInfo,\n      isRtl,\n      onColumnResize\n    ]\n  );\n\n  // Pointer leave handler for the outer Table.\n  const _pointerLeaveHandler = useCallback(\n    (event: PointerEvent) => {\n      handleEndInteractionColumnHeaderFooterGesture(setHoverStyleColumnInfo, hoverStyleColumnInfo);\n      handleEndInteractionColumnHeaderFooterGesture(\n        setActiveStyleColumnInfo,\n        activeStyleColumnInfo\n      );\n      const rootElement = rootRef.current;\n      if (rootElement != null) {\n        handleLeaveResizingGesture(rootElement, tableId, resizeInfoRef);\n        handleLeaveTableTooltipGesture(rootElement, event, hideTooltip, tooltipId);\n      }\n      pointerInfoRef.current = undefined;\n    },\n    [\n      rootRef,\n      tableId,\n      resizeInfoRef,\n      activeStyleColumnInfo,\n      setActiveStyleColumnInfo,\n      hoverStyleColumnInfo,\n      hideTooltip,\n      tooltipId\n    ]\n  );\n\n  // Pointer enter handler for the outer Table.\n  const _pointerEnterHandler = useCallback(\n    (event: PointerEvent) => {\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      if (scrollerElement != null && appliedColumnWidths != null) {\n        handleEnterResizingGesture(\n          scrollerElement,\n          event,\n          appliedColumnWidths,\n          resizeInfoRef,\n          isRtl,\n          onColumnResize\n        );\n      }\n    },\n    [viewportInfo, appliedColumnWidths, resizeInfoRef, isRtl, onColumnResize]\n  );\n\n  // Click handler for the outer Table. It ensures the Table's selection state is\n  // updated to reflect the area targeted, and any action events are fired correctly.\n  const _clickHandler = useCallback(\n    (event: PointerEvent) => {\n      const rootElement = rootRef.current;\n      if (rootElement != null) {\n        // only handle click events that match the latest mouse over/move info to prevent screen readers\n        // from triggering undesired selections due to simulated click events when transferring focus\n        if (\n          event.pointerType !== 'mouse' ||\n          (pointerInfoRef.current != null &&\n            pointerInfoRef.current.target === event.target &&\n            Math.abs(pointerInfoRef.current.x - event.clientX) <= 1 &&\n            Math.abs(pointerInfoRef.current.y - event.clientY) <= 1)\n        ) {\n          let isSelectionExtension = false;\n          const platform = getClientHints().platform;\n          const target = event.target as HTMLElement;\n          if (\n            onTableSelectionChange != null &&\n            !resizeInfoRef.current.ignoreClick &&\n            !getIsSelectionPending()\n          ) {\n            if (activeCell != null && event.shiftKey) {\n              isSelectionExtension = handleRangeSelectionGesture(\n                rootElement,\n                tableId,\n                columnsArray,\n                target,\n                activeCell,\n                onActiveCellChanged,\n                selectionExtensionElementRef,\n                onTableSelectionChange,\n                isDropDownSelection,\n                selectionMode,\n                selected\n              );\n            }\n            if (!isSelectionExtension) {\n              handleSelectionGesture(\n                rootElement,\n                tableId,\n                columnsArray,\n                target,\n                (platform === 'mac' ? event.metaKey : event.ctrlKey) || selectionTouchRef.current,\n                onTableSelectionChange,\n                isDropDownSelection,\n                selectionMode,\n                selected\n              );\n            }\n          }\n          if (\n            onRowAction != null &&\n            !getIsSelectionPending() &&\n            handleRowActionGesture(rootElement, tableId, tableData, onRowAction, target)\n          ) {\n            event.stopPropagation();\n          }\n        }\n      }\n      resizeInfoRef.current.ignoreClick = false;\n    },\n    [\n      rootRef,\n      tableId,\n      columnsArray,\n      tableData,\n      resizeInfoRef,\n      selectionExtensionElementRef,\n      activeCell,\n      onActiveCellChanged,\n      isDropDownSelection,\n      selectionMode,\n      selected,\n      onTableSelectionChange,\n      onRowAction\n    ]\n  );\n\n  return {\n    pointerHandlingProps: {\n      onPointerOver: _pointerOverHandler,\n      onPointerMove: _pointerMoveHandler,\n      onPointerDown: _pointerDownHandler,\n      onPointerUp: _pointerUpHandler,\n      onPointerLeave: _pointerLeaveHandler,\n      onPointerEnter: _pointerEnterHandler,\n      onClick: _clickHandler\n    },\n    hoverStyleColumnInfo\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { useCallback, useLayoutEffect, useRef, MutableRef } from 'preact/hooks';\nimport { TableHorizontalScrollPosition, TableVerticalScrollPosition } from '../../UNSAFE_TableView';\nimport { SizingInfo, StickyColumnInfo, TableColumn, ViewportInfo } from '../Table';\nimport {\n  hideOutOfViewTooltip,\n  setHorizontalScrollPosition,\n  setVerticalScrollPosition,\n  updateStickyEdges\n} from '../utils/TableScrollUtils';\n\ntype UseScrollHandlingProps<K, D, C extends string> = {\n  rootRef: RefObject<HTMLDivElement>;\n  viewportInfo: ViewportInfo;\n  tableId: string;\n  isLayoutRequired: boolean;\n  sizingInfoRef: MutableRef<SizingInfo>;\n  columnsArray: TableColumn<K, D, C>[];\n  stickyColumnInfo: StickyColumnInfo;\n  stickyEdgesState: { start?: number; end?: number };\n  setStickyEdgesState: (stickyEdgesState: { start?: number; end?: number }) => void;\n  fullColumnWidths?: number[];\n  horizontalScrollPositionOverride?: TableHorizontalScrollPosition<C>;\n  verticalScrollPositionOverride?: TableVerticalScrollPosition<K>;\n  tooltipAnchorRef: MutableRef<HTMLElement | undefined>;\n  hideTooltip: (isImmediate?: boolean) => void;\n  isPendingLayout: boolean;\n  isRtl: boolean;\n};\n\n/**\n * Hook that manages handling scroll events on the Preact Table\n */\nexport function useScrollHandling<K extends string | number, D, C extends string>({\n  rootRef,\n  viewportInfo,\n  tableId,\n  isLayoutRequired,\n  sizingInfoRef,\n  columnsArray,\n  stickyColumnInfo,\n  stickyEdgesState,\n  setStickyEdgesState,\n  fullColumnWidths,\n  horizontalScrollPositionOverride,\n  verticalScrollPositionOverride,\n  tooltipAnchorRef,\n  hideTooltip,\n  isPendingLayout,\n  isRtl\n}: UseScrollHandlingProps<K, D, C>) {\n  const horizontalScrollPositionOverrideRef = useRef<TableHorizontalScrollPosition<C>>();\n  const verticalScrollPositionOverrideRef = useRef<TableVerticalScrollPosition<K>>();\n\n  // update horizontal and/or vertical scroll position if a new value is provided\n  // NO DEPENDENCY ARRAY AS THIS SHOULD RUN ON EVERY RENDER\n  useLayoutEffect(() => {\n    const rootElement = rootRef.current;\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    if (\n      rootElement != null &&\n      scrollerElement != null &&\n      !isPendingLayout &&\n      !isLayoutRequired &&\n      fullColumnWidths != null\n    ) {\n      if (horizontalScrollPositionOverrideRef.current !== horizontalScrollPositionOverride) {\n        setHorizontalScrollPosition(\n          scrollerElement,\n          columnsArray,\n          fullColumnWidths,\n          isRtl,\n          horizontalScrollPositionOverride\n        );\n        horizontalScrollPositionOverrideRef.current = horizontalScrollPositionOverride;\n      }\n      if (verticalScrollPositionOverrideRef.current !== verticalScrollPositionOverride) {\n        setVerticalScrollPosition(\n          rootElement,\n          scrollerElement,\n          tableId,\n          verticalScrollPositionOverride\n        );\n        verticalScrollPositionOverrideRef.current = verticalScrollPositionOverride;\n      }\n    }\n  });\n\n  // Scroll hander for the outer Table. It ensures the Table's sticky edges are updated\n  // and any out of view tooltips are hidden.\n  const _scrollHandler = useCallback(() => {\n    const rootElement = rootRef.current;\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    if (rootElement != null && scrollerElement != null && fullColumnWidths != null) {\n      updateStickyEdges(\n        scrollerElement,\n        columnsArray,\n        stickyColumnInfo,\n        fullColumnWidths,\n        stickyEdgesState,\n        setStickyEdgesState,\n        scrollerElement.scrollLeft\n      );\n      hideOutOfViewTooltip(\n        rootElement,\n        scrollerElement,\n        tableId,\n        sizingInfoRef.current,\n        stickyColumnInfo,\n        fullColumnWidths,\n        tooltipAnchorRef,\n        hideTooltip,\n        isRtl\n      );\n    }\n  }, [\n    rootRef,\n    viewportInfo,\n    tableId,\n    sizingInfoRef,\n    columnsArray,\n    stickyColumnInfo,\n    stickyEdgesState,\n    setStickyEdgesState,\n    fullColumnWidths,\n    tooltipAnchorRef,\n    hideTooltip,\n    isRtl\n  ]);\n\n  useLayoutEffect(() => {\n    const isExternalScroller = viewportInfo.isExternalScroller;\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    let scrollerEventElement: Element | typeof globalThis;\n    if (isExternalScroller && scrollerElement != null) {\n      if (scrollerElement === document.body || scrollerElement === document.documentElement) {\n        scrollerEventElement = window;\n      } else {\n        scrollerEventElement = scrollerElement;\n      }\n      scrollerEventElement.addEventListener('scroll', _scrollHandler);\n    }\n    return () => {\n      if (isExternalScroller && scrollerEventElement != null) {\n        scrollerEventElement.removeEventListener('scroll', _scrollHandler);\n      }\n    };\n  }, [viewportInfo, _scrollHandler]);\n\n  return viewportInfo.isExternalScroller ? {} : { onScroll: _scrollHandler };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { useImperativeHandle, useMemo, useRef, useState, MutableRef } from 'preact/hooks';\nimport { ForwardedRef } from 'preact/compat';\nimport { useCollectionInteractionContext } from '../../hooks/UNSAFE_useCollectionInteractionContext';\nimport { Keys } from '../../utils/UNSAFE_keys';\nimport { mergeProps } from '../../utils/UNSAFE_mergeProps';\nimport {\n  ActiveCell,\n  AppliedColumnWidths,\n  ColumnHeaderFooterInfo,\n  ColumnResizeInfo,\n  SizingInfo,\n  StickyColumnInfo,\n  TableColumn,\n  TableData,\n  ViewportInfo\n} from '../Table';\nimport { getElementFromCell } from '../utils/TableDomUtils';\nimport { useContextMenu } from './useContextMenu';\nimport { useTruncationTooltip } from './useTruncationTooltip';\nimport { useFocusHandling } from './useFocusHandling';\nimport { useKeyboardHandling } from './useKeyboardHandling';\nimport { usePointerHandling } from './usePointerHandling';\nimport { useScrollHandling } from './useScrollHandling';\nimport { getHorizontalScrollPosition, getVerticalScrollPosition } from '../utils/TableScrollUtils';\nimport {\n  CellOverride,\n  ColumnResizeDetail,\n  ColumnResizingDetail,\n  CurrentCellDetail,\n  RowActionDetail,\n  SortCriterionDetail,\n  TableContextMenuConfig,\n  TableHorizontalScrollPosition,\n  TableSelectionDetail,\n  TableSelectionMode,\n  TableVerticalScrollPosition,\n  TableViewHandle\n} from '../../UNSAFE_TableView';\n\ntype UseInteractionManagerOptions<K, D, C extends string> = {\n  rootRef: RefObject<HTMLDivElement>;\n  viewportInfo: ViewportInfo;\n  ref?: ForwardedRef<TableViewHandle<K, C>>;\n  tableId: string;\n  tableData: TableData<K, D>[];\n  hasMore: boolean;\n  hasFooters: boolean;\n  isRtl: boolean;\n  columnsArray: TableColumn<K, D, C>[];\n  stickyColumnInfo: StickyColumnInfo;\n  appliedColumnWidths?: AppliedColumnWidths<C>;\n  isLayoutRequired: boolean;\n  sizingInfoRef: MutableRef<SizingInfo>;\n  stickyEdgesState: { start?: number; end?: number };\n  setStickyEdgesState: (stickyEdgesState: { start?: number; end?: number }) => void;\n  cellHasRenderer: (cell: ActiveCell<K, C>) => boolean;\n  horizontalScrollPositionOverride?: TableHorizontalScrollPosition<C>;\n  verticalScrollPositionOverride?: TableVerticalScrollPosition<K>;\n  onColumnResizing?: (detail: ColumnResizingDetail<C>) => void;\n  onColumnResize?: (detail: ColumnResizeDetail<C>) => void;\n  currentCellOverride?: CellOverride<K, C>;\n  onPersistCurrentCell?: (detail: CurrentCellDetail<K, C>) => void;\n  selectionMode?: TableSelectionMode;\n  selected?: { row?: Keys<K>; column?: Keys<C> };\n  onSelectionChange?: (detail: TableSelectionDetail<K, C>) => void;\n  onRowAction?: (detail: RowActionDetail<K, D>) => void;\n  sortCriterion?: { key: C; sortDirection: 'ascending' | 'descending' }[];\n  onSortCriterionChange?: (detail: SortCriterionDetail<C>) => void;\n  isPendingLayout: boolean;\n  contextMenuConfig?: TableContextMenuConfig<K, D, C>;\n};\n\nconst _defaultDisabledRowInteractionKeys: ('enter' | 'space')[] = ['enter'];\n\n/**\n * Hook that manages interactions and events on the Preact Table\n */\nexport function useInteractionManager<K extends string | number, D, C extends string>({\n  rootRef,\n  viewportInfo,\n  ref,\n  tableId,\n  tableData,\n  hasMore,\n  hasFooters,\n  isRtl,\n  columnsArray,\n  stickyColumnInfo,\n  appliedColumnWidths,\n  isLayoutRequired,\n  sizingInfoRef,\n  stickyEdgesState,\n  setStickyEdgesState,\n  cellHasRenderer,\n  horizontalScrollPositionOverride,\n  verticalScrollPositionOverride,\n  onColumnResizing,\n  onColumnResize,\n  currentCellOverride,\n  onPersistCurrentCell,\n  selectionMode,\n  selected,\n  onSelectionChange,\n  onRowAction,\n  sortCriterion,\n  onSortCriterionChange,\n  isPendingLayout,\n  contextMenuConfig\n}: UseInteractionManagerOptions<K, D, C>) {\n  // tracks the current column resize state\n  const resizeInfoRef = useRef<ColumnResizeInfo<C>>({\n    isResizing: false,\n    isResizeHover: false,\n    ignoreClick: false\n  });\n\n  // tracks the column key for any header or footer being hovered over\n  const [activeStyleColumnInfo, setActiveStyleColumnInfo] = useState<ColumnHeaderFooterInfo<C>>();\n\n  // handles default tooltip state management\n  const { tooltipContent, tooltipId, tooltipAnchorRef, showTooltip, hideTooltip } =\n    useTruncationTooltip<K, C>({ rootRef, tableId, resizeInfoRef });\n\n  // whether row selection is triggered on 'enter' keypresses in addition to 'spacebar'\n  const isEmbeddedSelect = useCollectionInteractionContext() === 'embedded';\n  const disabledRowInteractionKeys = isEmbeddedSelect\n    ? undefined\n    : _defaultDisabledRowInteractionKeys;\n\n  // tracks the current selection extension element (if any)\n  const selectionExtensionElementRef = useRef<HTMLElement>();\n\n  // intercept onSelectionChange calls to ensure local selectionExtensionElementRef is cleared\n  const onTableSelectionChange = useMemo(() => {\n    return onSelectionChange != null\n      ? (detail: TableSelectionDetail<K, C>, isExtendableSelection: boolean) => {\n          if (!isExtendableSelection) {\n            selectionExtensionElementRef.current = undefined;\n          }\n          onSelectionChange(detail);\n        }\n      : undefined;\n  }, [onSelectionChange]);\n\n  // setup focus tracking using the useFocusHandling hook\n  const {\n    focusHandlingProps,\n    activeCell,\n    onActiveCellChanged,\n    currentActiveCell,\n    currentCell,\n    isShowFocusRing,\n    isTabbableMode,\n    onStartFocusTracking,\n    onFocusStartEdge,\n    onFocusEndEdge,\n    updateDeferredScrollDetail\n  } = useFocusHandling({\n    rootRef,\n    viewportInfo,\n    tableId,\n    tableData,\n    hasMore,\n    hasFooters,\n    columnsArray,\n    stickyColumnInfo,\n    sizingInfoRef,\n    selectionExtensionElementRef,\n    isRtl,\n    cellSupportsTabbable: cellHasRenderer,\n    appliedColumnWidths,\n    currentCellOverride,\n    onPersistCurrentCell,\n    showTooltip,\n    hideTooltip,\n    isPendingLayout,\n    isEmbeddedSelect,\n    isDataLoaded: !hasMore || tableData.length > 0\n  });\n\n  const keyboardHandlingProps = useKeyboardHandling({\n    rootRef,\n    viewportInfo,\n    tableId,\n    tableData,\n    isRtl,\n    isTabbableMode,\n    columnsArray,\n    sizingInfoRef,\n    selectionExtensionElementRef,\n    activeCell,\n    onActiveCellChanged,\n    isDropDownSelection: isEmbeddedSelect,\n    selectionMode,\n    selected,\n    onTableSelectionChange,\n    activeStyleColumnInfo,\n    setActiveStyleColumnInfo,\n    onRowAction,\n    sortCriterion,\n    onSortCriterionChange,\n    hideTooltip,\n    updateDeferredScrollDetail\n  });\n\n  const { hoverStyleColumnInfo, pointerHandlingProps } = usePointerHandling({\n    rootRef,\n    viewportInfo,\n    tableId,\n    tableData,\n    isRtl,\n    columnsArray,\n    appliedColumnWidths,\n    resizeInfoRef,\n    selectionExtensionElementRef,\n    onColumnResizing,\n    onColumnResize,\n    activeCell,\n    onActiveCellChanged,\n    isDropDownSelection: isEmbeddedSelect,\n    selectionMode,\n    selected,\n    onTableSelectionChange,\n    activeStyleColumnInfo,\n    setActiveStyleColumnInfo,\n    onRowAction,\n    showTooltip,\n    hideTooltip,\n    tooltipId\n  });\n\n  const scrollHandlingProps = useScrollHandling({\n    rootRef,\n    viewportInfo,\n    tableId,\n    isLayoutRequired,\n    sizingInfoRef,\n    columnsArray,\n    stickyColumnInfo,\n    stickyEdgesState,\n    setStickyEdgesState,\n    fullColumnWidths: appliedColumnWidths?.fullColumnWidths,\n    horizontalScrollPositionOverride,\n    verticalScrollPositionOverride,\n    tooltipAnchorRef,\n    hideTooltip,\n    isPendingLayout,\n    isRtl\n  });\n\n  const {\n    contextMenuTriggerProps,\n    menuProps,\n    contextMenuContext,\n    isResizeDialogOpen,\n    setIsResizeDialogOpen\n  } = useContextMenu<K, D, C>(\n    tableId,\n    tableData,\n    columnsArray,\n    activeCell,\n    contextMenuConfig,\n    sortCriterion,\n    onSortCriterionChange\n  );\n\n  const interactionManagerProps = !isPendingLayout\n    ? mergeProps(\n        focusHandlingProps,\n        keyboardHandlingProps,\n        pointerHandlingProps,\n        contextMenuTriggerProps\n      )\n    : focusHandlingProps;\n\n  // setup imperative handle implementation\n  useImperativeHandle(\n    ref!,\n    () => {\n      const rootElement = rootRef.current;\n      const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n      return {\n        focus: () => {\n          if (rootElement != null) {\n            if (currentActiveCell != null) {\n              const cellElement = getElementFromCell(rootElement, tableId, currentActiveCell);\n              if (cellElement != null) {\n                cellElement.focus();\n                return;\n              }\n            }\n            // if no current cell element was found, just focus the root element\n            rootElement.focus();\n          }\n        },\n        getHorizontalScrollPosition: () => {\n          if (scrollerElement == null || isLayoutRequired || appliedColumnWidths == null) {\n            return {};\n          }\n          return getHorizontalScrollPosition<K, D, C>(\n            scrollerElement,\n            columnsArray,\n            appliedColumnWidths.fullColumnWidths\n          );\n        },\n        getVerticalScrollPosition: () => {\n          if (rootElement == null || scrollerElement == null || isLayoutRequired) {\n            return {};\n          }\n          return getVerticalScrollPosition<K>(rootElement, scrollerElement, tableId);\n        }\n      };\n    },\n    [\n      rootRef,\n      viewportInfo,\n      tableId,\n      columnsArray,\n      currentActiveCell,\n      isLayoutRequired,\n      appliedColumnWidths\n    ]\n  );\n\n  return {\n    interactionManagerProps,\n    scrollHandlingProps,\n    onTableSelectionChange,\n    isShowFocusRing,\n    isTabbableMode,\n    currentCell,\n    currentActiveCell,\n    resizeInfoRef,\n    onStartFocusTracking,\n    onFocusStartEdge,\n    onFocusEndEdge,\n    activeStyleColumnInfo,\n    hoverStyleColumnInfo,\n    tooltipContent,\n    contextMenuContext,\n    menuProps,\n    isResizeDialogOpen,\n    setIsResizeDialogOpen,\n    disabledRowInteractionKeys\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { MutableRef } from 'preact/hooks';\nimport { BorderEdges, SampledWidths, TableColumn, ViewportInfo } from '../Table';\nimport { ColumnWidths } from '../../UNSAFE_TableView';\n\n/**\n * Helper method to extract the individual column widths of the Table\n * depending on its layout. With a 'fixed' layout, an initial 'availableWidth'\n * is required, while with a 'contents' layout, -1 can be provided as the\n * 'availableWidth' initially. This will trigger the layout logic to ensure\n * a non-contstrained Table width is supported, and is needed to match\n * current Redwood behaviors with a 'contents' layout.\n */\nexport function applyLayoutColumnWidths<K, D, C extends string>(\n  scrollerElement: HTMLElement,\n  viewportInfo: ViewportInfo,\n  innerTableElement: HTMLTableElement,\n  widthOffset: number,\n  tableId: string,\n  isFixed: boolean,\n  sampledColumnNetWidthsRef: MutableRef<SampledWidths<C> | undefined>,\n  availableRealWidth: number,\n  columnsArray: TableColumn<K, D, C>[],\n  columnBorderEdges: BorderEdges,\n  borderOffset: number,\n  staticColumnWidths?: ColumnWidths<C>\n) {\n  let newNetColumnWidths;\n  let totalRealWidth = 0;\n  let realWidthsArray = [];\n  const tableCols = innerTableElement.querySelectorAll(\n    `[data-oj-table-col='${tableId}']`\n  ) as NodeListOf<HTMLTableColElement>;\n\n  let totalBorderWidth = 0;\n  for (const borderEdge of columnBorderEdges) {\n    totalBorderWidth += borderEdge.width;\n  }\n  const availableNetWidth = availableRealWidth !== -1 ? availableRealWidth - totalBorderWidth : -1;\n\n  if (isFixed) {\n    newNetColumnWidths = _getFixedLayoutColumnNetWidths(\n      availableNetWidth,\n      columnsArray,\n      staticColumnWidths\n    );\n    for (let i = 0; i < columnsArray.length; i++) {\n      const width = newNetColumnWidths[i] + columnBorderEdges[i].width;\n      realWidthsArray.push(width);\n      totalRealWidth += width;\n    }\n    _updateTableSizing(innerTableElement, tableCols, realWidthsArray, totalRealWidth);\n    return _createColumnWidths(\n      columnsArray,\n      newNetColumnWidths,\n      realWidthsArray,\n      columnBorderEdges,\n      borderOffset,\n      totalBorderWidth\n    );\n  }\n\n  const headerElements = innerTableElement.querySelectorAll(\n    `[data-oj-table-header-cell='${tableId}']`\n  ) as NodeListOf<HTMLElement>;\n\n  newNetColumnWidths = _getContentsLayoutColumnNetWidths(\n    innerTableElement,\n    headerElements,\n    sampledColumnNetWidthsRef,\n    availableNetWidth,\n    columnsArray,\n    columnBorderEdges,\n    staticColumnWidths\n  );\n  for (let i = 0; i < columnsArray.length; i++) {\n    const realWidth = newNetColumnWidths[i] + columnBorderEdges[i].width;\n    realWidthsArray.push(realWidth);\n    totalRealWidth += realWidth;\n  }\n  _updateTableSizing(innerTableElement, tableCols, realWidthsArray, totalRealWidth);\n\n  if (availableRealWidth === -1) {\n    // for content sizing, check to see if all space is actually utilized\n    // this supports no width constraint scenarios\n    if (!viewportInfo.isExternalScroller) {\n      availableRealWidth = scrollerElement.getBoundingClientRect().width - widthOffset;\n    } else {\n      availableRealWidth = scrollerElement.clientWidth - widthOffset;\n    }\n    if (Math.abs(totalRealWidth - availableRealWidth) > 0.005) {\n      newNetColumnWidths = _getContentsLayoutColumnNetWidths(\n        innerTableElement,\n        headerElements,\n        sampledColumnNetWidthsRef,\n        availableRealWidth - totalBorderWidth,\n        columnsArray,\n        columnBorderEdges,\n        staticColumnWidths\n      );\n      totalRealWidth = 0;\n      realWidthsArray = [];\n      for (let i = 0; i < columnsArray.length; i++) {\n        const width = newNetColumnWidths[i] + columnBorderEdges[i].width;\n        realWidthsArray.push(width);\n        totalRealWidth += width;\n      }\n      _updateTableSizing(innerTableElement, tableCols, realWidthsArray, totalRealWidth);\n    }\n  }\n  return _createColumnWidths(\n    columnsArray,\n    newNetColumnWidths,\n    realWidthsArray,\n    columnBorderEdges,\n    borderOffset,\n    totalBorderWidth\n  );\n}\n\n/**\n * Helper method to extract the individual column widths of the Table\n * for a 'fixed' layout table that already has its root width applied.\n */\nfunction _getFixedLayoutColumnNetWidths<K, D, C extends string>(\n  availableNetWidth: number,\n  columnsArray: TableColumn<K, D, C>[],\n  staticColumnWidths?: ColumnWidths<C>\n) {\n  const DEFAULT_COLUMN_WEIGHT = 1;\n  const DEFAULT_COLUMN_MIN_WIDTH = 100;\n  const DEFAULT_COLUMN_MAX_WIDTH = undefined;\n\n  let requiresActiveSizing = false;\n  let totalWorkingWeight = 0;\n  let forcedTotalNetWidth = 0;\n  let pendingTotalNetWidth = 0;\n  const columnMaxWidthsArray = [];\n  const columnWeightsArray = [];\n  const forcedColumnNetWidthsArray = [];\n  const newColumnNetWidthsArray = [];\n  const appliedColumnNetWidthsArray = [];\n  for (let i = 0; i < columnsArray.length; i++) {\n    const column = columnsArray[i];\n    let columnMinWidth = column.value.minWidth;\n    if (columnMinWidth == null || columnMinWidth <= 0) {\n      columnMinWidth = DEFAULT_COLUMN_MIN_WIDTH;\n    }\n    let columnMaxWidth = column.value.maxWidth;\n    if (columnMaxWidth == null || columnMaxWidth < columnMinWidth) {\n      columnMaxWidth = DEFAULT_COLUMN_MAX_WIDTH;\n    }\n    columnMaxWidthsArray.push(columnMaxWidth);\n    let columnWeight = column.value.weight;\n    if (columnWeight == null || columnWeight < 1) {\n      columnWeight = DEFAULT_COLUMN_WEIGHT;\n    }\n    columnWeightsArray.push(columnWeight);\n    const columnWidth = staticColumnWidths != null ? staticColumnWidths[column.key] : undefined;\n    if (columnWidth != null) {\n      forcedTotalNetWidth += columnWidth;\n      pendingTotalNetWidth += columnWidth;\n      forcedColumnNetWidthsArray.push(columnWidth);\n      newColumnNetWidthsArray.push(columnWidth);\n      appliedColumnNetWidthsArray.push(columnWidth);\n    } else {\n      requiresActiveSizing = true;\n      pendingTotalNetWidth += columnMinWidth;\n      totalWorkingWeight += columnWeight;\n      forcedColumnNetWidthsArray.push(undefined);\n      newColumnNetWidthsArray.push(columnMinWidth);\n      appliedColumnNetWidthsArray.push(columnMinWidth);\n    }\n  }\n\n  // enforce min and max rules if active sizing is required and available space remains\n  if (requiresActiveSizing && pendingTotalNetWidth < availableNetWidth) {\n    _enforceFixedMinMaxRules(\n      columnsArray,\n      availableNetWidth,\n      totalWorkingWeight,\n      forcedTotalNetWidth,\n      forcedColumnNetWidthsArray,\n      columnWeightsArray,\n      columnMaxWidthsArray,\n      newColumnNetWidthsArray,\n      appliedColumnNetWidthsArray\n    );\n  }\n  return newColumnNetWidthsArray;\n}\n\n/**\n * Helper function to enforce all of the layout sizing rules on the Table's columns.\n */\nfunction _enforceFixedMinMaxRules<K, D, C>(\n  columnsArray: TableColumn<K, D, C>[],\n  availableWidth: number,\n  totalWorkingWeight: number,\n  forcedTotalWidth: number,\n  forcedColumnWidthsArray: (number | undefined)[],\n  columnWeightsArray: number[],\n  columnMaxWidthsArray: (number | undefined)[],\n  newColumnWidthsArray: number[],\n  appliedColumnWidthsArray: number[]\n) {\n  // try and honor the weights of each column combined with the min widths, and then check that against\n  // any max widths once completed. if the final result doesn't fill the space AND at least 1 max width\n  // rule was enforced, repeat the process until no max rules are enforced OR the space is filled.\n  let isMaxRuleApplied = true;\n  while (isMaxRuleApplied) {\n    isMaxRuleApplied = false;\n    _enforceWeightedMinRules(\n      columnsArray,\n      availableWidth,\n      totalWorkingWeight,\n      forcedTotalWidth,\n      forcedColumnWidthsArray,\n      columnWeightsArray,\n      newColumnWidthsArray,\n      appliedColumnWidthsArray\n    );\n    let pendingTotalWidth = 0;\n    for (let i = 0; i < columnsArray.length; i++) {\n      if (forcedColumnWidthsArray[i] == null) {\n        const maxWidth = columnMaxWidthsArray[i];\n        if (maxWidth != null && newColumnWidthsArray[i] > maxWidth) {\n          isMaxRuleApplied = true;\n          forcedColumnWidthsArray[i] = maxWidth;\n          forcedTotalWidth += maxWidth;\n          totalWorkingWeight -= columnWeightsArray[i];\n          newColumnWidthsArray[i] = maxWidth;\n          appliedColumnWidthsArray[i] = maxWidth;\n        }\n      }\n      pendingTotalWidth += newColumnWidthsArray[i];\n    }\n    isMaxRuleApplied = isMaxRuleApplied && pendingTotalWidth < availableWidth;\n  }\n}\n\n/**\n * Helper method to extract the individual column widths of the Table\n * for a 'contents' layout table that already has its root width applied.\n */\nfunction _getContentsLayoutColumnNetWidths<K, D, C extends string>(\n  innerTableElement: HTMLTableElement,\n  headerElements: NodeListOf<HTMLElement>,\n  sampledColumnNetWidthsRef: MutableRef<SampledWidths<C> | undefined>,\n  availableNetWidth: number,\n  columnsArray: TableColumn<K, D, C>[],\n  columnBorderEdges: { hasStart: boolean; hasEnd: boolean; width: number }[],\n  staticColumnWidths?: ColumnWidths<C>\n) {\n  const DEFAULT_COLUMN_MIN_WIDTH = undefined;\n  const DEFAULT_COLUMN_MAX_WIDTH = undefined;\n\n  let requiresActiveSizing = false;\n  const columnMinWidthsArray = [] as (number | undefined)[];\n  const columnMaxWidthsArray = [];\n  const forcedColumnNetWidthsArray = [];\n  const newColumnNetWidthsArray = [];\n  for (let i = 0; i < columnsArray.length; i++) {\n    const column = columnsArray[i];\n    let columnMinWidth = column.value.minWidth;\n    if (columnMinWidth == null || columnMinWidth <= 0) {\n      columnMinWidth = DEFAULT_COLUMN_MIN_WIDTH;\n    }\n    columnMinWidthsArray.push(columnMinWidth);\n    let columnMaxWidth = column.value.maxWidth;\n    if (columnMaxWidth == null || columnMaxWidth < (columnMinWidth != null ? columnMinWidth : 0)) {\n      columnMaxWidth = DEFAULT_COLUMN_MAX_WIDTH;\n    }\n    columnMaxWidthsArray.push(columnMaxWidth);\n    const columnWidth = staticColumnWidths != null ? staticColumnWidths[column.key] : undefined;\n    if (columnWidth != null) {\n      forcedColumnNetWidthsArray.push(columnWidth);\n      newColumnNetWidthsArray[i] = columnWidth;\n    } else {\n      requiresActiveSizing = true;\n      forcedColumnNetWidthsArray.push(undefined);\n    }\n  }\n\n  // short-circuit normal contents sizing if each column specifies a 'width' value\n  if (requiresActiveSizing) {\n    // if active sizing is required, update min width values to reflect actual widths\n    // performance note - this should be the only logic that requires DOM measurements\n    let forcedTotalNetWidth = 0;\n    let pendingTotalNetWidth = 0;\n    let totalPreferredNetWidth = 0;\n    let totalWorkingWeight = 0;\n    let totalRemainingWeight = 0;\n    const sampledNetWidths = sampledColumnNetWidthsRef.current;\n    const sampledMinNetWidthsArray = [];\n    const sampledWeightNetWidthsArray = [] as number[];\n    const appliedColumnNetWidthsArray = [];\n    if (sampledNetWidths != null) {\n      for (let i = 0; i < columnsArray.length; i++) {\n        sampledMinNetWidthsArray.push(sampledNetWidths.minWidths[columnsArray[i].key]);\n        sampledWeightNetWidthsArray.push(sampledNetWidths.weightWidths[columnsArray[i].key]);\n      }\n    } else {\n      sampledColumnNetWidthsRef.current = {\n        minWidths: {} as ColumnWidths<C>,\n        weightWidths: {} as ColumnWidths<C>\n      };\n      // when sampledColumnNetWidths are not populated, table has 'max-content' width applied,\n      // which allows for measurements to represent the column weights\n      for (let i = 0; i < headerElements.length; i++) {\n        const sampledWeightNetWidth =\n          (headerElements[i] as HTMLElement).getBoundingClientRect().width -\n          columnBorderEdges[i].width;\n        sampledWeightNetWidthsArray.push(sampledWeightNetWidth);\n        sampledColumnNetWidthsRef.current.weightWidths[columnsArray[i].key] = sampledWeightNetWidth;\n      }\n      // specify 'min-content' width, allowing measurements to represent minimum auto-resizable column widths\n      innerTableElement.style.width = 'min-content';\n      for (let i = 0; i < headerElements.length; i++) {\n        const sampledMinNetWidth =\n          (headerElements[i] as HTMLElement).getBoundingClientRect().width -\n          columnBorderEdges[i].width;\n        sampledMinNetWidthsArray.push(sampledMinNetWidth);\n        sampledColumnNetWidthsRef.current.minWidths[columnsArray[i].key] = sampledMinNetWidth;\n      }\n    }\n\n    for (let i = 0; i < sampledMinNetWidthsArray.length; i++) {\n      const forcedWidth = forcedColumnNetWidthsArray[i];\n      if (forcedWidth == null) {\n        let columnNetWidth;\n        const sampledMinNetWidth = sampledMinNetWidthsArray[i];\n        const minWidth = columnMinWidthsArray[i];\n        const maxWidth = columnMaxWidthsArray[i];\n        if (minWidth != null && minWidth >= sampledMinNetWidth) {\n          columnNetWidth = minWidth;\n        } else if (maxWidth != null && sampledMinNetWidth >= maxWidth) {\n          columnNetWidth = maxWidth;\n        } else {\n          columnNetWidth = sampledMinNetWidth;\n        }\n        pendingTotalNetWidth += columnNetWidth;\n        // replace sampled weight with min width if needed\n        const columnWeight =\n          minWidth != null && minWidth >= sampledWeightNetWidthsArray[i]\n            ? minWidth\n            : sampledWeightNetWidthsArray[i];\n        sampledWeightNetWidthsArray[i] = columnWeight;\n        totalPreferredNetWidth +=\n          maxWidth != null && maxWidth <= columnWeight ? maxWidth : columnWeight;\n        totalWorkingWeight += columnWeight;\n        totalRemainingWeight += columnWeight - columnNetWidth;\n        // newColumnWidthsArray already has content, so update in place rather than 'push'\n        newColumnNetWidthsArray[i] = columnNetWidth;\n        appliedColumnNetWidthsArray.push(columnNetWidth);\n      } else {\n        forcedTotalNetWidth += forcedWidth;\n        pendingTotalNetWidth += forcedWidth;\n        totalPreferredNetWidth += forcedWidth;\n        appliedColumnNetWidthsArray.push(forcedWidth);\n      }\n    }\n    // special case for initial rendering where we don't know if overall width is constrained\n    if (availableNetWidth === -1) {\n      availableNetWidth = totalPreferredNetWidth;\n    }\n    if (pendingTotalNetWidth < availableNetWidth) {\n      _enforceContentsMinMaxRules(\n        columnsArray,\n        availableNetWidth,\n        totalPreferredNetWidth,\n        totalRemainingWeight,\n        totalWorkingWeight,\n        pendingTotalNetWidth,\n        forcedTotalNetWidth,\n        forcedColumnNetWidthsArray,\n        sampledWeightNetWidthsArray,\n        columnMaxWidthsArray,\n        newColumnNetWidthsArray,\n        appliedColumnNetWidthsArray\n      );\n    }\n  }\n  return newColumnNetWidthsArray;\n}\n\n/**\n * Helper function to enforce all of the layout sizing rules on the Table's columns.\n */\nfunction _enforceContentsMinMaxRules<K, D, C>(\n  columnsArray: TableColumn<K, D, C>[],\n  availableWidth: number,\n  totalPreferredWidth: number,\n  totalRemainingWeight: number,\n  totalWorkingWeight: number,\n  appliedPendingTotalWidth: number,\n  forcedTotalWidth: number,\n  forcedColumnWidthsArray: (number | undefined)[],\n  columnWeightsArray: number[],\n  columnMaxWidthsArray: (number | undefined)[],\n  newColumnWidthsArray: number[],\n  appliedColumnWidthsArray: number[]\n) {\n  // try and honor the weights of each column combined with the min widths, and then check that against\n  // any max widths once completed. if the final result doesn't fill the space AND at least 1 max width\n  // rule was enforced, repeat the process until no max rules are enforced OR the space is filled.\n  let isMaxRuleApplied = true;\n  while (isMaxRuleApplied) {\n    isMaxRuleApplied = false;\n    if (totalPreferredWidth > availableWidth) {\n      _enforceConstrainedWeightRules(\n        columnsArray,\n        availableWidth - appliedPendingTotalWidth,\n        totalRemainingWeight,\n        columnWeightsArray,\n        forcedColumnWidthsArray,\n        newColumnWidthsArray,\n        appliedColumnWidthsArray\n      );\n    } else {\n      _enforceWeightedMinRules(\n        columnsArray,\n        availableWidth,\n        totalWorkingWeight,\n        forcedTotalWidth,\n        forcedColumnWidthsArray,\n        columnWeightsArray,\n        newColumnWidthsArray,\n        appliedColumnWidthsArray\n      );\n    }\n\n    let pendingTotalWidth = 0;\n    for (let i = 0; i < columnsArray.length; i++) {\n      if (forcedColumnWidthsArray[i] == null) {\n        const maxWidth = columnMaxWidthsArray[i];\n        if (maxWidth != null && newColumnWidthsArray[i] > maxWidth) {\n          isMaxRuleApplied = true;\n          forcedColumnWidthsArray[i] = maxWidth;\n          forcedTotalWidth += maxWidth;\n          appliedPendingTotalWidth += maxWidth - appliedColumnWidthsArray[i];\n          totalWorkingWeight -= columnWeightsArray[i];\n          newColumnWidthsArray[i] = maxWidth;\n          appliedColumnWidthsArray[i] = maxWidth;\n        }\n      }\n      pendingTotalWidth += newColumnWidthsArray[i];\n    }\n    isMaxRuleApplied = isMaxRuleApplied && pendingTotalWidth < availableWidth;\n  }\n}\n\n/**\n * Helper function to enforce constrained weights / min width rules on the Table's columns.\n */\nfunction _enforceConstrainedWeightRules<K, D, C>(\n  columnsArray: TableColumn<K, D, C>[],\n  initialExtraWidth: number,\n  totalRemainingWeight: number,\n  columnWeightsArray: number[],\n  forcedColumnWidthsArray: (number | undefined)[],\n  newColumnWidthsArray: number[],\n  appliedColumnWidthsArray: number[]\n) {\n  if (initialExtraWidth > 0) {\n    let availableWidth = initialExtraWidth;\n    let currentWeightTotal = totalRemainingWeight;\n    for (let i = 0; i < columnsArray.length; i++) {\n      if (currentWeightTotal > 0 && forcedColumnWidthsArray[i] == null) {\n        const currentWeight = columnWeightsArray[i] - appliedColumnWidthsArray[i];\n        const weightWidth = (currentWeight / currentWeightTotal) * availableWidth;\n        newColumnWidthsArray[i] = weightWidth + appliedColumnWidthsArray[i];\n        availableWidth -= weightWidth;\n        currentWeightTotal -= currentWeight;\n      }\n    }\n  }\n}\n\n/**\n * Helper function to enforce the weights / min width rules on the Table's columns.\n */\nfunction _enforceWeightedMinRules<K, D, C>(\n  columnsArray: TableColumn<K, D, C>[],\n  availableWidth: number,\n  totalWeight: number,\n  forcedTotalWidth: number,\n  forcedColumnWidthsArray: (number | undefined)[],\n  columnWeightsArray: number[],\n  newColumnWidthsArray: number[],\n  appliedColumnWidthsArray: number[]\n) {\n  const pendingForcedColumnWidths = [] as (number | undefined)[];\n  let isMinRuleApplied = true;\n  while (isMinRuleApplied) {\n    isMinRuleApplied = false;\n    let currentWeightTotal = totalWeight;\n    let widthDiff = availableWidth - forcedTotalWidth;\n    if (widthDiff > 0) {\n      for (let i = 0; i < columnsArray.length; i++) {\n        if (\n          currentWeightTotal > 0 &&\n          forcedColumnWidthsArray[i] == null &&\n          pendingForcedColumnWidths[i] == null\n        ) {\n          const currentWeight = columnWeightsArray[i];\n          const newWidth = (currentWeight / currentWeightTotal) * widthDiff;\n\n          // if calculated width breaks min width requirement, force min width as needed\n          const minWidth = appliedColumnWidthsArray[i];\n          if (newWidth < minWidth) {\n            // the preferred weighted size conflicts with the min size, so set pending to min size\n            pendingForcedColumnWidths[i] = minWidth;\n            forcedTotalWidth += minWidth;\n            newColumnWidthsArray[i] = minWidth;\n            isMinRuleApplied = true;\n            totalWeight -= currentWeight;\n            break;\n          }\n          newColumnWidthsArray[i] = newWidth;\n          widthDiff -= newWidth;\n          currentWeightTotal -= currentWeight;\n        }\n      }\n    }\n  }\n}\n\n/**\n * Helper function to create a ColumnWidths object from a TableColumn array and a widths array.\n */\nfunction _createColumnWidths<K, D, C extends string>(\n  columnsArray: TableColumn<K, D, C>[],\n  netWidthsArray: number[],\n  realWidthsArray: number[],\n  borderEdges: BorderEdges,\n  borderOffset: number,\n  totalBorderOffset: number\n) {\n  const logicalWidthsArray: number[] = [];\n  const columnWidths = {} as ColumnWidths<C>;\n  for (let i = 0; i < columnsArray.length; i++) {\n    columnWidths[columnsArray[i].key] = netWidthsArray[i];\n    logicalWidthsArray.push(netWidthsArray[i] + borderEdges[i].offset);\n  }\n  return {\n    netColumnWidths: columnWidths,\n    fullColumnWidths: logicalWidthsArray,\n    realColumnWidths: realWidthsArray,\n    borderEdges,\n    borderOffset,\n    totalBorderOffset\n  };\n}\n\n/**\n * Helper method to apply the given sizing object to the currently rendered Table\n * and column elements.\n */\nfunction _updateTableSizing(\n  innerTableElement: HTMLTableElement,\n  tableCols: NodeListOf<HTMLTableColElement>,\n  realWidthsArray: number[],\n  totalRealWidth: number\n) {\n  for (let i = 0; i < tableCols.length; i++) {\n    const tableCol = tableCols[i];\n    tableCol.style.width = `${realWidthsArray[i]}px`;\n  }\n  innerTableElement.style.width = `${totalRealWidth}px`;\n  innerTableElement.style.tableLayout = 'fixed';\n}\n\n/**\n * Helper function to compare two ColumnWidths instances for equality.\n */\nexport const columnWidthsComparator = <C extends string>(\n  columnWidths1: ColumnWidths<C>,\n  columnWidths2: ColumnWidths<C>\n) => {\n  const keys1 = Object.keys(columnWidths1);\n  const keys2 = Object.keys(columnWidths2);\n  if (keys1.length === keys2.length) {\n    for (const key of keys1) {\n      const columnKey = key as C;\n      if (columnWidths1[columnKey] !== columnWidths2[columnKey]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { createRef, Ref, RefObject } from 'preact';\nimport {\n  useCallback,\n  useImperativeHandle,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'preact/hooks';\nimport { useAddBusyState } from '../../hooks/PRIVATE_useAddBusyState';\nimport { useResizeObserver } from '../../hooks/UNSAFE_useResizeObserver';\nimport { UnsafeDomHandle, UNSAFE_DOM_ACCESS } from '../../utils/UNSAFE_unsafeDomAccess';\nimport { Column, Columns, ColumnWidths, TableViewportConfig } from '../../UNSAFE_TableView';\nimport {\n  AppliedColumnWidths,\n  BorderEdges,\n  SampledWidths,\n  SizingInfo,\n  StickyColumnInfo,\n  TableData\n} from '../Table';\nimport { applyLayoutColumnWidths, columnWidthsComparator } from '../utils/TableLayoutUtils';\nimport {\n  applyOverflowStatus,\n  applyUnderflowStatus,\n  getStickyColumnIndicies,\n  getViewportConfig,\n  updateStickyColumns,\n  updateStickyEdges\n} from '../utils/TableScrollUtils';\n\ntype UseSizingManagerProps<K, D, C extends string> = {\n  rootRef: RefObject<HTMLDivElement>;\n  innerTableRef: RefObject<HTMLTableElement>;\n  tableId: string;\n  tableData: TableData<K, D>[];\n  viewportConfig?: TableViewportConfig;\n  externalScrollerRef?: Ref<UnsafeDomHandle>;\n  layout?: 'contents' | 'fixed' | 'pending';\n  columns: Columns<K, D, C>;\n  columnOrder?: C[];\n  columnWidths?: ColumnWidths<C>;\n  isRtl: boolean;\n  isHighContrast: boolean;\n};\n\n/**\n * Hook that manages column sizing on the Preact Table\n */\nexport function useSizingManager<K extends string | number, D, C extends string>({\n  rootRef,\n  innerTableRef,\n  tableId,\n  tableData,\n  viewportConfig,\n  externalScrollerRef,\n  layout,\n  columns,\n  columnOrder,\n  columnWidths,\n  isRtl,\n  isHighContrast\n}: UseSizingManagerProps<K, D, C>) {\n  // scrollerRef is callback-based to meet useResizeObserver hook's state management requirements\n  const [scrollerRef, setScrollerRef] = useState(createRef<HTMLElement>());\n  const scrollerRefCallback = useCallback((node: HTMLDivElement | null) => {\n    setScrollerRef({ current: node });\n  }, []);\n\n  useImperativeHandle(\n    externalScrollerRef!,\n    () => {\n      if (viewportConfig?.scroller != null) {\n        return { [UNSAFE_DOM_ACCESS]: viewportConfig.scroller().current! };\n      }\n      return { [UNSAFE_DOM_ACCESS]: scrollerRef.current! };\n    },\n    [scrollerRef, viewportConfig]\n  );\n\n  // setup busy start and busy end callbacks for the 2 resize observer regions\n  const { onBusyStart: onResizeScrollerBusyStart, onBusyEnd: onResizeScrollerBusyEnd } =\n    useAddBusyState('handling scroller resize');\n  const { onBusyStart: onResizeTableBusyStart, onBusyEnd: onResizeTableBusyEnd } =\n    useAddBusyState('handling table resize');\n\n  // state to force a rerender following the initial render where scrollbars are forced\n  const [_isScrollbarSizeKnown, setIsScrollbarSizeKnown] = useState<boolean>(false);\n\n  // column width state information\n  const sampledColumnNetWidthsRef = useRef<SampledWidths<C>>();\n  const [appliedColumnWidths, setAppliedColumnWidths] = useState<\n    AppliedColumnWidths<C> | undefined\n  >();\n\n  const [innerTableHeight, setInnerTableHeight] = useState<number | undefined>();\n  const [hasVerticalUnderflow, setHasVerticalUnderflow] = useState<boolean>(false);\n\n  // general table sizing state information\n  const sizingInfoRef = useRef<SizingInfo>({\n    isInitialRender: true,\n    isScrollbarSizeKnown: false\n  });\n  const pendingResizeEntriesRef = useRef<{\n    scroller?: ResizeObserverEntry | undefined;\n    innerTable?: ResizeObserverEntry | undefined;\n  }>({});\n\n  // scrollbar overflow state\n  const overflowRef = useRef<{ isHorizontal: boolean; isVertical: boolean }>({\n    isHorizontal: false,\n    isVertical: false\n  });\n\n  // sticky edge state management\n  const [stickyEdgesState, setStickyEdgesState] = useState<{ start?: number; end?: number }>({});\n\n  // current viewport information\n  const viewportInfo = useMemo(() => {\n    const tableViewportConfig = getViewportConfig(scrollerRef, viewportConfig);\n    return {\n      isExternalScroller: viewportConfig?.scroller() != null,\n      viewportConfig: tableViewportConfig\n    };\n  }, [scrollerRef, viewportConfig]);\n\n  // memoize realized columns array on 'columns' and 'columnOrder'\n  const columnsArray = useMemo(() => {\n    const newColumnsArray = [];\n    if (columnOrder != null) {\n      for (const key of columnOrder) {\n        if (columns[key] != null) {\n          newColumnsArray.push({\n            key: key,\n            value: columns[key]\n          });\n        }\n      }\n    } else {\n      for (const [key, value] of Object.entries(columns)) {\n        newColumnsArray.push({\n          key: key as C,\n          value: value as Column<K, D, C>\n        });\n      }\n    }\n    return newColumnsArray;\n  }, [columnOrder, columns]);\n\n  const stickyColumnInfo: StickyColumnInfo = useMemo(() => {\n    const stickyColumns = getStickyColumnIndicies(columnsArray);\n\n    let firstStickyColumnIndex: number | undefined;\n    let finalStickyColumnIndex: number | undefined;\n    const stickyColumnsCount = stickyColumns.length;\n    if (stickyColumns.length > 0) {\n      firstStickyColumnIndex = stickyColumns[0];\n      finalStickyColumnIndex = stickyColumns[stickyColumnsCount - 1];\n    }\n    return { stickyColumns, firstStickyColumnIndex, finalStickyColumnIndex };\n  }, [columnsArray]);\n\n  const borderOffset = isHighContrast ? 3 : 1;\n  const columnBorderEdges: BorderEdges = useMemo(() => {\n    const newColumnBorderEdges: BorderEdges = [];\n    let isPreviousColumnHasEnd = false;\n    for (let i = 0; i < columnsArray.length; i++) {\n      const hasStart = !isPreviousColumnHasEnd;\n      const isLastColumn = i === columnsArray.length - 1;\n      const isColumnSticky = stickyColumnInfo.stickyColumns.includes(i);\n      const isLastStickyColumn = isColumnSticky && stickyColumnInfo.finalStickyColumnIndex === i;\n      const hasEnd = isLastColumn || isLastStickyColumn || stickyEdgesState?.start === i;\n      const width = (hasStart ? borderOffset : 0) + (hasEnd ? borderOffset : 0);\n      let offset;\n      if (\n        isLastStickyColumn ||\n        (isLastColumn && stickyColumnInfo.finalStickyColumnIndex !== i - 1)\n      ) {\n        offset = 2 * borderOffset;\n      } else {\n        offset =\n          !isLastColumn && stickyColumnInfo.finalStickyColumnIndex === i - 1 ? 0 : borderOffset;\n      }\n      newColumnBorderEdges.push({ hasStart, hasEnd, width, offset });\n      isPreviousColumnHasEnd = hasEnd;\n    }\n    return newColumnBorderEdges;\n  }, [borderOffset, columnsArray, stickyEdgesState, stickyColumnInfo]);\n\n  // determine if a new layout is required\n  let isLayoutRequired = false;\n  const netWidthsArray = [];\n  if (appliedColumnWidths != null) {\n    for (let i = 0; i < columnsArray.length; i++) {\n      const key = columnsArray[i].key;\n      const netWidth = appliedColumnWidths.netColumnWidths[key];\n      const staticWidth = columnWidths != null ? columnWidths[key] : undefined;\n      if (netWidth == null || (staticWidth != null && staticWidth !== netWidth)) {\n        isLayoutRequired = true;\n        break;\n      }\n      netWidthsArray.push(netWidth);\n    }\n  } else {\n    isLayoutRequired = true;\n  }\n\n  // ensure sampled column sizes are cleared if 'columns', 'columnOrder', or 'layout' is updated\n  useLayoutEffect(() => {\n    sampledColumnNetWidthsRef.current = undefined;\n    setAppliedColumnWidths(undefined);\n  }, [columns, columnOrder, layout]);\n\n  // ensure applied column widths are cleared if 'columnWidths' is updated\n  useLayoutEffect(() => {\n    setAppliedColumnWidths(undefined);\n  }, [columnWidths, stickyEdgesState]);\n\n  // setup sizing calculation updates for subsequent renders\n  useLayoutEffect(() => {\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    const innerTableElement = innerTableRef.current;\n    if (\n      layout !== 'pending' &&\n      scrollerElement != null &&\n      innerTableElement != null &&\n      !sizingInfoRef.current.isInitialRender &&\n      (viewportInfo.isExternalScroller || sizingInfoRef.current.isScrollbarSizeKnown) &&\n      isLayoutRequired &&\n      columnsArray.length > 0\n    ) {\n      let widthOffset = 0;\n      if (viewportInfo.isExternalScroller) {\n        const scrollerOffsetStart = viewportInfo.viewportConfig.scrollerOffsetStart;\n        if (scrollerOffsetStart != null) {\n          widthOffset += scrollerOffsetStart;\n        }\n        const scrollerOffsetEnd = viewportInfo.viewportConfig.scrollerOffsetEnd;\n        if (scrollerOffsetEnd != null) {\n          widthOffset += scrollerOffsetEnd;\n        }\n      } else if (sizingInfoRef.current.isScrollbarSizeKnown) {\n        widthOffset = sizingInfoRef.current.defaultScrollbarWidth;\n      }\n      const totalWidth = layout === 'fixed' ? sizingInfoRef.current.contentWidth - widthOffset : -1;\n      const newColumnWidths = applyLayoutColumnWidths(\n        scrollerElement,\n        viewportInfo,\n        innerTableElement,\n        widthOffset,\n        tableId,\n        layout === 'fixed',\n        sampledColumnNetWidthsRef,\n        totalWidth,\n        columnsArray,\n        columnBorderEdges,\n        borderOffset,\n        columnWidths\n      );\n      setAppliedColumnWidths(newColumnWidths);\n    }\n  }, [\n    viewportInfo,\n    innerTableRef,\n    tableId,\n    columnsArray,\n    columnBorderEdges,\n    borderOffset,\n    columnWidths,\n    layout,\n    isLayoutRequired,\n    isHighContrast\n  ]);\n\n  useLayoutEffect(() => {\n    const rootElement = rootRef.current;\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    if (\n      layout !== 'pending' &&\n      rootElement != null &&\n      scrollerElement != null &&\n      appliedColumnWidths != null\n    ) {\n      updateStickyColumns(\n        rootElement,\n        scrollerElement,\n        viewportInfo,\n        tableId,\n        isRtl,\n        columnsArray,\n        stickyColumnInfo,\n        appliedColumnWidths.fullColumnWidths,\n        stickyEdgesState,\n        setStickyEdgesState,\n        viewportInfo.isExternalScroller || overflowRef.current.isHorizontal\n      );\n    }\n  }, [\n    tableData,\n    rootRef,\n    viewportInfo,\n    tableId,\n    appliedColumnWidths,\n    columnsArray,\n    stickyColumnInfo,\n    layout,\n    stickyEdgesState,\n    isRtl\n  ]);\n\n  // helper method to update the sticky edge styling due to resize events\n  const _updateStickyEdgesFromResize = useCallback(\n    (scrollerElement: HTMLElement) => {\n      if (appliedColumnWidths != null) {\n        if (viewportInfo.isExternalScroller || overflowRef.current.isHorizontal) {\n          // ensure sticky edges are applied correctly if horizontal overflow is present\n          updateStickyEdges(\n            scrollerElement,\n            columnsArray,\n            stickyColumnInfo,\n            appliedColumnWidths.fullColumnWidths,\n            stickyEdgesState,\n            setStickyEdgesState\n          );\n        } else if (stickyEdgesState.start != null || stickyEdgesState.end != null) {\n          // otherwise clear sticky edges if necessary\n          setStickyEdgesState({});\n        }\n      }\n    },\n    [appliedColumnWidths, columnsArray, stickyColumnInfo, stickyEdgesState, viewportInfo]\n  );\n\n  // callback function to handle resizes of the scroller and inner table elements\n  const handleResizeCallback = useCallback(() => {\n    let currentEntry = pendingResizeEntriesRef.current.scroller;\n    const rootElement = rootRef.current;\n    const scrollerElement = viewportInfo.viewportConfig.scroller().current;\n    const innerTableElement = innerTableRef.current;\n    let isOveralSizeHandled = false;\n\n    // handle scroller element resize notification\n    if (\n      currentEntry != null &&\n      rootElement != null &&\n      scrollerElement != null &&\n      innerTableElement != null\n    ) {\n      const newContentWidth = currentEntry.contentBoxSize[0].inlineSize;\n      const newContentHeight = currentEntry.contentBoxSize[0].blockSize;\n      const newBoxWidth = currentEntry.borderBoxSize[0].inlineSize;\n      const newBoxHeight = currentEntry.borderBoxSize[0].blockSize;\n\n      if (newBoxWidth !== 0 || newBoxHeight !== 0) {\n        isOveralSizeHandled = true;\n        let availableWidth;\n        let availableWidthOffset = 0;\n        let defaultScrollbarWidth = 0;\n        if (viewportInfo.isExternalScroller) {\n          const scrollerOffsetStart = viewportInfo.viewportConfig.scrollerOffsetStart;\n          if (scrollerOffsetStart != null) {\n            availableWidthOffset += scrollerOffsetStart;\n          }\n          const scrollerOffsetEnd = viewportInfo.viewportConfig.scrollerOffsetEnd;\n          if (scrollerOffsetEnd != null) {\n            availableWidthOffset += scrollerOffsetEnd;\n          }\n          if (sizingInfoRef.current.isScrollbarSizeKnown) {\n            sizingInfoRef.current = {\n              isInitialRender: false,\n              contentWidth: newContentWidth,\n              boxWidth: newBoxWidth,\n              contentHeight: newContentHeight,\n              boxHeight: newBoxHeight,\n              isScrollbarSizeKnown: true,\n              defaultScrollbarWidth: sizingInfoRef.current.defaultScrollbarWidth,\n              defaultScrollbarHeight: sizingInfoRef.current.defaultScrollbarHeight\n            };\n          } else {\n            sizingInfoRef.current = {\n              isInitialRender: false,\n              contentWidth: newContentWidth,\n              boxWidth: newBoxWidth,\n              contentHeight: newContentHeight,\n              boxHeight: newBoxHeight,\n              isScrollbarSizeKnown: false\n            };\n          }\n          availableWidth = newContentWidth - availableWidthOffset;\n        } else {\n          const isInitialRender = sizingInfoRef.current.isInitialRender;\n          if (sizingInfoRef.current.isScrollbarSizeKnown) {\n            availableWidthOffset = sizingInfoRef.current.defaultScrollbarWidth;\n            sizingInfoRef.current = {\n              isInitialRender: false,\n              contentWidth: newContentWidth,\n              boxWidth: newBoxWidth,\n              contentHeight: newContentHeight,\n              boxHeight: newBoxHeight,\n              isScrollbarSizeKnown: true,\n              defaultScrollbarWidth: sizingInfoRef.current.defaultScrollbarWidth,\n              defaultScrollbarHeight: sizingInfoRef.current.defaultScrollbarHeight\n            };\n          } else {\n            // on the first render that does not specify an external scroller, horizontal and\n            // vertical scrollbars are forced in order to determine default browser sizes\n            availableWidthOffset = newBoxWidth - newContentWidth;\n            sizingInfoRef.current = {\n              isInitialRender: false,\n              contentWidth: newContentWidth,\n              boxWidth: newBoxWidth,\n              contentHeight: newContentHeight,\n              boxHeight: newBoxHeight,\n              isScrollbarSizeKnown: true,\n              defaultScrollbarWidth: availableWidthOffset,\n              defaultScrollbarHeight: newBoxHeight - newContentHeight\n            };\n            setIsScrollbarSizeKnown(true);\n          }\n          defaultScrollbarWidth = sizingInfoRef.current.defaultScrollbarWidth;\n          availableWidth = !isInitialRender || layout === 'fixed' ? newContentWidth : -1;\n        }\n        if (columnsArray.length > 0) {\n          let newColumnWidths;\n          if (layout !== 'pending') {\n            newColumnWidths = applyLayoutColumnWidths(\n              scrollerElement,\n              viewportInfo,\n              innerTableElement,\n              availableWidthOffset,\n              tableId,\n              layout === 'fixed',\n              sampledColumnNetWidthsRef,\n              availableWidth,\n              columnsArray,\n              columnBorderEdges,\n              borderOffset,\n              columnWidths\n            );\n            if (\n              appliedColumnWidths == null ||\n              !columnWidthsComparator(\n                appliedColumnWidths.netColumnWidths,\n                newColumnWidths.netColumnWidths\n              )\n            ) {\n              setAppliedColumnWidths(newColumnWidths);\n            } else {\n              newColumnWidths = undefined;\n            }\n          }\n          // ensure scrollbars are applied correctly - a scrollbar could be needed\n          if (viewportInfo.isExternalScroller) {\n            applyUnderflowStatus(rootElement, tableId, setHasVerticalUnderflow);\n          } else {\n            const innerTableRect = innerTableElement.getBoundingClientRect();\n            applyOverflowStatus(\n              rootElement,\n              scrollerElement,\n              tableId,\n              innerTableRect.width,\n              newContentWidth,\n              innerTableRect.height,\n              newContentHeight,\n              defaultScrollbarWidth,\n              overflowRef,\n              setHasVerticalUnderflow\n            );\n          }\n          if (layout !== 'pending') {\n            if (newColumnWidths != null) {\n              updateStickyColumns(\n                rootElement,\n                scrollerElement,\n                viewportInfo,\n                tableId,\n                isRtl,\n                columnsArray,\n                stickyColumnInfo,\n                newColumnWidths.fullColumnWidths,\n                stickyEdgesState,\n                setStickyEdgesState,\n                viewportInfo.isExternalScroller || overflowRef.current.isHorizontal\n              );\n            } else {\n              _updateStickyEdgesFromResize(scrollerElement);\n            }\n          }\n        }\n      }\n    }\n    currentEntry = pendingResizeEntriesRef.current.innerTable;\n    if (currentEntry != null) {\n      const newBoxWidth = currentEntry.borderBoxSize[0].inlineSize;\n      const newBoxHeight = currentEntry.borderBoxSize[0].blockSize;\n      // if only an inner table resize occurred, ensure scrollbars are applied correctly\n      if (\n        !isOveralSizeHandled &&\n        rootElement != null &&\n        scrollerElement != null &&\n        columnsArray.length > 0 &&\n        (newBoxWidth !== 0 || newBoxHeight !== 0)\n      ) {\n        if (viewportInfo.isExternalScroller) {\n          applyUnderflowStatus(rootElement, tableId, setHasVerticalUnderflow);\n        } else if (sizingInfoRef.current.isScrollbarSizeKnown) {\n          applyOverflowStatus(\n            rootElement,\n            scrollerElement,\n            tableId,\n            newBoxWidth,\n            sizingInfoRef.current.contentWidth,\n            newBoxHeight,\n            sizingInfoRef.current.contentHeight,\n            sizingInfoRef.current.defaultScrollbarWidth,\n            overflowRef,\n            setHasVerticalUnderflow\n          );\n        }\n        if (layout !== 'pending') {\n          _updateStickyEdgesFromResize(scrollerElement);\n        }\n      }\n      setInnerTableHeight(newBoxHeight);\n    }\n    pendingResizeEntriesRef.current = {};\n  }, [\n    rootRef,\n    viewportInfo,\n    innerTableRef,\n    tableId,\n    layout,\n    columnsArray,\n    stickyColumnInfo,\n    columnBorderEdges,\n    borderOffset,\n    columnWidths,\n    appliedColumnWidths,\n    stickyEdgesState,\n    isRtl,\n    _updateStickyEdgesFromResize\n  ]);\n\n  // ensure resize observers have access to the latest state information\n  const handleResizeCallbackRef = useRef<() => void>(handleResizeCallback);\n  handleResizeCallbackRef.current = handleResizeCallback;\n\n  // resize observer callback functions are static to avoid hook re-subscribing each render\n  const staticHandleScrollerResize = useCallback(\n    (entry: ResizeObserverEntry) => {\n      // only queue up an animation frame if there isn't one already pending\n      if (\n        pendingResizeEntriesRef.current.scroller == null ||\n        pendingResizeEntriesRef.current.innerTable == null\n      ) {\n        onResizeScrollerBusyStart();\n        window.requestAnimationFrame(() => {\n          handleResizeCallbackRef.current();\n          onResizeScrollerBusyEnd();\n        });\n      }\n      pendingResizeEntriesRef.current.scroller = entry;\n    },\n    [onResizeScrollerBusyStart, onResizeScrollerBusyEnd]\n  );\n  const staticHandleInnerTableResize = useCallback(\n    (entry: ResizeObserverEntry) => {\n      // only queue up an animation frame if there isn't one already pending\n      if (\n        pendingResizeEntriesRef.current.scroller == null ||\n        pendingResizeEntriesRef.current.innerTable == null\n      ) {\n        onResizeTableBusyStart();\n        window.requestAnimationFrame(() => {\n          handleResizeCallbackRef.current();\n          onResizeTableBusyEnd();\n        });\n      }\n      pendingResizeEntriesRef.current.innerTable = entry;\n    },\n    [onResizeTableBusyStart, onResizeTableBusyEnd]\n  );\n  useResizeObserver(viewportInfo.viewportConfig.scroller(), staticHandleScrollerResize);\n  useResizeObserver(innerTableRef, staticHandleInnerTableResize);\n\n  return {\n    columnBorderEdges,\n    isLayoutRequired,\n    viewportInfo,\n    columnsArray,\n    appliedColumnWidths,\n    sizingInfoRef,\n    innerTableHeight,\n    hasVerticalUnderflow,\n    stickyEdgesState,\n    setStickyEdgesState,\n    stickyColumnInfo,\n    overflowRef,\n    scrollerRefCallback\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { createRef } from 'preact';\nimport { useCallback, useRef, useState } from 'preact/hooks';\nimport { forwardRef, ForwardedRef } from 'preact/compat';\nimport { JSXInternal } from 'preact/src/jsx';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { TabbableModeContext } from '../hooks/UNSAFE_useTabbableMode';\nimport { useUser } from '../hooks/UNSAFE_useUser';\nimport { Cell, CellOverride, Column, ColumnWidths, TableViewportConfig } from '../UNSAFE_TableView';\nimport { TableColGroup } from './TableColGroup';\nimport { TableBody } from './TableBody';\nimport { TableHeader } from './TableHeader';\nimport { TableFooter } from './TableFooter';\nimport { TableDragIndicator } from './TableDragIndicator';\nimport { TableSkeletonRow } from './TableSkeletonRow';\nimport { TableContextMenu, TableResizeColumnDialog } from './TableContextMenu';\nimport { FocusTracker } from '../PRIVATE_FocusTracker';\nimport { Props, TableViewHandle } from '../UNSAFE_TableView';\nimport { useDataManager } from './hooks/useDataManager';\nimport { useInteractionManager } from './hooks/useInteractionManager';\nimport { useSizingManager } from './hooks/useSizingManager';\nimport { innerTableStyles, scrollerStyles } from './themes/Table.css';\nimport { tableSkeletonStyles, tableSkeletonStylesHC } from './themes/TableSkeletonStyles.css';\nimport { TableVariantOptions } from './themes/TableStyles.css';\nimport { TableRedwoodTheme } from './themes/redwood/TableTheme';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { useTestId } from '../hooks/UNSAFE_useTestId';\n\nexport type ActiveCell<K, C> =\n  | Cell<K, C>\n  | {\n      rowKey?: never;\n      columnKey: C;\n      type: 'loading';\n    }\n  | {\n      rowKey?: never;\n      columnKey: C;\n      type: 'loadMore';\n    }\n  | {\n      rowKey?: never;\n      columnKey?: never;\n      type: 'pending';\n    };\n\nexport type ActiveCellDetail<K, C> = {\n  value?: ActiveCell<K, C>;\n};\n\nexport type TableColumn<K, D, C> = {\n  key: C;\n  value: Column<K, D, C>;\n};\n\nexport type BorderEdges = {\n  hasStart: boolean;\n  hasEnd: boolean;\n  width: number;\n  offset: number;\n}[];\n\nexport type AppliedColumnWidths<C extends string> = {\n  netColumnWidths: ColumnWidths<C>;\n  fullColumnWidths: number[];\n  realColumnWidths: number[];\n  borderEdges: BorderEdges;\n  borderOffset: number;\n  totalBorderOffset: number;\n};\n\nexport type StickyColumnInfo = {\n  stickyColumns: number[];\n  firstStickyColumnIndex?: number;\n  finalStickyColumnIndex?: number;\n};\n\nexport type ColumnHeaderFooterInfo<C> = {\n  key: C;\n  isHeader: boolean;\n};\n\nexport type TableData<K, D> = {\n  data: D;\n  metadata: K;\n};\n\nexport type CurrencyStatus<K, D, C> = {\n  activeCell?: ActiveCell<K, C>;\n  currentCell?: Cell<K, C>;\n  currentCellOverride?: CellOverride<K, C>;\n  hasPendingCurrentCellOverride: boolean;\n  hasPendingCurrentCellOverrideScroll: boolean;\n  previousEmbeddedSelectCurrentCell?: Cell<K, C>;\n  loadMoreInitialData?: TableData<K, D>[];\n};\n\nexport type SampledWidths<C extends string> = {\n  minWidths: ColumnWidths<C>;\n  weightWidths: ColumnWidths<C>;\n};\n\nexport type ViewportInfo = {\n  isExternalScroller: boolean;\n  viewportConfig: TableViewportConfig;\n};\n\nexport type SizingInfo =\n  | {\n      isInitialRender: true;\n      boxWidth?: number;\n      contentWidth?: number;\n      boxHeight?: number;\n      contentHeight?: number;\n      isScrollbarSizeKnown: false;\n      defaultScrollbarWidth?: number;\n      defaultScrollbarHeight?: number;\n    }\n  | {\n      isInitialRender: false;\n      boxWidth: number;\n      contentWidth: number;\n      boxHeight: number;\n      contentHeight: number;\n      isScrollbarSizeKnown: true;\n      defaultScrollbarWidth: number;\n      defaultScrollbarHeight: number;\n    }\n  | {\n      isInitialRender: false;\n      boxWidth: number;\n      contentWidth: number;\n      boxHeight: number;\n      contentHeight: number;\n      isScrollbarSizeKnown: false;\n      defaultScrollbarWidth?: number;\n      defaultScrollbarHeight?: number;\n    };\n\nexport type ColumnResizeInfo<C> =\n  | {\n      isResizing: false;\n      isResizeHover: boolean;\n      key?: C;\n      startX?: never;\n      delta?: never;\n      ignoreClick: boolean;\n    }\n  | {\n      isResizing: true;\n      isResizeHover: boolean;\n      key: C;\n      startX: number;\n      delta: number;\n      ignoreClick: boolean;\n    };\n\nexport type ScrollDetail<K, C> = {\n  cell: ActiveCell<K, C> | Cell<K, C>;\n  locationX?: 'inView' | 'start' | 'end';\n  locationY?: 'inView' | 'top' | 'bottom';\n};\n\nconst _defaultSelected = {\n  row: { all: false, keys: new Set() },\n  column: { all: false, keys: new Set() }\n};\n\nconst _disabledHeaderFooterInteractionKeys: ('enter' | 'space')[] = ['enter'];\n\n/**\n * Component that renders data in a flat table.\n */\nexport const Table = forwardRef(function Table<K extends string | number, D, C extends string>(\n  {\n    'aria-label': ariaLabel,\n    'aria-labelledby': ariaLabelledBy,\n    getAccessibleRowHeaders,\n    columns,\n    columnOrder,\n    columnWidths,\n    contextMenuConfig,\n    viewportConfig,\n    layout = 'contents',\n    data,\n    getRowKey,\n    hasMore = false,\n    onLoadMore = () => {},\n    currentCellOverride,\n    onPersistCurrentCell,\n    currentRowVariant = 'none',\n    gridlines,\n    selectionMode,\n    selected = _defaultSelected as NonNullable<Props<K, D, C>['selected']>,\n    onSelectionChange,\n    onRowAction,\n    sortCriterion,\n    onSortCriterionChange,\n    horizontalScrollPositionOverride,\n    verticalScrollPositionOverride,\n    columnResizingIndicator,\n    onColumnResizing,\n    onColumnResize,\n    noDataRenderer,\n    scrollerRef,\n    testId\n  }: Props<K, D, C>,\n  ref?: ForwardedRef<TableViewHandle<K, C>>\n) {\n  const tableId = useId();\n  const testIdProps = useTestId(testId);\n\n  // rootRef is callback-based to meet useResizeObserver hook's state management requirements\n  const [rootRef, setRootRef] = useState(createRef<HTMLDivElement>());\n  const rootRefCallback = useCallback((node: HTMLDivElement | null) => {\n    setRootRef({ current: node });\n  }, []);\n  const innerTableRef = useRef<HTMLTableElement>(null);\n\n  const { direction, forcedColors } = useUser();\n  const isHighContrast = forcedColors === 'active';\n  const isRtl = direction === 'rtl';\n\n  const { tableData, onTableLoadMore } = useDataManager<K, D>({\n    data,\n    getRowKey,\n    hasMore,\n    onLoadMore\n  });\n\n  const {\n    columnBorderEdges,\n    isLayoutRequired,\n    viewportInfo,\n    columnsArray,\n    appliedColumnWidths,\n    sizingInfoRef,\n    innerTableHeight,\n    hasVerticalUnderflow,\n    stickyEdgesState,\n    setStickyEdgesState,\n    stickyColumnInfo,\n    overflowRef,\n    scrollerRefCallback\n  } = useSizingManager<K, D, C>({\n    rootRef,\n    innerTableRef,\n    tableId,\n    tableData,\n    viewportConfig,\n    externalScrollerRef: scrollerRef,\n    layout,\n    columns,\n    columnOrder,\n    columnWidths,\n    isRtl,\n    isHighContrast\n  });\n\n  const cellHasRenderer = useCallback(\n    (cell: ActiveCell<K, C>) => {\n      let hasRenderer = false;\n      if (cell.type === 'noData') {\n        hasRenderer = noDataRenderer != null;\n      } else if (cell.type !== 'loadMore' && cell.type !== 'loading' && cell.type !== 'pending') {\n        for (const column of columnsArray) {\n          if (column.key === cell.columnKey) {\n            if (cell.type === 'data') {\n              hasRenderer = column.value.renderer != null;\n            } else if (cell.type === 'header') {\n              hasRenderer = column.value.headerRenderer != null;\n            } else if (cell.type === 'footer') {\n              hasRenderer = column.value.footerRenderer != null;\n            }\n            break;\n          }\n        }\n      }\n      return hasRenderer;\n    },\n    [columnsArray, noDataRenderer]\n  );\n\n  const isPendingLayout = layout === 'pending';\n\n  // aria-rowcount includes header and footer rows\n  const hasFooters = columnsArray.some((column: TableColumn<K, D, C>) => {\n    return column.value.footerRenderer != null || column.value.footerText != null;\n  });\n  const ariaRowCount = hasMore || isPendingLayout ? -1 : tableData.length + (hasFooters ? 2 : 1);\n  const ariaColumnCount = Math.max(columnsArray.length, 1);\n\n  const {\n    interactionManagerProps,\n    scrollHandlingProps,\n    onTableSelectionChange,\n    isShowFocusRing,\n    isTabbableMode,\n    currentCell,\n    currentActiveCell,\n    resizeInfoRef,\n    onStartFocusTracking,\n    onFocusStartEdge,\n    onFocusEndEdge,\n    activeStyleColumnInfo,\n    hoverStyleColumnInfo,\n    tooltipContent,\n    contextMenuContext,\n    menuProps,\n    isResizeDialogOpen,\n    setIsResizeDialogOpen,\n    disabledRowInteractionKeys\n  } = useInteractionManager<K, D, C>({\n    rootRef,\n    viewportInfo,\n    ref,\n    tableId,\n    tableData,\n    hasMore,\n    hasFooters,\n    isRtl,\n    columnsArray,\n    stickyColumnInfo,\n    appliedColumnWidths,\n    isLayoutRequired,\n    sizingInfoRef,\n    stickyEdgesState,\n    setStickyEdgesState,\n    cellHasRenderer,\n    horizontalScrollPositionOverride,\n    verticalScrollPositionOverride,\n    onColumnResizing,\n    onColumnResize,\n    currentCellOverride,\n    onPersistCurrentCell,\n    selectionMode,\n    selected,\n    onSelectionChange,\n    onRowAction,\n    sortCriterion,\n    onSortCriterionChange,\n    isPendingLayout,\n    contextMenuConfig\n  });\n\n  // initialize base Table style classes\n  const { classes: themeClasses } = useComponentTheme<TableVariantOptions>(TableRedwoodTheme, {\n    pendingLayout: isPendingLayout ? 'isPendingLayout' : 'notPendingLayout',\n    showFocusRing: isShowFocusRing ? 'isShowFocusRing' : 'notShowFocusRing',\n    externalScroller: viewportInfo.isExternalScroller ? 'isExternalScroller' : 'notExternalScroller'\n  });\n\n  let scrollerStyle;\n  let scrollerPadding = '';\n  const scrollerClassArray = [scrollerStyles.base];\n  if (viewportInfo.isExternalScroller) {\n    scrollerClassArray.push(scrollerStyles.externalScroller);\n  } else if (!sizingInfoRef.current.isScrollbarSizeKnown) {\n    scrollerClassArray.push(scrollerStyles.forceScroll);\n  } else {\n    if (overflowRef.current.isHorizontal) {\n      scrollerClassArray.push(scrollerStyles.horizontalScroll);\n    } else {\n      scrollerClassArray.push(scrollerStyles.noHorizontalScroll);\n    }\n    if (overflowRef.current.isVertical) {\n      scrollerClassArray.push(scrollerStyles.verticalScroll);\n    } else {\n      scrollerClassArray.push(scrollerStyles.noVerticalScroll);\n      scrollerPadding = `padding-inline-end: ${sizingInfoRef.current.defaultScrollbarWidth}px;`;\n    }\n  }\n  // hide the table contents when layout is required and otherwise valid\n  if (isLayoutRequired && columnsArray.length > 0) {\n    scrollerStyle = `${scrollerPadding}opacity:0.001;`;\n  } else {\n    scrollerStyle = scrollerPadding;\n  }\n\n  const scrollerClasses = classNames(scrollerClassArray);\n\n  const classes = classNames([themeClasses]);\n  const tableClasses = classNames([innerTableStyles.base]);\n\n  const startStickyEdge = stickyEdgesState.start;\n  const endStickyEdge = stickyEdgesState.end;\n\n  const hasVerticalGridlines = gridlines?.vertical === 'visible';\n  const hasHorizontalGridlines = gridlines?.horizontal !== 'hidden';\n\n  const isRowSelectionEnabled =\n    selectionMode?.row === 'single' ||\n    selectionMode?.row === 'multiple' ||\n    selectionMode?.row === 'multipleToggle';\n  const isColumnSelectionEnabled =\n    selectionMode?.column === 'single' || selectionMode?.column === 'multiple';\n  const supportsMultipleSelection =\n    selectionMode?.column === 'multiple' ||\n    selectionMode?.row === 'multiple' ||\n    selectionMode?.row === 'multipleToggle';\n\n  const getTableBodyProps = () => {\n    return {\n      rootRef: rootRef,\n      viewportInfo: viewportInfo,\n      tableId: tableId,\n      isValidRender: columnsArray.length > 0,\n      tableData: tableData,\n      columnsArray: columnsArray,\n      getAccessibleRowHeaders: getAccessibleRowHeaders,\n      hasVerticalGridlines: hasVerticalGridlines,\n      hasHorizontalGridlines: hasHorizontalGridlines,\n      hasFooters: hasFooters,\n      hasVerticalUnderflow: hasVerticalUnderflow,\n      selected: selected,\n      isRowSelectionEnabled: isRowSelectionEnabled,\n      isSingleRowSelectionEnabled: selectionMode?.row === 'single',\n      activeCell: currentActiveCell,\n      currentRowKey: currentCell?.type === 'data' ? currentCell.rowKey : undefined,\n      currentRowVariant: currentRowVariant,\n      isShowFocusRing: isShowFocusRing,\n      isTabbableMode: isTabbableMode,\n      hasMore: hasMore,\n      onLoadMore: onTableLoadMore,\n      noDataRenderer: noDataRenderer,\n      disabledInteractionKeys: disabledRowInteractionKeys,\n      onSelectionChange: onTableSelectionChange,\n      startStickyEdge: startStickyEdge,\n      endStickyEdge: endStickyEdge,\n      firstStickyColumnIndex: stickyColumnInfo.firstStickyColumnIndex,\n      finalStickyColumnIndex: stickyColumnInfo.finalStickyColumnIndex,\n      columnBorderEdges: columnBorderEdges,\n      isRtl: isRtl,\n      isHighContrast: isHighContrast\n    };\n  };\n\n  const getTableColGroupProps = () => {\n    let columnWidthsArray;\n    if (!isLayoutRequired && appliedColumnWidths?.realColumnWidths != null) {\n      columnWidthsArray = appliedColumnWidths.realColumnWidths;\n    } else if (layout === 'fixed') {\n      // default to 100px for each column when layout is not yet available\n      columnWidthsArray = [];\n      for (let i = 0; i < columnsArray.length; i++) {\n        columnWidthsArray[i] = 100;\n      }\n    } else {\n      columnWidthsArray = [];\n      for (let i = 0; i < columnsArray.length; i++) {\n        columnWidthsArray[i] = undefined;\n      }\n    }\n    return {\n      tableId: tableId,\n      isRendered: columnsArray.length > 0,\n      columnWidthsArray: columnWidthsArray\n    };\n  };\n\n  const getTableHeaderProps = () => {\n    return {\n      tableId: tableId,\n      isRendered: columnsArray.length > 0,\n      columnsArray: columnsArray,\n      hasVerticalGridlines: hasVerticalGridlines,\n      activeKey: currentActiveCell?.type === 'header' ? currentActiveCell.columnKey : undefined,\n      isTabbableMode: isTabbableMode,\n      selectedColumnKeys: selected.column,\n      selectedRowKeys: selected.row,\n      isColumnSelectionEnabled: isColumnSelectionEnabled,\n      isRowSelectionEnabled: isRowSelectionEnabled,\n      disabledInteractionKeys: _disabledHeaderFooterInteractionKeys,\n      onSelectionChange: onTableSelectionChange,\n      isForceSortIcons: layout === 'contents' && isLayoutRequired,\n      activeStyleKey: activeStyleColumnInfo?.isHeader ? activeStyleColumnInfo?.key : undefined,\n      hoverStyleKey: hoverStyleColumnInfo?.isHeader ? hoverStyleColumnInfo?.key : undefined,\n      sortCriterion: sortCriterion,\n      onSortCriterionChange: onSortCriterionChange,\n      isShowFocusRing: isShowFocusRing,\n      stickyTopOffset: viewportInfo.viewportConfig.scrollerOffsetTop,\n      startStickyEdge: startStickyEdge,\n      endStickyEdge: endStickyEdge,\n      firstStickyColumnIndex: stickyColumnInfo.firstStickyColumnIndex,\n      finalStickyColumnIndex: stickyColumnInfo.finalStickyColumnIndex,\n      columnBorderEdges: columnBorderEdges,\n      isResizeHover: resizeInfoRef.current.isResizeHover,\n      isRtl: isRtl,\n      isHighContrast: isHighContrast\n    };\n  };\n\n  const getTableFooterProps = () => {\n    return {\n      tableId: tableId,\n      isRendered: hasFooters,\n      columnsArray: columnsArray,\n      hasVerticalGridlines: hasVerticalGridlines,\n      activeKey: currentActiveCell?.type === 'footer' ? currentActiveCell.columnKey : undefined,\n      isTabbableMode: isTabbableMode,\n      selectedColumnKeys: selected.column,\n      isColumnSelectionEnabled: isColumnSelectionEnabled,\n      activeStyleKey: !activeStyleColumnInfo?.isHeader ? activeStyleColumnInfo?.key : undefined,\n      hoverStyleKey: !hoverStyleColumnInfo?.isHeader ? hoverStyleColumnInfo?.key : undefined,\n      isShowFocusRing: isShowFocusRing,\n      disabledInteractionKeys: _disabledHeaderFooterInteractionKeys,\n      stickyBottomOffset: viewportInfo.viewportConfig.scrollerOffsetBottom,\n      startStickyEdge: startStickyEdge,\n      endStickyEdge: endStickyEdge,\n      firstStickyColumnIndex: stickyColumnInfo.firstStickyColumnIndex,\n      finalStickyColumnIndex: stickyColumnInfo.finalStickyColumnIndex,\n      columnBorderEdges: columnBorderEdges,\n      dataRowCount: tableData.length,\n      isRtl: isRtl,\n      isHighContrast: isHighContrast\n    };\n  };\n\n  const getTableDragIndicator = () => {\n    if (\n      columnResizingIndicator != null &&\n      !isLayoutRequired &&\n      appliedColumnWidths?.fullColumnWidths != null\n    ) {\n      let position = 0;\n      for (let i = 0; i < columnsArray.length; i++) {\n        position += appliedColumnWidths.fullColumnWidths[i];\n        if (columnsArray[i].key === columnResizingIndicator.key) {\n          if (columnResizingIndicator.delta != null) {\n            position += columnResizingIndicator.delta;\n          }\n          break;\n        }\n      }\n      return <TableDragIndicator position={position} isRtl={isRtl} height={innerTableHeight} />;\n    }\n    return undefined;\n  };\n\n  const getTableStyle = () => {\n    if (!isLayoutRequired && appliedColumnWidths?.realColumnWidths != null) {\n      let totalWidth = 0;\n      for (let i = 0; i < appliedColumnWidths.realColumnWidths.length; i++) {\n        totalWidth += appliedColumnWidths.realColumnWidths[i];\n      }\n      return `width:${totalWidth}px;table-layout:fixed;`;\n    } else if (columnsArray.length > 0) {\n      if (layout === 'fixed') {\n        // default to 100px for each column when layout is not yet available\n        return `width:${columnsArray.length * 100}px;table-layout:fixed;`;\n      } else {\n        // shrink table down as much as possible when a 'contents' layout is required, otherwise\n        // the sampled column widths will not reflect the true weight sizes with line-clamping\n        return 'width:max-content;will-change:width;';\n      }\n    }\n    // no columns are present\n    return 'width:100%;';\n  };\n\n  const skeletonStyles = isHighContrast ? tableSkeletonStylesHC : tableSkeletonStyles;\n  const getPendingLayoutSkeletons = () => {\n    return isPendingLayout ? (\n      <div class={skeletonStyles.pendingLayout}>\n        <table role={'presentation'} style={'width:100%;table-layout:fixed;'}>\n          <tbody role={'presentation'}>\n            <TableSkeletonRow\n              tableId={tableId}\n              hasTabIndex={currentActiveCell?.type === 'pending'}\n              colspan={ariaColumnCount}\n              isPendingLayout={true}\n              isShowFocusRing={false}\n              isHighContrast={isHighContrast}\n            />\n          </tbody>\n        </table>\n      </div>\n    ) : undefined;\n  };\n\n  return (\n    <>\n      <div\n        {...testIdProps}\n        ref={rootRefCallback}\n        aria-colcount={ariaColumnCount}\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledBy}\n        aria-rowcount={ariaRowCount}\n        {...(supportsMultipleSelection ? { 'aria-multiselectable': true } : {})}\n        class={classes}\n        id={tableId}\n        role={'grid'}\n        tabIndex={currentActiveCell != null ? -1 : 0}\n        {...interactionManagerProps}>\n        <div\n          ref={scrollerRefCallback}\n          class={scrollerClasses}\n          role={'rowgroup'}\n          style={scrollerStyle}\n          tabIndex={-1}\n          {...scrollHandlingProps}>\n          <FocusTracker\n            isDisabled={!isTabbableMode}\n            onFocusStartEdge={onFocusStartEdge}\n            onFocusEndEdge={onFocusEndEdge}\n            onStartTracking={onStartFocusTracking}>\n            <TabbableModeContext.Provider value={{ isTabbable: isTabbableMode }}>\n              <table\n                ref={innerTableRef}\n                aria-hidden={isPendingLayout ? true : undefined}\n                class={tableClasses}\n                role={'presentation'}\n                style={getTableStyle()}\n                data-oj-table-inner-table={tableId}>\n                <TableColGroup {...getTableColGroupProps()} />\n                <TableHeader {...getTableHeaderProps()} />\n                <TableBody {...getTableBodyProps()} />\n                <TableFooter {...getTableFooterProps()} />\n              </table>\n            </TabbableModeContext.Provider>\n            {getTableDragIndicator()}\n          </FocusTracker>\n          {tooltipContent}\n        </div>\n        {getPendingLayoutSkeletons()}\n      </div>\n      {contextMenuConfig != null && contextMenuContext != null && (\n        <>\n          <TableContextMenu\n            {...menuProps}\n            contextMenuConfig={contextMenuConfig}\n            contextMenuContext={contextMenuContext}\n          />\n          {isResizeDialogOpen &&\n          currentActiveCell?.columnKey != null &&\n          appliedColumnWidths != null ? (\n            <TableResizeColumnDialog\n              isOpen={isResizeDialogOpen}\n              columnKey={currentActiveCell.columnKey}\n              appliedColumnWidths={appliedColumnWidths}\n              onColumnResize={onColumnResize}\n              setIsResizeDialogOpen={setIsResizeDialogOpen}\n            />\n          ) : undefined}\n        </>\n      )}\n    </>\n  );\n}) as <K extends string | number, D, C extends string>(\n  p: Props<K, D, C> & { ref?: ForwardedRef<TableViewHandle<K, C>> }\n) => JSXInternal.Element;\n"],"names":["_jsx","dimensionInterpolations","mergeInterpolations","tableSkeletonStylesHC","tableSkeletonStyles","classNames","useTranslationBundle","LOADMORE_STYLE_CLASS","_jsxs","tableCellStylesHC","tableCellStyles","tableHeaderCellStylesHC","tableHeaderCellStyles","tableFooterCellStylesHC","tableFooterCellStyles","textAlignStyles","verticalAlignStyles","keyExtractor","preventBrowserTooltipStyle","getClientHints","FormContext","useInteractionStyle","tableRowStylesHC","tableRowStyles","Selector","containsKey","memo","isSameKey","useComponentTheme","TableNoDataRedwoodTheme","useLayoutEffect","useCallback","backgroundStyles","Fragment","LoadMoreCollection","SelectorAll","tableHeaderCellTextStyles","tableHeaderSortContainerStyles","justifyContentStyles","SortControl","SortableContext","tableHeaderRowStyles","tableFooterRowStyles","tableDragIndicatorStyles","Menu","_Fragment","Submenu","SelectSingleMenuGroup","SelectMenuItem","MenuItem","useRef","useState","Flex","Button","Dialog","NumberInputText","useMemo","findElementByKey","scrollerStyles","useContextMenuGesture","SHOW_TOOLTIP_DELAY","HIDE_TOOLTIP_DELAY","getGlobalTooltipManager","useId","TooltipContent","useScale","useColorScheme","getWrappedTooltipContent","useEffect","getElementContainsFunc","handleEnterActionableMode","allTabbableElements","handleWrapActionableFocus","getActiveElement","getBodyElement","isTabbableElement","addKey","removeKey","getIsSelectionPending","useCollectionInteractionContext","mergeProps","useImperativeHandle","createRef","UNSAFE_DOM_ACCESS","useAddBusyState","useResizeObserver","forwardRef","useTestId","useUser","TableRedwoodTheme","innerTableStyles","FocusTracker","TabbableModeContext"],"mappings":"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"}