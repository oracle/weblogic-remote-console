{"version":3,"file":"UNSAFE_FlatTreeView.js","sources":["../../src/UNSAFE_FlatTreeView/NodeSkeletonContainer.tsx","../../src/UNSAFE_FlatTreeView/TreeItemSkeletons.tsx","../../src/UNSAFE_FlatTreeView/TreeItem.tsx","../../src/UNSAFE_FlatTreeView/SkeletonContainer.tsx","../../src/UNSAFE_FlatTreeView/LoadMoreTreeCollection.tsx","../../src/UNSAFE_FlatTreeView/useTreeNavigation.ts","../../src/UNSAFE_FlatTreeView/FlatTreeView.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { Size } from '#utils/UNSAFE_size';\nimport { View } from '#UNSAFE_View';\n\ntype Props = {\n  /**\n   * Allows to pass and access the properties from child elements\n   **/\n  children?: (index: number) => ComponentChildren;\n  indentation?: Size;\n};\n\n/**\n * Allows to specify the time delay for rendering the component\n **/\nconst timerValue = 50;\n\n/**\n * Represents the skeleton for a tree item in expanding state\n **/\nexport function NodeSkeletonContainer({ children, indentation = 0 }: Props) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    setTimeout(() => {\n      setIsVisible(true);\n    }, timerValue);\n  }, []);\n\n  return isVisible && children ? (\n    <div role=\"presentation\">\n      <View paddingInlineStart={indentation as Size}>\n        {[...Array(1)].map((_element, index) => children(index))}\n      </View>\n    </div>\n  ) : null;\n}\n","import { calcIndentation } from './TreeItem';\nimport { View } from '#UNSAFE_View';\nimport { Skeleton } from '#UNSAFE_Skeleton';\nimport { Flex } from '#UNSAFE_Flex';\nimport { Size } from '#utils/UNSAFE_size';\n\ntype Props = {\n  indentation?: number;\n  isLeaf?: boolean;\n};\n\nfunction TreeItemSkeleton({ indentation = 0, isLeaf = false }: Props) {\n  return (\n    <View paddingInlineStart={calcIndentation(indentation, isLeaf ? undefined : true) as Size}>\n      <View padding={[0, '4px']}>\n        <Flex height=\"9x\" align=\"center\" gap=\"2x\">\n          {!isLeaf && <Skeleton width=\"6x\" height=\"6x\" borderRadius=\"4px\" />}\n          <Skeleton height=\"5x\" borderRadius=\"4px\" />\n        </Flex>\n      </View>\n    </View>\n  );\n}\n\nexport function TreeItemSkeletons() {\n  return (\n    <>\n      <TreeItemSkeleton />\n      <TreeItemSkeleton indentation={1} />\n      <TreeItemSkeleton indentation={2} isLeaf={true} />\n    </>\n  );\n}\n","import { ComponentChildren } from 'preact';\nimport { useRef } from 'preact/hooks';\nimport { Size } from '#utils/UNSAFE_size';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { TabbableModeContext } from '#hooks/UNSAFE_useTabbableMode';\nimport { ToggleDetail, ListItemRendererContext } from '#UNSAFE_Collection';\nimport { View } from '#UNSAFE_View';\nimport { styles } from './themes/TreeViewStyles.css';\nimport { treeViewVars as cssVars } from './themes/TreeViewContract.css';\nimport { Expander } from '#PRIVATE_Expander';\nimport { Flex } from '#UNSAFE_Flex';\nimport { NodeSkeletonContainer } from './NodeSkeletonContainer';\nimport { TreeItemSkeletons } from './TreeItemSkeletons';\nimport { useId } from '#hooks/UNSAFE_useId';\nimport { useHover } from '#hooks/UNSAFE_useHover';\nimport { getClientHints } from '#utils/PRIVATE_clientHints';\n\ntype Props<K, D> = {\n  children: (context: ListItemRendererContext<K, D>) => ComponentChildren;\n  itemKey: K;\n  depth: number;\n  context: ListItemRendererContext<K, D>;\n  isExpanded: boolean | undefined;\n  onToggle: (detail: ToggleDetail<K>) => void;\n  selected: boolean | 'partial';\n  isSelectable: boolean;\n  isCheckboxless: boolean;\n  isTabbable: boolean;\n  isLoading?: boolean;\n  isFocusRingVisible: boolean;\n};\n\nexport function TreeItem<K extends string | number, D>({\n  itemKey,\n  depth,\n  context,\n  children,\n  isExpanded,\n  onToggle,\n  selected,\n  isSelectable,\n  isCheckboxless,\n  isTabbable,\n  isLoading,\n  isFocusRingVisible\n}: Props<K, D>) {\n  const rootRef = useRef<HTMLDivElement>(null);\n  const indentation = calcIndentation(depth, isExpanded);\n  const skeletonIndentation = calcIndentation(depth + 1, isExpanded);\n\n  const { isHover, hoverProps } = useHover();\n\n  const classes = classNames([\n    styles.treeItemStyles.base,\n    isFocusRingVisible && styles.treeItemStyles.focused,\n    selected === true && styles.treeItemStyles.selected,\n    selected === true && isCheckboxless && styles.treeItemStyles.checkboxlessSelected,\n    isSelectable && !selected && isHover && styles.treeItemStyles.hovered\n  ]);\n\n  return (\n    <>\n      <div\n        ref={rootRef}\n        id={useId()}\n        tabIndex={isMobile() ? -1 : undefined}\n        data-oj-key={itemKey}\n        class={classes}\n        role=\"treeitem\"\n        aria-level={depth + 1}\n        aria-selected={selected ? 'true' : 'false'}\n        {...(isExpanded !== undefined && { 'aria-expanded': isExpanded })}\n        {...(typeof itemKey === 'number' && { 'data-oj-key-type': 'number' })}\n        {...hoverProps}>\n        <>\n          {selected === true && isHover && <div class={styles.selectedHoveredOverlay}></div>}\n          <TabbableModeContext.Provider value={{ isTabbable }}>\n            <View paddingInlineStart={indentation as Size}>\n              <Flex align=\"center\">\n                {isExpanded !== undefined && (\n                  <Expander itemKey={itemKey} expanded={isExpanded} onToggle={onToggle} />\n                )}\n                {children(context)}\n              </Flex>\n            </View>\n          </TabbableModeContext.Provider>\n        </>\n      </div>\n      {isLoading ? (\n        <NodeSkeletonContainer indentation={skeletonIndentation as Size}>\n          {() => {\n            return <TreeItemSkeletons />;\n          }}\n        </NodeSkeletonContainer>\n      ) : null}\n    </>\n  );\n}\n\nexport const isMobile = () => {\n  const { platform } = getClientHints();\n  return platform === 'ios' || platform === 'android';\n};\n\nexport const calcIndentation = (depth: number, isExpanded?: boolean) => {\n  const expanderPlaceholder = isExpanded === undefined ? '40px' : '0px';\n  return `calc(${Math.max(0, depth)} * ${cssVars.indentWidth} + ${expanderPlaceholder})`;\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentChildren } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { styles } from './themes/TreeViewStyles.css';\n\ntype Props = {\n  /**\n   * Allows to pass and access the properties from child elements\n   **/\n  children?: (index: number) => ComponentChildren;\n  /**\n   * Allows to specify number of skeletons to be rendered on initial load\n   **/\n  minimumCount?: number;\n  /**\n   * Callback when skeleton do become visible, handler can use this\n   * to update its live region.\n   */\n  onSkeletonVisible?: () => void;\n};\n\n/**\n * Allows to specify the time delay for rendering the component\n **/\nconst timerValue = 50;\n\n/**\n * SkeletonContainer renders 'minimumCount' number of skeletons\n * of the variant specified from its child element - Skeleton's prop after\n * 'timerValue' ms delay\n **/\nexport function SkeletonContainer({ children, minimumCount = 1, onSkeletonVisible }: Props) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    setTimeout(() => {\n      setIsVisible(true);\n      onSkeletonVisible?.();\n    }, timerValue);\n  }, [onSkeletonVisible]);\n\n  const containerClasses = classNames([styles.skeletonStyles.container]);\n  return isVisible && children ? (\n    <div class={containerClasses} role=\"presentation\">\n      {[...Array(minimumCount)].map((_element, index) => children(index))}\n    </div>\n  ) : null;\n}\n","import { ItemContext } from '#UNSAFE_Collection';\nimport { LoadMoreCollection } from '#PRIVATE_LoadMoreCollection';\nimport { TreeItem } from './TreeItem';\nimport { InternalTreeNode, LoadMoreTreeCollectionProps as Props } from './TreeView.types';\nimport { SkeletonContainer } from './SkeletonContainer';\nimport { TreeItemSkeletons } from './TreeItemSkeletons';\nimport { LOADMORE_STYLE_CLASS } from '#PRIVATE_LoadMoreCollection';\n// TODO: add this import due to issue JET-67485, need to update once Stable is introduced\nimport './themes/redwood/TreeViewTheme.css';\n\n/**\n * Component that receives the flattened data and renders the hierarchy betweens items based on the shaped metadata.\n * In order to maximize performance, only items that are visible in the viewport are rendered.\n * This is an internal component that is used by FlatTreeView.\n */\nexport function LoadMoreTreeCollection<K extends string | number, D>({\n  data,\n  children,\n  selectionMode,\n  onToggle = () => {},\n  viewportConfig,\n  hasMore = false,\n  onLoadMore = () => {},\n  loadMoreIndicator = defaultLoadMoreIndicator,\n  updateContext\n}: Props<K, D>) {\n  const createTreeItem = (context: ItemContext<InternalTreeNode<K, D>>) => {\n    const key = context.data.metadata.key;\n    const treeItemContext = {\n      index: context.index,\n      data: context.data.data,\n      metadata: { key }\n    };\n    // allow container to inject additional things to context\n    if (updateContext) {\n      updateContext(treeItemContext);\n    }\n    const expanded = context.data.metadata.expanded;\n    return (\n      <TreeItem\n        key={treeItemContext.metadata.key}\n        itemKey={treeItemContext.metadata.key}\n        context={treeItemContext}\n        depth={context.data.metadata.treeDepth}\n        isExpanded={expanded === 'ongoing' ? true : expanded}\n        onToggle={onToggle}\n        isSelectable={selectionMode !== 'none'}\n        isCheckboxless={selectionMode === 'single'} // TODO: need to update when checkboxless multiple is added\n        selected={context.data.metadata.selected}\n        isLoading={expanded === 'ongoing'}\n        isTabbable={false}\n        isFocusRingVisible={context.data.metadata.hasFocus}>\n        {children}\n      </TreeItem>\n    );\n  };\n\n  return (\n    <>\n      {data === null ? null : (\n        <LoadMoreCollection\n          data={data}\n          viewportConfig={viewportConfig}\n          hasMore={hasMore}\n          onLoadMore={onLoadMore}\n          loadMoreIndicator={loadMoreIndicator}>\n          {createTreeItem}\n        </LoadMoreCollection>\n      )}\n    </>\n  );\n}\n\nconst defaultLoadMoreIndicator = (\n  <div class={LOADMORE_STYLE_CLASS}>\n    <SkeletonContainer minimumCount={1}>\n      {() => {\n        return <TreeItemSkeletons />;\n      }}\n    </SkeletonContainer>\n  </div>\n);\n","import { RefObject } from 'preact';\nimport { useCallback } from 'preact/hooks';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport {\n  findElementByKey,\n  keyExtractor,\n  getPrevNextKey,\n  ITEM_SELECTOR\n} from '#utils/PRIVATE_collectionUtils';\nimport { isKeyDefined } from '#utils/UNSAFE_keys';\nimport { useNavigation } from '#hooks/PRIVATE_useListCommon';\n\nexport function useTreeNavigation<K extends string | number>(\n  data: any | null,\n  rootRef: RefObject<HTMLDivElement>,\n  isExpanded: (key: K) => boolean,\n  idExtractor: (elem: Element) => string\n) {\n  const { direction } = useUser();\n\n  const arrowKeyAndHandlers = {\n    ArrowUp: (key?: K) => getPrevNextKey(rootRef.current, key, true, ITEM_SELECTOR),\n    ArrowDown: (key?: K) => getPrevNextKey(rootRef.current, key, false, ITEM_SELECTOR)\n  };\n\n  const { navigationProps, currentKey, onCurrentKeyChange, showFocusRing } = useNavigation(\n    data,\n    rootRef,\n    idExtractor,\n    arrowKeyAndHandlers,\n    undefined, // currentItemOverride,\n    undefined, //onPersistCurrentItem,\n    undefined,\n    undefined,\n    true, // should always allow shift key\n    false, // TODO: update allowTabbableMode when F2 mode is added\n    true,\n    false\n  );\n\n  const itemKeyExtractor = useCallback(\n    (element: HTMLElement) => {\n      if (element.getAttribute('role') === 'tree') {\n        return currentKey === undefined ? null : currentKey;\n      }\n      return keyExtractor(element, ITEM_SELECTOR) as K;\n    },\n    [currentKey, keyExtractor]\n  );\n\n  const onKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'ArrowLeft' || event.key === 'ArrowRight') {\n        const isRtl = direction === 'rtl';\n        const isLeftArrow = event.key === 'ArrowLeft' && !isRtl;\n        const itemKey = itemKeyExtractor(event.target as HTMLElement);\n        if (itemKey) {\n          const contains = isExpanded(itemKey);\n          // arrow left on a collapsed node, go to its parent\n          if (isLeftArrow && !contains && rootRef.current) {\n            const item = findElementByKey(rootRef.current, itemKey, ITEM_SELECTOR);\n            if (item) {\n              const treeDepth = item.getAttribute('aria-level');\n              const parent =\n                treeDepth !== null &&\n                findParentElementByKey(rootRef.current, itemKey, Number(treeDepth), ITEM_SELECTOR);\n              const newKey = parent && itemKeyExtractor(parent as HTMLElement);\n              if (isKeyDefined(newKey)) {\n                onCurrentKeyChange?.({ value: newKey as K });\n              }\n            }\n          } else if (!isLeftArrow && contains) {\n            // arrow right on an expanded node, go to its first child\n            const newKey = getPrevNextKey(rootRef.current, itemKey, false, ITEM_SELECTOR)();\n            if (isKeyDefined(newKey)) {\n              onCurrentKeyChange?.({ value: newKey as K });\n            }\n          }\n        }\n      }\n    },\n    [direction, isExpanded, onCurrentKeyChange, itemKeyExtractor]\n  );\n\n  const treeNavigationProps = mergeProps(navigationProps, { onKeyUp });\n  return { treeNavigationProps, currentKey, showFocusRing };\n}\n\nconst findParentElementByKey = <K extends string | number>(\n  root: HTMLElement | null,\n  key: K | null,\n  treeDepth: number,\n  itemSelector: string\n) => {\n  if (root && key !== null) {\n    const items = Array.from(root.querySelectorAll(itemSelector));\n    const index = items.findIndex((i) => (i as HTMLElement).dataset['ojKey'] == key);\n    for (let i = index; i >= 0; i--) {\n      const level = items[i].getAttribute('aria-level');\n      if (level !== null && Number(level) == treeDepth - 1) {\n        return items[i];\n      }\n    }\n  }\n  return null;\n};\n","import { useMemo, useRef, useCallback, useState } from 'preact/hooks';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { SelectionDetail, ListItemRendererContext } from '#UNSAFE_Collection';\nimport { getViewportConfig } from '#utils/PRIVATE_collectionUtils';\nimport { FlattenedTreeNode, InternalTreeNode, FlatTreeViewProps as Props } from './TreeView.types';\nimport { LoadMoreTreeCollection } from './LoadMoreTreeCollection';\nimport {\n  useSelection,\n  useAdditiveSelection,\n  SelectionRangeDetail\n} from '#hooks/PRIVATE_useSelection';\nimport { useExpandCollapse } from '#hooks/PRIVATE_useListCommon';\nimport {\n  keyExtractor,\n  getPrevNextKey,\n  findElementByKey,\n  ITEM_SELECTOR\n} from '#utils/PRIVATE_collectionUtils';\nimport { addKeys, containsKey } from '#utils/UNSAFE_keys';\nimport { useComponentTheme } from '#hooks/UNSAFE_useComponentTheme';\nimport { TreeViewRedwoodTheme } from './themes/redwood/TreeViewTheme.css';\nimport { useTreeNavigation } from './useTreeNavigation';\nimport { Selector } from '#UNSAFE_Selector';\nimport { isMobile } from './TreeItem';\nimport { SkeletonContainer } from './SkeletonContainer';\nimport { TreeItemSkeletons } from './TreeItemSkeletons';\nimport { LiveRegion } from '#UNSAFE_LiveRegion';\nimport { HiddenAccessible } from '#UNSAFE_HiddenAccessible';\nimport { useId } from '#hooks/UNSAFE_useId';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\n\n/**\n * A FlatTreeView displays flattened data as a tree with highly interactive features.\n */\nexport function FlatTreeView<K extends string | number, D>({\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledBy,\n  'aria-describedby': ariaDescribedBy,\n  data,\n  selectionMode = 'none',\n  selectedKeys = { all: false, keys: new Set() },\n  onSelectionChange,\n  onToggle,\n  viewportConfig,\n  ...rest\n}: Props<K, D>) {\n  const rootRef = useRef<HTMLDivElement>(null);\n  const [liveRegion, setLiveRegion] = useState<string>();\n  const { collection_loading, collection_loaded } = useTranslationBundle<BundleType>(\n    '@oracle/oraclejet-preact'\n  );\n  const loadingDescId = useId();\n\n  const isExpanded = useCallback((key: K) => {\n    if (rootRef.current) {\n      const elem = findElementByKey(rootRef.current, key, ITEM_SELECTOR);\n      return elem?.getAttribute('aria-expanded') === 'true';\n    }\n    return false;\n  }, []);\n\n  const { treeNavigationProps, currentKey, showFocusRing } = useTreeNavigation(\n    data,\n    rootRef,\n    isExpanded,\n    idExtractor\n  );\n\n  const items: InternalTreeNode<K, D>[] = useMemo(\n    () =>\n      data?.map((value: FlattenedTreeNode<K, D>) => {\n        const itemKey = value.metadata.key;\n        const newValue = { ...value } as InternalTreeNode<K, D>;\n        newValue.metadata.selected = containsKey(selectedKeys, itemKey);\n        newValue.metadata.hasFocus = currentKey === itemKey && showFocusRing;\n        return newValue;\n      }) || [],\n    [data, selectedKeys, currentKey, showFocusRing]\n  );\n\n  const expandCollapseProps = useExpandCollapse(\n    (element: HTMLElement) => {\n      if (element.getAttribute('role') === 'tree') {\n        return currentKey === undefined ? null : currentKey;\n      }\n      return keyExtractor(element, ITEM_SELECTOR) as K;\n    },\n    isExpanded,\n    onToggle,\n    true\n  );\n\n  // tracking the anchor key which is used for shift+click selection\n  const anchorKey = useRef<K | undefined>();\n\n  const handleSelectionChange = useCallback(\n    (detail: SelectionDetail<K>) => {\n      if (onSelectionChange) {\n        if (detail.value.all === false && detail.value.keys.size > 0) {\n          // during regular selection, the last key selected by a user gesture is the anchor key\n          anchorKey.current = Array.from(detail.value.keys.values()).pop();\n        }\n        onSelectionChange(detail);\n      }\n    },\n    [anchorKey, onSelectionChange]\n  );\n\n  const handleSelectionRangeChange = useCallback(\n    (detail: SelectionRangeDetail<K>) => {\n      if (data && onSelectionChange) {\n        const value = handleSelectionRange(detail, data);\n        if (Array.isArray(value)) {\n          if (detail.eventType === 'shiftSpace') {\n            // during range selection by shift+space, the first key selected by a user gesture is the anchor key\n            anchorKey.current = detail.value.start;\n          } else {\n            // during range selection by shift+click/arrow keys, the last key selected by a user gesture is the anchor key\n            anchorKey.current = detail.value.end;\n          }\n          if (selectionMode === 'multipleToggle') {\n            const keys = addKeys(selectedKeys, value);\n            onSelectionChange({ value: keys, target: null });\n          } else {\n            onSelectionChange({ value: { all: false, keys: new Set(value) }, target: null });\n          }\n        }\n      }\n    },\n    [data, selectedKeys, onSelectionChange]\n  );\n\n  // single or multiple selection mode\n  const { selectionProps } = useSelection(\n    (element: HTMLElement) => {\n      if (element === rootRef.current) {\n        return currentKey === undefined ? null : currentKey;\n      }\n      return keyExtractor(element, ITEM_SELECTOR) as K;\n    },\n    selectedKeys,\n    selectionMode === 'multipleToggle' ? 'none' : selectionMode,\n    false,\n    'replace',\n    handleSelectionChange,\n    anchorKey.current,\n    currentKey,\n    (currentKey: K | undefined, isPrev: boolean) =>\n      getPrevNextKey(rootRef.current, currentKey, isPrev, ITEM_SELECTOR),\n    undefined,\n    (key: K) => {\n      if (rootRef.current) {\n        const elem = findElementByKey(rootRef.current, key, ITEM_SELECTOR);\n        if (elem) {\n          elem.scrollIntoView({ block: 'nearest' });\n        }\n      }\n    },\n    handleSelectionRangeChange\n  );\n\n  // multipleToggle selection mode\n  const { eventProps: multipleToggleSelectionProps } = useAdditiveSelection(\n    (element: HTMLElement) => {\n      if (element === rootRef.current) {\n        return currentKey === undefined ? null : currentKey;\n      }\n      return keyExtractor(element, ITEM_SELECTOR) as K;\n    },\n    selectedKeys,\n    selectionMode === 'multipleToggle' ? 'multiple' : 'none',\n    false,\n    (key: K) => {\n      if (data) {\n        return data.findIndex((value: FlattenedTreeNode<K, D>) => value.metadata.key === key);\n      }\n      return -1;\n    },\n    (startIndex: number, endIndex: number) => {\n      if (data) {\n        const keys = data.map((value: FlattenedTreeNode<K, D>) => value.metadata.key);\n        return keys.slice(startIndex, endIndex);\n      }\n      return [];\n    },\n    (currentKey: K | undefined, isPrev: boolean) =>\n      getPrevNextKey(rootRef.current, currentKey, isPrev, ITEM_SELECTOR),\n    currentKey,\n    handleSelectionChange,\n    handleSelectionRangeChange\n  );\n\n  //Note: onKeyUp doesn't work with the cmd key\n  const selectAllWithKeyboard = useCallback(\n    (event: KeyboardEvent) => {\n      if (selectionMode === 'multiple' || selectionMode === 'multipleToggle') {\n        if (onSelectionChange && (event.metaKey || event.ctrlKey) && event.key === 'a') {\n          event.preventDefault();\n          onSelectionChange({\n            value: { all: true, deletedKeys: new Set() },\n            target: event.target\n          });\n        }\n      }\n    },\n    [onSelectionChange, selectionMode]\n  );\n\n  const { classes } = useComponentTheme(TreeViewRedwoodTheme);\n  viewportConfig = getViewportConfig(rootRef, viewportConfig);\n\n  const updateContextCallback = useCallback(\n    (context: ListItemRendererContext<K, D>) => {\n      const key = context.metadata.key;\n      context.selector =\n        selectionMode === 'none' || selectionMode === 'single'\n          ? undefined\n          : (ariaLabel?: string) => (\n              <div aria-hidden={isMobile() ? undefined : true}>\n                <Selector\n                  aria-label={isMobile() ? ariaLabel : undefined}\n                  rowKey={key}\n                  selectedKeys={selectedKeys}\n                  onChange={onSelectionChange}\n                />\n              </div>\n            );\n    },\n    [selectionMode, selectedKeys, onSelectionChange]\n  );\n\n  const updateLiveRegion = useCallback(() => {\n    setLiveRegion(collection_loading());\n  }, [collection_loading]);\n\n  return (\n    <>\n      <div\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledBy}\n        aria-describedby={\n          data == null\n            ? ariaDescribedBy\n              ? [...new Set(ariaDescribedBy.split(/\\s+/).concat(loadingDescId))].join(' ')\n              : loadingDescId\n            : ariaDescribedBy\n        }\n        ref={rootRef}\n        role=\"tree\"\n        aria-multiselectable={selectionMode === 'multiple' ? true : false}\n        tabIndex={0}\n        class={classes}\n        {...mergeProps(\n          treeNavigationProps,\n          selectionProps,\n          multipleToggleSelectionProps,\n          expandCollapseProps,\n          { onKeyDown: selectAllWithKeyboard }\n        )}>\n        {data == null ? (\n          defaultLoadingIndicator(updateLiveRegion)\n        ) : (\n          <LoadMoreTreeCollection\n            data={items}\n            selectionMode={selectionMode}\n            onToggle={onToggle}\n            viewportConfig={viewportConfig}\n            updateContext={updateContextCallback}\n            {...rest}></LoadMoreTreeCollection>\n        )}\n      </div>\n      <HiddenAccessible id={loadingDescId}>{collection_loading()}</HiddenAccessible>\n      <LiveRegion>\n        {data == null ? liveRegion : liveRegion === collection_loading() ? collection_loaded() : ''}\n      </LiveRegion>\n    </>\n  );\n}\n\nconst defaultLoadingIndicator = (callback: () => void) => {\n  return (\n    <SkeletonContainer minimumCount={8} onSkeletonVisible={callback}>\n      {() => {\n        return <TreeItemSkeletons />;\n      }}\n    </SkeletonContainer>\n  );\n};\n\nconst idExtractor = (elem: Element) => elem.id;\n\n/**\n * A helper function to handle range selection\n */\nexport const handleSelectionRange = <K, D>(\n  detail: SelectionRangeDetail<K>,\n  data: FlattenedTreeNode<K, D>[]\n) => {\n  const keys = data.map((value: FlattenedTreeNode<K, D>) => {\n    return value.metadata.key;\n  });\n  const startIndex = keys.indexOf(detail.value.start);\n  const endIndex = keys.indexOf(detail.value.end);\n  const minIndex = Math.min(startIndex, endIndex);\n  const maxIndex = Math.max(startIndex, endIndex);\n  if (minIndex === -1) {\n    // return a range to fetch so we can find all the keys, maxIndex should not be -1\n    return { offset: 0, count: -1 };\n  } else {\n    // range of keys are in the current viewport, return them\n    return keys.slice(minIndex, maxIndex + 1);\n  }\n};\n"],"names":["timerValue","useState","useEffect","_jsx","View","_jsxs","Flex","Skeleton","_Fragment","useRef","useHover","classNames","styles","useId","TabbableModeContext","Expander","getClientHints","cssVars","LoadMoreCollection","LOADMORE_STYLE_CLASS","useUser","getPrevNextKey","ITEM_SELECTOR","useNavigation","useCallback","keyExtractor","findElementByKey","isKeyDefined","mergeProps","useTranslationBundle","useMemo","containsKey","useExpandCollapse","keys","addKeys","useSelection","useAdditiveSelection","useComponentTheme","TreeViewRedwoodTheme","getViewportConfig","Selector","HiddenAccessible","LiveRegion"],"mappings":"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"}