{"version":3,"file":"Axis-2d648884.js","sources":["../../src/PRIVATE_Axis/ChartAxisText.tsx","../../src/PRIVATE_Axis/Axis.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { JSXInternal } from 'preact/src/jsx';\nimport { styles } from './themes/AxisStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { TextProps } from '#PRIVATE_VisSVGText/text.types';\nimport { getClientHints } from '#utils/PRIVATE_clientHints';\nimport { MultilineText, SinglelineText } from '#PRIVATE_VisSVGText';\n\ntype SVGTextAttrs = JSXInternal.HTMLAttributes<SVGTextElement>;\n\ntype ChartText = {\n  id?: string;\n  isTitle: boolean;\n  textProps: TextProps;\n  isRotated: boolean;\n  isRtl: boolean;\n  isInteractive: boolean;\n  style?: SVGTextAttrs['style'];\n  dataProps?: Record<`data-oj-private-${string}`, string | undefined>;\n  axisPosition?: 'left' | 'right' | 'top' | 'bottom';\n};\n\n/**\n * Renders the svg text with given style and svg attributes.\n */\nexport function ChartAxisText({\n  style,\n  textProps,\n  isTitle,\n  isInteractive,\n  id,\n  isRotated,\n  isRtl,\n  dataProps,\n  axisPosition\n}: ChartText) {\n  const browser = getClientHints().browser;\n  const className = classNames([\n    isInteractive ? styles.isInteractive : '',\n    isTitle ? styles.axisTitle : '',\n    !isTitle && browser === 'safari' ? styles.middleBaseline : '',\n    !isTitle || !isRotated ? styles.centralBaseline : '',\n    isTitle && (axisPosition === 'left' || axisPosition === 'right')\n      ? styles.textAfterEdgeBaseline\n      : ''\n  ]);\n\n  const isMultiline = textProps.lines.length > 1;\n\n  return isMultiline ? (\n    <MultilineText\n      class={className}\n      text={textProps.text}\n      dataProps={dataProps}\n      isRtl={isRtl}\n      isRotated={isRotated}\n      lines={textProps.lines}\n      lineProps={textProps.lineProps}\n      textStyle={style}\n      isTruncated={textProps.isTruncated}\n      id={id}\n    />\n  ) : (\n    <SinglelineText\n      style={style}\n      isRtl={isRtl}\n      isRotated={isRotated}\n      dataProps={dataProps}\n      text={textProps.lines[0]}\n      props={textProps.lineProps[0]}\n      isTruncated={textProps.isTruncated}\n      id={id}\n      class={className}\n    />\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { JSXInternal } from 'preact/src/jsx';\nimport { ChartAxisText } from './ChartAxisText';\nimport { getEnclosingRectDims } from './utils/labelUtils';\nimport { TextProps } from '#PRIVATE_VisSVGText/text.types';\nimport { AxisStyles, styles } from './themes/AxisStyles.css';\nimport { AxisRedwoodTheme } from './themes/redwood/AxisTheme';\nimport { useComponentTheme } from '#hooks/UNSAFE_useComponentTheme';\nimport { updateVisTextStyleProperties } from '#utils/UNSAFE_visUtils/textUtils';\nimport { Dimension, VisTextStyle } from '#utils/UNSAFE_visTypes/common';\nimport { styles as VisStyles } from '#hooks/PRIVATE_useVisDnd/themes/VisDndStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { ColorProps } from '#utils/UNSAFE_interpolations/colors';\n\ntype SVGTextAttrs = JSXInternal.HTMLAttributes<SVGTextElement>;\n\ntype Props = {\n  paths?: [number, number, number, number][];\n  isRtl: boolean;\n  title?: string;\n  activeId?: string;\n  titleProps?: TextProps;\n  focusedGroupIndex?: number;\n  focusedGroupLevelIndex?: number;\n  titleStyle: VisTextStyle;\n  tickLabelStyle?: SVGTextAttrs['style'];\n  tickLabels: (TextProps & { index: number })[];\n  isTextInteractive?: (index: number) => boolean;\n  axisPosition: 'left' | 'right' | 'top' | 'bottom';\n  cursor?: string;\n  availSpace?: Dimension;\n  dragOverStyle: 'accept' | 'reject' | 'none';\n  separators?: [number, number, number, number][];\n  separatorColor: ColorProps['color'];\n};\n\n/**\n * Renders the chart axis.\n */\nexport function Axis({\n  title,\n  titleStyle,\n  titleProps,\n  tickLabels,\n  tickLabelStyle,\n  focusedGroupIndex,\n  focusedGroupLevelIndex,\n  axisPosition,\n  isRtl,\n  activeId,\n  isTextInteractive,\n  cursor,\n  availSpace,\n  dragOverStyle,\n  separators,\n  separatorColor\n}: Props) {\n  const { classes } = useComponentTheme<AxisStyles>(AxisRedwoodTheme);\n  const axisClass = [classes];\n  switch (dragOverStyle) {\n    case 'accept':\n      axisClass.push(VisStyles.dndDragOverSvgStyle);\n      break;\n    case 'reject':\n      axisClass.push(VisStyles.dndRejectedStyle);\n      axisClass.push(styles.axisBackground);\n      break;\n    case 'none':\n      axisClass.push(styles.axisBackground);\n  }\n  return (\n    <>\n      <g class={classNames(axisClass)} style={{ cursor }}>\n        <rect {...availSpace}></rect>\n        {title && titleProps && (\n          <ChartAxisText\n            textProps={titleProps}\n            isRtl={isRtl}\n            isRotated={!!titleProps.isRotated}\n            style={updateVisTextStyleProperties(titleStyle)}\n            isTitle\n            isInteractive={false}\n            axisPosition={axisPosition}\n          />\n        )}\n        {tickLabels.length > 0 && (\n          <g style={tickLabelStyle} class={classNames([styles.axisLabel])}>\n            {tickLabels.map(({ index, ...textProps }: Props['tickLabels'][0]) => {\n              const level = parseInt(textProps.dataProps?.['data-oj-private-level-index']!);\n              const group = parseInt(textProps.dataProps?.['data-oj-private-group-index']!);\n              const isFocused = focusedGroupIndex === group && focusedGroupLevelIndex === level;\n              return (\n                <>\n                  {isFocused\n                    ? textProps.text &&\n                      textProps.dims && (\n                        <rect\n                          rx=\"2\"\n                          ry=\"2\"\n                          {...getEnclosingRectDims(textProps.dims, axisPosition, isRtl)}\n                          class={styles.outlineRing}></rect>\n                      )\n                    : ''}\n                  {textProps.text && (\n                    <ChartAxisText\n                      textProps={textProps}\n                      isTitle={false}\n                      isRotated={!!textProps.isRotated}\n                      isRtl={isRtl}\n                      dataProps={textProps.dataProps}\n                      isInteractive={!!isTextInteractive?.(index)}\n                      id={isFocused ? activeId : ''}\n                    />\n                  )}\n                </>\n              );\n            })}\n          </g>\n        )}\n      </g>\n      {separators?.map((path) => {\n        return (\n          <line\n            style={{ stroke: separatorColor }}\n            x1={path[0]}\n            y1={path[1]}\n            x2={path[2]}\n            y2={path[3]}\n            className={styles.groupSeparatorLine}></line>\n        );\n      })}\n    </>\n  );\n}\n"],"names":["getClientHints","classNames","styles","_jsx","MultilineText","SinglelineText","useComponentTheme","AxisRedwoodTheme","VisStyles","_jsxs","updateVisTextStyleProperties","getEnclosingRectDims"],"mappings":"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"}