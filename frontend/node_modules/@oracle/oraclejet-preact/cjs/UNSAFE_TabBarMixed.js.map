{"version":3,"file":"UNSAFE_TabBarMixed.js","sources":["../../src/UNSAFE_TabBarMixed/useTabBarMixed.ts","../../src/UNSAFE_TabBarMixed/TabBarMixed.tsx","../../src/UNSAFE_TabBarMixed/TabBarMixedSeparator.tsx"],"sourcesContent":["import type { ComponentProps, ContextType, RefObject } from 'preact';\nimport type { TabBarContext, TabBarLayout } from '../UNSAFE_TabBarCommon';\nimport { TabBar } from '../UNSAFE_TabBar/TabBar';\nimport { useTabBar } from '../hooks/PRIVATE_useTabBar';\n\ntype TabBarContextValue = ContextType<typeof TabBarContext>;\n\nexport type useTabBarOptions = {\n  class?: string;\n  display?: TabBarContextValue['display'];\n  edge?: 'bottom' | 'top';\n  onRemove?: TabBarContextValue['onRemove'];\n  onSelect?: TabBarContextValue['onSelect'];\n  ref?: RefObject<HTMLDivElement>;\n  selection?: TabBarContextValue['selection'];\n  size?: TabBarContextValue['size'];\n  children?: ComponentProps<typeof TabBarLayout>['children'];\n  contextMenuConfig?: ComponentProps<typeof TabBar>['contextMenuConfig'];\n};\n\n/**\n * A thin wrapper around useTabBar hook\n */\nexport function useTabBarMixed(options: useTabBarOptions) {\n  return useTabBar(options);\n}\n","import type { ComponentChildren } from 'preact';\nimport { useMemo, useRef } from 'preact/hooks';\nimport { Ref } from 'preact';\nimport { forwardRef, useImperativeHandle } from 'preact/compat';\nimport { TabBarContext, TabBarContextMenuConfig } from '../UNSAFE_TabBarCommon';\nimport { isMobile } from '#utils/UNSAFE_clientUtils';\nimport { styles } from './themes/TabBarMixedStyles.css';\nimport { useTabBarMixed as useTabBar } from './useTabBarMixed';\nimport { REMOVABLE_ITEM_ATTRIBUTE, getItemAttribute } from '../hooks/PRIVATE_useTabBar/useTabBar';\nimport { LiveRegion } from '../UNSAFE_LiveRegion';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\nimport { TabBarContextMenu } from '../UNSAFE_TabBar/TabBarContextMenu';\n\ntype UseTabBarOptions = Parameters<typeof useTabBar>[0];\n\n/**\n * Component props expected to be pased to **TabBarMixed**.\n *\n * @see {@link TabBarMixed}\n */\ntype TabBarMixedProps<K extends string | number> = {\n  /**\n   * Component children that will be rendered within the **TabBarMixed**\n   * root element.\n   *\n   * It is expected that **TabBarLayout** and **ConveyorBelt** elements are\n   * provided. The same **TabBarItem**, **RemovableTabBarItem**,\n   * and **OverflowTabBarItem** elements should also be used.\n   */\n  children?: ComponentChildren;\n  /**\n   * Callback fired when a tab item is removed.\n   */\n  onRemove?: UseTabBarOptions['onRemove'];\n  /**\n   * Callback fired when a tab item is selected.\n   */\n  onSelect?: UseTabBarOptions['onSelect'];\n  /**\n   * The item key of the selected tab item.\n   */\n  selection?: K;\n  /**\n   * The height of the the tab bar.\n   *\n   * @default \"md\"\n   */\n  size?: UseTabBarOptions['size'];\n  /**\n   * An aria-label which defines a string value that labels this TabBarMixed.\n   * Either aria-label or aria-labelledby should be specified in order to make TabBarMixed accessible.\n   */\n  'aria-label'?: string;\n\n  /**\n   * An aria-labelledby which identifies the element(s) that labels this TabBarMixed.\n   * Either aria-label or aria-labelledby should be specified in order to make TabBarMixed accessible.\n   */\n  'aria-labelledby'?: string;\n};\n\nexport type FocusableHandle = {\n  focus: () => void;\n  blur: () => void;\n};\n\n/**\n * A navigation component that enables horizontal navigation between distinct content with a mixture of static and dynamic tabs.\n *\n * @param {TabBarMixedProps} props TabBarMixed component props.\n * @returns {JSX.Element} TabBarMixed component element.\n */\nexport const TabBarMixed = forwardRef(\n  <K extends string | number>(\n    props: TabBarMixedProps<K>,\n    focusHandleRef?: Ref<FocusableHandle>\n  ) => {\n    const {\n      children,\n      onRemove,\n      onSelect,\n      selection,\n      size,\n      'aria-label': ariaLabel,\n      'aria-labelledby': ariaLabelledby\n    } = props;\n\n    const rootRef = useRef<HTMLDivElement>(null);\n\n    const isMobileDevice = isMobile();\n    const defaultContextMenuConfig = useMemo<TabBarContextMenuConfig<string | number>>(() => {\n      return {\n        itemsRenderer: (context) => {\n          //Only if context is available, it is a mobile device and it is removable item, we will return remove context menu item\n          if (context) {\n            const isRemovableItem =\n              getItemAttribute(context.itemKey, rootRef.current!, REMOVABLE_ITEM_ATTRIBUTE) != null;\n            if (isRemovableItem && isMobileDevice) {\n              const defaultItems = context.defaultMenuItems;\n              return <>{defaultItems}</>;\n            }\n          }\n          return null;\n        }\n      };\n    }, []);\n\n    const {\n      rootProps,\n      tabBarContext,\n      menuProps,\n      contextMenuContext,\n      contextMenuDescription,\n      contextMenuDescriptionId,\n      accStatusInfo\n    } = useTabBar({\n      class: styles.tabBarBase,\n      edge: 'bottom',\n      onRemove,\n      onSelect,\n      ref: rootRef,\n      selection,\n      size,\n      children,\n      contextMenuConfig: defaultContextMenuConfig\n    });\n\n    const isContextMenuAvailable = defaultContextMenuConfig != null && isMobileDevice;\n    //Allows to call focus on rootRef without having to expose it\n    useImperativeHandle(focusHandleRef!, () => ({\n      focus: () => {\n        if (rootRef.current) {\n          rootRef.current.focus();\n        }\n      },\n      blur: () => {\n        if (rootRef.current) {\n          rootRef.current.blur();\n        }\n      }\n    }));\n\n    return (\n      <>\n        <TabBarContext.Provider value={tabBarContext}>\n          <div aria-label={ariaLabel} aria-labelledby={ariaLabelledby} {...rootProps}>\n            {children}\n          </div>\n        </TabBarContext.Provider>\n        {isContextMenuAvailable && contextMenuDescriptionId && contextMenuDescription && (\n          <span id={contextMenuDescriptionId}>\n            <HiddenAccessible>{contextMenuDescription}</HiddenAccessible>\n          </span>\n        )}\n        {isContextMenuAvailable && accStatusInfo && <LiveRegion>{accStatusInfo}</LiveRegion>}\n        {isContextMenuAvailable && (\n          <TabBarContextMenu\n            {...menuProps}\n            contextMenuConfig={defaultContextMenuConfig}\n            contextMenuContext={contextMenuContext!}\n          />\n        )}\n      </>\n    );\n  }\n);\n","import { View } from '../UNSAFE_View';\nimport { styles } from './themes/TabBarMixedSeparator.css';\n\nimport type { Size } from '../utils/UNSAFE_size';\n\ntype TabBarMixedSeparatorProps = {\n  /**\n   * Padding around the visual Separator line.\n   */\n  padding?: Size;\n};\n\n/**\n * TabBarMixedSeparator is a component that renders a visual separator (displayed\n * as a vertical line) between collections of tabs within TabBarMixed.\n *\n * @param {TabBarMixedSeparatorProps} props Component props for TabBarMixedSeparator.\n * @returns {JSX.Element} Component element for TabBarMixedSeparator.\n */\nexport function TabBarMixedSeparator(props: TabBarMixedSeparatorProps) {\n  const { padding = 0 } = props;\n\n  return (\n    <View padding={[0, padding, 0, padding]}>\n      <div class={styles.separator} role=\"presentation\" />\n    </View>\n  );\n}\n"],"names":["useTabBar","forwardRef","useRef","isMobile","useMemo","getItemAttribute","REMOVABLE_ITEM_ATTRIBUTE","_jsx","_Fragment","styles","useImperativeHandle","_jsxs","TabBarContext","HiddenAccessible","LiveRegion","TabBarContextMenu","View"],"mappings":"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"}