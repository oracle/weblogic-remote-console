{"version":3,"file":"UNSAFE_InputColor.js","sources":["../../src/UNSAFE_InputColor/InputColorPickerDropdown.tsx","../../src/UNSAFE_InputColor/useInputColorState.ts","../../src/UNSAFE_InputColor/useInputColor.ts","../../src/UNSAFE_InputColor/InputColor.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentProps } from 'preact';\nimport { useCallback, useState } from 'preact/hooks';\nimport { BundleType } from '../resources/nls/bundle';\nimport { ColorPicker } from '#UNSAFE_ColorPicker';\nimport { type CloseDetail as DropdownCloseDetail } from '#UNSAFE_Dropdown';\nimport { getClientHints } from '#utils/PRIVATE_clientHints';\nimport { FormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { InlineUserAssistance } from '../UNSAFE_UserAssistance';\nimport { dropdownStyles, userAssistanceStyles } from './themes/InputColorPickerDropdownStyles.css';\nimport { PositionData } from '../UNSAFE_Floating';\nimport { StickyPositioningDropdown } from '#PRIVATE_FormControls';\nimport { SectionedContent } from '#PRIVATE_FormControls';\nimport { type CloseDetail as SheetCloseDetail, Sheet } from '#UNSAFE_Sheet';\nimport type { TestIdProps } from '#hooks/UNSAFE_useTestId';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { SizeOptions } from '#UNSAFE_Floating/Floating';\nimport { InputColorPublicProps as InputColorProps } from './InputColor.types';\n\ntype StickyPositioningDropdownProps = ComponentProps<typeof StickyPositioningDropdown>;\ntype ColorPickerProps = ComponentProps<typeof ColorPicker>;\ntype PickedPropsFromColorPicker = Pick<ColorPickerProps, 'value' | 'onCommit'>;\ntype PickedPropsFromDropdown = Omit<StickyPositioningDropdownProps, 'onClose'>;\ntype CloseDetail = SheetCloseDetail | DropdownCloseDetail;\ntype PickedPropsFromInputColor = Pick<\n  InputColorProps,\n  | 'swatchSize'\n  | 'palette'\n  | 'value'\n  | 'aria-describedby'\n  | 'assistiveText'\n  | 'columnSpan'\n  | 'helpSourceLink'\n  | 'helpSourceText'\n  | 'isDisabled'\n  | 'isReadonly'\n  | 'isRequired'\n  | 'isRequiredShown'\n  | 'label'\n  | 'labelEdge'\n  | 'labelStartWidth'\n  | 'messages'\n  | 'textAlign'\n  | 'testId'\n  | 'userAssistanceDensity'\n  | 'variant'\n>;\n\ntype Props = PickedPropsFromColorPicker &\n  PickedPropsFromInputColor &\n  PickedPropsFromDropdown &\n  TestIdProps & {\n    /**\n     * Called when the dropdown or sheet is supposed to be closed.\n     */\n    onClose?: (detail: CloseDetail) => void;\n  };\n\n/**\n * Component that renders ColorPicker either inside a dropdown or sheet; in mobile,\n * it renders inside a sheet. Additionally, when a dropdown is being shown beneath\n * the component, we also show any user assistance text or messages below the picker\n * because otherwise that information would be obscured from view. When a sheet is being\n * shown, it will always display UA and messages at the bottom of the sheet.\n */\nconst InputColorPickerDropdown = ({\n  anchorRef,\n  assistiveText,\n  swatchSize,\n  palette,\n  helpSourceLink,\n  helpSourceText,\n  isDisabled,\n  isOpen,\n  isReadonly,\n  label,\n  onClose,\n  onCommit,\n  messages,\n  testId,\n  userAssistanceDensity,\n  value\n}: Props) => {\n  // If the dropdown opens above the component, we don't want to show UA or messages.\n  const [isDropdownAbove, setDropdownAbove] = useState(false);\n  const [prevIsOpen, setPrevIsOpen] = useState(isOpen);\n  const handleDropdownPosition = useCallback<\n    NonNullable<StickyPositioningDropdownProps['onPosition']>\n  >((data: PositionData) => {\n    setDropdownAbove(data.placement.startsWith('top'));\n  }, []);\n  // Reset the flag when the dropdown is closed.\n  if (prevIsOpen !== isOpen) {\n    setPrevIsOpen(isOpen);\n    if (!isOpen) {\n      setDropdownAbove(false);\n    }\n  }\n\n  const sizeOptions: SizeOptions = {\n    isMaxWidthAdjusted: false,\n    isMaxHeightAdjusted: true\n  };\n\n  // On mobile phones, the dropdown becomes a sheet.\n  const shouldShowSheet = isPhone();\n\n  const { colorPicker_label } = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const colorPickerAriaLabel = colorPicker_label();\n\n  const colorPickerMainContent = (\n    <ColorPicker\n      height={!shouldShowSheet ? 'auto' : undefined}\n      onCommit={onCommit}\n      // for sheet, we want the width to grow to the width of the sheet, otherwise it will use the theme default.\n      maxWidth={shouldShowSheet ? '100%' : undefined}\n      width=\"100%\"\n      swatchSize={swatchSize}\n      palette={palette}\n      testId={testId}\n      value={value}\n    />\n  );\n\n  const inlineUserAssistanceFooter =\n    isOpen &&\n    (!isDropdownAbove || shouldShowSheet) &&\n    !isDisabled &&\n    !isReadonly &&\n    (assistiveText || helpSourceLink || (messages && messages.length > 0)) &&\n    (userAssistanceDensity === 'efficient' || userAssistanceDensity === 'reflow') ? (\n      <FormFieldContext.Provider value={{ isFocused: true }}>\n        <div class={userAssistanceStyles}>\n          <InlineUserAssistance\n            assistiveText={assistiveText}\n            fieldLabel={label}\n            helpSourceLink={helpSourceLink}\n            helpSourceText={helpSourceText}\n            messages={messages}\n            userAssistanceDensity={userAssistanceDensity}\n          />\n        </div>\n      </FormFieldContext.Provider>\n    ) : undefined;\n\n  const contentTestId = testId ? testId + (shouldShowSheet ? '_sheet' : '_dropdown') : undefined;\n\n  // The same content is displayed either in a dropdown or sheet: color picker and inline UA.\n  // Add styling to the dropdown to enforce a fixed width.\n  const dropdownContent = (\n    <div class={dropdownStyles}>\n      <SectionedContent\n        paddingBlockEnd=\"3.5x\"\n        paddingBlockStart=\"3.5x\"\n        paddingInlineEnd=\"3.5x\"\n        paddingInlineStart=\"3.5x\"\n        aria-label={colorPickerAriaLabel}\n        footer={inlineUserAssistanceFooter}\n        hasFocusTrap={true}\n        main={colorPickerMainContent}\n        role=\"dialog\"\n        testId={contentTestId}\n      />\n    </div>\n  );\n\n  const dropdown = shouldShowSheet ? (\n    <Sheet isOpen={isOpen} onClose={onClose}>\n      <SectionedContent\n        aria-label={colorPickerAriaLabel}\n        footer={inlineUserAssistanceFooter}\n        hasFocusTrap={true}\n        main={colorPickerMainContent}\n        role=\"dialog\"\n        testId={contentTestId}\n      />\n    </Sheet>\n  ) : (\n    <StickyPositioningDropdown\n      anchorRef={anchorRef}\n      isOpen={isOpen}\n      onClose={onClose}\n      onPosition={handleDropdownPosition}\n      sizeOptions={sizeOptions}>\n      {dropdownContent}\n    </StickyPositioningDropdown>\n  );\n\n  return dropdown;\n};\n\nconst isPhone = () => {\n  return getClientHints().deviceType === 'phone';\n};\n\nexport { InputColorPickerDropdown, type CloseDetail };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useReducer } from 'preact/hooks';\nimport { type ColorValue } from '#utils/UNSAFE_color';\n\ntype InputColorState = {\n  /**\n   * Represents the current color value of the component. The user either selected\n   * the color in the picker, or typed it into the color field.\n   */\n  colorValue?: ColorValue;\n};\n\ntype ColorChangedAction = { type: 'colorChanged'; data?: ColorValue };\ntype ColorResetAction = { type: 'reset'; data?: ColorValue };\ntype ColorSelectedAction = { type: 'colorSelected'; data?: ColorValue };\ntype InputColorReducerAction = ColorChangedAction | ColorResetAction | ColorSelectedAction;\n\n// Use a reducer function to manage InputColorState.\nconst inputColorReducer = (\n  state: InputColorState,\n  action: InputColorReducerAction\n): InputColorState => {\n  switch (action.type) {\n    case 'colorChanged': {\n      return {\n        ...state,\n        colorValue: action.data\n      };\n    }\n    case 'colorSelected': {\n      return { ...state, colorValue: action.data };\n    }\n    case 'reset': {\n      return {\n        colorValue: action.data\n      };\n    }\n    default:\n      return state;\n  }\n};\n\ntype Props = {\n  /**\n   * The value of the InputColor, or undefined.\n   */\n  value?: ColorValue;\n};\n\n/**\n * useInputColorState calls useReducer to determine the initial state. Any changes to that state\n * are managed by dispatching actions to the reducer function.\n */\nconst useInputColorState = ({ value }: Props) => {\n  const [state, dispatch] = useReducer(inputColorReducer, {\n    colorValue: value\n  });\n\n  return { state, dispatch };\n};\n\nexport { useInputColorState };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport type { ComponentProps, RefObject } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport { ElementRef } from 'preact/compat';\nimport { colorsAreDifferent, type ColorValue } from '#utils/UNSAFE_color';\nimport { ColorPicker } from '#UNSAFE_ColorPicker';\nimport { ColorSwatch } from '#UNSAFE_ColorSwatch';\nimport { CloseDetail, InputColorPickerDropdown } from './InputColorPickerDropdown';\nimport { IconButton } from '#UNSAFE_IconButton';\nimport { useInputColorState } from './useInputColorState';\nimport type { ValueUpdateDetail } from '#utils/UNSAFE_valueUpdateDetail';\nimport { useDownToggle } from '#hooks/UNSAFE_useDownToggle';\nimport { InputColorPublicProps as InputColorProps } from './InputColor.types';\n\ntype SwatchHandle = ElementRef<typeof ColorSwatch>;\n\ntype ColorPickerProps = ComponentProps<typeof ColorPicker>;\ntype IconButtonProps = ComponentProps<typeof IconButton>;\ntype DropdownProps = ComponentProps<typeof InputColorPickerDropdown>;\n\ntype Props = {\n  onCommit: InputColorProps['onCommit'];\n  onInput: InputColorProps['onInput'];\n  value: InputColorProps['value'];\n};\n\n/**\n * Hook that provides handlers and other functionality for InputColor.\n */\nconst useInputColor = ({ onCommit, onInput, value: currentValue }: Props) => {\n  // Whether the dropdown is open.\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  // Ref to the swatch icon button.\n  const iconRef: RefObject<SwatchHandle> = useRef<SwatchHandle>(null);\n\n  // Ref to the text input which holds color value\n  const colorRef: RefObject<HTMLInputElement> = useRef<HTMLInputElement>(null);\n\n  // Keep track of whether the dropdown was just dismissed from an outside mousedown event.\n  const outsideMousedownRef = useRef<boolean>(false);\n  const outsideMousedownTimerRef = useRef<ReturnType<typeof setTimeout> | undefined>();\n\n  // Keep track of the last color values passed to onInput and onCommit.\n  const lastCommittedColorRef = useRef<ColorValue | undefined>(currentValue);\n  const lastColorRef = useRef<ColorValue | undefined>(currentValue);\n\n  // Keep track of the last controlled value passed from the parent, so we can detect a programmatic change.\n  const lastValueFromParentRef = useRef<ColorValue | undefined>(currentValue);\n\n  // Keep track of whether a color was selected in the color picker.\n  const colorSelectedRef = useRef<boolean>(false);\n\n  const { state, dispatch } = useInputColorState({ value: currentValue });\n\n  // If a new value is being pushed from the parent, and that value differs from\n  // the current value of the reducer, then this is a programmatic update\n  // and we need to call 'reset' to update the reducer state. Otherwise, the only\n  // time the reducer state is updated from the value is on mount.\n  if (colorsAreDifferent(lastValueFromParentRef.current, currentValue)) {\n    lastValueFromParentRef.current = currentValue;\n    if (colorsAreDifferent(currentValue, state.colorValue)) {\n      dispatch({ type: 'reset', data: currentValue });\n      lastColorRef.current = currentValue;\n      lastCommittedColorRef.current = currentValue;\n    }\n  }\n\n  // Reducer updates are async, so wait until the state updates and then call our callbacks.\n  useEffect(() => {\n    if (colorsAreDifferent(state.colorValue, lastColorRef.current)) {\n      onInput({ previousValue: lastColorRef.current, value: state.colorValue });\n      lastColorRef.current = state.colorValue;\n    }\n    if (\n      colorSelectedRef.current &&\n      colorsAreDifferent(state.colorValue, lastCommittedColorRef.current)\n    ) {\n      onCommit?.({ previousValue: lastCommittedColorRef.current, value: state.colorValue });\n      lastCommittedColorRef.current = state.colorValue;\n      colorSelectedRef.current = false;\n    }\n  }, [onCommit, onInput, state.colorValue]);\n\n  // Handle onInput from InputColor as values are entered in the input field.\n  // We wait for the state to update before calling onInput.\n  const colorInputHandler = useCallback<InputColorProps['onInput']>(\n    (detail: ValueUpdateDetail<ColorValue>) => {\n      dispatch({ type: 'colorChanged', data: detail.value });\n    },\n    [dispatch]\n  );\n\n  // Handle onCommit from InputColor, which is called when the user presses Enter or the field is blurred.\n  const colorCommitHandler = useCallback<NonNullable<InputColorProps['onCommit']>>(() => {\n    // If the current color value differs from the last committed value, then call onCommit.\n    if (colorsAreDifferent(lastCommittedColorRef.current, state.colorValue)) {\n      onCommit?.({ value: state.colorValue, previousValue: lastCommittedColorRef.current });\n      lastCommittedColorRef.current = state.colorValue;\n    }\n  }, [onCommit, state.colorValue]);\n\n  // Respond to onAction event from the swatch icon button. Toggles the color picker dropdown.\n  const colorIconActionHandler = useCallback<NonNullable<IconButtonProps['onAction']>>(() => {\n    // Only toggle the value of isOpen if we didn't just dismiss the dropdown.\n    if (!outsideMousedownRef.current) {\n      setIsOpen((prevIsOpen) => !prevIsOpen);\n    }\n    outsideMousedownRef.current = false;\n  }, []);\n\n  const dropdownCloseHandler = useCallback<NonNullable<DropdownProps['onClose']>>(\n    (detail: CloseDetail) => {\n      // Keep track of when the dropdown is closed via outside mousedown, including when the swatch icon\n      // is clicked. We need this in order to toggle visibility of the picker and dropdown.\n      if (detail.reason === 'outsideMousedown') {\n        outsideMousedownRef.current = true;\n        clearTimeout(outsideMousedownTimerRef.current);\n\n        // Clear the flag after a short delay to ensure the dropdown can be opened again.\n        outsideMousedownTimerRef.current = setTimeout(() => {\n          outsideMousedownRef.current = false;\n        }, 200);\n      } else if (detail.reason === 'dismissed' || detail.reason === 'keyboardDismissed') {\n        // Focus the swatch icon when the dropdown is closed.\n        iconRef.current?.focus();\n      }\n      setIsOpen(false);\n    },\n    []\n  );\n\n  // Handle color selection in the picker.\n  //   - Updates the value in state.\n  //   - Closes the dropdown.\n  //   - Sets focus to the color field.\n  const colorPickerCommitHandler = useCallback<ColorPickerProps['onCommit']>(\n    (detail: ValueUpdateDetail<ColorValue>) => {\n      // Set focus to the swatch when a color is selected.\n      iconRef.current?.focus();\n\n      // Set a ref indicating a color was selected.\n      colorSelectedRef.current = true;\n      dispatch({ type: 'colorSelected', data: detail.value });\n      setIsOpen(false);\n    },\n    [dispatch]\n  );\n\n  // The Redwood UX design calls for the dropdown to open when the down arrow is pressed.\n  // Handle opening the dropdown when the down arrow is pressed in the text edit field.\n  const colorPickerDownHandler = useCallback(() => {\n    setIsOpen(true);\n  }, []);\n\n  const { triggerProps: containerDropdownProps } = useDownToggle({\n    isOpen,\n    onToggle: colorPickerDownHandler\n  });\n\n  return {\n    colorIconActionHandler,\n    colorPickerCommitHandler,\n    dropdownCloseHandler,\n    containerDropdownProps,\n    colorValue: state.colorValue,\n    iconRef,\n    isOpen,\n    colorCommitHandler,\n    colorInputHandler,\n    colorRef\n  };\n};\n\nexport { useInputColor };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Ref } from 'preact';\nimport { forwardRef, ElementRef } from 'preact/compat';\nimport { useCallback, useImperativeHandle, useRef } from 'preact/hooks';\nimport { type BundleType } from '../resources/nls/bundle';\nimport { type ColorValue, isValidColorValue } from '#utils/UNSAFE_color';\nimport { InputColorPickerDropdown } from './InputColorPickerDropdown';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { ValueUpdateDetail } from '#utils/UNSAFE_valueUpdateDetail';\nimport { ColorSwatch } from '#UNSAFE_ColorSwatch';\nimport { useInputColor } from './useInputColor';\n\nimport { useClearIcon } from '../hooks/UNSAFE_useClearIcon';\nimport { FocusableHandle, useFocusableTextField } from '../hooks/UNSAFE_useFocusableTextField';\nimport { useFormContext } from '../hooks/UNSAFE_useFormContext';\nimport { FormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { useHover } from '../hooks/UNSAFE_useHover';\nimport { useTextField } from '../hooks/UNSAFE_useTextField';\nimport { Label } from '../UNSAFE_Label';\n\nimport {\n  ReadonlyTextField,\n  ReadonlyTextFieldInput,\n  TextField,\n  TextFieldInput\n} from '../UNSAFE_TextField';\nimport { CompactUserAssistance, InlineUserAssistance } from '../UNSAFE_UserAssistance';\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { ClearIcon } from '../PRIVATE_ClearIcon/ClearIcon';\nimport { useCurrentValueReducer } from '../hooks/UNSAFE_useCurrentValueReducer';\nimport { SelectableHandle, useSelectableTextField } from '#hooks/UNSAFE_useSelectableTextField';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { InputColorPublicProps as Props } from './InputColor.types';\n\ntype SwatchHandle = ElementRef<typeof ColorSwatch>;\n\ntype FocusSelectHandle = FocusableHandle & SelectableHandle;\n\n/**\n * An Input Color is a form field that allows users to select or input a color value,\n * using a color picker or by enterihg a HEX code.\n */\nexport const InputColor = forwardRef(\n  (\n    {\n      'aria-describedby': ariaDescribedBy,\n      swatchSize,\n      palette,\n      value,\n      isDisabled: propIsDisabled,\n      isReadonly: propIsReadonly,\n      labelEdge: propLabelEdge,\n      labelStartWidth: propLabelStartWidth,\n      isRequiredShown = false,\n      isRequired = false,\n      placeholder,\n      hasClearIcon,\n      columnSpan,\n      textAlign: propTextAlign,\n      autoComplete,\n      messages,\n      assistiveText,\n      helpSourceLink,\n      helpSourceText,\n      label,\n      onCommit,\n      onInput,\n      testId,\n      variant,\n      userAssistanceDensity: propUserAssistanceDensity\n    }: Props,\n    ref?: Ref<FocusSelectHandle>\n  ) => {\n    const {\n      colorIconActionHandler,\n      colorPickerCommitHandler,\n      dropdownCloseHandler,\n      colorValue,\n      containerDropdownProps,\n      iconRef,\n      isOpen,\n      colorCommitHandler,\n      colorInputHandler,\n      colorRef: enabledElementRef\n    } = useInputColor({\n      onCommit,\n      onInput,\n      value\n    });\n\n    const mainFieldRef = useRef<HTMLDivElement>(null);\n    const { inputColor_selectColor } = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n    const colorIconAriaLabel = inputColor_selectColor();\n    const { onKeyDown, ...inputContainerAriaProps } = containerDropdownProps;\n\n    const { currentCommitValue, dispatch } = useCurrentValueReducer({ value: colorValue });\n    const onInputAndDispatch = useCallback(\n      (detail: ValueUpdateDetail<ColorValue>) => {\n        // Should dispatch happen first? This will queue up a re-render, ordering should not cause issues (this is async)\n        dispatch({ type: 'input', payload: detail.value });\n        colorInputHandler?.(detail);\n      },\n      [colorInputHandler, dispatch]\n    );\n    const onCommitAndDispatch = useCallback(\n      (detail: ValueUpdateDetail<ColorValue>) => {\n        // Should dispatch happen first? This will queue up a re-render, ordering should not cause issues (this is async)\n        dispatch({ type: 'commit', payload: detail.value });\n        colorCommitHandler?.(detail);\n      },\n      [colorCommitHandler, dispatch]\n    );\n\n    const startContent = () => (\n      <ColorSwatch\n        size=\"xs\"\n        aria-haspopup={palette ? 'grid' : undefined} // with only palette, grid is a better choice than dialog for now.\n        aria-label={palette ? colorIconAriaLabel : undefined}\n        isDisabled={isDisabled}\n        isButton={true}\n        isTooltipDisabled={isOpen}\n        ref={iconRef as Ref<SwatchHandle>}\n        testId={testId ? testId + '_colorIcon' : undefined}\n        value={currentCommitValue as ColorValue}\n        onToggle={isDisabled || !palette ? undefined : colorIconActionHandler}\n      />\n    );\n    const {\n      isDisabled: isFormDisabled,\n      isReadonly: isFormReadonly,\n      labelEdge: formLabelEdge,\n      labelStartWidth: formLabelStartWidth,\n      textAlign: formTextAlign,\n      userAssistanceDensity: formUserAssistanceDensity\n    } = useFormContext();\n    // default to FormContext values if component properties are not specified\n    const isDisabled = propIsDisabled ?? isFormDisabled;\n    const isReadonly = propIsReadonly ?? isFormReadonly;\n    const labelEdge = propLabelEdge ?? formLabelEdge;\n    const labelStartWidth = propLabelStartWidth ?? formLabelStartWidth;\n    const textAlign = propTextAlign ?? formTextAlign;\n    const userAssistanceDensity = propUserAssistanceDensity ?? formUserAssistanceDensity;\n\n    const readonlyElementRef = useRef<HTMLDivElement>(null);\n\n    const {\n      focusProps,\n      isFocused,\n      methods: focusMethods\n    } = useFocusableTextField<HTMLInputElement, HTMLDivElement>({\n      isDisabled,\n      isReadonly,\n      enabledElementRef,\n      readonlyElementRef\n    });\n\n    const { methods: selectMethods } = useSelectableTextField<HTMLInputElement>(enabledElementRef);\n\n    useImperativeHandle(ref!, () => mergeProps(focusMethods, selectMethods), [\n      focusMethods,\n      selectMethods\n    ]);\n\n    const { hoverProps, isHover } = useHover({ isDisabled: isReadonly || isDisabled || false });\n\n    const { formFieldContext, inputProps, labelProps, textFieldProps, userAssistanceProps } =\n      useTextField({\n        ariaDescribedBy,\n        helpSourceLink,\n        helpSourceText,\n        isDisabled,\n        isFocused: isFocused || isOpen,\n        isReadonly,\n        isRequiredShown,\n        labelEdge,\n        messages,\n        styleVariant: variant,\n        userAssistanceDensity,\n        value: colorValue\n      });\n\n    const onClickClearIcon = useCallback(() => {\n      // Clicking the clear icon should put the focus on the input field\n      enabledElementRef.current?.focus();\n      // Send an event to clear the field's value\n      onInputAndDispatch?.({ previousValue: colorValue, value: undefined });\n    }, [onInputAndDispatch, colorValue, enabledElementRef]);\n\n    const maybeClearIcon = useClearIcon({\n      clearIcon: <ClearIcon onClick={onClickClearIcon} testId={`${testId}_clearicon`} />,\n      display: hasClearIcon,\n      hasValue: formFieldContext.hasValue,\n      isFocused,\n      isEnabled: !isReadonly && !isDisabled,\n      isHover\n    });\n\n    const hasInsideLabel = label !== undefined && labelEdge === 'inside';\n\n    const labelComp = labelEdge !== 'none' ? <Label {...labelProps}>{label}</Label> : undefined;\n\n    const fieldLabelProps = {\n      label: labelEdge !== 'none' ? labelComp : undefined,\n      labelEdge: labelEdge !== 'none' ? labelEdge : undefined,\n      labelStartWidth: labelEdge !== 'none' ? labelStartWidth : undefined\n    };\n\n    const ariaLabel = labelEdge === 'none' ? label : undefined;\n    const isInlineDensity =\n      userAssistanceDensity === 'efficient' || userAssistanceDensity === 'reflow';\n\n    const inlineUserAssistance = isInlineDensity ? (\n      isDisabled || isReadonly ? (\n        // save space for user assistance if density is 'efficient', even though we don't\n        // render user assistance for disabled or readonly fields\n        userAssistanceDensity !== 'efficient' ? undefined : (\n          <InlineUserAssistance\n            userAssistanceDensity={userAssistanceDensity}\n            {...userAssistanceProps}\n          />\n        )\n      ) : (\n        <InlineUserAssistance\n          assistiveText={assistiveText}\n          fieldLabel={label}\n          helpSourceLink={helpSourceLink}\n          helpSourceText={helpSourceText}\n          messages={messages}\n          isRequiredShown={isRequiredShown}\n          userAssistanceDensity={userAssistanceDensity}\n          {...userAssistanceProps}\n        />\n      )\n    ) : undefined;\n\n    const aRef = useRef<HTMLDivElement>(null);\n    const anchorRef = mainFieldRef ?? aRef;\n\n    const compactUserAssistance =\n      userAssistanceDensity === 'compact' ? (\n        <CompactUserAssistance\n          anchorRef={anchorRef}\n          messages={messages}\n          assistiveText={assistiveText}\n          {...userAssistanceProps}\n        />\n      ) : undefined;\n\n    const mainContent = isReadonly ? (\n      <ReadonlyTextFieldInput\n        aria-describedby={inputProps['aria-describedby']}\n        aria-label={ariaLabel}\n        aria-labelledby={labelProps.id}\n        as=\"div\"\n        elementRef={readonlyElementRef}\n        textAlign={textAlign}\n        value={colorValue}\n        hasEmptyLabel={label === '' && labelEdge === 'none'}\n        hasInsideLabel={hasInsideLabel}\n      />\n    ) : (\n      <TextFieldInput\n        aria-labelledby={labelProps.id}\n        aria-label={ariaLabel}\n        autoComplete={autoComplete}\n        currentCommitValue={currentCommitValue}\n        hasEmptyLabel={label === '' && labelEdge === 'none'}\n        hasEndContent={false}\n        hasInsideLabel={labelComp !== undefined && labelEdge === 'inside'}\n        hasStartContent={true}\n        inputRef={enabledElementRef}\n        isRequired={isRequired}\n        placeholder={placeholder}\n        textAlign={textAlign}\n        type={isMobile() ? 'text' : undefined}\n        value={colorValue}\n        onCommit={\n          onCommitAndDispatch as (detail: ValueUpdateDetail<string>) => {\n            value: string;\n          }\n        }\n        onInput={\n          onInputAndDispatch as (detail: ValueUpdateDetail<string>) => {\n            value: string;\n          }\n        }\n        onKeyDown={onKeyDown}\n        {...inputProps}\n      />\n    );\n\n    return (\n      <>\n        <FormFieldContext.Provider value={formFieldContext}>\n          {isReadonly ? (\n            <ReadonlyTextField\n              role=\"presentation\"\n              columnSpan={columnSpan}\n              compactUserAssistance={compactUserAssistance}\n              inlineUserAssistance={inlineUserAssistance}\n              onBlur={focusProps.onFocusOut}\n              onFocus={focusProps.onFocusIn}\n              ref={anchorRef}\n              mainContent={mainContent}\n              testId={testId}\n              {...fieldLabelProps}></ReadonlyTextField>\n          ) : (\n            <TextField\n              endContent={maybeClearIcon}\n              columnSpan={columnSpan}\n              compactUserAssistance={compactUserAssistance}\n              inlineUserAssistance={inlineUserAssistance}\n              mainContent={mainContent}\n              onBlur={focusProps.onFocusOut}\n              onFocus={focusProps.onFocusIn}\n              startContent={startContent()}\n              mainFieldRef={anchorRef}\n              hasZeroStartMargin={true}\n              testId={testId}\n              {...textFieldProps}\n              {...fieldLabelProps}\n              {...hoverProps}\n              {...inputContainerAriaProps}\n            />\n          )}\n        </FormFieldContext.Provider>\n\n        {isOpen && !isReadonly && !isDisabled && (\n          <InputColorPickerDropdown\n            anchorRef={mainFieldRef}\n            assistiveText={assistiveText}\n            helpSourceLink={helpSourceLink}\n            helpSourceText={helpSourceText}\n            isDisabled={isDisabled}\n            isReadonly={isReadonly}\n            isOpen={isOpen}\n            label={label}\n            onClose={dropdownCloseHandler}\n            onCommit={colorPickerCommitHandler}\n            messages={messages}\n            testId={testId ? testId + '_colorPicker' : undefined}\n            userAssistanceDensity={userAssistanceDensity}\n            // memoize this for performance\n            value={colorValue && isValidColorValue(colorValue) ? colorValue : undefined}\n            palette={palette}\n            swatchSize={swatchSize}\n          />\n        )}\n      </>\n    );\n  }\n);\n\n/**\n * Helper function to determine whether the current device is a mobile device\n * @returns true if running on a mobile device, false otherwise\n */\nfunction isMobile() {\n  const deviceType = getClientHints().deviceType;\n  return deviceType === 'phone' || deviceType === 'tablet';\n}\nInputColor.displayName = 'InputColor';\n"],"names":["useState","useCallback","useTranslationBundle","_jsx","ColorPicker","FormFieldContext","userAssistanceStyles","InlineUserAssistance","dropdownStyles","SectionedContent","Sheet","StickyPositioningDropdown","getClientHints","useReducer","useRef","colorsAreDifferent","useEffect","useDownToggle","forwardRef","useCurrentValueReducer","ColorSwatch","useFormContext","useFocusableTextField","useSelectableTextField","useImperativeHandle","mergeProps","useHover","useTextField","useClearIcon","ClearIcon","Label","CompactUserAssistance","ReadonlyTextFieldInput","TextFieldInput","_jsxs","ReadonlyTextField","TextField","isValidColorValue"],"mappings":"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"}