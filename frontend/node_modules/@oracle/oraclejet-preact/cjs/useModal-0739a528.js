/* @oracle/oraclejet-preact: undefined */
'use strict';

var compat = require('preact/compat');

const MODAL_OVERLAY = Symbol.for('oj-modal-overlay');
/**
 *
 * @param props
 */
const useModal = (props) => {
    const { isOpen, onBackdropClick: onBackdropClickProp } = props;
    const backdropRef = compat.useRef(null);
    const mouseDownTarget = compat.useRef(null);
    const onMouseDown = compat.useCallback((event) => {
        if (backdropRef.current === event.target) {
            mouseDownTarget.current = event.target;
        }
    }, []);
    const onBackdropClick = compat.useCallback((event) => {
        if (backdropRef.current === event.target) {
            event.stopPropagation();
            // event should originate on the same target
            if (mouseDownTarget.current === event.target) {
                onBackdropClickProp?.(event);
            }
        }
    }, [onBackdropClickProp]);
    compat.useEffect(() => {
        const modal = backdropRef.current;
        if (modal) {
            modal.addEventListener('mousedown', onMouseDown);
            modal.addEventListener('click', onBackdropClick);
            modal[MODAL_OVERLAY] = true;
            return () => {
                modal.removeEventListener('mousedown', onMouseDown);
                modal.removeEventListener('click', onBackdropClick);
                delete modal[MODAL_OVERLAY];
            };
        }
        return () => { };
    }, [isOpen, onMouseDown, onBackdropClick]);
    return {
        backdropRef
    };
};

exports.MODAL_OVERLAY = MODAL_OVERLAY;
exports.useModal = useModal;
//# sourceMappingURL=useModal-0739a528.js.map
