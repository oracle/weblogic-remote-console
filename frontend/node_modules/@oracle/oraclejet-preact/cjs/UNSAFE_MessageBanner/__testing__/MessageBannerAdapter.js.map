{"version":3,"file":"MessageBannerAdapter.js","sources":["../../../../src/UNSAFE_MessageBanner/__testing__/MessageBannerAdapter.ts"],"sourcesContent":["import { byCss } from '@oracle/oraclejet-testing/UNSAFE_Locators';\nimport { TestAdapter } from '@oracle/oraclejet-testing/UNSAFE_TestAdapter';\nimport { TestElement } from '@oracle/oraclejet-testing/UNSAFE_Driver';\n\nexport class MessageBannerAdapter extends TestAdapter {\n  /**\n   * Closes the message identified by the provided key.\n   * @param messageLocator.key {string | number} The key within the MessageBanner's dataset associated with the individual message.\n   */\n  async doClose(messageLocator: { key: string | number }) {\n    const driver = this.getTestDriver();\n    const messageSelector = this.getMessageSelector(messageLocator.key);\n    const closeButtonSelector = '[data-oj-message-close-button] button';\n\n    let closeButton;\n    try {\n      closeButton = await (\n        await this.getElement()\n      ).waitForElement(byCss(`${messageSelector} ${closeButtonSelector}`));\n    } catch {\n      throw new Error('The close operation is not applicable for the messageLocator.');\n    }\n\n    await driver.click(closeButton);\n  }\n\n  /**\n   * Retrieve a TestElement which represents the custom detail content of a single message.\n   * @param messageLocator.key {string | number} The key within the MessageBanner's dataset associated with the individual message.\n   * @throws {Error} when the detail content rendered is not provided by the application\n   * @returns The detail content of the message rendered by the application\n   */\n  async findDetail(messageLocator: { key: string | number }): Promise<TestElement> {\n    const key = messageLocator.key;\n    const messageSelector = this.getMessageSelector(key);\n    const customDetailContentSelector = '[data-oj-message-custom-detail]';\n\n    try {\n      const detail = await (\n        await this.getElement()\n      ).waitForElement(byCss(`${messageSelector} ${customDetailContentSelector}`));\n      return detail;\n    } catch {\n      throw new Error('No corresponding detail template or renderer found for the messageLocator.');\n    }\n  }\n\n  /**\n   * Creates the CSS selector for the message with the provided key.\n   *\n   * @param key The key of the message\n   * @returns the css selector that can used to fetch the message\n   */\n  private getMessageSelector(key: string | number) {\n    return typeof key === 'number'\n      ? `[data-oj-key=\"number-${key}\"]`\n      : `[data-oj-key=\"string-${key}\"]`;\n  }\n}\n"],"names":["TestAdapter","byCss"],"mappings":";;;;;;;;AAIM,MAAO,oBAAqB,SAAQA,8BAAW,CAAA;AACnD;;;AAGG;IACH,MAAM,OAAO,CAAC,cAAwC,EAAA;AACpD,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACpC,MAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QACpE,MAAM,mBAAmB,GAAG,uCAAuC,CAAC;AAEpE,QAAA,IAAI,WAAW,CAAC;AAChB,QAAA,IAAI;YACF,WAAW,GAAG,MAAM,CAClB,MAAM,IAAI,CAAC,UAAU,EAAE,EACvB,cAAc,CAACC,qBAAK,CAAC,CAAG,EAAA,eAAe,IAAI,mBAAmB,CAAA,CAAE,CAAC,CAAC,CAAC;SACtE;AAAC,QAAA,MAAM;AACN,YAAA,MAAM,IAAI,KAAK,CAAC,+DAA+D,CAAC,CAAC;SAClF;AAED,QAAA,MAAM,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;KACjC;AAED;;;;;AAKG;IACH,MAAM,UAAU,CAAC,cAAwC,EAAA;AACvD,QAAA,MAAM,GAAG,GAAG,cAAc,CAAC,GAAG,CAAC;QAC/B,MAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;QACrD,MAAM,2BAA2B,GAAG,iCAAiC,CAAC;AAEtE,QAAA,IAAI;YACF,MAAM,MAAM,GAAG,MAAM,CACnB,MAAM,IAAI,CAAC,UAAU,EAAE,EACvB,cAAc,CAACA,qBAAK,CAAC,CAAG,EAAA,eAAe,IAAI,2BAA2B,CAAA,CAAE,CAAC,CAAC,CAAC;AAC7E,YAAA,OAAO,MAAM,CAAC;SACf;AAAC,QAAA,MAAM;AACN,YAAA,MAAM,IAAI,KAAK,CAAC,4EAA4E,CAAC,CAAC;SAC/F;KACF;AAED;;;;;AAKG;AACK,IAAA,kBAAkB,CAAC,GAAoB,EAAA;QAC7C,OAAO,OAAO,GAAG,KAAK,QAAQ;cAC1B,CAAwB,qBAAA,EAAA,GAAG,CAAI,EAAA,CAAA;AACjC,cAAE,CAAA,qBAAA,EAAwB,GAAG,CAAA,EAAA,CAAI,CAAC;KACrC;AACF;;;;"}