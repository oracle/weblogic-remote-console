/* @oracle/oraclejet-preact: undefined */
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var UNSAFE_Locators = require('@oracle/oraclejet-testing/UNSAFE_Locators');
var UNSAFE_TestAdapter = require('@oracle/oraclejet-testing/UNSAFE_TestAdapter');

class MessageBannerAdapter extends UNSAFE_TestAdapter.TestAdapter {
    /**
     * Closes the message identified by the provided key.
     * @param messageLocator.key {string | number} The key within the MessageBanner's dataset associated with the individual message.
     */
    async doClose(messageLocator) {
        const driver = this.getTestDriver();
        const messageSelector = this.getMessageSelector(messageLocator.key);
        const closeButtonSelector = '[data-oj-message-close-button] button';
        let closeButton;
        try {
            closeButton = await (await this.getElement()).waitForElement(UNSAFE_Locators.byCss(`${messageSelector} ${closeButtonSelector}`));
        }
        catch {
            throw new Error('The close operation is not applicable for the messageLocator.');
        }
        await driver.click(closeButton);
    }
    /**
     * Retrieve a TestElement which represents the custom detail content of a single message.
     * @param messageLocator.key {string | number} The key within the MessageBanner's dataset associated with the individual message.
     * @throws {Error} when the detail content rendered is not provided by the application
     * @returns The detail content of the message rendered by the application
     */
    async findDetail(messageLocator) {
        const key = messageLocator.key;
        const messageSelector = this.getMessageSelector(key);
        const customDetailContentSelector = '[data-oj-message-custom-detail]';
        try {
            const detail = await (await this.getElement()).waitForElement(UNSAFE_Locators.byCss(`${messageSelector} ${customDetailContentSelector}`));
            return detail;
        }
        catch {
            throw new Error('No corresponding detail template or renderer found for the messageLocator.');
        }
    }
    /**
     * Creates the CSS selector for the message with the provided key.
     *
     * @param key The key of the message
     * @returns the css selector that can used to fetch the message
     */
    getMessageSelector(key) {
        return typeof key === 'number'
            ? `[data-oj-key="number-${key}"]`
            : `[data-oj-key="string-${key}"]`;
    }
}

exports.MessageBannerAdapter = MessageBannerAdapter;
//# sourceMappingURL=MessageBannerAdapter.js.map
