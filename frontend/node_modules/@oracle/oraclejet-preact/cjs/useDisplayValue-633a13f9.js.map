{"version":3,"file":"useDisplayValue-633a13f9.js","sources":["../../src/UNSAFE_SelectSingle/SelectSingleField.tsx","../../src/UNSAFE_SelectSingle/SelectSingleFieldInput.tsx","../../src/UNSAFE_SelectSingle/useDisplayValue.ts"],"sourcesContent":["import { DropdownArrow } from '#PRIVATE_SelectCommon';\nimport { IconButton } from '#UNSAFE_IconButton';\nimport { CancelS } from '#UNSAFE_RedwoodIcons/CancelS';\nimport { NavLeft } from '#UNSAFE_RedwoodIcons/NavLeft';\nimport { TextField } from '#UNSAFE_TextField';\nimport { useFormFieldContext } from '#hooks/UNSAFE_useFormFieldContext';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport { ComponentProps } from 'preact';\n\ntype PickedTextFieldProps = Pick<\n  ComponentProps<typeof TextField>,\n  | 'columnSpan'\n  | 'compactUserAssistance'\n  | 'contentVariant'\n  | 'endContent'\n  | 'hasZeroStartMargin'\n  | 'id'\n  | 'inlineUserAssistance'\n  | 'label'\n  | 'labelEdge'\n  | 'labelStartWidth'\n  | 'mainFieldRef'\n  | 'onBlur'\n  | 'onFocus'\n  | 'onKeyDown'\n  | 'onMouseDown'\n  | 'onMouseEnter'\n  | 'onMouseLeave'\n  | 'resize'\n  | 'rootRef'\n  | 'startContent'\n  | 'statusVariant'\n  | 'styleVariant'\n  | 'testId'\n> & {\n  children: ComponentProps<typeof TextField>['mainContent'];\n};\n\ntype Props = PickedTextFieldProps & {\n  hasInsideLabel?: boolean;\n  isBackButtonShown?: boolean;\n  isClearButtonShown?: boolean;\n  isDropdownArrowShown?: boolean;\n  onBackButtonClick?: ComponentProps<typeof IconButton>['onAction'];\n  onClearButtonClick?: ComponentProps<typeof IconButton>['onAction'];\n  onDropdownArrowClick?: ComponentProps<typeof DropdownArrow>['onClick'];\n};\n\nexport function SelectSingleField({\n  children,\n  hasInsideLabel,\n  isBackButtonShown,\n  isClearButtonShown,\n  isDropdownArrowShown,\n  onBackButtonClick,\n  onClearButtonClick,\n  onDropdownArrowClick,\n  ...passThroughTextFieldProps\n}: Props) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const { isDisabled, isLoading } = useFormFieldContext();\n\n  const startContent = isBackButtonShown ? (\n    <IconButton\n      aria-label={translations.selectMultiple_back()}\n      size=\"xs\"\n      variant=\"ghost\"\n      onAction={onBackButtonClick}>\n      <NavLeft />\n    </IconButton>\n  ) : null;\n\n  const endContent = isLoading ? undefined : (\n    <>\n      {isClearButtonShown && (\n        <IconButton\n          aria-label={translations.formControl_clear()}\n          size=\"sm\"\n          variant=\"ghost\"\n          onAction={onClearButtonClick}>\n          <CancelS />\n        </IconButton>\n      )}\n      {isDropdownArrowShown && (\n        <DropdownArrow\n          isDisabled={isDisabled}\n          onClick={onDropdownArrowClick}\n          testId={`${passThroughTextFieldProps.testId}_dropdownarrow`}\n        />\n      )}\n    </>\n  );\n\n  return (\n    <TextField\n      startContent={startContent}\n      mainContent={children}\n      endContent={endContent}\n      {...passThroughTextFieldProps}\n    />\n  );\n}\n","import { LiveRegion } from '#UNSAFE_LiveRegion';\nimport { TextFieldInput } from '#UNSAFE_TextField';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport { ComponentProps, Ref } from 'preact';\n\ntype PickedTextFieldInputProps = Pick<\n  ComponentProps<typeof TextFieldInput>,\n  | 'aria-controls'\n  | 'aria-describedby'\n  | 'aria-expanded'\n  | 'aria-invalid'\n  | 'aria-label'\n  | 'hasEmptyLabel'\n  | 'hasInsideLabel'\n  | 'id'\n  | 'isRequired'\n  | 'onBlur'\n  | 'onFocus'\n  | 'onInput'\n  | 'onKeyDown'\n  | 'onKeyUp'\n  | 'placeholder'\n  | 'textAlign'\n  | 'variant'\n> & {\n  inputRef?: Ref<HTMLInputElement>;\n};\n\ntype Props = PickedTextFieldInputProps & {\n  displayValue: string;\n  isAddToListShown: boolean;\n  isAdvancedSearchShown: boolean;\n  isUserFiltering: boolean;\n  liveRegionText?: string;\n  userInput?: string;\n  virtualKeyboard?: 'auto' | 'email' | 'number' | 'search' | 'tel' | 'text' | 'url';\n};\n\nexport function SelectSingleFieldInput({\n  displayValue,\n  isAddToListShown,\n  isAdvancedSearchShown,\n  isUserFiltering,\n  liveRegionText,\n  userInput,\n  virtualKeyboard,\n  ...passThroughTextFieldInputProps\n}: Props) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const addToListAccText = translations.select_addToListAvailable();\n  const advancedSearchAccText = translations.select_moreSearchOptionsAvailable();\n\n  return (\n    <>\n      <TextFieldInput\n        {...passThroughTextFieldInputProps}\n        hasEndContent={true}\n        aria-autocomplete=\"list\"\n        autoComplete=\"off\"\n        role=\"combobox\"\n        spellcheck={false}\n        type={virtualKeyboard === 'auto' ? 'search' : virtualKeyboard}\n        value={isUserFiltering ? userInput : displayValue}\n      />\n      <LiveRegion>{liveRegionText}</LiveRegion>\n      {isAddToListShown ? <LiveRegion>{addToListAccText}</LiveRegion> : undefined}\n      {isAdvancedSearchShown ? <LiveRegion>{advancedSearchAccText}</LiveRegion> : undefined}\n    </>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useMemo } from 'preact/hooks';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { renderItemText } from '../PRIVATE_SelectCommon';\n\nexport function useDisplayValue<K, D>(\n  itemText: ItemTextType<K, D>,\n  valueItem?: Item<K, D>\n): string {\n  // create the text displayed in the field from the selected value\n  const displayValue = useMemo(() => {\n    return valueItem === undefined ? '' : renderItemText(valueItem, itemText) ?? '';\n  }, [valueItem, itemText]);\n\n  return displayValue;\n}\n"],"names":["useTranslationBundle","useFormFieldContext","_jsx","IconButton","NavLeft","_jsxs","_Fragment","CancelS","DropdownArrow","TextField","TextFieldInput","LiveRegion","useMemo","renderItemText"],"mappings":"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"}