{"version":3,"file":"InputDateMaskAdapter.js","sources":["../../../../src/UNSAFE_InputDateMask/__testing__/InputDateMaskAdapter.ts"],"sourcesContent":["import { CalendarDate } from '#utils/UNSAFE_calendarDateUtils';\nimport { Keys } from '@oracle/oraclejet-testing/UNSAFE_Driver';\nimport { byCss } from '@oracle/oraclejet-testing/UNSAFE_Locators';\nimport { TestAdapter } from '@oracle/oraclejet-testing/UNSAFE_TestAdapter';\nimport { TestElement } from '@oracle/oraclejet-testing/UNSAFE_Driver';\nexport class InputDateMaskAdapter extends TestAdapter {\n  /**\n   * Clear and commit the value of the component\n   * @returns Promise<void>\n   */\n  async clear() {\n    await this.changeValue(undefined);\n  }\n\n  /**\n   * Change and commit the value of the component\n   * @param value {CalendarDate | undefined} The new value.\n   * @returns Promise<void>\n   */\n  async changeValue(value: CalendarDate | undefined) {\n    const driver = this.getTestDriver();\n    const el = await this.getElement();\n\n    // Deleting segments one at a time, rather than using Control-A to select all\n    // and then delete, works better on Safari and Firefox.\n    const monthSegment = await el.waitForElement(byCss(`div[data-segment=\"month\"]`));\n    await driver.click(monthSegment);\n    await driver.sendKeys(monthSegment, Keys['DELETE']);\n\n    let daySegment: TestElement | undefined;\n    try {\n      daySegment = await el.waitForElement(byCss(`div[data-segment=\"day\"]`));\n      await driver.click(daySegment);\n      await driver.sendKeys(daySegment, Keys['DELETE']);\n    } catch (_e) {\n      // The day segment may not exist depending on the granularity.\n      // If the segment isn't found there's nothing to update.\n    }\n\n    const yearSegment = await el.waitForElement(byCss(`div[data-segment=\"year\"]`));\n    await driver.click(yearSegment);\n    await driver.sendKeys(yearSegment, Keys['DELETE']);\n\n    if (value !== undefined) {\n      if (value.month !== undefined) {\n        await driver.click(monthSegment);\n        await driver.sendKeys(monthSegment, '' + value.month);\n      }\n\n      if (daySegment && value.day !== undefined) {\n        await driver.click(daySegment);\n        await driver.sendKeys(daySegment, '' + value.day);\n      }\n\n      // Update the year. Send the keys one at a time, because otherwise the year segment\n      // only seems to end up with the last two digits of the year (webdriver only, works\n      // fine in Jest).\n      if (value.year !== undefined) {\n        await driver.click(yearSegment);\n        const year = '' + value.year;\n\n        for (let i = 0; i < year.length; i++) {\n          await driver.sendKeys(yearSegment, year.charAt(i));\n        }\n      }\n    }\n\n    // Commit.\n    await driver.sendKeys(yearSegment, Keys['ENTER']);\n  }\n}\n"],"names":["TestAdapter","byCss","Keys"],"mappings":";;;;;;;;;AAKM,MAAO,oBAAqB,SAAQA,8BAAW,CAAA;AACnD;;;AAGG;AACH,IAAA,MAAM,KAAK,GAAA;AACT,QAAA,MAAM,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;KACnC;AAED;;;;AAIG;IACH,MAAM,WAAW,CAAC,KAA+B,EAAA;AAC/C,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;AACpC,QAAA,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;;;AAInC,QAAA,MAAM,YAAY,GAAG,MAAM,EAAE,CAAC,cAAc,CAACC,qBAAK,CAAC,CAAA,yBAAA,CAA2B,CAAC,CAAC,CAAC;AACjF,QAAA,MAAM,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QACjC,MAAM,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAEC,kBAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;AAEpD,QAAA,IAAI,UAAmC,CAAC;AACxC,QAAA,IAAI;YACF,UAAU,GAAG,MAAM,EAAE,CAAC,cAAc,CAACD,qBAAK,CAAC,CAAA,uBAAA,CAAyB,CAAC,CAAC,CAAC;AACvE,YAAA,MAAM,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YAC/B,MAAM,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAEC,kBAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;SACnD;QAAC,OAAO,EAAE,EAAE;;;SAGZ;AAED,QAAA,MAAM,WAAW,GAAG,MAAM,EAAE,CAAC,cAAc,CAACD,qBAAK,CAAC,CAAA,wBAAA,CAA0B,CAAC,CAAC,CAAC;AAC/E,QAAA,MAAM,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QAChC,MAAM,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAEC,kBAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;AAEnD,QAAA,IAAI,KAAK,KAAK,SAAS,EAAE;AACvB,YAAA,IAAI,KAAK,CAAC,KAAK,KAAK,SAAS,EAAE;AAC7B,gBAAA,MAAM,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;AACjC,gBAAA,MAAM,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAE,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;aACvD;YAED,IAAI,UAAU,IAAI,KAAK,CAAC,GAAG,KAAK,SAAS,EAAE;AACzC,gBAAA,MAAM,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC/B,gBAAA,MAAM,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAE,EAAE,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;aACnD;;;;AAKD,YAAA,IAAI,KAAK,CAAC,IAAI,KAAK,SAAS,EAAE;AAC5B,gBAAA,MAAM,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AAChC,gBAAA,MAAM,IAAI,GAAG,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC;AAE7B,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,oBAAA,MAAM,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;iBACpD;aACF;SACF;;QAGD,MAAM,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAEA,kBAAI,CAAC,OAAO,CAAC,CAAC,CAAC;KACnD;AACF;;;;"}