/* @oracle/oraclejet-preact: undefined */
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var jsxRuntime = require('preact/jsx-runtime');
var hooks = require('preact/hooks');
require('./FormFieldContext-69fe83d2.js');
var useFormFieldContext = require('./useFormFieldContext-4632eb73.js');
var RichSelectionStartContext = require('./RichSelectionStartContext-3d10f9ed.js');
var CheckboxSet = require('./CheckboxSet-65fb2139.js');
var RadioItemContext = require('./RadioItemContext-3a86c17d.js');
var TruncatingText = require('./TruncatingText-82495650.js');
var classNames = require('./classNames-c14c6ef3.js');
var UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css = require('./UNSAFE_RichSelectionItem/themes/RichSelectionItemStyles.css.js');
var View = require('./View-7d9034a7.js');
var useTestId = require('./useTestId-9093a54b.js');
var AspectRatio = require('./AspectRatio-c1404497.js');
var Avatar = require('./Avatar-c84a09ae.js');
var Center = require('./Center-1098ae1b.js');
var Flex = require('./Flex-6ca216a7.js');
var useId = require('./useId-6c0eeb27.js');
require('./FormContext-d1d05967.js');
var useFormContext = require('./useFormContext-a794f7b6.js');
var usePress = require('./usePress-886180e4.js');
var useComponentTheme = require('./useComponentTheme-082fc8e4.js');
var useInteractionStyle = require('./useInteractionStyle-c203a8a0.js');
require('./TabbableModeContext-e99d527e.js');
var useTabbableMode = require('./useTabbableMode-a275583f.js');
var StyledCheckbox = require('./StyledCheckbox-4476f902.js');
var Check = require('./Check-da5641a4.js');
var RadioButtonOff = require('./RadioButtonOff-a12abf6f.js');
var RadioButtonOn = require('./RadioButtonOn-afb03df0.js');
var HiddenAccessible = require('./HiddenAccessible-087eb49a.js');
var UNSAFE_RadioItem_themes_RadioIconContract_css = require('./UNSAFE_RadioItem/themes/RadioIconContract.css.js');
var UNSAFE_RadioItem_themes_RadioStyles_css = require('./UNSAFE_RadioItem/themes/RadioStyles.css.js');
var UNSAFE_RadioItem_themes_redwood_RadioIconTheme = require('./UNSAFE_RadioItem/themes/redwood/RadioIconTheme.js');
var useFocusableTextField = require('./useFocusableTextField-2c36840d.js');
var StyledCard = require('./StyledCard-1767aa5b.js');
require('preact');
require('preact/compat');
require('./useFormFieldContextProps-0fa67f6c.js');

require('./CheckboxRadioField-0a6614cc.js');
require('./useCollectionFocusRing-7fcfe8f7.js');
require('./collectionUtils-fe12edac.js');
require('./keys-25710458.js');
require('./clientHints-c40c5250.js');
require('./useTranslationBundle-18b7bf8b.js');
require('./LayerHost-aee0e070.js');
require('./index-15e13649.js');
require('./UNSAFE_Layer/themes/LayerHostStyles.css.js');

require('./Label-afee809f.js');


require('./UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css.js');
require('./vanilla-extract-recipes-createRuntimeFn.esm-d1301b2d.js');


require('./UNSAFE_MessageBanner/themes/redwood/MessageBannerVariants.css.js');

require('./useTooltip-8728f2ff.js');
require('./useTooltipControlled-3c2afa53.js');
require('./useHover-49b0430d.js');
require('./useToggle-3ebba7d8.js');
require('./useFocus-1b288fb9.js');
require('./useTouch-4dec8729.js');
require('./mergeProps-e3da7237.js');
require('./useAnimation-fb11e4cc.js');
require('./useThemeInterpolations-4faece98.js');
require('./useColorScheme-23e4aab4.js');
require('./useScale-adc62f41.js');
require('./theme-dfd6a9fe.js');
require('./Theme-f06687af.js');
require('./mergeInterpolations-6727b536.js');
require('./mergeDeepWithKey-210b024d.js');
require('./_curry3-18677bca.js');
require('./_curry1-e8f0d7ea.js');
require('./_curry2-c15d89cd.js');
require('./_isObject-28636267.js');
require('./useDensity-022a8f80.js');
require('./unsafeDomAccess-c3a492f0.js');
require('./hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme.js');
require('./hooks/UNSAFE_useTooltip/themes/TooltipContentStyles.css.js');

require('./hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentBaseTheme.css.js');

require('./hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css.js');

require('./tooltipUtils-ae48fed6.js');
require('./EnvironmentProvider-8696a5b8.js');
require('./LayerManager-fc4df14f.js');
require('./Floating-5a704a27.js');
require('./useFloating-13101293.js');
require('./useUser-f900ddf1.js');
require('./positionUtils-a780137e.js');
require('./refUtils-a9872e75.js');
require('./useOutsideClick-c3802f86.js');
require('./arrayUtils-7d8dcfc3.js');
require('./Layer-28b1afce.js');
require('./UNSAFE_Layer/themes/LayerStyles.css.js');

require('./useModal-0739a528.js');
require('./utils-a66430fc.js');
require('./themeContract.css-a53fd740.js');
require('./colorUtils-01f3caa2.js');
require('./UNSAFE_Floating/themes/redwood/FloatingTheme.js');
require('./UNSAFE_Floating/themes/FloatingStyles.css.js');

require('./UNSAFE_Floating/themes/redwood/FloatingBaseTheme.css.js');

require('./UNSAFE_Floating/themes/redwood/FloatingVariants.css.js');
require('./vanilla-extract-dynamic.esm-2e1b7c25.js');
require('./UNSAFE_Floating/themes/FloatingContract.css.js');
require('./useUnsafeDomElementRef-f22a2f0c.js');

require('./IconButton-217314e6.js');
require('./BaseButton-f6eb6de1.js');
require('./useActive-6770f917.js');
require('./dimensions-2fcc0acf.js');
require('./size-0717c0bd.js');
require('./UNSAFE_BaseButton/themes/redwood/BaseButtonTheme.js');
require('./UNSAFE_BaseButton/themes/BaseButtonStyles.css.js');

require('./UNSAFE_BaseButton/themes/redwood/BaseButtonVariants.css.js');

require('./BareButton-814ae4b7.js');
require('./useBareButton-8c4f3b41.js');
require('./usePressClick-421494df.js');
require('./buttonUtils-dff2ea3e.js');
require('./id-86356250.js');
require('./ButtonLabelLayout-8981b39a.js');
require('./Text-436e8b56.js');
require('./UNSAFE_Text/themes/TextStyles.css.js');

require('./useButtonLabelLayoutTheme-b7b3bdb6.js');
require('./UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutTheme.js');
require('./UNSAFE_ButtonLabelLayout/themes/ButtonLabelLayoutStyles.css.js');

require('./UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutBaseTheme.css.js');

require('./UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutVariants.css.js');

require('./logger-2b636482.js');

require('./MessageFormattingUtils-539d75b0.js');
require('./getLocale-8e17dc46.js');
require('./stringUtils-3e19c8af.js');
require('./TransitionGroup-b239d98f.js');
require('./MessagesContext-4e939750.js');



require('./UNSAFE_ComponentMessage/themes/redwood/ComponentMessageVariants.css.js');
require('./InputGroupContext-05f2a46f.js');
require('./Popup-080e8f67.js');
require('./tabbableUtils-7e41d383.js');
require('./head-68d0992f.js');
require('./_arity-c228159c.js');
require('./_isArray-73160ad5.js');
require('./_isString-f4443c9e.js');
require('./FocusTrap-fbb0c20f.js');
require('./FocusTracker-946ba8d8.js');
require('./PRIVATE_FocusTracker/themes/FocusTrackerStyles.css.js');

require('./Modal-0cea796e.js');
require('./UNSAFE_Modal/themes/ModalStyles.css.js');

require('./popupUtils-488fe8f7.js');
require('./WindowOverlay-a10f995e.js');
require('./UNSAFE_WindowOverlay/themes/WindowOverlayStyles.css.js');

require('./UNSAFE_WindowOverlay/themes/WindowOverlayContract.css.js');
require('./UNSAFE_WindowOverlay/themes/redwood/WindowOverlayTheme.js');
require('./UNSAFE_WindowOverlay/themes/redwood/WindowOverlayBaseTheme.css.js');

require('./UNSAFE_WindowOverlay/themes/redwood/WindowOverlayVariants.css.js');
require('./usePopupAnimation-18040396.js');
require('./useAnimationStatus-c0c14bcc.js');
require('./popupAnimationUtils-dcace427.js');
require('./LiveRegion-e410e187.js');

require('./UNSAFE_Popup/themes/PopupContract.css.js');
require('./UNSAFE_Popup/themes/redwood/PopupTheme.js');
require('./UNSAFE_Popup/themes/redwood/PopupBaseTheme.css.js');

require('./UNSAFE_Popup/themes/redwood/PopupVariants.css.js');

require('./colors-2f2afb62.js');
require('./UNSAFE_Separator/themes/SeparatorStyles.css.js');

require('./CompactLabelAssistance-d5bbeb5e.js');
require('./Help-73155cca.js');
require('./Icon-bc05e7bd.js');
require('./UNSAFE_Icon/themes/IconStyle.css.js');
require('./useFocusWithin-eb7f956a.js');
require('./UNSAFE_UserAssistance/themes/UserAssistanceStyles.css.js');
require('./UNSAFE_Label/themes/redwood/LabelTheme.js');
require('./UNSAFE_Label/themes/LabelStyles.css.js');

require('./UNSAFE_Label/themes/redwood/LabelBaseTheme.css.js');

require('./UNSAFE_Label/themes/redwood/LabelVariants.css.js');
require('./truncationUtils-2d44b04b.js');
require('./UNSAFE_TextField/themes/redwood/TextFieldTheme.js');
require('./UNSAFE_TextField/themes/TextFieldStyles.css.js');



require('./UNSAFE_TextField/themes/redwood/TextFieldBaseTheme.css.js');

require('./UNSAFE_TextField/themes/redwood/TextFieldVariants.css.js');

require('./InlineHelp-8097a102.js');
require('./UNSAFE_UserAssistance/themes/redwood/UserAssistanceTheme.js');
require('./UNSAFE_UserAssistance/themes/redwood/UserAssistanceBaseTheme.css.js');
require('./InlineUserAssistance-2fba4481.js');
require('./ComponentMessageContainer-0a029bed.js');
require('./MessagesManager-5f1e36da.js');
require('./SuccessS-7e6dbebc.js');
require('./ErrorS-14a49cb6.js');
require('./InformationS-b6024498.js');
require('./WarningS-2243c6d7.js');
require('./PRIVATE_Message/themes/MessageStyles.css.js');
require('./soundUtils-ff3c9c0d.js');
require('./useMessagesContext-23d62331.js');
require('./Transition-942950ed.js');
require('./UNSAFE_ComponentMessage/themes/redwood/ComponentMessageTheme.js');
require('./UNSAFE_ComponentMessage/themes/ComponentMessageStyles.css.js');
require('./UNSAFE_ComponentMessage/themes/redwood/ComponentMessageBaseTheme.css.js');
require('./useInputGroupContext-4c10bd57.js');
require('./CheckboxRadioFieldStyles.css-b526d45d.js');
require('./useMessageSeverity-cfc4ae9d.js');

require('./CheckboxRadioContext-3b134bd1.js');
require('./LayoutStyles.css-b4025421.js');

require('./CheckboxRadioLabelValueLayout-20d3187e.js');
require('./UNSAFE_RadioItem/themes/redwood/RadioTheme.js');
require('./UNSAFE_RadioItem/themes/redwood/RadioBaseTheme.css.js');

require('./UNSAFE_RadioItem/themes/redwood/RadioVariants.css.js');

require('./UNSAFE_TextField/themes/redwood/FormLayoutTheme.js');
require('./UNSAFE_TextField/themes/FormLayoutStyles.css.js');
require('./UNSAFE_TextField/themes/redwood/FormLayoutBaseTheme.css.js');

require('./UNSAFE_Checkbox/themes/redwood/CheckboxTheme.js');
require('./UNSAFE_Checkbox/themes/CheckboxStyles.css.js');

require('./UNSAFE_Checkbox/themes/redwood/CheckboxBaseTheme.css.js');

require('./UNSAFE_Checkbox/themes/redwood/CheckboxVariants.css.js');

require('./StyledLabelValueLayout-d7705c97.js');


require('./formControlUtils-3a7c7b5d.js');
require('./useTooltipOnTruncation-781972d7.js');
require('./useDetectTruncation-be13f31d.js');
require('./useResizeObserver-a9e97180.js');
require('./useAddBusyState-d19ae1fa.js');
require('./BusyStateContext-86f40d3c.js');
require('./useBusyStateContext-362eee2a.js');

require('./borders-4b8488cb.js');
require('./flexitem-fee13e26.js');

require('./vanilla-extract-sprinkles-createRuntimeSprinkles.esm-d68f3e0f.js');
require('./padding-398f986c.js');
require('./aria-889aedd0.js');
require('./equals-098f7781.js');

require('./UNSAFE_Avatar/themes/redwood/AvatarTheme.js');
require('./UNSAFE_Avatar/themes/AvatarStyles.css.js');

require('./UNSAFE_Avatar/themes/redwood/AvatarBaseTheme.css.js');


require('./UNSAFE_Avatar/themes/redwood/AvatarVariants.css.js');

require('./ImageVars.css-3fbb1c0b.js');
require('./boxalignment-6dde2812.js');

require('./flexbox-2cae9a01.js');


require('./CheckboxOff-511f3203.js');
require('./CheckboxOn-744c0ac1.js');
require('./CheckboxMixed-60adede1.js');
require('./UNSAFE_Checkbox/themes/CheckboxIconContract.css.js');
require('./UNSAFE_Checkbox/themes/redwood/CheckboxIconTheme.js');
require('./UNSAFE_Checkbox/themes/CheckboxIconStyles.css.js');

require('./UNSAFE_Checkbox/themes/redwood/CheckboxIconBaseTheme.css.js');

require('./UNSAFE_Checkbox/themes/redwood/CheckboxIconVariants.css.js');


require('./CollectionInteractionContext-f84ff7a1.js');
require('./useCollectionInteractionContext-6fc0200e.js');
require('./UNSAFE_RadioItem/themes/RadioIconStyles.css.js');

require('./UNSAFE_RadioItem/themes/redwood/RadioIconBaseTheme.css.js');

require('./UNSAFE_RadioItem/themes/redwood/RadioIconVariants.css.js');

require('./PRIVATE_StyledCard/themes/StyledCardStyles.css.js');


// INFO: Label and SecondaryText Content handling
const RichSelectionTextContent = ({ secondaryTextId, isDisabled, isLayoutXL, label, labelId, secondaryText }) => {
    const labelContent = (jsxRuntime.jsx(TruncatingText.TruncatingText, { variant: isDisabled ? 'disabled' : 'primary', lineClamp: isLayoutXL ? 1 : 2, id: labelId, children: label }));
    const classes = classNames.classNames([
        isLayoutXL ? UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.densityWrapper : UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.growOneColumn,
        !isLayoutXL && !secondaryText && UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.labelOnly
    ]);
    return (jsxRuntime.jsxs("div", { className: classes, children: [labelContent, secondaryText && (jsxRuntime.jsx(TruncatingText.TruncatingText, { size: "sm", variant: isDisabled ? 'disabled' : 'secondary', lineClamp: 3, id: secondaryTextId, children: secondaryText }))] }));
};

const ThumbnailXL = ({ thumbnailSrc, mediaAccessibleLabel, testId, isDisabled }) => {
    const testIdProps = useTestId.useTestId(testId ? `${testId}_thumbnail` : undefined);
    return (jsxRuntime.jsx(AspectRatio.AspectRatio, { ratio: "4/3", children: jsxRuntime.jsx("img", { alt: mediaAccessibleLabel, className: classNames.classNames([UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.thumbnailImage, isDisabled && UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.mediaDisabledOpacity]), role: !mediaAccessibleLabel ? 'presentation' : undefined, src: thumbnailSrc, ...testIdProps }) }));
};
const Thumbnail = ({ thumbnailSrc, mediaAccessibleLabel, layout, testId, isDisabled }) => {
    const thumbnailClass = classNames.classNames([
        layout === 'md' ? UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.mdMediaVariant : UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.smMediaVariant,
        isDisabled && UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.mediaDisabledOpacity
    ]);
    const testIdProps = useTestId.useTestId(testId ? `${testId}_thumbnail` : undefined);
    return (jsxRuntime.jsx("img", { alt: mediaAccessibleLabel, className: thumbnailClass, role: !mediaAccessibleLabel ? 'presentation' : undefined, src: thumbnailSrc, ...testIdProps }));
};
const MediumRenderer = ({ mediaAccessibleLabel, thumbnailSrc, layout, avatar, testId, isDisabled }) => {
    const testIdProps = useTestId.useTestId(testId ? `${testId}_medium` : undefined);
    let mediumMediaItem;
    if (avatar) {
        const avatarElement = (jsxRuntime.jsx(Avatar.Avatar, { ...avatar, "aria-label": mediaAccessibleLabel, size: "md", ...testIdProps }));
        mediumMediaItem = isDisabled ? (jsxRuntime.jsx("span", { className: UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.mediaDisabledOpacity, children: avatarElement })) : (avatarElement);
    }
    else {
        mediumMediaItem = (jsxRuntime.jsx(Thumbnail, { thumbnailSrc: thumbnailSrc, mediaAccessibleLabel: mediaAccessibleLabel, layout: layout, testId: testId, isDisabled: isDisabled }));
    }
    return jsxRuntime.jsx(Center.Center, { children: mediumMediaItem });
};
const SmallRenderer = ({ avatar, iconClass, isDisabled, layout, thumbnailSrc, mediaAccessibleLabel, testId }) => {
    const testIdProps = useTestId.useTestId(testId ? `${testId}_small` : undefined);
    const { iconWrapper, iconEnabledColor, iconDisabledColor, mediaDisabledOpacity } = UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles;
    let smallMediaItem;
    if (avatar) {
        const avatarElement = (jsxRuntime.jsx(Avatar.Avatar, { ...avatar, "aria-label": mediaAccessibleLabel, size: "xs", ...testIdProps }));
        smallMediaItem = isDisabled ? (jsxRuntime.jsx("span", { className: mediaDisabledOpacity, children: avatarElement })) : (avatarElement);
    }
    else if (thumbnailSrc) {
        smallMediaItem = (jsxRuntime.jsx(Thumbnail, { thumbnailSrc: thumbnailSrc, mediaAccessibleLabel: mediaAccessibleLabel, layout: layout, testId: testId, isDisabled: isDisabled, ...testIdProps }));
    }
    else if (iconClass) {
        const classes = classNames.classNames([
            iconClass,
            iconWrapper,
            isDisabled ? iconDisabledColor : iconEnabledColor
        ]);
        smallMediaItem = jsxRuntime.jsx("div", { class: classes, ...testIdProps });
    }
    return jsxRuntime.jsx(Center.Center, { children: smallMediaItem });
};
// INFO: Media Item handling
const RichSelectionMediaItem = ({ avatar, iconClass, isDisabled, hasSecondaryText, mediaAccessibleLabel, layout, thumbnailSrc, testId }) => {
    if (!layout) {
        return null;
    }
    switch (layout) {
        case 'xl':
            return (jsxRuntime.jsx(ThumbnailXL, { thumbnailSrc: thumbnailSrc, mediaAccessibleLabel: mediaAccessibleLabel, testId: testId, isDisabled: isDisabled }));
        case 'md':
            const mediumMedia = avatar ? { avatar } : thumbnailSrc ? { thumbnailSrc } : undefined;
            return (jsxRuntime.jsx(View.View, { alignSelf: hasSecondaryText ? 'start' : 'center', children: jsxRuntime.jsx(MediumRenderer, { mediaAccessibleLabel: mediaAccessibleLabel, layout: layout, testId: testId, isDisabled: isDisabled, ...mediumMedia }) }));
        case 'sm':
            const smallMedia = avatar
                ? { avatar, mediaAccessibleLabel }
                : thumbnailSrc
                    ? { thumbnailSrc, mediaAccessibleLabel }
                    : iconClass
                        ? { iconClass }
                        : undefined;
            return (jsxRuntime.jsx(View.View, { alignSelf: hasSecondaryText ? 'start' : 'center', children: jsxRuntime.jsx(SmallRenderer, { ...smallMedia, layout: layout, testId: testId, isDisabled: isDisabled }) }));
        default:
            return null;
    }
};

const RadioControl = ({ value, inputRef, inputReadonlyRef, isFocus, isDisabled, isLayoutXL, isReadonly, isSelected, describedBy, labelledBy, onBlur, onFocus }) => {
    const { name, value: radioGroupValue, onCommit } = RadioItemContext.useRadioSetContext();
    const IconComp = isReadonly
        ? isSelected
            ? Check.SvgCheck
            : RadioButtonOff.SvgRadioButtonOff
        : isSelected
            ? RadioButtonOn.SvgRadioButtonOn
            : RadioButtonOff.SvgRadioButtonOff;
    const spanRef = hooks.useRef(null);
    const { interactionProps, applyActiveStyle } = useInteractionStyle.useInteractionStyle();
    const onChangeHandler = hooks.useCallback((event) => {
        event.stopPropagation();
        onCommit?.({ previousValue: radioGroupValue, value });
    }, [value, radioGroupValue, onCommit]);
    /**
     * When focused the view should have the respective RichSelectionItem.
     */
    hooks.useEffect(() => {
        const isActiveElement = document.activeElement === inputRef?.current;
        if (!isActiveElement && isFocus) {
            spanRef?.current?.scrollIntoView({ block: 'nearest' });
        }
    }, [inputRef, isFocus, spanRef]);
    const radioColor = isDisabled ? UNSAFE_RadioItem_themes_RadioStyles_css.radioDisabledColor : UNSAFE_RadioItem_themes_RadioStyles_css.radioDefaultColor;
    const { classes: radioIconClasses } = useComponentTheme.useComponentTheme(UNSAFE_RadioItem_themes_redwood_RadioIconTheme.RadioIconRedwoodTheme, {
        disabled: isDisabled ? 'isDisabled' : 'notDisabled',
        selected: isSelected ? 'isSelected' : 'notSelected',
        active: applyActiveStyle ? 'isActive' : 'notActive',
        richSelection: isLayoutXL ? 'isLayoutXL' : 'notLayoutXL'
    });
    const { isTabbable } = useTabbableMode.useTabbableMode();
    const { index } = RadioItemContext.useRadioItemContext();
    const tabIndex = isTabbable !== false && ((index === 0 && !radioGroupValue) || isSelected) ? 0 : -1;
    const hiddenInput = (jsxRuntime.jsx(HiddenAccessible.HiddenAccessible, { children: jsxRuntime.jsx("input", { type: "radio", name: name, value: value, ...(!isReadonly &&
                !isDisabled && {
                onChange: onChangeHandler
            }), checked: isSelected, disabled: isDisabled, "aria-labelledby": labelledBy, "aria-describedby": describedBy, tabIndex: tabIndex, onBlur: onBlur, onFocus: onFocus, ref: isReadonly ? inputReadonlyRef : inputRef }) }));
    // Radio control is visually hidden in readonly mode unless it is selected
    if (!isSelected && isReadonly) {
        return jsxRuntime.jsx("span", { class: UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.inputElement, children: hiddenInput });
    }
    return (jsxRuntime.jsxs("span", { ref: spanRef, class: classNames.classNames([radioColor, isLayoutXL ? UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.radioWrapper : undefined]), children: [hiddenInput, jsxRuntime.jsx("span", { "aria-hidden": "true", class: radioIconClasses, ...interactionProps, children: jsxRuntime.jsx(IconComp, { size: UNSAFE_RadioItem_themes_RadioIconContract_css.radioIconVars.iconSize, color: "currentColor" }) })] }));
};
const CheckboxControl = ({ value, inputRef, inputReadonlyRef, isSelected, isLayoutXL, isDisabled, isReadonly, describedBy, labelledBy, onBlur, onFocus }) => {
    const { name } = CheckboxSet.useCheckboxSetContext();
    const { isTabbable } = useTabbableMode.useTabbableMode();
    const checkboxStyles = isLayoutXL ? UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.checkboxWrapper : UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.checkboxAlign;
    // Checkbox control is visually hidden in readonly mode unless it is selected
    if (!isSelected && isReadonly) {
        return (jsxRuntime.jsx("span", { class: UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.inputElement, children: jsxRuntime.jsx(HiddenAccessible.HiddenAccessible, { children: jsxRuntime.jsx("input", { "aria-readonly": true, "aria-labelledby": labelledBy, "aria-describedby": describedBy, type: "checkbox", name: name, value: value, checked: false, disabled: isDisabled, tabIndex: isTabbable ? 0 : -1, onBlur: onBlur, onFocus: onFocus, ref: inputReadonlyRef }) }) }));
    }
    return (jsxRuntime.jsx("span", { class: checkboxStyles, children: jsxRuntime.jsx(StyledCheckbox.StyledCheckbox, { "aria-describedby": describedBy, "aria-labelledby": labelledBy, isDisabled: isDisabled, isReadonly: isReadonly, isChecked: isSelected ? 'checked' : 'unchecked', name: name, value: value, onBlur: onBlur, onFocus: onFocus, ref: isReadonly ? inputReadonlyRef : inputRef }) }));
};

const onMouseDown = (event) => {
    // Prevent focus from going to the body when the user clicks something within
    // the card that is not focusable. This is important because we are detecting
    // focus loss on the core pack side and showing hidden messages.
    event.preventDefault();
};
/**
 * `RichSelectionItem` is a customizable input card element used in selection interfaces. It can display a label,
 * optional secondary text, and media (such as an avatar, thumbnail, or icon). It supports both radio and checkbox
 * controls, allowing users to make a single or multiple selections, respectively. The component also handles
 * different states such as disabled, readonly, and focus, and renders dynamically based on layout( 'xl', 'md', or 'sm').
 */
const RichSelectionItem = ({ avatar, iconClass, isReadonly: propsIsReadonly, mediaAccessibleLabel, secondaryText, thumbnailSrc, label, value, testId }) => {
    const { isReadonly: isFormReadonly, isDisabled: isFormDisabled } = useFormContext.useFormContext();
    const styledCardRef = hooks.useRef(null);
    const inputRef = hooks.useRef(null);
    const inputReadonlyRef = hooks.useRef(null);
    const { selection, layout, messageSeverity } = RichSelectionStartContext.useRichSelectionContext();
    const { isDisabled: isFieldDisabled, isReadonly: isFieldReadonly } = useFormFieldContext.useFormFieldContext();
    const { value: radioGroupValue, onCommit: onRadioCommit } = RadioItemContext.useRadioSetContext();
    const { value: checkboxGroupValue, onCommit: onCheckboxCommit } = CheckboxSet.useCheckboxSetContext();
    // Determining selection state for error
    const styledCardVariant = messageSeverity === 'error' ? 'danger' : undefined;
    const isDisabled = isFieldDisabled ?? isFormDisabled;
    const isReadonly = isFieldReadonly || isFormReadonly || propsIsReadonly;
    const isEnabled = !isDisabled && !isReadonly;
    const id = useId.useId();
    const isLayoutXL = layout === 'xl';
    const hasMedia = !!avatar || !!thumbnailSrc || !!iconClass;
    const labelId = `${id}-labelled-text`;
    const secondaryTextId = secondaryText ? `${id}-secondary-text` : undefined;
    const isSingleSelection = selection === 'single';
    const isSelected = isSingleSelection
        ? radioGroupValue === value
        : !!checkboxGroupValue?.has(value);
    const { isFocused: isFocus, focusProps: { onFocusIn, onFocusOut }, methods } = useFocusableTextField.useFocusableTextField({
        enabledElementRef: inputRef,
        readonlyElementRef: inputReadonlyRef,
        isReadonly,
        isDisabled
    });
    // Scroll into view when the RichSelectionItem is focused
    hooks.useEffect(() => {
        if (isFocus) {
            styledCardRef?.current?.scrollIntoView({ block: 'nearest' });
        }
    }, [isFocus, styledCardRef]);
    // Text content of label and secondaryText rendering
    const textContent = (jsxRuntime.jsx(RichSelectionTextContent, { secondaryTextId: secondaryTextId, labelId: labelId, isDisabled: isDisabled, isLayoutXL: isLayoutXL, label: label, secondaryText: secondaryText }));
    // Media content rendering based on available media props respective to layout
    const media = avatar
        ? { avatar, mediaAccessibleLabel, layout: layout }
        : thumbnailSrc
            ? { thumbnailSrc, mediaAccessibleLabel, layout: layout }
            : iconClass
                ? { iconClass, layout: layout }
                : undefined;
    const mediaContent = hasMedia ? (jsxRuntime.jsx(RichSelectionMediaItem, { ...media, isDisabled: isDisabled, hasSecondaryText: !!secondaryText, testId: testId ? `${testId}_media` : undefined })) : undefined;
    // Selection control rendering (radio or checkbox)
    const selectionControl = (jsxRuntime.jsx(Flex.Flex, { align: secondaryText ? 'start' : 'center', children: isSingleSelection ? (jsxRuntime.jsx(RadioControl, { onFocus: onFocusIn, onBlur: onFocusOut, value: value, inputRef: inputRef, inputReadonlyRef: inputReadonlyRef, isFocus: isFocus, isLayoutXL: isLayoutXL, isDisabled: isDisabled, isReadonly: isReadonly, isSelected: isSelected, describedBy: secondaryTextId, labelledBy: `${id}-labelled-text` })) : (jsxRuntime.jsx(CheckboxControl, { onFocus: onFocusIn, onBlur: onFocusOut, value: value, inputRef: inputRef, inputReadonlyRef: inputReadonlyRef, isFocus: isFocus, isDisabled: isDisabled, isLayoutXL: isLayoutXL, isReadonly: isReadonly, isSelected: isSelected, describedBy: secondaryTextId, labelledBy: `${id}-labelled-text` })) }));
    // Handler for checkbox selection changes
    const triggerCheckBoxAction = hooks.useCallback(() => {
        // if selected from a click, we need to manually set focus on the input to allow for keyboard navigation
        methods.focus();
        const newGroupValue = new Set(checkboxGroupValue);
        // If the value is already selected, remove it; otherwise, add it
        if (newGroupValue.has(value)) {
            newGroupValue.delete(value);
        }
        else {
            newGroupValue.add(value);
        }
        onCheckboxCommit?.({
            previousValue: checkboxGroupValue,
            value: newGroupValue.size > 0 ? newGroupValue : undefined
        });
    }, [checkboxGroupValue, methods, onCheckboxCommit, value]);
    // Handler for radio selection changes
    const triggerRadioAction = hooks.useCallback(() => {
        if (radioGroupValue !== value) {
            // if selected from a click, we need to manually set focus on the input to allow for keyboard navigation
            methods.focus();
            onRadioCommit?.({
                previousValue: radioGroupValue,
                value: value
            });
        }
    }, [radioGroupValue, value, methods, onRadioCommit]);
    // due to the placement of the start label in rich selection, we need to check if the first item contains media or secondary text.
    const startData = hooks.useMemo(() => ({ hasMedia, hasSecondaryText: !!secondaryText }), [hasMedia, secondaryText]);
    const richSelectionStartContext = RichSelectionStartContext.useRichSelectionStartContext();
    if (richSelectionStartContext?.isFirst) {
        richSelectionStartContext?.setStartData?.(startData);
    }
    // Event handlers for the interaction of the StyledCard
    const { pressProps } = usePress.usePress(isSingleSelection ? triggerRadioAction : triggerCheckBoxAction, {
        isDisabled: !isEnabled
    });
    return (jsxRuntime.jsx(StyledCard.StyledCard, { cursor: isEnabled ? 'pointer' : 'arrow', display: "inlineFlex", height: "100%", isDisabled: !isEnabled, isFocusWithin: isFocus, isSelected: styledCardVariant !== 'danger' && isEnabled && isSelected, onMouseDown: onMouseDown, parentComponentVariant: "richSelectionItemCard", ref: styledCardRef, role: "listitem", styleVariant: styledCardVariant, testId: testId ? `${testId}_styled_card` : undefined, width: "100%", ...(isReadonly ? { onClick: () => methods.focus() } : pressProps), children: isLayoutXL ? (jsxRuntime.jsxs(Flex.Flex, { direction: "column", height: "100%", width: "100%", children: [mediaContent, jsxRuntime.jsx("div", { class: UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.selectionElement, children: selectionControl }), textContent] })) : (jsxRuntime.jsx("div", { className: classNames.classNames([
                UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.densityWrapper,
                // if the item has a sm/md layout, without media or secondary text,
                // we need to set the min height of the card to match the start label
                !isLayoutXL &&
                    !hasMedia &&
                    !secondaryText &&
                    richSelectionStartContext !== null &&
                    UNSAFE_RichSelectionItem_themes_RichSelectionItemStyles_css.styles.startMinHeight
            ]), children: jsxRuntime.jsxs(Flex.Flex, { direction: "row", gap: "4x", height: "100%", width: "100%", children: [selectionControl, textContent, mediaContent] }) })) }));
};

exports.RichSelectionItem = RichSelectionItem;
//# sourceMappingURL=UNSAFE_RichSelectionItem.js.map
