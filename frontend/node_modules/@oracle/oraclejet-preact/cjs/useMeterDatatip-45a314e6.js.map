{"version":3,"file":"useMeterDatatip-45a314e6.js","sources":["../../src/hooks/PRIVATE_useVisMeterEvents/usePointerEvents.ts","../../src/hooks/PRIVATE_useVisMeterEvents/useMeterDatatip.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { MutableRef, useRef } from 'preact/hooks';\nimport { handleInput } from './events';\nimport { CommitDetail, InputDetail } from '#utils/UNSAFE_meterUtils';\n\ntype getValueFromEvent = (event: PointerEvent) => number | undefined;\n\nexport function usePointerEvents(\n  value: number | undefined,\n  getValue: getValueFromEvent,\n  targetRef: RefObject<HTMLDivElement>,\n  currentInputRef: MutableRef<number | undefined>,\n  isPointerActiveRef: MutableRef<boolean | undefined>,\n  onCommit?: (detail: CommitDetail) => void,\n  onInput?: (detail: InputDetail) => void\n) {\n  const isPointerDown = useRef<boolean>(false);\n\n  const onPointerUp = (event: PointerEvent) => {\n    isPointerDown.current = false;\n    const val = getValue(event);\n    if (val !== undefined) {\n      onCommit?.({ value: val } as CommitDetail);\n    }\n    isPointerActiveRef.current = true;\n  };\n\n  const onPointerMove = (event: PointerEvent) => {\n    if (isPointerDown.current) {\n      const val = getValue(event);\n      if (val !== undefined && val != currentInputRef.current) {\n        handleInput(val, currentInputRef, onInput);\n      }\n    }\n    isPointerActiveRef.current = true;\n  };\n\n  const onPointerDown = (event: PointerEvent) => {\n    isPointerDown.current = true;\n    targetRef.current?.setPointerCapture(event.pointerId);\n    const val = getValue(event);\n    if (val !== undefined && val != currentInputRef.current) {\n      handleInput(val, currentInputRef, onInput);\n    }\n    isPointerActiveRef.current = true;\n  };\n\n  const onBlur = () => {\n    isPointerDown.current = false;\n    onCommit?.({ value: value } as CommitDetail);\n    isPointerActiveRef.current = false;\n  };\n\n  const onPointerLeave = () => {\n    isPointerActiveRef.current = false;\n  };\n\n  const onPointerEnter = () => {\n    isPointerActiveRef.current = true;\n  };\n\n  return {\n    onPointerUp,\n    onBlur,\n    onPointerMove,\n    onPointerDown,\n    onPointerLeave,\n    onPointerEnter\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { MutableRef } from 'preact/hooks';\nimport { useDatatip } from '#hooks/PRIVATE_useDatatip';\n\nexport function useMeterDatatip(\n  value: number,\n  isPointerActiveRef: MutableRef<boolean>,\n  datatip?: string | null,\n  ariaDescribedBy?: string\n) {\n  const datatipText = datatip === undefined ? `${value}` : datatip;\n  const { datatipContent, datatipProps } = useDatatip({\n    content: datatipText,\n    anchor: isPointerActiveRef.current ? 'pointer' : 'element',\n    offset: {\n      mainAxis: 8,\n      crossAxis: 0\n    },\n    placement: 'top',\n    touchResponse: 'touchStart'\n  });\n\n  datatipProps['aria-describedby'] =\n    [ariaDescribedBy, datatipProps['aria-describedby']].filter(Boolean).join(' ') || undefined;\n\n  return { datatipContent, datatipProps };\n}\n"],"names":["useRef","handleInput","useDatatip"],"mappings":"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"}