/* @oracle/oraclejet-preact: undefined */
'use strict';

require('./BusyStateContext-86f40d3c.js');
var useBusyStateContext = require('./useBusyStateContext-362eee2a.js');
var hooks = require('preact/hooks');

/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
/**
 * Provides way to add and resolve a busy state.
 */
function useAddBusyState(description) {
    const { addBusyState } = useBusyStateContext.useBusyStateContext();
    const resolverRef = hooks.useRef();
    const onBusyEnd = hooks.useCallback(() => {
        resolverRef.current?.();
        resolverRef.current = undefined;
    }, []);
    const onBusyStart = hooks.useCallback(() => {
        // Resolve previous busy state if any
        onBusyEnd();
        resolverRef.current = addBusyState(description);
    }, [description, onBusyEnd, addBusyState]);
    // Resolve any pending busy state on unmount - return onBusyEnd callback itself (do not execute it)
    hooks.useLayoutEffect(() => onBusyEnd, [onBusyEnd]);
    return {
        onBusyStart,
        onBusyEnd
    };
}

exports.useAddBusyState = useAddBusyState;
//# sourceMappingURL=useAddBusyState-d19ae1fa.js.map
