{"version":3,"file":"useChartDnd-2c152d6b.js","sources":["../../src/hooks/PRIVATE_useChartDnd/dndChartUtils.ts","../../src/hooks/PRIVATE_useChartDnd/useChartDnd.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Dimension } from '#utils/UNSAFE_visTypes/common';\nimport type {\n  Group,\n  DragStartDetail,\n  ChartSeriesData,\n  DropDetail,\n  ChartItemData\n} from '#utils/UNSAFE_visTypes/chart';\nimport { getInfo, inSpace } from '#utils/UNSAFE_visUtils';\nimport type { RefObject } from 'preact';\nimport { findSeriesGroupIndexFromId } from '#utils/PRIVATE_chartUtils/utils';\nimport { GroupLevelItem } from '#PRIVATE_Axis/groupAxis/hierarchicalUtils';\n\nexport function getChartDragContext<K, D extends ChartItemData<K>>(\n  target: HTMLElement,\n  levelsArray: GroupLevelItem[][],\n  rootRef: RefObject<HTMLElement>,\n  event: DragEvent,\n  selectedIds: Set<K>,\n  series: ChartSeriesData<K, D>[],\n  getDataItem?: (seriesIndex: number, groupIndex: number, groupPath: number[]) => D | undefined,\n  groupDraggable?: (group: Group) => 'on' | 'off',\n  itemsDraggable?: (data: D, seriesIndex: number, groupIndex: number) => 'on' | 'off'\n) {\n  //We search for the key using the target of the event\n  const info = getInfo(rootRef, target);\n  const seriesIndex = info ? info.seriesIndex : undefined;\n  const groupIndex = info ? info.groupIndex : undefined;\n  const levelIndex = info ? info.levelIndex : undefined;\n\n  let context;\n  if (\n    seriesIndex !== undefined &&\n    groupIndex !== undefined &&\n    getDataItem?.(seriesIndex, groupIndex, levelsArray[levelsArray.length - 1]?.[groupIndex].path)\n  ) {\n    const currentData = getDataItem(\n      seriesIndex,\n      groupIndex,\n      levelsArray[levelsArray.length - 1]?.[groupIndex].path\n    )! as D;\n    if (itemsDraggable && itemsDraggable(currentData, seriesIndex, groupIndex) == 'on') {\n      const data = [];\n      if (selectedIds.size > 1 && selectedIds.has(currentData.id)) {\n        const iterator = selectedIds.values();\n        let current = iterator.next().value;\n        while (current !== undefined) {\n          const { seriesIndex, groupIndex } = findSeriesGroupIndexFromId(\n            series,\n            current,\n            levelsArray,\n            getDataItem\n          );\n          data.push({\n            data: getDataItem(\n              seriesIndex,\n              groupIndex,\n              levelsArray[levelsArray.length - 1]?.[groupIndex].path\n            ),\n            seriesIndex,\n            groupIndex\n          });\n          current = iterator.next().value;\n        }\n      } else {\n        data.push({\n          data: getDataItem(\n            seriesIndex,\n            groupIndex,\n            levelsArray[levelsArray.length - 1]?.[groupIndex]?.path\n          ),\n          seriesIndex,\n          groupIndex\n        });\n      }\n      context = {\n        items: data,\n        type: 'items',\n        event\n      } as DragStartDetail<D>;\n    }\n  } else if (groupIndex !== undefined && levelIndex != undefined) {\n    if (groupDraggable && groupDraggable(levelsArray[levelIndex][groupIndex].item)) {\n      context = {\n        group: levelsArray[levelIndex][groupIndex].item,\n        groupIndex: groupIndex,\n        type: 'xAxisTickLabel',\n        event\n      } as DragStartDetail<D>;\n    }\n  }\n  return context as DragStartDetail<D>;\n}\n\nexport function getChartDropContext(\n  xSpace: Dimension,\n  ySpace: Dimension,\n  plotAreaSpace: Dimension,\n  event: DragEvent\n) {\n  //We search for the key using the target of the event\n  const offSetX = event.offsetX;\n  const offSetY = event.offsetY;\n  let context;\n  if (inSpace(offSetX, offSetY, xSpace)) {\n    context = {\n      type: 'xAxis',\n      x: offSetX - xSpace.x,\n      event\n    };\n  } else if (inSpace(offSetX, offSetY, ySpace)) {\n    context = {\n      type: 'yAxis',\n      y: offSetY - ySpace.y,\n      event\n    };\n  } else if (inSpace(offSetX, offSetY, plotAreaSpace)) {\n    context = {\n      type: 'plotArea',\n      x: offSetX - plotAreaSpace.x,\n      y: offSetY - plotAreaSpace.y,\n      event\n    };\n  }\n  return context as DropDetail;\n}\n\nexport function isChartDraggable<K, D>(\n  series: ChartSeriesData<K, D>[],\n  levelsArray: GroupLevelItem[][],\n  getDataItem: (seriesIndex: number, groupIndex: number, groupPath: number[]) => D | undefined,\n  groupDraggable?: (group: Group) => 'on' | 'off',\n  itemsDraggable?: (data: D, seriesIndex: number, groupIndex: number) => 'on' | 'off'\n) {\n  if (groupDraggable) {\n    for (let levelIndex = 0; levelIndex < levelsArray.length; levelIndex++) {\n      const groupItems = levelsArray[levelIndex];\n      for (let groupIndex = 0; groupIndex < groupItems.length; groupIndex++) {\n        if (groupDraggable(levelsArray[levelIndex][groupIndex].item) === 'on') {\n          return true;\n        }\n      }\n    }\n  }\n\n  if (itemsDraggable && getDataItem) {\n    const leafgroups = levelsArray[levelsArray.length - 1];\n    for (let i = 0; i < leafgroups.length; i++) {\n      for (let j = 0; j < series.length; j++) {\n        if (\n          getDataItem(j, i, leafgroups[i].path) &&\n          itemsDraggable(getDataItem(j, i, leafgroups[i].path)!, j, i) === 'on'\n        ) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\n\nexport function getDragImageElements<D>(\n  rootRef: RefObject<Element>,\n  context: DragStartDetail<D>,\n  event: DragEvent\n) {\n  const elems = [];\n  let elem;\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  const container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  let width;\n  let height;\n\n  if (context?.type === 'items') {\n    const items = context.items;\n    // only component specific\n    for (let i = 0; i < items.length; i++) {\n      elem = rootRef.current?.querySelector(\n        `[data-oj-private-series-index=\"${items[i].seriesIndex}\"][data-oj-private-group-index=\"${items[i].groupIndex}\"]`\n      );\n      if (elem) elems.push(elem);\n    }\n  } else if (context?.type === 'xAxisTickLabel') {\n    elem = rootRef.current?.querySelector(`[data-oj-private-group-index=\"${context?.groupIndex}\"]`);\n    if (elem) elems.push(elem);\n  }\n  if (elems.length > 0) {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    const bboxs = [];\n    for (let i = 0; i < elems.length; i++) {\n      const bbox = (elems[i] as SVGGraphicsElement).getBBox();\n      if (bbox.x < minX) {\n        minX = bbox.x;\n      }\n      if (bbox.x + bbox.width > maxX) {\n        maxX = bbox.x + bbox.width;\n      }\n      if (bbox.y < minY) {\n        minY = bbox.y;\n      }\n      if (bbox.y + bbox.height > maxY) {\n        maxY = bbox.y + bbox.height;\n      }\n      bboxs.push(bbox);\n    }\n    // Call getComputedStyles for font on the rootref\n    const styles = window.getComputedStyle(elems[0].parentElement!);\n    for (let i = 0; i < elems.length; i++) {\n      elem = elems[i];\n      const clone = elem.cloneNode(true) as SVGGraphicsElement;\n      container.appendChild(clone);\n    }\n    container.setAttribute('transform', `translate(${-minX},${-minY})`);\n    container.style.fontSize = styles.getPropertyValue('font-size');\n    container.style.fontFamily = styles.getPropertyValue('font-family');\n    container.style.textAnchor = styles.getPropertyValue('text-anchor');\n    container.style.dominantBaseline = styles.getPropertyValue('dominant-baseline');\n    width = maxX - minX;\n    height = maxY - minY;\n    svg.appendChild(container);\n    return {\n      image: svg,\n      offSetX: event.offsetX - minX,\n      offSetY: event.offsetY - minY,\n      width,\n      height\n    };\n  }\n  return null;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport type { Dispatch, StateUpdater } from 'preact/hooks';\nimport type {\n  ChartDndProps,\n  ChartSeriesData,\n  DragStartDetail,\n  DropDetail,\n  ChartItemData,\n  SelectionDetail\n} from '#utils/UNSAFE_visTypes/chart';\nimport {\n  getChartDragContext,\n  getChartDropContext,\n  isChartDraggable,\n  getDragImageElements\n} from '#hooks/PRIVATE_useChartDnd/dndChartUtils';\nimport { Dimension } from '#utils/UNSAFE_visTypes/common';\nimport { DragImageProps, useDnd } from '#hooks/PRIVATE_useVisDnd';\nimport { GroupLevelItem } from '#PRIVATE_Axis/groupAxis/hierarchicalUtils';\n\ntype Props<K, D> = {\n  levelsArray: GroupLevelItem[][];\n  series: ChartSeriesData<K, D>[];\n  getDataItem: (seriesIndex: number, groupIndex: number, groupPath: number[]) => D | undefined;\n  rootRef: RefObject<HTMLDivElement>;\n  xSpace: Dimension;\n  ySpace: Dimension;\n  plotAreaSpace: Dimension;\n  selectedIds: Set<K>;\n  setDragOver: Dispatch<StateUpdater<{ accepted: boolean | undefined; type: string }>>;\n  setDatatipDisabled: Dispatch<StateUpdater<boolean>>;\n  onSelectionChange?: SelectionDetail<K, D>;\n} & ChartDndProps<D>;\n\nexport const useChartDnd = <K, D extends ChartItemData<K>>({\n  onDragStart,\n  onDrag,\n  onDragEnd,\n  onDragEnter,\n  onDragLeave,\n  onDragOver,\n  onDrop,\n  rootRef,\n  series,\n  selectedIds,\n  levelsArray,\n  getDataItem,\n  groupDraggable,\n  itemsDraggable,\n  xSpace,\n  ySpace,\n  plotAreaSpace,\n  setDragOver,\n  setDatatipDisabled,\n  onSelectionChange\n}: Props<K, D>) => {\n  const draggable = isChartDraggable(\n    series,\n    levelsArray,\n    getDataItem,\n    groupDraggable,\n    itemsDraggable\n  );\n\n  const getDragContext = function (target: HTMLElement, event: DragEvent) {\n    return getChartDragContext<K, D>(\n      target,\n      levelsArray,\n      rootRef,\n      event,\n      selectedIds,\n      series,\n      getDataItem,\n      groupDraggable,\n      itemsDraggable\n    );\n  };\n  const getDropContext = function (event: DragEvent) {\n    const context = getChartDropContext(xSpace, ySpace, plotAreaSpace, event);\n    return context;\n  };\n  const getChartDragImage = function (props: DragImageProps<DragStartDetail<D>>) {\n    return getDragImageElements(rootRef, props.context, props.event);\n  };\n\n  const onPreDndStart = function (context: DragStartDetail<D>) {\n    if (context?.type === 'items') {\n      const items = context.items;\n      const ids = items.map((item) => item.data.id);\n      const data = items.map((item) => item.data);\n      onSelectionChange?.({ ids: [...ids], data: [...data] });\n    }\n  };\n\n  const showDropEffect = function (context: DropDetail) {\n    setDragOver({\n      accepted: true,\n      type: context.type\n    });\n  };\n\n  const showRejectedDropEffect = function (context: DropDetail) {\n    setDragOver({\n      accepted: false,\n      type: context.type\n    });\n  };\n\n  const clearDropEffect = function () {\n    setDragOver({\n      accepted: undefined,\n      type: ''\n    });\n  };\n\n  const { dragProps, dropProps, content } = useDnd<DragStartDetail<D>, DropDetail>({\n    onDragStart,\n    onDrag,\n    onDragEnd,\n    onDragEnter,\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    getDragContext,\n    getDropContext,\n    getDragImage: getChartDragImage,\n    onPreDndStart,\n    setDatatipDisabled,\n    showRejectedDropEffect,\n    showDropEffect,\n    clearDropEffect\n  });\n  return {\n    draggable: draggable,\n    dndProps: draggable ? { ...dragProps, ...dropProps } : dropProps,\n    dndContent: content\n  };\n};\n"],"names":["getInfo","findSeriesGroupIndexFromId","inSpace","useDnd"],"mappings":"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"}