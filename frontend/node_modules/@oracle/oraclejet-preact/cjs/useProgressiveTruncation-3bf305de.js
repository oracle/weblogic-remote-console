/* @oracle/oraclejet-preact: undefined */
'use strict';

var hooks = require('preact/hooks');
var useResizeObserver = require('./useResizeObserver-a9e97180.js');
var tabBarUtils = require('./tabBarUtils-c421fc75.js');

const useProgressiveTruncation = ({ rootRef, isDisabled = false }) => {
    const trailingContentWidths = hooks.useRef(new Map());
    const [tabMaxWidth, setTabMaxWidth] = hooks.useState();
    const [tabBarWidth, setTabBarWidth] = hooks.useState(0);
    hooks.useLayoutEffect(() => {
        if (tabMaxWidth == undefined && rootRef && rootRef.current && !isDisabled) {
            const isOverflow = tabBarWidth < rootRef.current.scrollWidth;
            if (!isOverflow) {
                return;
            }
            const tabWidths = tabBarUtils.getTabWidths(rootRef.current, trailingContentWidths, isDisabled, tabBarWidth, false);
            const tabMaxWidthMap = new Map(tabWidths.map((tab) => [tab.key, (tab.maxWidth + 'px')]));
            setTabMaxWidth(tabMaxWidthMap);
        }
    }, [tabBarWidth, tabMaxWidth, isDisabled, rootRef]);
    const getTabBarMaxWidth = hooks.useCallback((entry) => {
        if (tabBarWidth !== entry.contentRect.width) {
            setTabBarWidth(entry.contentRect.width);
            if (tabMaxWidth !== undefined) {
                setTabMaxWidth(undefined);
            }
        }
    }, [tabMaxWidth, tabBarWidth]);
    useResizeObserver.useResizeObserver(rootRef, getTabBarMaxWidth, { isDisabled: isDisabled });
    return {
        maxWidths: tabMaxWidth
    };
};

exports.useProgressiveTruncation = useProgressiveTruncation;
//# sourceMappingURL=useProgressiveTruncation-3bf305de.js.map
