{"version":3,"file":"useLegendDnd-47d9f5ba.js","sources":["../../src/hooks/PRIVATE_useLegendDnD/dndLegendUtils.tsx","../../src/utils/PRIVATE_legendUtils/legendUtils.ts","../../src/hooks/PRIVATE_useLegendDnD/useLegendDnd.ts"],"sourcesContent":["import { DragImageProps } from '#hooks/PRIVATE_useVisDnd';\n\nexport function getDragImage<W>({ event, target }: DragImageProps<W>) {\n  const container = document.createElement('div');\n  const { width, height, x, y } = target.getBoundingClientRect();\n  const clone = target!.cloneNode(true);\n  container.appendChild(clone);\n  const styles = window.getComputedStyle(target.parentElement!);\n  container.style.fontSize = styles.getPropertyValue('font-size');\n  container.style.fontFamily = styles.getPropertyValue('font-family');\n  container.style.textAnchor = styles.getPropertyValue('text-anchor');\n  container.style.dominantBaseline = styles.getPropertyValue('dominant-baseline');\n  return {\n    image: container,\n    offSetX: event.clientX - x,\n    offSetY: event.clientY - y,\n    width,\n    height\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { JSX } from 'preact';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { LayoutInfo } from '../../UNSAFE_Legend/getLegendLayout';\nimport { dvtVars } from '@oracle/oraclejet-internal-theme-contract/themeContract.css';\nimport { xUnits } from '../../UNSAFE_Theme/utils';\nimport { Font } from '../../hooks/PRIVATE_useTextDimensions';\nimport { styles } from '../../PRIVATE_BaseLegend/themes/LegendStyles.css';\nimport { ItemInfo, LegendItemData, LegendSectionData } from '../UNSAFE_visTypes/legend';\nimport { cancelEvent } from '../../utils/UNSAFE_visUtils/eventsUtils';\n\n/**\n * Returns the value of the data-oj-private-item-index attribute for a given element.\n * @param element The HTML element.\n * @returns\n */\nexport const getItemInfo = (element: HTMLElement) => {\n  const item = element.dataset['ojPrivateItem'];\n  const section = element.dataset['ojPrivateSection'];\n\n  if (item == null || section == null) {\n    return;\n  }\n  return {\n    itemIdx: Number(item),\n    sectionIdx: Number(section)\n  };\n};\n\n/**\n * Checks if the item is highlighted.\n * @param id Id of the item\n * @param highlighted The set of highlighted item\n */\nexport function isItemHighlighted<K>(id: K, highlighted?: K[]) {\n  if (!highlighted) {\n    return;\n  }\n  if (highlighted.length === 0) {\n    return true;\n  }\n  return new Set(highlighted).has(id);\n}\n\n/**\n * Checks if the item is hidden.\n * @param id Id of the item.\n * @param hiddenIds The set of hidden items.\n * @returns\n */\nexport function isItemHidden<K>(id: K, hiddenIds?: K[]) {\n  if (!hiddenIds) {\n    return;\n  }\n  return new Set(hiddenIds).has(id);\n}\n/**\n * Checks if the item is the currentItem and if the focus ring\n * is visible.\n * @param itemInfo ItemInfo\n * @param itemIdx Item index\n * @param sectionIdx Section index\n */\nexport const hasFocusRing = (itemInfo: ItemInfo, itemIdx: number, sectionIdx?: number) => {\n  if (!itemInfo.isFocusVisible) return false;\n  const { itemIdx: item, sectionIdx: section } = itemInfo;\n\n  if (sectionIdx == null) {\n    return item === itemIdx;\n  }\n  return item === itemIdx && section === sectionIdx;\n};\n\n/**\n * Returns the text for the legend datatip.\n * @param items The legend items data.\n * @param itemInfoRef The item currently hovered.\n * @param currentItem The item that is currently keyboard focused.\n */\nexport function getDatatipText<K, D extends LegendItemData<K>>(\n  items: LegendItemData<K>[] | LegendSectionData<K, D>[],\n  getItem: (\n    itemInfo: ItemInfo,\n    items: LegendItemData<K>[] | LegendSectionData<K, D>[]\n  ) => LegendItemData<K> | undefined,\n  focusedItem: ItemInfo,\n  hoveredItem?: ItemInfo\n) {\n  const isPointerActive = hoveredItem?.isCurrent;\n\n  if (isPointerActive && hoveredItem.itemIdx != null) {\n    return getItem(hoveredItem, items)?.datatip;\n  }\n  if (focusedItem && focusedItem.isCurrent) {\n    return getItem(focusedItem, items)?.datatip;\n  }\n  return;\n}\n\n/**\n * Returns the aria properties for the legend.\n * @param isReadOnly { boolean } If the legend is readonly.\n * @param ariaLabel { string } The aria-label set by the app.\n * @returns The aria props.\n */\nexport function getAriaProps<K>(\n  isReadOnly?: boolean,\n  ariaLabel?: string,\n  hiddenIds?: K[],\n  ariaDescribedBy?: string,\n  ariaLabelledBy?: string\n): {\n  'aria-label'?: UnpackSignals<JSX.AriaAttributes>['aria-label'];\n  'aria-disabled'?: UnpackSignals<JSX.AriaAttributes>['aria-disabled'];\n  'aria-describedby': UnpackSignals<JSX.AriaAttributes>['aria-describedby'];\n  'aria-labelledby': UnpackSignals<JSX.AriaAttributes>['aria-labelledby'];\n  role?: UnpackSignals<JSX.HTMLAttributes['role']>;\n} {\n  const hideAndShow = hiddenIds && !isReadOnly;\n  return {\n    'aria-label': ariaLabel,\n    'aria-disabled': isReadOnly,\n    role: hideAndShow ? 'menu' : 'application',\n    'aria-describedby': ariaDescribedBy,\n    'aria-labelledby': ariaLabelledBy\n  };\n}\n\n/**\n * Returns the item props for BaseLegendItem.\n * @param item The legend item.\n * @param itemIdx The item index of the item.\n * @param sectionIdx The section index of section of the item.\n * @param focusedItem The info of currently focused item.\n * @param isReadOnly Whether the legend is readonly.\n * @param hoveredItem The info of the currently hovered item.\n * @param hiddenIds The hidden ids.\n * @param highlightedIds The highlighted ids.\n */\nexport function getItemProps<K>(\n  item: LegendItemData<K>,\n  itemIdx: number,\n  sectionIdx: number | undefined,\n  focusedItem: ItemInfo,\n  isReadOnly?: boolean,\n  hoveredItem?: ItemInfo,\n  hiddenIds?: K[],\n  highlightedIds?: K[]\n) {\n  let isCurrent = false;\n  if (!isReadOnly) {\n    const isFocusedItem = itemIdx === focusedItem.itemIdx && sectionIdx === focusedItem.sectionIdx;\n    const isHoveredItem =\n      itemIdx === hoveredItem?.itemIdx && sectionIdx === hoveredItem?.sectionIdx;\n    isCurrent = !!(\n      (isFocusedItem && focusedItem.isCurrent) ||\n      (isHoveredItem && hoveredItem?.isCurrent)\n    );\n  }\n\n  return {\n    isCurrent,\n    isHighlighted: isItemHighlighted<K>(item.id, highlightedIds),\n    isHidden: isItemHidden(item.id, hiddenIds),\n    isFocused: hasFocusRing(focusedItem, itemIdx, sectionIdx),\n    key: item.id,\n    ...item\n  };\n}\n\n/**\n * Compares if two ItemInfo are equal\n * @param item1\n * @param item2\n * @returns\n */\nexport const isEqualItem = (item1?: ItemInfo, item2?: ItemInfo) => {\n  return item1?.itemIdx === item2?.itemIdx && item1?.sectionIdx === item2?.sectionIdx;\n};\n\n/**\n * Returns the num of cols and rows for the legend.\n */\nexport const getGridNums = (\n  numItems: number,\n  layoutInfo?: LayoutInfo,\n  orientation?: 'vertical' | 'horizontal'\n) => {\n  let itemsPerRow;\n  let itemsPerCol;\n\n  if (orientation === 'vertical') {\n    itemsPerRow = 1;\n    itemsPerCol = numItems;\n  }\n\n  if (layoutInfo?.isWrapped) {\n    itemsPerRow = layoutInfo.itemsPerRow;\n    itemsPerCol = Math.ceil(numItems / itemsPerRow);\n    itemsPerRow = Math.ceil(numItems / itemsPerCol);\n  }\n\n  return { itemsPerRow, itemsPerCol };\n};\n\n/**\n * Returns the num of cols and rows for the sectional legend.\n */\nexport const getSectionGridNums = (numItems: number, legendItemsPerRow?: number) => {\n  let itemsPerRow;\n  let itemsPerCol;\n\n  if (legendItemsPerRow) {\n    itemsPerRow = legendItemsPerRow;\n    itemsPerCol = Math.ceil(numItems / itemsPerRow);\n    itemsPerRow = Math.ceil(numItems / itemsPerCol);\n  }\n\n  return { itemsPerRow, itemsPerCol };\n};\n\n/**\n * Returns the grid row and column for given item.\n * @param noOfItems The number of items in the section.\n * @param index The index of the item.\n * @param itemsPerRow The num of items per row in the grid.\n * @param itemsPerCol The num of items per col in the grid.\n * @returns\n */\nexport function getGridCellIndices(\n  noOfItems: number,\n  index: number,\n  itemsPerRow?: number,\n  itemsPerCol?: number\n) {\n  let gridRow;\n  let gridCol;\n\n  if (itemsPerRow && itemsPerCol && noOfItems > itemsPerRow) {\n    gridRow = (index % itemsPerCol) + 1;\n    gridCol = Math.floor(index / itemsPerCol) + 1;\n  }\n  return { gridRow, gridCol };\n}\n\n/**\n * Returns the resolved values for the legend vars.\n */\n\nexport const legendVars = [\n  {\n    tokenVar: xUnits(1),\n    key: 'unit',\n    cssProp: 'padding'\n  },\n  {\n    tokenVar: dvtVars.label.sm.fontSize,\n    key: 'fontSize',\n    cssProp: 'font-size'\n  }\n];\n\n/**\n * Returns the resolved values for the legend vars.\n */\nexport function getLegendTextStyle(props: Font, resolvedVars: Record<string, any>) {\n  return {\n    fontStyle: props.fontStyle,\n    fontSize: (resolvedVars['fontSize'] ?? props.fontSize) as string | undefined,\n    fontWeight: props.fontWeight,\n    fontFamily: props.fontFamily\n  };\n}\n\n/**\n * Returns the style for current legend item.\n */\nexport function getLegendCurrentItemStyle(\n  isCurrent: boolean,\n  isHighlighted: boolean | undefined,\n  hideAndShowBehavior: 'on' | 'off',\n  hoverBehavior: 'dim' | 'none',\n  isHidden: boolean | undefined,\n  actionable: 'inherit' | 'off'\n) {\n  if (isCurrent) {\n    if (isHighlighted == null && isHidden == null && actionable !== 'off')\n      return styles.legendItemIsCurrentWithCursor;\n    else if (isHighlighted == null && hideAndShowBehavior === 'on' && actionable !== 'off')\n      return styles.legendItemIsCurrentWithCursor;\n    else if (isHidden == null && hoverBehavior === 'dim' && actionable !== 'off')\n      return styles.legendItemIsCurrentWithoutCursor;\n  }\n  return '';\n}\n\nexport function getIsLegendItemActionable(\n  legendData: any[],\n  isReadOnly: boolean,\n  isSectional?: boolean\n) {\n  return (itemInfo: ItemInfo) => {\n    let item;\n    if (isSectional && itemInfo.sectionIdx != null) {\n      item = legendData[itemInfo.sectionIdx].items[itemInfo.itemIdx];\n    } else {\n      item = legendData[itemInfo.itemIdx];\n    }\n    return !isReadOnly && item?.actionable !== 'off';\n  };\n}\n/*\n * Returns KeyUp handler for legend.\n * @param triggerOnAction\n * @param updatefocusedItemInfo\n * @param focusedItemInfo\n * @returns\n */\nexport function getKeyUpHandler(\n  triggerOnAction: () => void,\n  updatefocusedItemInfo: (itemInfo: ItemInfo) => void,\n  focusedItemInfo: ItemInfo,\n  isHideShow?: boolean\n) {\n  return (event: KeyboardEvent) => {\n    const key = event.code;\n    switch (key) {\n      case 'Space': {\n        if (isHideShow) {\n          triggerOnAction();\n          cancelEvent(event);\n        }\n        break;\n      }\n      case 'Enter': {\n        triggerOnAction();\n        cancelEvent(event);\n        break;\n      }\n      case 'Home': {\n        updatefocusedItemInfo({\n          itemIdx: 0,\n          sectionIdx: 0,\n          isFocusVisible: true,\n          isCurrent: true\n        });\n        cancelEvent(event);\n        break;\n      }\n      case 'End': {\n        updatefocusedItemInfo({\n          itemIdx: -1,\n          sectionIdx: -1,\n          isCurrent: true,\n          isFocusVisible: true\n        });\n        cancelEvent(event);\n        break;\n      }\n      case 'Tab': {\n        updatefocusedItemInfo({\n          ...focusedItemInfo,\n          isCurrent: true,\n          isFocusVisible: true\n        });\n        cancelEvent(event);\n        break;\n      }\n    }\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getDragImage } from './dndLegendUtils';\nimport { useDnd } from '#hooks/PRIVATE_useVisDnd';\nimport { getItemInfo } from '#utils/PRIVATE_legendUtils/legendUtils';\nimport { LegendDndProps, DropDetail, LegendSectionData } from '#utils/UNSAFE_visTypes/legend';\nimport { LegendDragStartDetail } from '#UNSAFE_Legend/legend.type';\nimport { SectionalLegendDragStartDetail } from '#UNSAFE_SectionalLegend/sectionalLegend.type';\nimport { Dispatch, StateUpdater } from 'preact/hooks';\n\ntype Props<D, S, W> = {\n  items?: D[];\n  sections?: S[];\n  setDragOver: Dispatch<StateUpdater<boolean | undefined>>;\n  setDatatipDisabled: Dispatch<StateUpdater<boolean>>;\n} & LegendDndProps<W, D>;\n\nexport const useLegendDnd = <\n  K,\n  D,\n  W extends SectionalLegendDragStartDetail<D> | LegendDragStartDetail<D> | undefined,\n  S extends LegendSectionData<K, D> | void = void\n>({\n  onDragStart,\n  onDrag,\n  onDragEnd,\n  onDragEnter,\n  onDragLeave,\n  onDragOver,\n  onDrop,\n  items,\n  sections,\n  itemDraggable,\n  setDragOver,\n  setDatatipDisabled\n}: Props<D, S, W>) => {\n  const draggable = itemDraggable !== undefined;\n\n  const getDragContext = function (target: HTMLElement, event: DragEvent): W {\n    //We search for the key using the target of the event\n    const itemIdx = getItemInfo(target as HTMLElement)?.itemIdx;\n    let sectionIdx;\n    if (sections) {\n      sectionIdx = getItemInfo(target as HTMLElement)?.sectionIdx;\n    }\n    let data;\n    if (items) {\n      data = itemIdx !== undefined ? items[itemIdx] : null;\n      if (itemDraggable && data && itemDraggable(data)) {\n        return {\n          type: 'item',\n          data: data,\n          event\n        } as W;\n      }\n    } else {\n      data =\n        sectionIdx !== undefined && itemIdx !== undefined\n          ? sections![sectionIdx]?.items[itemIdx]\n          : null;\n      if (itemDraggable && data && itemDraggable(data)) {\n        return {\n          type: 'item',\n          data: data,\n          event,\n          itemIndexPath: [sectionIdx, itemIdx]\n        } as W;\n      }\n    }\n    return undefined as W;\n  };\n  const getDropContext = function (event: DragEvent) {\n    return { type: 'background', event } as DropDetail;\n  };\n\n  const showDropEffect = function () {\n    setDragOver(true);\n  };\n\n  const showRejectedDropEffect = function () {\n    setDragOver(false);\n  };\n\n  const clearDropEffect = function () {\n    setDragOver(undefined);\n  };\n\n  const { dragProps, dropProps, content } = useDnd<W, DropDetail>({\n    onDragStart,\n    onDrag,\n    onDragEnd,\n    onDragEnter,\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    getDragContext,\n    getDropContext,\n    getDragImage,\n    setDatatipDisabled,\n    showDropEffect,\n    showRejectedDropEffect,\n    clearDropEffect\n  });\n\n  return {\n    draggable: draggable,\n    dndProps: draggable ? { ...dragProps, ...dropProps } : dropProps,\n    dndContent: content\n  };\n};\n"],"names":["xUnits","dvtVars","styles","cancelEvent","useDnd"],"mappings":"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"}