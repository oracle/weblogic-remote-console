{"version":3,"file":"Dialog-89e1b1c3.js","sources":["../../src/UNSAFE_Dialog/Dialog.tsx"],"sourcesContent":["import type { ComponentChild, RefObject, JSX } from 'preact';\nimport { ForwardedRef, forwardRef } from 'preact/compat';\nimport { Offset, WindowOverlay, WindowOverlayPlacement } from '../UNSAFE_WindowOverlay';\nimport { TestIdProps, useTestId } from '../hooks/UNSAFE_useTestId';\nimport { useAnimation } from '../hooks/UNSAFE_useAnimation';\nimport { useEffect, useRef, useCallback, useMemo, useState } from 'preact/hooks';\nimport { mergeRefs } from '../utils/PRIVATE_refUtils';\n\nimport { DialogRedwoodTheme } from './themes/redwood/DialogTheme';\nimport { DialogStyles } from './themes/DialogStyles.css';\nimport { FocusTrap } from '../UNSAFE_FocusTrap';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { Layer } from '../UNSAFE_Layer';\nimport { Modal } from '../UNSAFE_Modal';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { globalImages } from '#/ImageVars.css';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { dimensionInterpolations, DimensionProps } from '../utils/UNSAFE_interpolations/dimensions';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { useResizeObserver } from '../hooks/UNSAFE_useResizeObserver';\n\nimport { DraggableProps, useDraggable } from '../hooks/PRIVATE_useDraggable';\nimport { Floating, Coords } from '../UNSAFE_Floating';\nimport { IconButton } from '../UNSAFE_IconButton';\nimport { CloseIcon } from '../PRIVATE_ThemedIcons/CloseIcon';\nimport { Resizable, ResizableConstraints } from '../PRIVATE_Resizable/Resizable';\nimport { Position, Rect } from '../utils/UNSAFE_flexibleComponentUtils';\nimport { useBreakpoints } from '../hooks/UNSAFE_useBreakpoints';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport {\n  SLIDE_DOWN_XLARGE,\n  SLIDE_UP_XLARGE,\n  DURATION_LARGE\n} from '../utils/PRIVATE_animationUtils';\nimport {\n  allTabbableElements,\n  focusOn,\n  focusWithin,\n  getActiveElement\n} from '../utils/PRIVATE_tabbableUtils';\n\nimport type { UnsafeDomHandle } from '#utils/UNSAFE_unsafeDomAccess';\nimport { UNSAFE_DOM_ACCESS } from '#utils/UNSAFE_unsafeDomAccess';\n\n// dialog states\ntype Status = 'initial' | 'opening' | 'closing' | 'unmounted';\ntype VisibilityStatus = 'hidden' | 'visible';\ntype Animations = 'zoomIn' | 'zoomOut' | 'slideUp' | 'slideDown';\n\ntype IntrinsicProps = Pick<UnpackSignals<JSX.IntrinsicElements['div']>, 'children' | 'role'>;\n\ntype OnCloseDetail = {\n  /**\n   * reason for closing the dialog\n   */\n  reason: 'escapeKey' | 'icon';\n};\n\nexport type CancelBehavior = 'none' | 'escape' | 'icon';\n\ntype DialogProps = IntrinsicProps &\n  DimensionProps & {\n    /**\n     * Optional ref for an element to focus on when component mounts\n     */\n    autoFocusRef?: RefObject<{ focus: () => void }>;\n\n    /**\n     * On Close callback.\n     */\n    onClose?: (detail: OnCloseDetail) => void;\n\n    /**\n     * On opening or closing transition end callback.\n     */\n    onTransitionEnd?: (value: boolean) => void;\n\n    /**\n     * Determines whether the Dialog is open.\n     */\n    isOpen: boolean;\n\n    /**\n     * Dialog header content. Can be a string or VNode (Component Child).\n     * <p>\n     * When a plain string is passed, it will be used as the dialog title. Otherwise, the prop value\n     * will be used as the header content.\n     * </p>\n     * <p>\n     * Dialog will automatically refer to the header content as the accessible label.\n     * The user can override this behavior by specifying the <code>aria-labelledby</code> property\n     * and setting its value as needed.\n     * </p>\n     */\n    header?: ComponentChild;\n\n    /**\n     * Dialog footer content.\n     */\n    footer?: ComponentChild;\n\n    /**\n     * Determines dialog modality. Default is 'modal'.\n     */\n    modality?: 'modal' | 'modeless';\n\n    /**\n     * Specifies dialog's cancel behavior. Default is 'none'.\n     */\n    cancelBehavior?: CancelBehavior;\n\n    /**\n     * Specifies dialog's launcher. After dialog closes, it returns focus to the launcher.\n     * If not specified, focus goes back to the last active element before dialog opened.\n     */\n    launcherRef?: RefObject<HTMLElement | UnsafeDomHandle<HTMLElement>>;\n\n    /**\n     * Specifies dialog's anchor. Dialog is placed relative to its anchor. If not specified,\n     * it is placed relatively to window.\n     */\n    anchorRef?: RefObject<Element | Coords>;\n\n    /**\n     * Determines placement of the dialog relative to the viewport.\n     * Supported values are:\n     * <p> <code>center</code>, <code>top</code>, <code>top-start</code>, <code>top-end</code>,\n     * <code>end</code>, <code>end-top</code>, <code>end-bottom</code>,\n     * <code>bottom</code>, <code>bottom-start</code>, <code>bottom-end</code>,\n     * <code>start</code>, <code>start-top</code>, <code>start-bottom</code>\n     * </p>\n     * Default is <code>center</code>.\n     */\n    placement?: WindowOverlayPlacement;\n\n    /**\n     * Determines the offset of the Dialog from its core placement along the specified axes.\n     *\n     * Offset could be a number or an object\n     *\n     * An object has the following type:\n     * <pre>\n     *   {\n     *     mainAxis?: number;\n     *     crossAxis?: number;\n     *   }\n     * </pre>\n     * For the <code>center</code> placement the convention for the offset type is that mainAxis defines\n     * offset from the top, crossAxis defines offset from the left side of the view port.\n     *\n     * A number is a shortcut for setting the mainAxis.\n     */\n    offset?: Offset;\n\n    /**\n     * Determines if the Dialog should be sensitive to drag gestures. To create a draggable dialog,\n     * set <code>dragAffordance='header'</code> and specify the <code>onDragMove</code> handler.\n     */\n    dragAffordance?: 'none' | 'header';\n\n    /**\n     * Determines if the Dialog should support resizing. To create a resizable dialog,\n     * set <code>resizeBehavior='resizable'</code> and specify the <code>onResize</code> handler.\n     */\n    resizeBehavior?: 'none' | 'resizable';\n\n    /**\n     * Callback to be invoked if <code>dragAffordance</code> is set to <code>header</code> and a drag gesture is initiated.\n     * The current position is reported in the <code>pos</code> parameter.\n     *\n     * @param pos\n     */\n    onDragStart?: (pos: Position) => void;\n\n    /**\n     * Callback to be invoked if <code>dragAffordance</code> is set to <code>header</code> and a drag gesture is detected.\n     * The current position is reported in the <code>pos</code> parameter.\n     *\n     * @param pos\n     */\n    onDragMove?: (pos: Position) => void;\n\n    /**\n     * Callback to be invoked if <code>dragAffordance</code> is set to <code>header</code> and a drag gesture is completed.\n     * The current position is reported in the <code>pos</code> parameter.\n     *\n     * @param pos\n     */\n    onDragEnd?: (pos: Position) => void;\n\n    /**\n     * Callback to be invoked if <code>resizeBehavior</code> is set to <code>resizable</code> and\n     * a resize gesture is initiated. The current position and dimensions are reported in the\n     * <code>rect</code> parameter.\n     *\n     * @param rect\n     */\n    onResizeStart?: (rect: Rect) => void;\n\n    /**\n     * Callback to be invoked if <code>resizeBehavior</code> is set to <code>resizable</code> and\n     * a resize gesture is detected. The current position and dimensions are reported in the\n     * <code>rect</code> parameter.\n     *\n     * @param rect\n     */\n    onResize?: (rect: Rect) => void;\n\n    /**\n     * Callback to be invoked if <code>resizeBehavior</code> is set to <code>resizable</code> and\n     * a resize gesture is completed. The current position and dimensions are reported in the\n     * <code>rect</code> parameter.\n     *\n     * @param rect\n     */\n    onResizeEnd?: (rect: Rect) => void;\n\n    /**\n     * Specifies callback triggered when initial focus is set or when a modeless dialog receives focus\n     * via the F6 key.\n     */\n    onFocusSet?: () => void;\n\n    /**\n     * Determines if the header decoration should be displayed. The default is <code>on</code>\n     * which renders a textured strip at the top of the dialog header in the Redwood theme.\n     * If set to <code>off</code>, no decoration is rendered.\n     */\n    headerDecoration?: 'off' | 'on';\n\n    /**\n     * Specifies the ARIA role type. Depending on how the dialog is used in the page, the developer\n     * should choose from the following:\n     * <ul>\n     *   <li><code>dialog</code> defines an application window that is designed to interrupt the current\n     *      processing of an application in order to prompt the user to enter information or require\n     *      a response.</li>\n     *   <li><code>alertdialog</code> defines type of dialog that contains an alert message, where initial\n     *      focus goes to an element within the dialog.</li>\n     * </ul>\n     */\n    role?: string;\n\n    /**\n     * Optional <code>aria-labelledby</code> property referring to the content to be used as Dialog's\n     * accessible <label htmlFor=\"\" className=\"\"></label>\n     * If not specified, the Dialog will automatically refer to the entire header content as the accessible label.\n     */\n    'aria-labelledby'?: string;\n\n    /**\n     * Optional accessible description for the dialog.\n     */\n    'aria-describedby'?: string;\n  } & TestIdProps;\n\n// dialog header\ntype DialogHeaderProps = Pick<DialogProps, 'children'> & {\n  id?: string;\n  cancelBehavior?: CancelBehavior;\n  onClose?: (detail: OnCloseDetail) => void;\n  draggableProps?: DraggableProps;\n  headerDecoration?: 'off' | 'on';\n};\n\nconst StyledDialogHeader = ({\n  children,\n  id,\n  cancelBehavior,\n  onClose,\n  draggableProps,\n  headerDecoration = 'on'\n}: DialogHeaderProps) => {\n  const { styles } = useComponentTheme<never, DialogStyles>(DialogRedwoodTheme);\n\n  const classes = classNames([\n    styles.dialogHeaderStyle,\n    ...(headerDecoration === 'on' ? [styles.dialogHeaderDecorationStyle] : [])\n  ]);\n\n  const content: ComponentChild =\n    typeof children === 'string' ? (\n      <h1 id={id} className={styles.dialogTitleStyle}>\n        {children}\n      </h1>\n    ) : (\n      <>{children}</>\n    );\n\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const handleIconClose = () => {\n    onClose?.({ reason: 'icon' });\n  };\n\n  const closeIcon: ComponentChild =\n    cancelBehavior === 'icon' ? (\n      <div>\n        <div className={styles.dialogHeaderCloseIconStyle}>\n          <IconButton\n            aria-label={translations.message_close()}\n            size=\"sm\"\n            variant=\"ghost\"\n            onAction={handleIconClose}>\n            <CloseIcon />\n          </IconButton>\n        </div>\n      </div>\n    ) : null;\n\n  return (\n    <div className={classes} {...draggableProps}>\n      {content}\n      {closeIcon}\n    </div>\n  );\n};\n\n// dialog footer\n\ntype DialogFooterProps = Pick<DialogProps, 'children'> & {\n  style?: string;\n};\n\nconst StyledDialogFooter = forwardRef(\n  ({ children, style }: DialogFooterProps, ref: ForwardedRef<HTMLDivElement | null>) => {\n    return (\n      <div ref={ref} className={style}>\n        {children}\n      </div>\n    );\n  }\n);\n\n// styled dialog\n\ntype MainProps = Pick<DialogProps, 'children' | 'header' | 'footer' | 'role'> &\n  Pick<UnpackSignals<JSX.IntrinsicElements['div']>, 'style' | 'onKeyDown'> & {\n    visibility: VisibilityStatus;\n    labelId?: string;\n    ariaLabelledBy?: string;\n    ariaDescribedBy?: string;\n    cancelBehavior?: CancelBehavior;\n    draggableProps?: DraggableProps;\n    isResizable?: boolean;\n    headerDecoration?: 'off' | 'on';\n    containerRef?: RefObject<HTMLElement>;\n    onClose?: (detail: OnCloseDetail) => void;\n    onResizeStart?: (rect: Rect) => void;\n    onResize?: (rect: Rect) => void;\n    onResizeEnd?: (rect: Rect) => void;\n    footerRef?: RefObject<HTMLDivElement | null>;\n  } & TestIdProps;\n\nconst StyledDialog = forwardRef(\n  (\n    {\n      children,\n      header,\n      footer,\n      visibility,\n      labelId,\n      role,\n      ariaLabelledBy,\n      ariaDescribedBy,\n      cancelBehavior,\n      draggableProps,\n      isResizable,\n      headerDecoration,\n      containerRef,\n      onClose,\n      onResizeStart,\n      onResize,\n      onResizeEnd,\n      onKeyDown,\n      testId,\n      style,\n      footerRef\n    }: MainProps,\n    ref: ForwardedRef<HTMLDivElement | null>\n  ) => {\n    const elementRef = useRef<HTMLDivElement>(null);\n    const mergedRef = mergeRefs(ref, elementRef);\n\n    // computed dialog dimension limits\n    const sizeConstraints = useRef<ResizableConstraints>();\n\n    const [isSmallHeight, setSmallHeight] = useState<boolean>(false);\n    const isSmallWidth = !useBreakpoints()['md'];\n\n    const { classes: styleClasses, styles } = useComponentTheme<never, DialogStyles>(\n      DialogRedwoodTheme\n    );\n\n    const resizeHandler = useCallback(() => {\n      if (elementRef.current) {\n        if (elementRef.current.clientHeight < 400) {\n          setSmallHeight(true);\n        } else {\n          setSmallHeight(false);\n        }\n        if (elementRef.current) {\n          const cs = window.getComputedStyle(elementRef.current);\n          sizeConstraints.current = {\n            minHeight: parseFloat(cs.minHeight),\n            maxHeight: parseFloat(cs.maxHeight),\n            minWidth: parseFloat(cs.minWidth),\n            maxWidth: parseFloat(cs.maxWidth)\n          };\n        }\n      }\n    }, []);\n\n    // set initial Height\n    useEffect(() => {\n      resizeHandler();\n    }, [resizeHandler]);\n\n    useResizeObserver(elementRef, resizeHandler);\n\n    // for small widths (mobile), use the 'smallWidth' dialog style\n    // otherwise, check for small height to apply 'smallWidth' or 'desktop' styles accordingly\n    const baseStyle = isSmallWidth ? styles.baseStyleSmallWidth : styles.baseStyleDesktop;\n\n    // content should scroll depending on the viewport height\n    // on large screens, the header and footer should be \"sticky\",\n    // at small viewport heights, the entire content should be scrollable\n    const contentStyle = isSmallHeight\n      ? styles.dialogContentStyleNoShrink\n      : styles.dialogContentStyle;\n\n    const visibilityStyle =\n      visibility === 'visible' ? styles.visibilityVisible : styles.visibilityHidden;\n\n    const testIdProps = useTestId(testId);\n\n    return (\n      <FocusTrap restoreFocusRef={false}>\n        <div\n          ref={mergedRef}\n          tabIndex={-1}\n          className={classNames([styleClasses, baseStyle, visibilityStyle, globalImages])}\n          style={style}\n          onKeyDown={onKeyDown}\n          role={role}\n          aria-labelledby={ariaLabelledBy}\n          aria-describedby={ariaDescribedBy}\n          {...testIdProps}>\n          <div className={styles.dialogContainerStyle}>\n            <StyledDialogHeader\n              id={labelId}\n              onClose={onClose}\n              headerDecoration={headerDecoration}\n              cancelBehavior={cancelBehavior}\n              draggableProps={draggableProps}>\n              {header}\n            </StyledDialogHeader>\n            <div className={contentStyle}>\n              <div className={styles.dialogBodyStyle}>{children}</div>\n            </div>\n            <StyledDialogFooter ref={footerRef} style={styles.dialogFooterStyle}>\n              {footer}\n            </StyledDialogFooter>\n          </div>\n          {isResizable && (\n            <Resizable\n              onResizeStart={onResizeStart}\n              onResize={onResize}\n              onResizeEnd={onResizeEnd}\n              containerRef={containerRef}\n              constraints={sizeConstraints.current}></Resizable>\n          )}\n        </div>\n      </FocusTrap>\n    );\n  }\n);\n\n// main Dialog component\n\n/**\n * WAI-ARIA-compliant dialog component. A dialog is a floating window that typically contains\n * a title bar and a content area.\n * The dialog is generally placed on top of the rest of the page content. It can be either modal\n * (only the content in the dialog can be interacted with) or non-modal (it's still possible\n * to interact with content outside of the dialog).\n */\nexport const Dialog = forwardRef(\n  (\n    {\n      children,\n      isOpen,\n      header = '',\n      footer,\n      modality = 'modal',\n      launcherRef,\n      anchorRef,\n      autoFocusRef,\n      placement,\n      offset = 0,\n      cancelBehavior = 'none',\n      dragAffordance = 'none',\n      resizeBehavior = 'none',\n      headerDecoration = 'on',\n      onDragStart,\n      onDragMove,\n      onDragEnd,\n      onResizeStart,\n      onResize,\n      onResizeEnd,\n      onFocusSet,\n      onClose,\n      onTransitionEnd,\n      role = 'dialog',\n      'aria-labelledby': ariaLabelledBy,\n      'aria-describedby': ariaDescribedBy,\n      testId,\n      ...props\n    }: DialogProps,\n    ref: ForwardedRef<HTMLDivElement | null>\n  ) => {\n    const [status, _setStatus] = useState<Status>(isOpen ? 'initial' : 'unmounted');\n    const _status = useRef<Status>(isOpen ? 'initial' : 'unmounted');\n    const setStatus = (s: Status) => {\n      _status.current = s;\n      _setStatus(s);\n    };\n\n    const [visibility, setVisibility] = useState<VisibilityStatus>('hidden');\n\n    const prevStatusRef = useRef<Status>('unmounted');\n\n    const floatingRef = useRef<HTMLDivElement>(null);\n    const contentWrapperRef = useRef<HTMLDivElement | null>(null);\n    const localLauncherRef = useRef<HTMLElement | null>(null);\n    const footerRef = useRef<HTMLDivElement | null>(null);\n\n    const isSmallWidth = !useBreakpoints()['md'];\n    const derivedPlacement = isSmallWidth ? 'bottom' : placement ? placement : 'center';\n    const animationType = isSmallWidth\n      ? status === 'opening'\n        ? 'slideUp'\n        : 'slideDown'\n      : status === 'opening'\n      ? 'zoomIn'\n      : 'zoomOut';\n\n    const uniqueId = useId();\n    const labelId = ariaLabelledBy ? ariaLabelledBy : uniqueId;\n\n    const interpolations = [...Object.values(dimensionInterpolations)];\n    const styleInterpolations = mergeInterpolations<DimensionProps>(interpolations);\n    const { ...styles } = styleInterpolations(props);\n    const shouldReturnFocus = useRef<boolean>(false);\n\n    const setInitialFocus = useCallback(() => {\n      // Focus autoFocusRef if specifed, otherwise focus on first tabbable element\n      // in the Dialog or the Dialog container itself if there is none\n      if (autoFocusRef && autoFocusRef.current) {\n        focusOn(autoFocusRef.current);\n      } else if (footerRef.current && allTabbableElements(footerRef.current).length > 0) {\n        focusWithin(footerRef.current);\n      } else {\n        focusWithin(contentWrapperRef.current as HTMLElement);\n      }\n      onFocusSet?.();\n    }, [autoFocusRef, onFocusSet]);\n\n    const returnFocus = useCallback((): void => {\n      const launcherEl = localLauncherRef.current;\n\n      if (shouldReturnFocus.current && launcherEl) {\n        focusOn(launcherEl);\n        shouldReturnFocus.current = false;\n      }\n    }, []);\n\n    // Animation\n    const { nodeRef } = useAnimation<Animations, HTMLDivElement>(animationType, {\n      animationStates,\n      isAnimatedOnMount: true,\n      onAnimationEnd: () => {\n        if (isOpen) {\n          onTransitionEnd?.(true);\n        } else if (!isOpen) {\n          // Should return focus?\n          // Modeless: check whether Dialog contains focus before it unmounts\n          // Modal: always return focus\n          shouldReturnFocus.current =\n            contentWrapperRef.current?.contains(getActiveElement() as HTMLElement) || false;\n          nodeRef(null);\n          setVisibility('hidden');\n          setStatus('unmounted');\n          onTransitionEnd?.(false);\n        }\n      }\n    });\n\n    const mergedRef = useMemo(() => mergeRefs(contentWrapperRef, ref), [contentWrapperRef, ref]);\n\n    const launcherKeyDownCallback = useCallback(\n      (event: KeyboardEvent): void => {\n        if (localLauncherRef.current === getActiveElement() && event.code === 'F6') {\n          // Prevent default F6 handlers.\n          // F6 is a standard Chrome address bar shortcut on Windows.\n          event.preventDefault();\n          event.stopPropagation();\n\n          focusWithin(contentWrapperRef.current as HTMLElement);\n          onFocusSet?.();\n        }\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [modality]\n    );\n\n    const { draggableProps } = useDraggable({\n      isDisabled: dragAffordance === 'none',\n      containerRef: floatingRef,\n      onDragStart,\n      onDragMove,\n      onDragEnd\n    });\n\n    useEffect(() => {\n      // 1. Ignore status update on initial render or return focus on component unmount\n      if (status === 'unmounted' && !isOpen) {\n        if (status !== prevStatusRef.current) {\n          returnFocus();\n        }\n      }\n\n      // 2. Mount visually hidden component\n      // Component gets mounted, but will be visually hidden to avoid flickering\n      // Flickering happens because it gets rendered before animation hook repositions\n      // it in next render cycle\n      else if (status === 'unmounted' && isOpen) {\n        setStatus('initial');\n      }\n\n      // 3. Setup animation\n      // Component has been mounted.\n      // We will kick out animation as node is already present in DOM.\n      // To avoid flickering, we still keep it visually hidden until the next render cycle.\n      else if (status === 'initial' && isOpen) {\n        nodeRef(contentWrapperRef.current);\n        setStatus('opening');\n      }\n\n      // 3. Unhide component. It becomes visible.\n      else if (status === 'opening' && isOpen) {\n        setVisibility('visible');\n      }\n\n      // 4. Closing\n      else if (!isOpen && _status.current !== 'unmounted') {\n        setStatus('closing');\n      }\n\n      return () => {\n        // remember the previous status\n        prevStatusRef.current = status;\n      };\n    }, [isOpen, status, nodeRef, returnFocus]);\n\n    // Destroy case handler\n    useEffect(() => {\n      return () => {\n        const launcherEl = localLauncherRef.current;\n        if (\n          // eslint-disable-next-line react-hooks/exhaustive-deps\n          (contentWrapperRef.current?.contains(getActiveElement() as HTMLElement) || false) &&\n          launcherEl\n        ) {\n          // In destroy case ModalManager is blocking returning of the focus.\n          // We need to reschedule it to workaround that\n          setTimeout(() => {\n            focusOn(launcherEl);\n          }, 0);\n        }\n      };\n    }, []);\n\n    // Initialize launcher\n    useEffect(() => {\n      if (isOpen) {\n        localLauncherRef.current = _getLauncherElement(launcherRef);\n\n        // Register F6 key handler to enter a modeless dialog\n        if (modality === 'modeless') {\n          localLauncherRef.current?.addEventListener('keydown', launcherKeyDownCallback);\n        }\n      }\n      return () => {\n        // Deregister F6 key handler\n        if (modality === 'modeless') {\n          localLauncherRef.current?.removeEventListener('keydown', launcherKeyDownCallback);\n        }\n      };\n    }, [isOpen, launcherRef, launcherKeyDownCallback, modality]);\n\n    // setInitialFocus when the dialog becomes visible\n    useEffect(() => {\n      if (visibility === 'visible') {\n        setInitialFocus();\n      }\n    }, [visibility, setInitialFocus]);\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      switch (event.code) {\n        case 'Escape':\n          onClose?.({ reason: 'escapeKey' });\n          break;\n        case 'F6':\n          // Focus launcher\n          if (localLauncherRef.current && modality === 'modeless') {\n            focusOn(localLauncherRef.current);\n          }\n          // Prevent default F6 handlers. F6 is a standard Chrome address bar shortcut on Windows.\n          event.preventDefault();\n          event.stopPropagation();\n          break;\n      }\n    };\n\n    const handleBackdropClick = () => {\n      // in case of a backdrop click, move focus to dialog's root element\n      contentWrapperRef.current?.focus();\n    };\n\n    const renderDialogContent = () => {\n      return (\n        <StyledDialog\n          ref={mergedRef}\n          labelId={labelId}\n          header={header}\n          footer={footer}\n          role={role}\n          ariaLabelledBy={labelId}\n          ariaDescribedBy={ariaDescribedBy}\n          onKeyDown={handleKeyDown}\n          testId={testId}\n          style={styles}\n          visibility={visibility}\n          cancelBehavior={cancelBehavior}\n          draggableProps={draggableProps}\n          isResizable={resizeBehavior === 'resizable'}\n          headerDecoration={headerDecoration}\n          containerRef={floatingRef}\n          onClose={onClose}\n          onResizeStart={onResizeStart}\n          onResize={onResize}\n          onResizeEnd={onResizeEnd}\n          footerRef={footerRef}>\n          {children}\n        </StyledDialog>\n      );\n    };\n\n    const renderDialog = () => {\n      if (anchorRef && anchorRef.current) {\n        return (\n          <Floating\n            ref={floatingRef}\n            anchorRef={anchorRef}\n            placement={'bottom-start'}\n            flipOptions={{ mainAxis: false, crossAxis: false }}\n            shiftOptions={{ mainAxis: false, crossAxis: false }}>\n            {renderDialogContent()}\n          </Floating>\n        );\n      } else {\n        return (\n          <WindowOverlay placement={derivedPlacement} offset={offset}>\n            {renderDialogContent()}\n          </WindowOverlay>\n        );\n      }\n    };\n\n    if (modality === 'modal') {\n      return (\n        <Modal isOpen={status !== 'unmounted'} onBackdropClick={handleBackdropClick}>\n          {renderDialog()}\n        </Modal>\n      );\n    } else {\n      return status !== 'unmounted' ? <Layer>{renderDialog()}</Layer> : null;\n    }\n  }\n);\n\nfunction _getLauncherElement(launcherRef: DialogProps['launcherRef']) {\n  const launcher = launcherRef?.current;\n\n  if (launcher) {\n    const launcherElement = launcher instanceof Element ? launcher : launcher[UNSAFE_DOM_ACCESS];\n\n    if (document.body.contains(launcherElement)) {\n      return launcherElement;\n    }\n  }\n\n  return getActiveElement() as HTMLElement;\n}\n\nconst animationStates = {\n  zoomIn: {\n    from: {\n      scaleX: 0.9,\n      scaleY: 0.9,\n      transformOrigin: 'center',\n      opacity: 0\n    },\n    to: {\n      scaleX: 1,\n      scaleY: 1,\n      opacity: 1\n    },\n    options: {\n      duration: 200\n    }\n  },\n  zoomOut: {\n    from: {\n      scaleX: 1,\n      scaleY: 1,\n      transformOrigin: 'center',\n      opacity: 1\n    },\n    to: {\n      scaleX: 0.9,\n      scaleY: 0.9,\n      opacity: 0\n    },\n    options: {\n      duration: 200\n    }\n  },\n  slideUp: {\n    ...SLIDE_UP_XLARGE,\n    options: {\n      duration: DURATION_LARGE\n    }\n  },\n  slideDown: {\n    ...SLIDE_DOWN_XLARGE,\n    options: {\n      duration: DURATION_LARGE\n    }\n  }\n};\n"],"names":["useComponentTheme","DialogRedwoodTheme","classNames","_jsx","_Fragment","useTranslationBundle","IconButton","CloseIcon","_jsxs","forwardRef","useRef","mergeRefs","useState","useBreakpoints","useCallback","useEffect","useResizeObserver","useTestId","FocusTrap","globalImages","Resizable","useId","dimensionInterpolations","mergeInterpolations","focusOn","allTabbableElements","focusWithin","useAnimation","getActiveElement","useMemo","useDraggable","Floating","WindowOverlay","Modal","Layer","UNSAFE_DOM_ACCESS","SLIDE_UP_XLARGE","DURATION_LARGE","SLIDE_DOWN_XLARGE"],"mappings":"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"}