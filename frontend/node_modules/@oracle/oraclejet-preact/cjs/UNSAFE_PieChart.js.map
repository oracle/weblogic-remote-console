{"version":3,"file":"UNSAFE_PieChart.js","sources":["../../src/UNSAFE_PieChart/utils.ts","../../src/UNSAFE_PieChart/PieSlice.tsx","../../src/UNSAFE_PieChart/pieNavUtils.ts","../../src/UNSAFE_PieChart/usePieChartContextMenu.ts","../../src/UNSAFE_PieChart/labelUtils.ts","../../src/UNSAFE_PieChart/PieChartLabel.tsx","../../src/UNSAFE_PieChart/PieChartWithDimensions.tsx","../../src/UNSAFE_PieChart/PieChart.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport type { ItemInfo } from '#hooks/PRIVATE_usePieChartNav';\nimport { arcTo, closePath, lineTo, moveTo } from '#utils/PRIVATE_visSVGUtils';\nimport type { PieChartItemData, PieSliceInfo } from './pieChart.types';\ntype Bounds = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n};\n\nconst RADIUS_RATIO = 0.45;\nconst RADIUS_RATIO_WITH_LABELS = 0.38;\nconst SLICE_GAP_RATIO = 3;\nconst MIN_ARC_LENGTH = 1.5;\nconst START_ANGLE = 90;\n\n/**\n * Converts the angle from degrees to radians.\n * @param degree The angle in degrees\n * @returns\n */\nexport function degreesToRads(degree: number) {\n  return degree * (Math.PI / 180);\n}\n\n/**\n * Calculates the angle between two vectors.\n * @param vector1X The x component of first vector.\n * @param vector1Y The y component of first vector.\n * @param vector2X The x component of second vector.\n * @param vector2Y The y component of second vector.\n * @returns\n */\nexport function calculateAngleBetweenTwoVectors(\n  vector1X: number,\n  vector1Y: number,\n  vector2X: number,\n  vector2Y: number\n) {\n  const angle = Math.atan2(vector2Y, vector2X) - Math.atan2(vector1Y, vector1X);\n  return angle < 0 ? angle + 2 * Math.PI : angle;\n}\n\n/**\n * Get the center coord of the pie chart.\n * @param availSpace The available space.\n * @returns\n */\nexport function getPieCenter(availSpace: Bounds) {\n  return {\n    cx: availSpace.x + Math.floor(availSpace.width / 2),\n    cy: availSpace.y + Math.floor(availSpace.height / 2)\n  };\n}\n\n/**\n * Returns the radius of the pie chart.\n * @param availSpace The available space.\n * @param labelPosition The position of labels.\n * @returns\n */\nexport function getRadius(availSpace: Bounds, isLabelOutside: boolean) {\n  const radiusScale = isLabelOutside ? RADIUS_RATIO_WITH_LABELS : RADIUS_RATIO;\n  return Math.floor(Math.min(availSpace.width, availSpace.height) * radiusScale);\n}\n\n/**\n * Returns the total value of the pie chart.\n * @param items\n */\nexport function getPieChartInfo<K>(items: PieChartItemData<K>[]) {\n  return items.reduce(\n    ({ totalValue, isLabelOutside }, item) => {\n      return {\n        totalValue: totalValue + item.value,\n        isLabelOutside: isLabelOutside || (!!item.label && (item.labelPosition === 'outside' || item.labelPosition === 'auto'))\n      };\n    },\n    { totalValue: 0, isLabelOutside: false }\n  );\n}\n\n/**\n * Returns the startAngle and angleOffset for the rendered items.\n * @param items\n * @param totalValue\n */\nexport function getSliceInfo<K, D extends PieChartItemData<K>>(  items: D[], \n  totalValue: number,\n  colors: string[],\n  isRtl: boolean) {\n  let anchorOffset = START_ANGLE;\n  let percentage;\n  const sliceInfo = [];\n  for (let i = 0; i < items.length; i++) {\n    const item = items[i];\n    const value = item.value;\n    if (value === totalValue) {\n      percentage = 100;\n    } else if (totalValue === 0) {\n      percentage = 0;\n    } else {\n      // if value is not 100%, cap it at 99.99%\n      percentage = Math.min((value / totalValue) * 100, 99.99);\n    }\n    const arc = percentage * 3.6;\n    let angle = anchorOffset - arc;\n    if (angle < 0) angle += 360;\n    sliceInfo.push({\n      color: colors[(isRtl ? items.length - 1 - i : i) %colors.length],\n      index: i,\n      startAngle: angle,\n      angleExtent: arc,\n      ...item\n    });\n\n    anchorOffset = angle;\n  }\n  return sliceInfo;\n}\n\n/**\n * Returns the pie slice gaps.\n * @param  pieSliceGap The ratio of maximum supported pie slice gap.\n * @returns\n */\nexport function getPieSliceGap(pieSliceGap: number) {\n  return SLICE_GAP_RATIO * pieSliceGap;\n}\n\n/**\n * Returns the array of layouts to render without skipping.\n * @param layouts\n * @param hasLargeItemCount\n * @param radius\n * @returns\n */\nexport function getRenderedSlices<K>(\n  itemInfo: PieSliceInfo<K>[],\n  hasLargeItemCount: boolean,\n  radius: number\n): PieSliceInfo<K>[] {\n  if (!hasLargeItemCount) {\n    return itemInfo;\n  }\n\n  const perimeter = 2 * Math.PI * radius;\n  let prevEndCoord = 0;\n\n  return itemInfo.filter(({ startAngle, angleExtent }) => {\n    const arcLength = (angleExtent / 360) * perimeter;\n    const endCoord = ((angleExtent + startAngle) / 360) * perimeter;\n    if (arcLength < MIN_ARC_LENGTH && Math.abs(prevEndCoord - endCoord) < MIN_ARC_LENGTH) {\n      return false;\n    } else {\n      prevEndCoord = endCoord;\n      return true;\n    }\n  });\n}\n\n/**\n * Returns the path of the pie slice wedge.\n * @param inset The inset.\n * @param cx The x coordinate of the center of the pie chart.\n * @param cy The y coordinate of the center of the pie chart.\n * @param radiusX The x radius of the slice.\n * @param radiusY The y radius of the slice.\n * @param innerRadius The inner radius.\n * @param angleExtent The angle extent.\n * @param wedgeGap The gap beteen the pie slices.\n * @param startAngle The start angle of the pie slice.\n * @returns\n */\nexport function makeWedgePath(\n  inset: number,\n  cx: number,\n  cy: number,\n  radiusX: number,\n  radiusY: number,\n  innerRadius: number,\n  angleExtent: number,\n  wedgeGap: number,\n  startAngle: number\n) {\n  const rx = Math.max(radiusX - inset, 0);\n  const ry = Math.max(radiusY - inset, 0);\n  const gap = angleExtent == 360 || rx < inset ? 0 : wedgeGap + 2 * inset;\n\n  const ir = innerRadius ? innerRadius + inset : 0;\n  // if angle extent is not 360, cap it  at 359.99\n  const angleExtentRads = angleExtent == 360 ? degreesToRads(359.99) : degreesToRads(angleExtent);\n\n  const startAngleRads = degreesToRads(startAngle);\n  const dataItemGaps = gap / 2;\n\n  const gapAngle = dataItemGaps < rx ? Math.asin(dataItemGaps / rx) : 0;\n  const centerLineAngle = -angleExtentRads / 2 - startAngleRads;\n\n  // cap at 5* dataItemsGap. logic from legacy dvt toolkit\n  const distanceToStartPointX = Math.min(\n    dataItemGaps * 5,\n    angleExtentRads > 0 ? Math.abs(dataItemGaps / Math.sin(angleExtentRads / 2)) : 0\n  );\n  const distanceToStartPointY = rx == 0 ? distanceToStartPointX : (distanceToStartPointX * ry) / rx;\n\n  const startPointX = cx + Math.cos(centerLineAngle) * distanceToStartPointX;\n  const startPointY = cy + Math.sin(centerLineAngle) * distanceToStartPointY;\n\n  const arcPointX = cx + Math.cos(-gapAngle - startAngleRads) * rx;\n  const arcPointY = cy + Math.sin(-gapAngle - startAngleRads) * ry;\n\n  const arcPoint2X = cx + Math.cos(-startAngleRads - angleExtentRads + gapAngle) * rx;\n  const arcPoint2Y = cy + Math.sin(-startAngleRads - angleExtentRads + gapAngle) * ry;\n\n  let outerAngle = calculateAngleBetweenTwoVectors(\n    arcPoint2X - cx,\n    arcPoint2Y - cy,\n    arcPointX - cx,\n    arcPointY - cy\n  );\n  outerAngle = Math.min(outerAngle, angleExtentRads);\n  let pathCommands: string;\n  if (ir > 0) {\n    const innerGapAngle = dataItemGaps < ir ? Math.asin(dataItemGaps / ir) : 0;\n    const innerPointX = cx + Math.cos(-innerGapAngle - startAngleRads) * ir;\n    const innerPointY = cy + Math.sin(-innerGapAngle - startAngleRads) * ir;\n\n    const innerPoint2X = cx + Math.cos(-startAngleRads - angleExtentRads + innerGapAngle) * ir;\n    const innerPoint2Y = cy + Math.sin(-startAngleRads - angleExtentRads + innerGapAngle) * ir;\n\n    let innerAngle = calculateAngleBetweenTwoVectors(\n      innerPoint2X - cx,\n      innerPoint2Y - cy,\n      innerPointX - cx,\n      innerPointY - cy\n    );\n    innerAngle = Math.min(innerAngle, outerAngle, angleExtentRads);\n\n    if (angleExtent == 360) {\n      pathCommands = moveTo(arcPoint2X, arcPoint2Y);\n      pathCommands += arcTo(rx, ry, angleExtentRads, 1, arcPointX, arcPointY);\n      pathCommands += lineTo(arcPoint2X, arcPoint2Y);\n      pathCommands += moveTo(innerPointX, innerPointY);\n      pathCommands += arcTo(ir, ir, angleExtentRads, 0, innerPoint2X, innerPoint2Y);\n    } else {\n      pathCommands = moveTo(innerPoint2X, innerPoint2Y);\n      pathCommands += lineTo(arcPoint2X, arcPoint2Y);\n      pathCommands += arcTo(rx, ry, outerAngle, 1, arcPointX, arcPointY);\n      pathCommands += lineTo(innerPointX, innerPointY);\n      pathCommands += arcTo(ir, ir, innerAngle, 0, innerPoint2X, innerPoint2Y);\n    }\n  } else {\n    if (angleExtent == 360) {\n      pathCommands = moveTo(arcPoint2X, arcPoint2Y);\n      pathCommands += arcTo(rx, ry, angleExtentRads, 1, arcPointX, arcPointY);\n    } else {\n      pathCommands = moveTo(startPointX, startPointY);\n      pathCommands += lineTo(arcPoint2X, arcPoint2Y);\n      pathCommands += arcTo(rx, ry, outerAngle, 1, arcPointX, arcPointY);\n    }\n  }\n\n  pathCommands += closePath();\n  return pathCommands;\n}\n\n/**\n * Returns the pie chart center context.\n * @param cx The x coordinate of the center of the pie chart.\n * @param cy The y coordinate of the center of the pie chart.\n * @param innerRadius The inner radius of the pie chart.\n * @returns\n */\nexport function getCenterContext(cx: number, cy: number, innerRadius: number) {\n  return {\n    innerBounds: {\n      width: Math.sqrt(2) * innerRadius,\n      height: Math.sqrt(2) * innerRadius,\n      x: cx - innerRadius / Math.sqrt(2),\n      y: cy - innerRadius / Math.sqrt(2)\n    },\n    outerBounds: {\n      width: 2 * innerRadius,\n      height: 2 * innerRadius,\n      x: cx - innerRadius,\n      y: cy - innerRadius\n    }\n  };\n}\n\n/**\n * Returns the position of the datatip for a given slice.\n * @param startAngle The start angle of the pie slice.\n * @param angleExtent The angle extent of the pie slice.\n * @param cx The x coordinate of the center of the pie slice.\n * @param cy The y coordinate of the center of the pie slice.\n * @param innerRadius The inner radius.\n * @param radius The radius of the pie slice.\n * @returns\n */\nexport function getPieItemCenterCoord(\n  startAngle: number,\n  angleExtent: number,\n  cx: number,\n  cy: number,\n  innerRadius: number,\n  radius: number\n) {\n  const angle = startAngle + angleExtent / 2;\n  const theta = (angle / 180) * Math.PI;\n  const r = (innerRadius + radius) / 2;\n\n  return {\n    x: cx + r * Math.cos(theta),\n    y: cy - r * Math.sin(theta),\n    width: 0,\n    height: 0\n  };\n}\n\n/**\n * Returns the element bound for active item.\n * @param renderedSlices The array of info for rendered slices.\n * @param cx The x coordinate of pie chart center.\n * @param cy The y coordinate of pie chart center.\n * @param ir The inner radius of the pie chart.\n * @param radius The radius of the pie chart.\n * @param activeItem The active item.\n * @returns\n */\nexport function getElementBounds<K>(\n  renderedSlices: PieSliceInfo<K>[],\n  cx: number,\n  cy: number,\n  ir: number,\n  radius: number,\n  activeItem?: ItemInfo\n) {\n  return activeItem\n    ? getPieItemCenterCoord(\n        renderedSlices[activeItem.itemIndex].startAngle,\n        renderedSlices[activeItem.itemIndex].angleExtent,\n        cx,\n        cy,\n        ir,\n        radius\n      )\n    : undefined;\n}\n\n/**\n * Returns default border color for datatip.\n * @param colors The color ramp.\n * @param activeItem The active item info.\n * @param activeData The active pie chart data item.\n * @returns\n */\nexport function getDefaultBorderColor<K>(\n  colors: string[],\n  activeItem?: ItemInfo,\n  activeData?: PieChartItemData<K>\n) {\n  return activeData?.color || activeItem?.itemIndex != undefined\n    ? colors[activeItem!.itemIndex]\n    : undefined;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ColorProps } from '#utils/UNSAFE_interpolations/colors';\nimport { makeWedgePath } from './utils';\nimport { styles } from './themes/PieChartStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\n\n/**\n * The props for pie slice.\n */\ntype PieSliceProps = {\n  /**\n   * The x coordinate of the center of the slice.\n   */\n  cx: number;\n\n  /**\n   * The y coordinate of the center of the slice.\n   */\n  cy: number;\n\n  /**\n   * The radius of the pie slice.\n   */\n  r: number;\n\n  /**\n   * The start angle of the pie slice.\n   */\n  startAngle: number;\n\n  /**\n   * The angle extent of the pie slice.\n   */\n  angleExtent: number;\n\n  /**\n   * The gaps to keep between the pie slice items.\n   */\n  gap: number;\n\n  /**\n   * The inner radius of the pie slice.\n   */\n  innerRadius: number;\n\n  /**\n   * The color of the pie slice.\n   */\n  color: ColorProps['color'];\n\n  /**\n   * Whether the slice is focused.\n   */\n  isFocused?: boolean;\n\n  /**\n   * Whether the slice is hovered.\n   */\n  isHovered?: boolean;\n\n  /**\n   * The id of the pie slice.\n   */\n  id?: string;\n\n  /**\n   * The index of the item among rendered series.\n   */\n  itemIndex: number;\n\n  /**\n   * The aria label of the pie slice.\n   */\n  accessibleLabel?: string;\n\n  /**\n   * Whether the  pie slice is intercative.\n   */\n  isInteractive?: boolean;\n};\n\n/**\n * The Pie Slice component.\n */\nexport function PieSlice({\n  cx,\n  cy,\n  r,\n  startAngle,\n  angleExtent,\n  gap,\n  innerRadius,\n  color,\n  id,\n  itemIndex,\n  isFocused = false,\n  isInteractive,\n  ...props\n}: PieSliceProps) {\n  const { interactiveItemStyle, contrastBorder, innerShapes } = styles;\n  const itemClasses = classNames([\n    isInteractive && interactiveItemStyle,\n    contrastBorder,\n    innerShapes\n  ]);\n  const path = makeWedgePath(0, cx, cy, r, r, innerRadius, angleExtent, gap, startAngle);\n  let innerPath;\n  if (isFocused) {\n    innerPath = makeWedgePath(2, cx, cy, r, r, innerRadius, angleExtent, gap, startAngle);\n    return (\n      <g\n        id={id}\n        role={props.accessibleLabel ? 'img' : undefined}\n        data-oj-private-item-index={itemIndex}\n        data-oj-private-object=\"pieSlice\"\n        aria-label={props.accessibleLabel}>\n        <path d={path} fill={color} stroke={color} className={styles.innerShapes} />\n        <path d={innerPath} fill={color} className={itemClasses} />\n      </g>\n    );\n  }\n  return (\n    <path\n      role={props.accessibleLabel ? 'img' : undefined}\n      aria-label={props.accessibleLabel}\n      d={path}\n      data-oj-private-object=\"pieSlice\"\n      fill={color}\n      id={id}\n      data-oj-private-item-index={itemIndex}\n      className={isInteractive ? interactiveItemStyle : undefined}\n    />\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport type {\n  ItemFocusDetail,\n  ItemHoverDetail,\n  ItemInfo,\n  PieChartItemData\n} from './pieChart.types';\n\n/**\n * Returns the item based on item info in a pie chart.\n * @param itemInfo\n * @param items\n * @returns\n */\nfunction getItem<K, D extends PieChartItemData<K>>(itemInfo: ItemInfo, items: D[]) {\n  const { itemIndex } = itemInfo;\n  return items[itemIndex];\n}\n\n/**\n * Returns the nav util for pie chart.\n * @param data\n * @param isRtl\n * @returns\n */\nexport function getPieChartNavUtils<K, D extends PieChartItemData<K>>(data: D[], isRtl: boolean) {\n  return {\n    getNextChartItem: (\n      { itemIndex }: { itemIndex: number },\n      arrow: 'ArrowLeft' | 'ArrowRight' | 'ArrowDown' | 'ArrowUp'\n    ): { itemIndex: number } => {\n      let newItemIndex = itemIndex;\n      if (\n        (isRtl && (arrow === 'ArrowRight' || arrow === 'ArrowUp')) ||\n        (!isRtl && (arrow === 'ArrowLeft' || arrow === 'ArrowDown'))\n      ) {\n        newItemIndex = itemIndex - 1;\n      } else {\n        newItemIndex = itemIndex + 1;\n      }\n      return {\n        itemIndex: ((newItemIndex % data.length) + data.length) % data.length\n      };\n    },\n    getDetailFromInfo: (itemInfo?: ItemInfo): ItemHoverDetail<K, D> | ItemFocusDetail<K, D> => {\n      if (!itemInfo) {\n        return { id: undefined, data: undefined };\n      }\n      const item = getItem(itemInfo, data);\n      return { id: item ? item.id : undefined, data: item };\n    }\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { type gestureTypes, useContextMenu } from '#hooks/PRIVATE_useVisContextMenu';\nimport type {\n  PieChartContextMenuContext,\n  PieChartContextMenuConfig,\n  PieChartItemData\n} from './pieChart.types';\nimport { ItemInfo } from '#hooks/PRIVATE_usePieChartNav';\n\nimport { getInfo } from '#utils/UNSAFE_visUtils';\n\ntype Props<D> = {\n  offset: {\n    mainAxis: number;\n    crossAxis: number;\n  };\n  rootRef: RefObject<HTMLDivElement>;\n  contextMenuConfig?: PieChartContextMenuConfig<D>;\n  focusedItemInfo: ItemInfo;\n  items: D[];\n  onContextMenuDismissed?: (gesture: gestureTypes) => void;\n  width: number;\n  isRtl: boolean;\n};\n\nexport const usePieChartContextMenu = <K, D extends PieChartItemData<K>>({\n  offset,\n  rootRef,\n  contextMenuConfig,\n  focusedItemInfo,\n  items,\n  onContextMenuDismissed,\n  width,\n  isRtl\n}: Props<D>) => {\n  const { contextMenuProps, contextMenuContent } = useContextMenu<PieChartContextMenuContext<D>>({\n    onContextMenuHandler: ({ gesture, target }) => {\n      if (gesture === 'keyboard') {\n        const itemIndex = focusedItemInfo.itemIndex;\n        const data = items[itemIndex];\n        const context = {\n          type: 'item' as const,\n          data\n        };\n        return {\n          type: 'offset',\n          context,\n          offsetValue: offset,\n          isRtl,\n          width\n        };\n      }\n\n      const itemIndex = getInfo(rootRef, target as HTMLElement)?.itemIndex;\n      const data = itemIndex !== undefined ? items[itemIndex] : null;\n\n      let context;\n      if (data) {\n        context = {\n          type: 'item' as const,\n          data: data\n        };\n      } else if (rootRef.current?.children[1].contains(target)) {\n        context = { type: 'centerLabel' as const };\n      } else {\n        context = { type: 'background' as const };\n      }\n      return {\n        type: 'pointer',\n        context\n      };\n    },\n    contextMenuOptions: {\n      isDisabled: !contextMenuConfig //If there is no context menu renderer, we disable the hook\n    },\n    rootRef,\n    contextMenuConfig,\n    onContextMenuDismissed\n  });\n\n  return { contextMenuContent, contextMenuProps };\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Font, GetTextDimensionsType, TextDimensions } from '#hooks/PRIVATE_useTextDimensions';\nimport { getTextInfo } from '#PRIVATE_VisSVGText';\nimport { Dimension } from '#utils/UNSAFE_visTypes/common';\nimport { PieSliceInfo } from './pieChart.types';\nimport { degreesToRads } from './utils';\n\ntype TextInfo = {\n  lines: string[];\n  dims: TextDimensions[];\n  didNotFit: boolean;\n  height: number;\n  width: number;\n  isMultiline: boolean;\n  lineHeight: number;\n  isTruncated: boolean;\n};\n\nexport type PieLabelInfo<K> = {\n  position: number;\n  angle: number;\n  slice: PieSliceInfo<K>;\n  width: number;\n  height: number;\n  x?: number;\n  y?: number;\n  minY?: number;\n  maxY?: number;\n  startPt?: {\n    x: number;\n    y: number;\n  };\n  endPt?: {\n    x: number;\n    y: number;\n  };\n  midPt?: {\n    x: number;\n    y: number;\n  };\n  textInfo?: TextInfo;\n};\n\nconst OUTSIDE_LABEL_DISTANCE = 1.04;\nconst _COLLISION_MARGIN = 1;\nconst _FEELER_RAD_MINSIZE = 0.1;\nconst _FEELER_HORIZ_MINSIZE = 0.1;\nconst _LABEL_TO_FEELER_OFFSET = 0.5;\nconst _ALL_COLLISION = 2;\nconst _HALF_COLLISION = 1;\nconst _NO_COLLISION = 0;\nconst _LABEL_TO_FEELER_DISTANCE = 3;\n\nfunction degreesToRadians(degrees: number) {\n  return degrees * (Math.PI / 180);\n}\n\nfunction reflectAngleOverYAxis(angle: number, cx: number, cy: number, rx: number, ry: number) {\n  const radian = degreesToRadians(360 - angle);\n  const cosine = Math.cos(radian);\n  const sine = Math.sin(radian);\n\n  return { x: cx + cosine * rx, y: cy + sine * ry };\n}\n\nfunction skipSliceLabel<K>(slice: PieSliceInfo<K>, seriesCount: number) {\n  const { angleExtent } = slice;\n  return angleExtent < 3 && seriesCount > 120;\n}\n\n/**\n * Returns true if this slice contains the given coordinates.\n * @param {number} x\n * @param {number} y\n * @return {boolean}\n */\nexport function sliceContainsPoint<K>(\n  slice: PieSliceInfo<K>,\n  x: number,\n  y: number,\n  cx: number,\n  cy: number,\n  innerRadius: number,\n  radius: number\n) {\n  const { angleExtent, startAngle } = slice;\n  const ir = innerRadius;\n  const c = { x: cx, y: cy };\n  const cos = (x - c.x) / radius;\n  const sin = (y - c.y) / radius;\n\n  // Compute the angle\n  let angle = -Math.atan2(sin, cos) * (180 / Math.PI); // in degrees\n  // First adjust angle to be greater than the start angle.\n  while (angle < startAngle) angle += 360;\n  // Then adjust to be within 360 degrees of it\n  while (angle - startAngle >= 360) angle -= 360;\n\n  const distance = Math.pow(cos, 2) + Math.pow(sin, 2);\n  const containsRadius = Math.sqrt(distance) > ir / radius && distance <= 1;\n  const containsAngle = angle <= startAngle + angleExtent;\n  return containsRadius && containsAngle;\n}\n\nexport function getInsideLabelsInfo<K>(\n  slices: PieSliceInfo<K>[],\n  innerRadius: number,\n  radius: number,\n  pieCenter: { cx: number; cy: number },\n  defaultFontSize: string,\n  getTextDimensions: GetTextDimensionsType\n): [PieLabelInfo<K>[], Set<number>] {\n  const insideLabels: PieLabelInfo<K>[] = [];\n\n  const outsideLabelsIndex = new Set<number>();\n\n  const { cx, cy } = pieCenter;\n\n  for (const slice of slices) {\n    const { labelPosition: l, startAngle, angleExtent, label, labelStyle } = slice;\n    const labelPosition = l || 'auto';\n\n    if (labelPosition === 'none') {\n      continue;\n    }\n\n    if (labelPosition === 'outside' || skipSliceLabel(slice, slices.length) || label == null) {\n      outsideLabelsIndex.add(slice.index);\n      continue;\n    }\n\n    const midAngle = startAngle + angleExtent / 2;\n    const ir = innerRadius;\n    const center = pieCenter;\n    let posX, posY;\n\n    if (slices.length === 1) {\n      posX = center.cx;\n      posY = center.cy;\n    } else {\n      const offset = Math.max(0.45, 0.65 - (0.45 * ir) / Math.max(radius, 0.001));\n      const midPt = reflectAngleOverYAxis(\n        midAngle,\n        center.cx,\n        center.cy,\n        ir + (radius - ir) * offset,\n        ir + (radius - ir) * offset\n      );\n\n      posX = midPt.x;\n      posY = midPt.y;\n    }\n\n    const sliceLabelPosition = {\n      x: posX,\n      y: posY\n    };\n\n    const sliceLabelDims = getTextDimensions(label, { fontSize: defaultFontSize, ...labelStyle });\n\n    let x1 = posX;\n    let x2 = posX;\n    const y1 = posY - sliceLabelDims.height / 2;\n    const y2 = posY + sliceLabelDims.height / 2;\n\n    while (\n      sliceContainsPoint(slice, x1, y1, cx, cy, innerRadius, radius) &&\n      sliceContainsPoint(slice, x1, y2, cx, cy, innerRadius, radius)\n    ) {\n      x1--;\n    }\n\n    while (\n      sliceContainsPoint(slice, x2, y1, cx, cy, innerRadius, radius) &&\n      sliceContainsPoint(slice, x2, y2, cx, cy, innerRadius, radius)\n    ) {\n      x2++;\n    }\n\n    x1 = Math.ceil(x1 + 3);\n    x2 = Math.floor(x2 - 3);\n\n    let usableSpace = 2 * Math.min(posX - x1, x2 - posX);\n    if (usableSpace < sliceLabelDims.width) {\n      sliceLabelPosition.x = (x1 + x2) / 2;\n      usableSpace = x2 - x1;\n    }\n\n    if (labelPosition === 'inside') {\n      const textWidth = sliceLabelDims.width;\n      if (textWidth < usableSpace) {\n        insideLabels.push({\n          position: midAngle,\n          angle: midAngle,\n          slice,\n          textInfo: getTextInfo(\n            label,\n            { fontSize: defaultFontSize, ...labelStyle },\n            usableSpace,\n            sliceLabelDims.height,\n            false,\n            label.length,\n            getTextDimensions\n          ),\n          ...sliceLabelDims,\n          ...sliceLabelPosition\n        });\n      }\n    } else {\n      const minChars = label.length;\n      const textInfo = getTextInfo(\n        label,\n        { fontSize: defaultFontSize, ...labelStyle },\n        usableSpace,\n        sliceLabelDims.height,\n        false,\n        minChars,\n        getTextDimensions\n      );\n\n      if (!textInfo.didNotFit) {\n        insideLabels.push({\n          position: midAngle,\n          angle: midAngle,\n          slice,\n          textInfo,\n          ...sliceLabelDims,\n          ...sliceLabelPosition\n        });\n      } else {\n        outsideLabelsIndex.add(slice.index); // Indicates outside label is needed\n      }\n    }\n  }\n  return [insideLabels, outsideLabelsIndex];\n}\n\nexport const layoutPieChartLabels = <K>(\n  slices: PieSliceInfo<K>[],\n  pieCenter: { cx: number; cy: number },\n  innerRadius: number,\n  radius: number,\n  availSpace: Dimension,\n  getTextDimensions: GetTextDimensionsType,\n  defaultFontSize: string\n) => {\n  const [insideLabels, outsideLabels] = getInsideLabelsInfo(\n    slices,\n    innerRadius,\n    radius,\n    pieCenter,\n    defaultFontSize,\n    getTextDimensions\n  );\n\n  const { leftLabels, rightLabels } = generateInitialLayout(\n    slices,\n    outsideLabels,\n    availSpace,\n    pieCenter,\n    radius,\n    defaultFontSize,\n    getTextDimensions\n  );\n\n  const leftColl = _refineInitialLayout(slices, radius, pieCenter, availSpace, leftLabels, 'left');\n  const rightColl = _refineInitialLayout(\n    slices,\n    radius,\n    pieCenter,\n    availSpace,\n    rightLabels,\n    'right'\n  );\n\n  if (leftColl === _HALF_COLLISION && rightColl !== _NO_COLLISION) {\n    _columnLabels(slices, availSpace, pieCenter, radius, leftLabels, true, true, true);\n  }\n\n  if (leftColl !== _NO_COLLISION && rightColl === _HALF_COLLISION) {\n    _columnLabels(slices, availSpace, pieCenter, radius, rightLabels, false, true, true);\n  }\n\n  setLabelsAndFeelers(\n    leftLabels,\n    availSpace,\n    pieCenter,\n    radius,\n    'left',\n    { fontSize: defaultFontSize },\n    getTextDimensions\n  );\n\n  setLabelsAndFeelers(\n    rightLabels,\n    availSpace,\n    pieCenter,\n    radius,\n    'right',\n    { fontSize: defaultFontSize },\n    getTextDimensions\n  );\n\n  return { insideLabels, rightLabels, leftLabels };\n};\n\nexport function generateInitialLayout<K>(\n  slices: PieSliceInfo<K>[],\n  outsideLabels: Set<number>,\n  availSpace: Dimension,\n  center: { cx: number; cy: number },\n  radius: number,\n  defaultFontSize: string,\n  getTextDimensions: GetTextDimensionsType\n) {\n  const leftLabels: PieLabelInfo<K>[] = [];\n  const rightLabels: PieLabelInfo<K>[] = [];\n  const { cx, cy } = center;\n\n  for (let i = 0; i < slices.length; i++) {\n    const slice = slices[i];\n    const { labelPosition, startAngle, angleExtent, label, labelStyle } = slice;\n\n    if (\n      label == null ||\n      labelPosition == 'none' ||\n      labelPosition == 'inside' ||\n      skipSliceLabel(slices[i], slices.length) ||\n      !outsideLabels.has(slice.index)\n    ) {\n      continue;\n    }\n\n    let middleAngle = startAngle + angleExtent / 2;\n    if (middleAngle > 360) middleAngle -= 360;\n    if (middleAngle < 0) middleAngle += 360;\n\n    const labelPt = reflectAngleOverYAxis(\n      middleAngle,\n      cx,\n      cy,\n      radius * OUTSIDE_LABEL_DISTANCE,\n      radius * OUTSIDE_LABEL_DISTANCE\n    );\n\n    const isLeftSide = middleAngle >= 90 && middleAngle < 270;\n    const maxLabelWidth = getMaxLabelWidth(availSpace, labelPt.x, isLeftSide);\n\n    const textInfo = getTextInfo(\n      label,\n      { fontSize: defaultFontSize, ...labelStyle },\n      maxLabelWidth,\n      Infinity,\n      true,\n      1,\n      getTextDimensions\n    );\n    const tmDimPt = { x: textInfo.width, y: textInfo.height };\n\n    const midArea = 15;\n\n    if (middleAngle < 180 - midArea && middleAngle > midArea) {\n      //upper half\n      labelPt.y -= tmDimPt.y * 1;\n    } else if (middleAngle < midArea || middleAngle > 360 - midArea) {\n      //right side, near horizontal\n      labelPt.y -= tmDimPt.y * 0.5;\n      labelPt.x += tmDimPt.y * 0.2;\n    } else if (middleAngle > 180 - midArea && middleAngle < 180 + midArea) {\n      //left side, near horizontal\n      labelPt.y -= tmDimPt.y * 0.5;\n      labelPt.x -= tmDimPt.y * 0.2;\n    }\n\n    if (slices.length == 1)\n      // only 1 label\n      labelPt.x -= tmDimPt.x / 2; //position the label at the center\n\n    if (labelPt.y < availSpace.y || labelPt.y + tmDimPt.y > availSpace.y + availSpace.height)\n      // label will not fit with appropriate spacing\n      continue;\n\n    let pa;\n    if (middleAngle >= 90.0 && middleAngle < 270.0) {\n      pa = middleAngle - 90.0;\n      createLabelInfo(slice, middleAngle, pa, tmDimPt, labelPt, textInfo, leftLabels);\n    } else {\n      // right side\n      // normalize from 0 to 180\n      pa = middleAngle <= 90.0 ? Math.abs(90 - middleAngle) : 180 - (middleAngle - 270);\n      createLabelInfo(slice, middleAngle, pa, tmDimPt, labelPt, textInfo, rightLabels);\n    }\n  }\n\n  return { leftLabels, rightLabels };\n}\n\nexport function getMaxLabelWidth(availSpace: Dimension, labelX: number, isLeftSide: boolean) {\n  return isLeftSide ? labelX - availSpace.x : availSpace.x + availSpace.width - labelX;\n}\n\nexport function createLabelInfo<K>(\n  slice: PieSliceInfo<K>,\n  midAngle: number,\n  position: number,\n  tmDimPt: { x: number; y: number },\n  labelPt: { x: number; y: number },\n  textInfo: TextInfo,\n  labelInfoArray: PieLabelInfo<K>[]\n) {\n  let insertPos = -1;\n\n  // insertion \"sort\"\n  for (let j = 0; j < labelInfoArray.length; j++) {\n    const labelInfo = labelInfoArray[j];\n    if (labelInfo['position'] && labelInfo['position'] > position) {\n      insertPos = j;\n      break;\n    }\n  }\n\n  if (insertPos == -1) insertPos = labelInfoArray.length;\n\n  const labelInfo = {\n    position,\n    angle: midAngle,\n    width: tmDimPt.x,\n    height: tmDimPt.y,\n    x: labelPt.x,\n    y: labelPt.y,\n    slice,\n    textInfo\n  };\n\n  labelInfoArray.splice(insertPos, 0, labelInfo);\n}\n\nexport function _refineInitialLayout<K>(\n  slices: PieSliceInfo<K>[],\n  radius: number,\n  center: { cx: number; cy: number },\n  availableSpace: Dimension,\n  labelInfoArray: PieLabelInfo<K>[],\n  side: 'left' | 'right'\n) {\n  if (labelInfoArray.length < 1) {\n    return;\n  }\n\n  let lastY = availableSpace.y; //think again!!\n  let collisionTop = false;\n  let collisionCentral = false;\n  let collisionBottom = false;\n  let labelBottom = 0;\n\n  let labelInfo;\n\n  let bottomQuarter = false;\n  let prevBottomQuarter;\n  let collide = false;\n  const isLeftSideLabels = side == 'left';\n\n  for (let i = 0; i < labelInfoArray.length; i++) {\n    labelInfo = labelInfoArray[i];\n\n    prevBottomQuarter = bottomQuarter;\n    if (labelInfo.position! > 90) bottomQuarter = true;\n\n    labelBottom = labelInfo.y! + labelInfo.height!;\n\n    collide = lastY - labelInfo.y! > _COLLISION_MARGIN;\n\n    if (collide) {\n      if (!bottomQuarter) {\n        collisionTop = true;\n      } else if (!prevBottomQuarter) {\n        collisionCentral = true;\n      } else {\n        collisionBottom = true;\n      }\n    }\n\n    if (labelBottom > lastY) {\n      lastY = labelBottom;\n    }\n  }\n\n  if ((collisionTop && collisionBottom) || collisionCentral) {\n    _columnLabels(\n      slices,\n      availableSpace,\n      center,\n      radius,\n      labelInfoArray,\n      isLeftSideLabels,\n      true,\n      true\n    );\n    return _ALL_COLLISION;\n  } else if (collisionTop) {\n    _columnLabels(\n      slices,\n      availableSpace,\n      center,\n      radius,\n      labelInfoArray,\n      isLeftSideLabels,\n      true,\n      false\n    );\n    return _HALF_COLLISION;\n  } else if (collisionBottom) {\n    _columnLabels(\n      slices,\n      availableSpace,\n      center,\n      radius,\n      labelInfoArray,\n      isLeftSideLabels,\n      false,\n      true\n    );\n    return _HALF_COLLISION;\n  }\n  return _NO_COLLISION;\n}\n\nexport function _getRadFeelerAngle<K>(\n  labelInfo: PieLabelInfo<K>,\n  x: number,\n  y: number,\n  radius: number,\n  center: { cx: number; cy: number }\n) {\n  const ma = labelInfo.angle;\n  const startPt = reflectAngleOverYAxis(ma, center.cx, center.cy, radius, radius);\n  return Math.atan2(Math.abs(x - startPt.x), startPt.y - y);\n}\n\nexport function getMiddleLabel<K>(alabels: PieLabelInfo<K>[]) {\n  let bestAngle = 91;\n  let bestIndex = -1;\n  for (let i = 0; i < alabels.length; i++) {\n    const pa = alabels[i]['position']!;\n    if (Math.abs(pa - 90) < bestAngle) {\n      bestAngle = Math.abs(pa - 90);\n      bestIndex = i;\n    }\n  }\n  return bestIndex;\n}\n\nexport function setOptimalLabelPos<K>(\n  radius: number,\n  labelInfo: PieLabelInfo<K>,\n  vertX: number,\n  center: { cx: number; cy: number }\n) {\n  //set optimal X\n  labelInfo['x'] = vertX;\n\n  const b = radius * (1 + _FEELER_RAD_MINSIZE);\n  const angleInRad = degreesToRads(labelInfo['position']);\n  const heightFromCenter = b * Math.cos(angleInRad);\n  const tilt = 0;\n  let optimalY = center.cy - heightFromCenter - labelInfo.height * _LABEL_TO_FEELER_OFFSET + tilt;\n  const _minY = labelInfo['minY']!;\n  const _maxY = labelInfo['maxY']!;\n  if (_minY <= _maxY) {\n    optimalY = Math.max(optimalY, _minY);\n    optimalY = Math.min(optimalY, _maxY);\n  }\n  labelInfo['y'] = optimalY;\n}\n\nexport function _columnLabels<K>(\n  slices: PieSliceInfo<K>[],\n  availableSpace: Dimension,\n  center: { cx: number; cy: number },\n  radius: number,\n  alabels: PieLabelInfo<K>[],\n  isLeft: boolean,\n  isTop: boolean,\n  isBottom: boolean\n) {\n  const frame = availableSpace;\n  let minY = frame.y;\n  let maxY = frame.y + frame.height;\n  let i;\n  let labelInfo;\n  let pa = 0;\n  let radFeelerAngle;\n\n  //determine the position where the column will be aligned\n  let vertX = center.cx;\n  let feelerX;\n  const minFeelerDist = radius * (1 + _FEELER_RAD_MINSIZE + _FEELER_HORIZ_MINSIZE);\n\n  if (isLeft) {\n    vertX -= minFeelerDist;\n    feelerX = vertX + radius * _FEELER_HORIZ_MINSIZE;\n  } else {\n    vertX += minFeelerDist;\n    feelerX = vertX - radius * _FEELER_HORIZ_MINSIZE;\n  }\n\n  //set the minimum heights that ensures as many labels as possible are displayed\n  for (i = 0; i < alabels.length; i++) {\n    labelInfo = alabels[i];\n    pa = degreesToRads(labelInfo.position);\n    radFeelerAngle = _getRadFeelerAngle(labelInfo, feelerX, minY, radius, center);\n\n    // Remove labels that are more than a certain angle away from the slice.\n    if (radFeelerAngle - pa > 0.45 * Math.PI || skipSliceLabel(alabels[i].slice, slices.length)) {\n      alabels.splice(i, 1);\n      i--;\n    } else {\n      alabels[i].minY = minY;\n      minY += alabels[i].height;\n    }\n  }\n\n  //set the maximum heights that ensures as many labels as possible are displayed\n  for (i = alabels.length - 1; i >= 0; i--) {\n    labelInfo = alabels[i];\n    const position = labelInfo['position'];\n    pa = degreesToRads(position);\n    radFeelerAngle = _getRadFeelerAngle(labelInfo, feelerX, maxY, radius, center);\n\n    // Remove labels that are more than a certain angle away from the slice.\n    if (pa - radFeelerAngle > 0.45 * Math.PI || skipSliceLabel(alabels[i].slice, slices.length)) {\n      alabels.splice(i, 1);\n    } else {\n      maxY -= alabels[i].height;\n      alabels[i].maxY = maxY;\n    }\n  }\n\n  if (alabels.length == 0) return;\n\n  const startIndex = getMiddleLabel(alabels);\n  const startLabel = alabels[startIndex];\n\n  //if the column is only partial but there are too many labels, then set the whole side as column\n  if (isTop && !isBottom) {\n    if (startLabel.minY! + startLabel.height > center.cy) {\n      isBottom = true;\n    }\n  }\n  if (isBottom && !isTop) {\n    if (startLabel.maxY! < center.cy) {\n      isTop = true;\n    }\n  }\n\n  const labelPostion = startLabel['position'];\n  if ((isBottom && isTop) || (labelPostion > 90 && isBottom) || (labelPostion <= 90 && isTop)) {\n    setOptimalLabelPos(radius, startLabel, vertX, center);\n    startLabel.slice.hasFeelers = true;\n  }\n\n  let highestY = startLabel.y!;\n  let lowestY = startLabel.y! + startLabel.height;\n\n  let optimalY;\n  let labelHeight;\n\n  if (isTop) {\n    //labels above the start label\n    for (i = startIndex - 1; i >= 0; i--) {\n      labelInfo = alabels[i];\n      labelHeight = labelInfo.height;\n      setOptimalLabelPos(radius, labelInfo, vertX, center);\n      labelInfo.slice.hasFeelers = true;\n\n      //avoid collision with the label below\n      optimalY = labelInfo.y!;\n      if (optimalY + labelHeight < highestY) {\n        highestY = optimalY;\n      } else {\n        highestY -= labelHeight;\n      }\n      labelInfo.y = highestY;\n    }\n  }\n\n  if (isBottom) {\n    //labels below the start label\n    for (i = startIndex + 1; i < alabels.length; i++) {\n      labelInfo = alabels[i];\n      labelHeight = labelInfo.height;\n      setOptimalLabelPos(radius, labelInfo, vertX, center);\n      labelInfo.slice.hasFeelers = true;\n\n      //avoid collision with the label above\n      optimalY = labelInfo.y!;\n      if (optimalY > lowestY) {\n        lowestY = optimalY + labelHeight;\n      } else {\n        lowestY += labelHeight;\n      }\n      labelInfo.y = lowestY - labelHeight;\n    }\n  }\n}\n\nexport function setLabelsAndFeelers<K>(\n  alabels: PieLabelInfo<K>[],\n  availSpace: Dimension,\n  center: { cx: number; cy: number },\n  radius: number,\n  side: 'left' | 'right',\n  labelStyle: Font,\n  getTextDimension: GetTextDimensionsType\n) {\n  if (alabels == null || alabels.length <= 0) return;\n\n  let i;\n  let slice;\n  let sliceLabel;\n  const isLeftSide = side === 'left';\n  const frame = availSpace;\n\n  let excessWidth = Infinity;\n  let excessLength;\n\n  // Determine how much the horizontal feelers can be shortened\n  for (i = 0; i < alabels.length; i++) {\n    const labelInfo = alabels[i];\n\n    const style = { ...labelStyle, ...labelInfo.slice.labelStyle };\n    if (labelInfo.slice['hasFeelers']) {\n      excessLength = _calculateFeeler(labelInfo, center, radius, isLeftSide);\n\n      const fontHeight = getTextDimension('MW', style).height;\n      const labelWidth = labelInfo['width'];\n      const minLabelWidth = Math.min(2 * fontHeight, labelWidth);\n\n      const maxLabelWidth = getMaxLabelWidth(availSpace, labelInfo['x']!, isLeftSide);\n\n      // Remove feelers for labels that will not be rendered and ignore for excess width calculation\n      if (maxLabelWidth + excessLength < minLabelWidth || labelInfo['width'] == 0) {\n        labelInfo.textInfo = undefined;\n        labelInfo.slice.hasFeelers = false;\n        continue;\n      }\n      excessWidth = Math.min(excessWidth, excessLength);\n    } else {\n      labelInfo.slice.hasFeelers = false;\n    }\n  }\n\n  for (i = 0; i < alabels.length; i++) {\n    const labelInfo = alabels[i];\n    slice = labelInfo.slice;\n    sliceLabel = labelInfo.slice.label;\n    if (!sliceLabel) continue;\n\n    if (labelInfo.slice.hasFeelers) {\n      // shorten the horizontal feelers\n      if (isLeftSide) {\n        labelInfo.x = labelInfo.x! + excessWidth;\n      } else {\n        labelInfo.x = labelInfo.x! - excessWidth;\n      }\n      // setup the feeler line (let it clip if needed)\n      _calculateFeeler(labelInfo, center, radius, isLeftSide);\n    }\n\n    // perform 'logical' clipping ourselves\n    if (labelInfo.y! < frame.y || labelInfo.y! + labelInfo.height > frame.y + frame.height) {\n      slice.label = '';\n      slice.hasFeelers = false;\n    } else {\n      const maxLabelWidth = getMaxLabelWidth(availSpace, labelInfo.x!, isLeftSide);\n      const textInfo =\n        labelInfo.textInfo &&\n        getTextInfo(\n          labelInfo.slice.label!,\n          { ...labelStyle, ...labelInfo.slice.labelStyle },\n          maxLabelWidth,\n          labelInfo.textInfo.height!,\n          true,\n          1,\n          getTextDimension\n        );\n      labelInfo.textInfo = textInfo;\n      if (labelInfo.height === 0 || labelInfo.width === 0) {\n        slice.label = '';\n        slice.hasFeelers = false;\n      }\n    }\n  }\n}\n\nexport function _calculateFeeler<K>(\n  labelInfo: PieLabelInfo<K>,\n  center: { cx: number; cy: number },\n  radius: number,\n  isLeft: boolean\n) {\n  const { x, y, height } = labelInfo;\n  let targetX = x!;\n  const targetY = y! + height * _LABEL_TO_FEELER_OFFSET;\n  const minHorizLength = _FEELER_HORIZ_MINSIZE * radius;\n\n  let midX;\n  if (isLeft) {\n    targetX += _LABEL_TO_FEELER_DISTANCE;\n    midX = targetX + minHorizLength;\n  } else {\n    targetX -= _LABEL_TO_FEELER_DISTANCE;\n    midX = targetX - minHorizLength;\n  }\n\n  const midPt = {\n    x: midX,\n    y: targetY\n  };\n  const endPt = {\n    x: targetX,\n    y: targetY\n  };\n  const ma = labelInfo.angle;\n\n  const startPt = reflectAngleOverYAxis(ma, center.cx, center.cy, radius, radius);\n\n  // make set the first section of the feeler radial if possible\n  const pa = degreesToRads(labelInfo['position']);\n  const radFeelerAngle = Math.abs(Math.atan2(midPt.x - startPt.x, startPt.y - midPt.y));\n  const horizOffset = (startPt.y - midPt.y) * Math.tan(pa); // * pieChart.getRadiusX() / pieChart.getRadiusY();\n  if (\n    (pa > Math.PI / 2 && radFeelerAngle > Math.PI / 2 && radFeelerAngle < pa) ||\n    (pa < Math.PI / 2 && radFeelerAngle < Math.PI / 2 && radFeelerAngle > pa)\n  ) {\n    if (isLeft) {\n      midPt.x = startPt.x - horizOffset;\n    } else {\n      midPt.x = startPt.x + horizOffset;\n    }\n  }\n\n  //store outside feeler points on slice\n  //and let slice draw the feeler so that we can\n  //easily redraw it when selecting\n  labelInfo['startPt'] = startPt;\n  labelInfo['midPt'] = midPt;\n  labelInfo['endPt'] = endPt;\n  return Math.abs(endPt.x - midPt.x) - minHorizLength;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getContrastingTextColor } from '#utils/PRIVATE_colorUtils';\nimport { PieLabelInfo } from './labelUtils';\nimport { styles } from './themes/PieChartStyles.css';\n\ntype LabelProps<K> = {\n  pieLabelInfo: PieLabelInfo<K>;\n  labelPos: 'inside' | 'left' | 'right';\n  fontSize: string;\n  isRtl: boolean;\n};\n\nexport function PieChartLabel<K>({ pieLabelInfo, labelPos, fontSize, isRtl }: LabelProps<K>) {\n  const { x, y, textInfo, slice, startPt, midPt, endPt } = pieLabelInfo;\n  const color = slice.color as string;\n  const fill = labelPos === 'inside' ? getContrastingTextColor(color) : undefined;\n  return (\n    <>\n      {textInfo?.lines.map((line: any, i: number) => {\n        const lineX = x!;\n        const lineY = y! + (i + 0.5) * textInfo.dims[i].height;\n        const textAnchor =\n          (isRtl && labelPos === 'left') || (!isRtl && labelPos === 'right')\n            ? 'start'\n            : labelPos === 'inside'\n            ? 'middle'\n            : 'end';\n        return (\n          <>\n            {slice.label && (\n              <text\n                className={styles.labelStyle}\n                x={lineX}\n                y={lineY}\n                textAnchor={textAnchor}\n                dominantBaseline={labelPos === 'inside' ? 'center' : 'middle'}\n                style={{\n                  fill,\n                  fontSize\n                }}>\n                {line}\n              </text>\n            )}\n            {slice.hasFeelers && startPt && midPt && endPt && (\n              <>\n                <line\n                  x1={startPt.x}\n                  x2={midPt.x}\n                  y1={startPt.y}\n                  y2={midPt.y}\n                  className={styles.fillerLineStyle}></line>\n                <line\n                  x1={endPt.x}\n                  x2={midPt.x}\n                  y1={endPt.y}\n                  y2={midPt.y}\n                  className={styles.fillerLineStyle}></line>\n              </>\n            )}\n          </>\n        );\n      })}\n    </>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from './themes/PieChartStyles.css';\nimport {\n  getDefaultBorderColor,\n  getElementBounds,\n  getPieCenter,\n  getRadius,\n  getRenderedSlices,\n  getPieChartInfo,\n  getPieSliceGap,\n  getSliceInfo\n} from './utils';\nimport { getAvailSpace } from '#utils/PRIVATE_chartUtils/layoutUtils';\nimport { PieSlice } from './PieSlice';\nimport { getCenterContext } from './utils';\nimport { getPieChartNavUtils } from './pieNavUtils';\nimport { ItemInfo, usePieChartNav } from '#hooks/PRIVATE_usePieChartNav';\nimport { useDatatip } from '#hooks/PRIVATE_useDatatip';\nimport { calculateOffset } from '#utils/PRIVATE_visLayoutUtils/layoutUtils';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { VisTabularDatatip } from '#PRIVATE_VisTabularDatatip';\nimport type { PieChartProps, PieChartItemData } from './pieChart.types';\nimport { useUser } from '#hooks/UNSAFE_useUser';\nimport { useTestId } from '#hooks/UNSAFE_useTestId';\nimport { useVisTouchResponse } from '#hooks/PRIVATE_useVisTouchResponse';\nimport { useRef } from 'preact/hooks';\nimport { merge } from '@oracle/oraclejet-internal-utilities/stringUtils';\nimport { usePieChartContextMenu } from './usePieChartContextMenu';\nimport { layoutPieChartLabels, PieLabelInfo } from './labelUtils';\nimport { useTextDimensions } from '#hooks/PRIVATE_useTextDimensions';\nimport { useCssVars } from '#hooks/PRIVATE_useCssVars';\nimport { getChartVars } from '#utils/PRIVATE_chartUtils';\nimport { PieChartLabel } from './PieChartLabel';\n\ntype PieChartWithDimensionsProps<K, D> = Omit<PieChartProps<K, D>, 'width' | 'height'> & {\n  width: number;\n  height: number;\n};\n\nconst NUM_PIE_SLICE_THRESHOLD = 100;\n\nconst chartVars = getChartVars();\n\nexport function PieChartWithDimensions<\n  K extends string | number,\n  D extends PieChartItemData<K> = PieChartItemData<K>\n>({\n  width,\n  height,\n  testId,\n  innerRadius = 0,\n  contextMenuConfig,\n  drilling = 'off',\n  selectionMode = 'none',\n  onItemDrill,\n  onItemHover,\n  onItemFocus,\n  ...props\n}: PieChartWithDimensionsProps<K, D>) {\n  const rootRef = useRef<HTMLDivElement>(null);\n  const { direction } = useUser();\n  const isRtl = direction === 'rtl';\n\n  const { resolvedVars, cssContent } = useCssVars(chartVars);\n  const colors = Array.from(Array(12)).map((_, index) => {\n    return resolvedVars[`color${index + 1}`];\n  });\n\n  const data = isRtl ? props.data.slice().reverse() : props.data;\n  const { totalValue, isLabelOutside } = getPieChartInfo(data);\n  const sliceInfos = getSliceInfo(data, totalValue, colors, isRtl);\n  const hasData = data.length > 0;\n\n  // default data item gaps is 0.5. TODO: replace 0.5 with pie dataItemGaps/pieSliceGaps\n  const pieSliceGap = getPieSliceGap(0.5);\n  const hasLargeSeriesCount = data.length > NUM_PIE_SLICE_THRESHOLD;\n\n  const testIdProps = useTestId(testId);\n  const availSpace = getAvailSpace(width, height, false);\n  const { cx, cy } = getPieCenter(availSpace);\n  const radius = getRadius(availSpace, isLabelOutside);\n  const ir = innerRadius * radius;\n  const renderedSlices = getRenderedSlices(sliceInfos, hasLargeSeriesCount, radius);\n  const { getDetailFromInfo, getNextChartItem } = getPieChartNavUtils<K, D>(\n    data,\n    direction === 'rtl'\n  );\n\n  const { textMeasureContent, getTextDimensions } = useTextDimensions();\n\n  const supportsSelection = !!(selectionMode && selectionMode !== 'none');\n  const supportsDrill = drilling === 'on';\n  // const isReadOnly = !supportsSelection && !supportsDrill && onItemHover === null && onItemFocus === null;\n  const { touchResponse, touchResponseStyle } = useVisTouchResponse({\n    type: 'auto',\n    supportsTouchDragGestures: false,\n    rootRef\n  });\n\n  const { activeId, focusedItemInfo, hoveredItemInfo, eventsProps, onContextMenuDismissed } =\n    usePieChartNav<K, D>(touchResponse, getDetailFromInfo, getNextChartItem, drilling, onItemDrill);\n  const activeItem = focusedItemInfo.isFocusVisible ? focusedItemInfo : hoveredItemInfo;\n  const activeData = activeItem ? data[renderedSlices[activeItem.itemIndex].index] : undefined;\n\n  const defaultDatatip = (activeData?: PieChartItemData<K>, activeItem?: ItemInfo) => {\n    if (!activeData) {\n      return {\n        content: undefined,\n        borderColor: undefined\n      };\n    }\n    if (activeData.accessibleLabel) {\n      return {\n        content: activeData.accessibleLabel,\n        borderColor: getDefaultBorderColor(colors, activeItem, activeData)\n      };\n    }\n    return {\n      content: (\n        <VisTabularDatatip\n          tableData={[\n            {\n              key: 'Value',\n              value: activeData.value\n            }\n          ]}\n        />\n      ),\n      borderColor: getDefaultBorderColor(colors, activeItem, activeData)\n    };\n  };\n\n  const { content: datatipString, borderColor } =\n    activeData && props.datatip\n      ? props.datatip({ data: activeData })\n      : defaultDatatip(activeData, activeItem);\n\n  const anchor = focusedItemInfo.isFocusVisible ? 'element' : 'pointer';\n\n  const elementBounds = activeItem?.isFocusVisible\n    ? getElementBounds(renderedSlices, cx, cy, ir, radius, activeItem)\n    : undefined;\n\n  const offset = calculateOffset(isRtl, width, elementBounds);\n  const { datatipContent, datatipProps } = useDatatip({\n    content: datatipString,\n    offset,\n    anchor,\n    placement: 'top-start',\n    borderColor,\n    touchResponse\n  });\n\n  datatipProps['aria-describedby'] = merge([\n    props['aria-describedby'],\n    datatipProps['aria-describedby']\n  ]);\n\n  const { contextMenuContent, contextMenuProps } = usePieChartContextMenu<K, D>({\n    offset,\n    rootRef,\n    contextMenuConfig: hasData ? contextMenuConfig : undefined,\n    onContextMenuDismissed,\n    focusedItemInfo,\n    items: sliceInfos,\n    width,\n    isRtl\n  });\n\n  const mergedProps = mergeProps(eventsProps, datatipProps, contextMenuProps);\n\n  let insideLabels: PieLabelInfo<K>[] = [];\n  let rightLabels: PieLabelInfo<K>[] = [];\n  let leftLabels: PieLabelInfo<K>[] = [];\n\n  const defaultFontSize = resolvedVars['labelFontSize'];\n\n  if (getTextDimensions) {\n    const labels = layoutPieChartLabels(\n      renderedSlices,\n      { cx, cy },\n      ir,\n      radius,\n      availSpace,\n      getTextDimensions,\n      defaultFontSize\n    );\n    insideLabels = labels.insideLabels;\n    rightLabels = labels.rightLabels;\n    leftLabels = labels.leftLabels;\n  }\n\n  return (\n    <div\n      ref={rootRef}\n      tabIndex={0}\n      aria-label={props['aria-label']}\n      aria-labelledby={props['aria-labelledby']}\n      aria-activedescendant={activeId}\n      role=\"application\"\n      {...mergedProps}\n      {...testIdProps}\n      className={styles.chart}\n      style={{\n        width,\n        height,\n        ...touchResponseStyle\n      }}>\n      {renderedSlices.length > 0 && (\n        <svg className={styles.svg}>\n          {renderedSlices.map((item, index: number) => {\n            return (\n              <PieSlice\n                isInteractive={supportsSelection || supportsDrill}\n                cx={cx}\n                cy={cy}\n                itemIndex={index}\n                id={activeItem?.itemIndex === index ? activeId : undefined}\n                isFocused={focusedItemInfo?.itemIndex === index && focusedItemInfo?.isFocusVisible}\n                isHovered={hoveredItemInfo?.itemIndex === index}\n                r={radius}\n                startAngle={item.startAngle}\n                gap={pieSliceGap}\n                innerRadius={ir}\n                angleExtent={item.angleExtent}\n                color={item.color}\n                key={item.id}\n                accessibleLabel={item.accessibleLabel}\n              />\n            );\n          })}\n          {insideLabels?.map((v) => {\n            return (\n              <PieChartLabel\n                isRtl={isRtl}\n                pieLabelInfo={v}\n                labelPos=\"inside\"\n                fontSize={defaultFontSize}\n              />\n            );\n          })}\n          {leftLabels?.map((v) => {\n            return (\n              <PieChartLabel\n                isRtl={isRtl}\n                pieLabelInfo={v}\n                labelPos=\"left\"\n                fontSize={defaultFontSize}\n              />\n            );\n          })}\n          {rightLabels?.map((v) => {\n            return (\n              <PieChartLabel\n                isRtl={isRtl}\n                pieLabelInfo={v}\n                labelPos=\"right\"\n                fontSize={defaultFontSize}\n              />\n            );\n          })}\n        </svg>\n      )}\n      {props.children?.(getCenterContext(cx, cy, ir))}\n      {datatipContent}\n      {cssContent}\n      {contextMenuContent}\n      {textMeasureContent}\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { dimensionStyle } from './themes/PieChartStyles.css';\nimport { TrackResizeContainer } from '#UNSAFE_TrackResizeContainer';\nimport { PieChartWithDimensions } from './PieChartWithDimensions';\nimport type { PieChartItemData, PieChartProps } from './pieChart.types';\n\n/**\n * Pie charts are useful for visualizing parts of a whole, but do not display zero or negative values so they are not recommended for data sets that may have negative or null data\n */\nexport function PieChart<\n  K extends string | number,\n  D extends PieChartItemData<K> = PieChartItemData<K>\n>({ width, height, ...props }: PieChartProps<K, D>) {\n  return (\n    <TrackResizeContainer width={width} height={height} class={dimensionStyle}>\n      {(width, height) => <PieChartWithDimensions width={width} height={height} {...props} />}\n    </TrackResizeContainer>\n  );\n}\n"],"names":["moveTo","arcTo","lineTo","closePath","styles","classNames","_jsxs","_jsx","useContextMenu","getInfo","getTextInfo","getContrastingTextColor","_Fragment","getChartVars","useRef","useUser","useCssVars","useTestId","getAvailSpace","useTextDimensions","useVisTouchResponse","usePieChartNav","VisTabularDatatip","calculateOffset","useDatatip","merge","mergeProps","TrackResizeContainer","dimensionStyle"],"mappings":"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"}