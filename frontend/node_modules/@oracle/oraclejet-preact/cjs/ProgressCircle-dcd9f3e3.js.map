{"version":3,"file":"ProgressCircle-dcd9f3e3.js","sources":["../../src/UNSAFE_ProgressCircle/ProgressCircle.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { ComponentChildren, ComponentProps, JSX } from 'preact';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { CircleWrapper, CircleInner } from '#PRIVATE_Meter';\nimport { getProgressClipPath } from '#utils/PRIVATE_meterUtils';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport type { BundleType } from '#resources/nls/bundle';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { useComponentTheme } from '#hooks/UNSAFE_useComponentTheme';\nimport {\n  ProgressCircleStyles,\n  ProgressCircleVariantOptions\n} from './themes/ProgressCircleStyles.css';\nimport { ProgressCircleRedwoodTheme } from './themes/redwood/ProgressCircleTheme';\ntype ariaPropsType = ComponentProps<typeof CircleWrapper>['ariaProps'];\ntype IntrinsicProps = Pick<UnpackSignals<JSX.IntrinsicElements['div']>, 'class'>;\n\ntype ProgressCircleProps = IntrinsicProps & {\n  /**\n   * Specifies the id of the progress circle.  If the progress circle is being used to describe the loading process of a particular region\n   * of the page, then the aria-describedby attribute of the region must point to the id of the ProgressCircle\n   */\n  id?: UnpackSignals<JSX.IntrinsicElements['div']>['id'];\n  /**\n   * The value of the progress circle.  If the value is 'indeterminate', an indeterminate progress circle will be shown.\n   */\n  value?: 'indeterminate' | number;\n\n  /**\n   * The maximum value of the progress circle.\n   */\n  max?: number;\n  /**\n   * The size of the progress circle. The default value of this property is theme driven.\n   */\n  size?: 'sm' | 'md' | 'lg';\n\n  /**\n   * A label to be used for accessibility purposes when value is set to 'indeterminate'. This will be used for the aria-valuetext of the DOM element.\n   */\n  'aria-valuetext'?: string;\n  /**\n   * Specifies the children.\n   */\n  children?: ComponentChildren;\n  /**\n   * A label to be used for accessibility purposes. This will be used for the aria-label of the DOM element.\n   */\n  'aria-label'?: string;\n\n  /**\n   * One or more ids (separated by spaces) of elements that label the progress bar. This will be used for the aria-labelledby of the DOM element.\n   */\n  'aria-labelledby'?: string;\n};\n/**\n * A progress circle allows the user to visualize the progression of an extended computer operation.\n */\nexport function ProgressCircle({ value, max, ...otherProps }: ProgressCircleProps) {\n  return value === 'indeterminate' ? (\n    <IndeterminateProgressCircle {...otherProps}></IndeterminateProgressCircle>\n  ) : (\n    <DeterminateProgressCircle value={value} max={max} {...otherProps}></DeterminateProgressCircle>\n  );\n}\n\ntype IndeterminateProps = Omit<ProgressCircleProps, 'value' | 'max'>;\n\nconst IndeterminateProgressCircle = ({ id, size, ...props }: IndeterminateProps) => {\n  const {\n    classes,\n    styles: { indeterminate }\n  } = useComponentTheme<ProgressCircleVariantOptions, ProgressCircleStyles>(\n    ProgressCircleRedwoodTheme,\n    {\n      size,\n      type: 'indeterminate'\n    }\n  );\n\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const ariaProps: ariaPropsType = {\n    'aria-valuetext': props['aria-valuetext'] || translations.progressIndeterminate(),\n    'aria-label': props['aria-label'],\n    'aria-labelledby': props['aria-labelledby'],\n    role: 'progressbar'\n  };\n  return (\n    <CircleWrapper id={id} ariaProps={ariaProps} class={classes}>\n      <CircleInner class={indeterminate} />\n    </CircleWrapper>\n  );\n};\n\ntype DeterminateProps = Omit<ProgressCircleProps, 'aria-valuetext'> & {\n  value?: number;\n};\n\nconst DeterminateProgressCircle = ({\n  value = 0,\n  max = 100,\n  id,\n  size,\n  ...props\n}: DeterminateProps) => {\n  const {\n    classes,\n    styles: { determinate, track, valueStyle }\n  } = useComponentTheme<ProgressCircleVariantOptions, ProgressCircleStyles>(\n    ProgressCircleRedwoodTheme,\n    {\n      size\n    }\n  );\n\n  const percentage = Math.min(Math.max(0, value / max), 1);\n  const clipPath = getProgressClipPath(percentage);\n\n  const ariaProps: ariaPropsType = {};\n  ariaProps['aria-valuemin'] = value != null ? 0 : undefined;\n  ariaProps['aria-valuemax'] = value != null ? max : undefined;\n  ariaProps['aria-valuenow'] = value != null ? value : undefined;\n  ariaProps['role'] = 'progressbar';\n  (ariaProps['aria-label'] = props['aria-label']),\n    (ariaProps['aria-labelledby'] = props['aria-labelledby']);\n  return (\n    <CircleWrapper id={id} ariaProps={ariaProps} class={classes}>\n      <CircleInner class={classNames([determinate, track])} />\n      <CircleInner class={classNames([determinate, valueStyle])} clipPath={clipPath} />\n    </CircleWrapper>\n  );\n};\n"],"names":["_jsx","useComponentTheme","ProgressCircleRedwoodTheme","useTranslationBundle","CircleWrapper","CircleInner","getProgressClipPath","_jsxs","classNames"],"mappings":"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"}