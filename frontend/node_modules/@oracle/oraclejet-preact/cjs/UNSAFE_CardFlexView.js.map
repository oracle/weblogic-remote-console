{"version":3,"file":"UNSAFE_CardFlexView.js","sources":["../../src/UNSAFE_CardFlexView/CardFlexView.tsx"],"sourcesContent":["import { useCallback, useRef, useState } from 'preact/hooks';\nimport { useResizeObserver } from '../hooks/UNSAFE_useResizeObserver';\nimport { BaseCardView, gutterSizeToPX, getColCount } from '../PRIVATE_BaseCardView';\nimport { BaseCardViewPublicProps as Props } from './BaseCardView.types';\n\ntype CardFlexViewProps<K extends string | number, D> = Props<K, D>;\ntype SizeInfo = {\n  cardWidth?: number;\n  cardHeight?: number;\n  containerWidth?: number;\n};\n\nexport function CardFlexView<K extends string | number, D>(props: CardFlexViewProps<K, D>) {\n  const rootRef = useRef<HTMLDivElement>(null);\n\n  const [size, setSize] = useState<SizeInfo>({});\n  const updateCardSize = (cardWidth: number, cardHeight: number) => {\n    setSize((size) => ({ ...size, cardWidth, cardHeight }));\n  };\n\n  const handleResize = useCallback(\n    (entry: ResizeObserverEntry) => {\n      const containerWidth = entry.contentRect.width;\n      if (size.containerWidth !== containerWidth) {\n        setSize((size) => ({ ...size, containerWidth }));\n      }\n    },\n    [size]\n  );\n  useResizeObserver(rootRef, handleResize);\n\n  const gutterSizePX = gutterSizeToPX[props.gutterSize || 'sm'];\n  const columns = getColCount(gutterSizePX, size.cardWidth, size.containerWidth);\n  const cardSize = { width: size.cardWidth, height: size.cardHeight };\n\n  return (\n    <BaseCardView\n      {...props}\n      ref={rootRef}\n      layout=\"flex\"\n      columns={columns}\n      cardSize={cardSize}\n      updateCardSize={updateCardSize}\n    />\n  );\n}\n"],"names":["useRef","useState","useCallback","useResizeObserver","gutterSizeToPX","getColCount","_jsx","BaseCardView"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYM,SAAU,YAAY,CAA+B,KAA8B,EAAA;AACvF,IAAA,MAAM,OAAO,GAAGA,YAAM,CAAiB,IAAI,CAAC,CAAC;IAE7C,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAGC,cAAQ,CAAW,EAAE,CAAC,CAAC;AAC/C,IAAA,MAAM,cAAc,GAAG,CAAC,SAAiB,EAAE,UAAkB,KAAI;AAC/D,QAAA,OAAO,CAAC,CAAC,IAAI,MAAM,EAAE,GAAG,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC;AAC1D,KAAC,CAAC;AAEF,IAAA,MAAM,YAAY,GAAGC,iBAAW,CAC9B,CAAC,KAA0B,KAAI;AAC7B,QAAA,MAAM,cAAc,GAAG,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC;AAC/C,QAAA,IAAI,IAAI,CAAC,cAAc,KAAK,cAAc,EAAE;AAC1C,YAAA,OAAO,CAAC,CAAC,IAAI,MAAM,EAAE,GAAG,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;SAClD;AACH,KAAC,EACD,CAAC,IAAI,CAAC,CACP,CAAC;AACF,IAAAC,mCAAiB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;IAEzC,MAAM,YAAY,GAAGC,2BAAc,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,CAAC;AAC9D,IAAA,MAAM,OAAO,GAAGC,wBAAW,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AAC/E,IAAA,MAAM,QAAQ,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC;IAEpE,QACEC,cAAC,CAAAC,yBAAY,EACP,EAAA,GAAA,KAAK,EACT,GAAG,EAAE,OAAO,EACZ,MAAM,EAAC,MAAM,EACb,OAAO,EAAE,OAAO,EAChB,QAAQ,EAAE,QAAQ,EAClB,cAAc,EAAE,cAAc,EAC9B,CAAA,EACF;AACJ;;;;"}