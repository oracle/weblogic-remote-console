# Copyright (c) 2023, 2024, Oracle and/or its affiliates.
# Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.

editable: true
disableMBeanJavadoc: true
instanceName: Identity Provider Partner
subTypeDiscriminatorProperty: Type

subTypes:
- type: weblogic.security.providers.saml2.SAML2WSSIdPPartnerMBean
  value: WSSIdPPartner
- type: weblogic.security.providers.saml2.SAML2WebSSOIdPPartnerMBean
  value: WebSSOIdPPartner

properties:
- name: Type
  writable: createOnly
  required: true
  legalValues:
  - value: WSSIdPPartner
    label: "Web Service Identity Provider Partner"
  - value: WebSSOIdPPartner
    label: "Web Single Sign-On Identity Provider Partner"
- name: AudienceURIs
  label: "Audience URIs"
  helpSummaryHTML: >
    <p>One or more partner lookup strings, and optionally one or more SAML
    Audience URIs that must be included in assertions generated by this
    Identity Provider partner.</p>
  helpDetailsHTML: >
    <p>In the WebLogic Server implementation of SAML 2.0, the Audience URI
    attribute is overloaded to perform two related but separate
    functions:</p>
    <ul>
      <li>Specify one or more Audience URIs that must be included in
      assertions received from this Identity Provider partner.</li>
      <li>Specify one or more partner lookup strings, which specify the
      endpoint URL that is used to discover the Identity Provider partner
      configured to generate assertions for requests on that endpoint,
      thereby enabling those assertions to be validated.</li>
    </ul>
    <p>A value specified for this attribute must have the following syntax:</p>
    <code>[target:<i>char</i>:]&lt;<i>endpoint-url</i>&gt;</code>
    <p>In the preceding syntax, <code>target:<i>char</i>:</code>is a
    prefix that is used to designate a partner lookup string, where
    <i>char</i> represents one of three special characters: a hyphen, plus
    sign, or asterisk (<code>-</code>, +, or <code>*</code>). This prefix
    determines how partner lookup is performed, as follows. (Note that
    because the transport, host, and port is stripped from a URL when it
    is passed in by a WebLogic Server instance configured in the role of
    Service Provider, the value you specify for
    <code>&lt;<i>endpoint-url</i>&gt;</code> should contain only the part
    of the endpoint path that follows the host and port.)</p>
    <ul>
      <li><code>target:-:&lt;<i>endpoint-url</i>&gt;</code> specifies that
      partner lookup is conducted using an exact match of the URL,
      <code>&lt;<i>endpoint-url</i>&gt;</code>. For example,
      <code>target:-:/myserver/myservicecontext/myservice-endpoint</code>
      specifies that a run-time invocation on this specific endpoint can
      be matched to this Identity Provider partner.</li>
      <li><code>target:+:&lt;<i>endpoint-url</i>&gt;</code> specifies that
      partner lookup is conducted for an exact match of the URL,
      <code>&lt;<i>endpoint-url</i>&gt;</code>. For example,
      <code>target:+:/myserver/myservicecontext/myservice-endpoint</code>.
      (<b>Note:</b> Configuring this form of partner lookup string is
      unlikely to produce an Audience URI match with an Identity Provider
      partner and therefore should be avoided.)</li>
      <li><code>target:*:&lt;<i>endpoint-url</i>&gt;</code> specifies that
      partner lookup us conducted for an initial-string pattern match of
      the URL, <code>&lt;<i>endpoint-url</i>&gt;</code>. For example,
      <code>target:*:/myserver</code> specifies that run-time invocations
      either <code>/myserver/contextA/endpoint</code>A or
      <code><code>/myserver/contextB/endpoint</code>B</code> (that is, any
      web service endpoint in <code>/myserver</code>) can be matched to
      this Identity Provider partner. If more than one Identity Provider
      partner is discovered that is a match for the initial string, the
      partner with the longest initial string match is selected.</li>
    </ul>
    <p><b>Note:</b> Configuring one or more target lookup strings for an
    Identity Provider partner is required in order for that partner to be
    discovered at run time. If this partner cannot be discovered,
    assertions received from it are rejected.</p>
    <p>If you configure an endpoint URL without using the target lookup
    prefix, it will be handled as a conventional Audience URI that must be
    contained in assertions received from this Identity Provider partner.
    (Unlike a target lookup string, an Audience URI should include the
    transport, host, and port of the target endpoint. For example,
    <code>http://www.avitek.com:7001/myserver/myservice-context/myservice-endpoint</code>.)</p>
    <p>Operations on this parameter are available in the <code>com.bea.security.saml2.providers.registry.Partner</code> interface.</p>
- name: IssuerURI
  helpSummaryHTML: >
    <p>The Issuer URI of this Identity Provider partner.</p>
  helpDetailsHTML: >
    <p>Operations on this parameter are available in the <code>com.bea.security.saml2.providers.registry.IdPPartner</code> interface.</p>
- name: IdentityProviderNameMapperClassname
  label: "Identity Provider Name Mapper Class Name"
  helpSummaryHTML: >
    <p>The Java class that overrides the default username mapper class
    with which the SAML 2.0 Identity Asserter provider is configured.</p>
  helpDetailsHTML: >
    <p>If specified, this class is a custom implementation of the
    <code>com.bea.security.saml2.providers.SAML2IdentityAsserterNameMapper</code>
    interface and is used for assertions received from this specific
    Identity Provider partner.</p>
    <p>Operations on this parameter are available in the <code>com.bea.security.saml2.providers.registry.IdPPartner</code> interface.</p>
- name: VirtualUserEnabled
  label: "Virtual User"
  helpSummaryHTML: >
    <p>Specifies whether the user information contained in assertions
    received from this Identity Provider partner are mapped to virtual users.</p>
  helpDetailsHTML: >
    <p>Note that to use virtual users, you must configure the SAML Authentication provider.</p>
    <p>Operations on this parameter are available in the <code>com.bea.security.saml2.providers.registry.IdPPartner</code> interface.</p>
- name: ProcessAttributes
  helpSummaryHTML: >
    <p>Specifies whether the SAML 2.0 Identity Assertion provider shall
    consume the attribute statements contained in assertions received from
    this Identity Provider partner.</p>
  helpDetailsHTML: >
    <p>To use this attribute, the SAML Authentication provider must be
    configured in the domain, and it must:</p>
    <ul>
      <li>Be configured to run before other authentication providers</li>
      <li>Have the JAAS Control Flag set to SUFFICIENT</li>
    </ul>
    <p>The SAML Authentication provider creates an authenticated subject
    using the user name and groups extracted from a SAML assertion by the
    SAML 2.0 Identity Assertion provider.</p>
    <p>Operations on this parameter are available in the <code>com.bea.security.saml2.providers.registry.IdPPartner</code> interface.</p>
